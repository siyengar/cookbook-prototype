(function(){var d=YAHOO.util;var g=YAHOO.lang;var f=YAHOO.widget;var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var h=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var e=200;a.Autocomplete=function(m,i,l,j,o){this.el=m;o.maxEntries=o.maxEntries||10;var q=m.parentNode;if(!l){log.debug("Attempting to find existing sibling div");l=h.Dom.getElementByClassName("autocompletions","div",q);}if(!l){l=document.createElement("div");l.className="autocompletions";q.insertBefore(l,null);}var k=new f.AutoComplete(m,l,i,{maxResultsDisplayed:o.maxEntries});var p=h.Dom.getElementByClassName("autocompletions_bottom","div",q);if(!p){p=document.createElement("div");p.className="autocompletions_bottom";q.insertBefore(p,null);}var n=new f.AutoComplete(m,p,i,{maxResultsDisplayed:o.maxEntries});if(o.footerHTML){k.setFooter(o.footerHTML);n.setFooter(o.footerHTML);}if(o.reverse){k.applyLocalFilter=true;k.filterResults=function(u,s,t,r){t.results=t.results.slice(0,k.maxResultsDisplayed).reverse();return t;};}this.siteSearchInputObject=o.siteSearchInputObject;k.siteSearchInputObject=n.siteSearchInputObject=o.siteSearchInputObject;k.generateRequest=n.generateRequest=function(r){return r.replace(new RegExp("[%20]+$"),"")+"*";};k.doBeforeLoadData=n.doBeforeLoadData=function(t,r,s){if(!r.results.length){this.collapseContainer();}return true;};k.formatResult=n.formatResult=function(s,t,r){return h.Text.ellipse(r,e);};k.resultTypeList=n.resultTypeList=false;k.minQueryLength=n.minQueryLength=1;k.autoHighlight=n.autoHighlight=false;k.itemSelectEvent.subscribe(this.onItemSelect);n.itemSelectEvent.subscribe(this.onItemSelect);if(o.reverse){b.on(window,"scroll",function(u,s){var r=c.getViewportHeight()/2;var t=c.getY(m)-c.getDocumentScrollTop();if(!(t<r)){s.autocomplete.getContainerEl().style.visibility="visible";s.autocomplete_bottom.getContainerEl().style.visibility="hidden";}else{s.autocomplete.getContainerEl().style.visibility="hidden";s.autocomplete_bottom.getContainerEl().style.visibility="visible";}},{el:m,autocomplete:k,autocomplete_bottom:n});p.style.visibility="hidden";}else{p.style.display="none";}};a.Autocomplete.prototype={onItemSelect:function(l,k){var i=null;try{i=k[2]["Location[0].DimValueName"];}catch(j){log.warn("Unable to find item term for autocompletion.");}if(i){_widgets.context.SearchContext.triggerSearch(i,this.siteSearchInputObject);}}};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var f=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var d=getPackageForName("com.forddirect.ng.context");a.SiteSearchInput=function(i,k){k.reverse=k.reverse||false;k.maxEntries=k.maxEntries||10;k.preventEmptySubmission=(typeof(k.preventEmptySubmission)!="undefined")?k.preventEmptySubmission:true;this.el=i;this.params=k;this.searchForm=f.Dom.getElementByClassName("site-search-form","form",this.el);if(!this.searchForm){log.error("Unable to find form with class 'site-search-form' on this widget.");}this.searchText=f.Dom.getElementByClassName("site-search-input","input",this.el);if(!this.searchText){log.error("Unable to find input with class 'site-search-input' on this widget.");}this.searchButton=f.Dom.getElementByClassName("search-go","input",this.el);if(!this.searchButton){log.error("Unable to find button with class 'search-go' on this widget.");}var h=(this.params&&this.params.autocomplete)||false;var g=(this.params.autocompleteurl||"");var j=new a.Autocomplete(this.searchText,_widgets.context.SearchContext.getAutocompleteDataSource(g),false,false,{maxEntries:k.maxEntries,reverse:k.reverse,siteSearchInputObject:this,footerHTML:(this.params.footerHTML||"")});this.searchType=(this.params.searchType||"search");_widgets.context.SearchContext.subscribe(this.searchType+"TextChange",this.handleTextChange,this,true);this.onSearchTextBlur();b.on(this.searchText,"focus",this.onSearchTextFocus,this,true);b.on(this.searchText,"blur",this.onSearchTextBlur,this,true);if(k.preventEmptySubmission){b.on(this.searchForm,"submit",this.searchSubmitPrevent,this,true);}b.on(this.searchForm,"submit",this.searchSubmitMetrics,this,true);b.on(this.searchText,"keydown",this.onSearchKeyDown,this,true);b.on(this.searchText,"click",this.onSearchTextClick,this,true);};var e=a.SiteSearchInput.prototype;e.show=function(){c.removeClass(this.el,"inactive");};e.hide=function(){c.addClass(this.el,"inactive");};e.onSearchTextFocus=function(g){if(this.searchText.value===_widgets.context.SearchContext.DEFAULT_SEARCH_STRING_NEW){this.searchText.value="";c.removeClass(this.searchText,"default-text");}else{this.searchText.select();c.removeClass(this.searchText,"default-text");}};e.onSearchTextBlur=function(g){if(this.searchText.value===""||f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,this.searchText.value)){if(this.searchForm.name=="endecaLiveSearchForm"){this.searchText.value=_widgets.context.SearchContext.DEFAULT_SEARCH_STRING_NEW;}else{this.searchText.value=_widgets.context.SearchContext.DEFAULT_SEARCH_STRING;}c.addClass(this.searchText,"default-text");}};e.searchSubmitPrevent=function(g){var h=f.trimString(this.searchText.value);if(h===""||f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,h)){this.searchText.value=_widgets.context.SearchContext.DEFAULT_NOWORD_STRING;this.searchText.focus();this.searchText.select();b.stopEvent(g);}};e.searchSubmitMetrics=function(g){if((this.el.id=="search-endeca-live")&&(this.params.widgetloc)){oMetricsTracker.trackMicroData("liveSearchAskResults");}};e.onSearchKeyDown=function(g){if(g.keyCode==13){g.returnValue=false;g.cancel=true;this.searchButton.click();}};e.handleTextChange=function(g){if(g.newValue){this.searchText.value=g.newValue;}};e.onSearchTextClick=function(g){if(f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,this.searchText.value)){this.searchText.value="";}};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var g=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var e="Search";var f="Please enter keyword...";a.KnovaSearchInput=function(h,i){this.el=h;this.searchForm=g.Dom.getElementByClassName("site-search-form","form",this.el);if(!this.searchForm){log.error("Unable to find form with class 'site-search-form' on this widget.");}this.searchText=g.Dom.getElementByClassName("site-search-input","input",this.el);if(!this.searchText){log.error("Unable to find input with class 'site-search-input' on this widget.");}this.searchButton=g.Dom.getElementByClassName("search-go","input",this.el);if(!this.searchButton){log.error("Unable to find button with class 'search-go' on this widget.");}this.searchType=i.searchType||"search";_widgets.context.SearchContext.subscribe(this.searchType+"TextChange",this.handleTextChange,this,true);this.onSearchTextBlur();b.on(this.searchText,"focus",this.onSearchTextFocus,this,true);b.on(this.searchText,"blur",this.onSearchTextBlur,this,true);b.on(this.searchForm,"submit",this.searchSubmit,this,true);b.on(this.searchText,"keydown",this.onSearchKeyDown,this,true);};var d=a.KnovaSearchInput.prototype;d.onSearchTextFocus=function(h){if(this.searchText.value===e||this.searchText.value===f){this.searchText.value="";c.removeClass(this.searchText,"default-text");}else{this.searchText.select();}};d.onSearchTextBlur=function(h){if(this.searchText.value===""||this.searchText.value===e||this.searchText.value===f){this.searchText.value=e;c.addClass(this.searchText,"default-text");}};d.searchSubmit=function(h){if(this.searchText.value===""||this.searchText.value===f||this.searchText.value===e){this.searchText.value=f;b.stopEvent(h);}};d.handleTextChange=function(h){if(h.newValue){this.searchText.value=h.newValue;}};})();
var timeout=500;var closetimer=0;var ddmenuitem=0;function mclose(){if(ddmenuitem){ddmenuitem.style.visibility="hidden";}}function mclosetime(){closetimer=window.setTimeout(mclose,timeout);}function mcancelclosetime(){if(closetimer){window.clearTimeout(closetimer);closetimer=null;}}function mopen(a){mcancelclosetime();if(ddmenuitem){ddmenuitem.style.visibility="hidden";}ddmenuitem=document.getElementById(a);ddmenuitem.style.visibility="visible";}document.onclick=mclose;
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var d=YAHOO.widget;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.BSPanel=function(h,i){var o="roundedShadow";this.el=h;var f={visible:false,constraintoviewport:true,draggable:false,underlay:"none",flip:"default"};if(i){for(var j in i){if(i){f[j]=i[j];}}}this.CALLING_FLIP=f.flip;f.close=false;a.BSPanel.superclass.constructor.call(this,h,f);this.render();var q=c.getElementsByClassName("container-close",null,this.el);if(q&&q.length>0){var g=q[0];b.on(g,"click",this.hide,null,this);}if(f.underlay==o){var l=["tl quoin","tr quoin","shadow-content","bl quoin","br quoin"];var n=document.createElement("div");c.addClass(n,"rounded-shadow");this.el.appendChild(n);for(j in l){if(l){var m=document.createElement("div");c.addClass(m,l[j]);n.appendChild(m);}}}};YAHOO.extend(a.BSPanel,d.Panel,{init:function(g,f){a.BSPanel.superclass.init.apply(this,arguments);this.initAttributes(g,f);},initAttributes:function(g,f){},setPanelHeader:function(h,g){var f=c.getElementsByClassName("headerText",null,this.el);if(f&&f.length>0){f[0].innerHTML=h;if(g){var i="<div class='subtitle'>"+g+"</div>";f[0].innerHTML=h+i;}}},addScroller:function(h,g,f){var j=c.get(h).innerHTML;var i=a.createScrollPane(h,h,"bs-Scroller",g,f,false);i.getContainer().innerHTML=j;i.resize([{}]);return i;},hide:function(){a.BSPanel.superclass.hide.apply(this,arguments);if("part-details"==this.CALLING_FLIP){e.removeModalBackground("view-bd","panel");}},show:function(){a.BSPanel.superclass.show.apply(this,arguments);if("part-details"==this.CALLING_FLIP){e.addModalBackground("view-bd","panel");}},alignTo:function(g,f){if(f&&f.elementAlign&&f.contextAlign){this.cfg.setProperty("context",[g,f.elementAlign,f.contextAlign]);this.align(f.elementAlign,f.contextAlign);}else{this.alignTo(g,a.BSPanel.ALIGN_BOTTOM_LEFT);}},update:function(){}});a.BSPanel.ALIGN_TOP_LEFT={elementAlign:"tl",contextAlign:"tl"};a.BSPanel.ALIGN_TOP_RIGHT={elementAlign:"tl",contextAlign:"tr"};a.BSPanel.ALIGN_BOTTOM_LEFT={elementAlign:"bl",contextAlign:"bl"};a.BSPanel.ALIGN_BOTTOM_RIGHT={elementAlign:"bl",contextAlign:"br"};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var e=getPackageForName("com.forddirect.ng.util");var d="com.forddirect.ng.widgets";var a=getPackageForName(d);a.createScrollPane=function(h,k,g,j,f,i){log.debug("In createScrollPane");return new a.ScrollPane(h,k,g,j,f,i);};a.ScrollPane=function(h,k,g,j,f,i){log.debug("In ScrollPane");this.m_animate=i;this.m_parentDivId=h;this.m_baseDivId=k;this.m_scrollPaneHeight=f;this.m_scrollPaneWidth=j;this.m_isDisabled=false;this.m_containerDiv=null;this.m_containerId=g;this.m_elemMap={};this._enableVertDrag=false;this._enableHorDrag=false;this._isFocused=false;this.m_animContainer=null;this._XRatio=1;this._YRatio=1;this._lastDragType=null;this.m_isMouseWheelDisabled=false;this.m_constants={SB_WIDTH:16,SB_HEIGHT:16,ARROW_HEIGHT:10,ARROW_WIDTH:10,SC_TOP_HEIGHT:6,SC_LEFT_WIDTH:6,SC_MIDDLE_HEIGHT:28,STEP:30,WHEEL_MULTIPLIER:20};this.create();};a.ScrollPane.prototype={create:function(){log.debug("ScrollPane: :: Entering create");c.get(this.m_parentDivId,this.m_baseDivId).innerHTML=YAHOO.util.Dom.get("ScrollPaneParent").innerHTML;this._createElementsMap();this._fixPNG();this._bindEventHandlers();var f=this.m_elemMap;this._createContainerDiv();f.SPContentWrapper.appendChild(this.m_containerDiv);this.m_animContainer=new YAHOO.util.Anim(this.m_containerDiv,{},0.3,YAHOO.util.Easing.easeOut);this.m_animContainer.totalFrames=50;this.m_animContainer.onTween.subscribe(this.updateScrollers,this,true);f.ScrollPaneContainer.style.height=this.m_scrollPaneHeight+"px";f.ScrollPaneContainer.style.width=this.m_scrollPaneWidth+"px";log.debug("ScrollPane: :: Leaving create");},_createContainerDiv:function(){log.debug("ScrollPane: :: Entering createContainerDiv");this.m_containerDiv=document.createElement("div");this.m_containerDiv.setAttribute("id",this.m_containerId);this.m_containerDiv.style.overflow="hidden";this.m_containerDiv.className="sp-container";log.debug("ScrollPane: :: Leaving createContainerDiv");},_setContainerDivData:function(f){log.debug("ScrollPane: :: Entering _setContainerDivData");var h=this.getContainer();var g=document.createElement("img");g.src=f[0].imgURL;g.style.width=f[0].width;g.style.height=f[0].height;h.appendChild(g);this.updateScrollBar();this.updateScrollBar();log.debug("ScrollPane: :: Leaving _setContainerDivData");},_createElementsMap:function(){log.debug("ScrollPane: :: Entering _createElementsMap");var f=this.m_elemMap;var h=YAHOO.util.Dom;var g=c.get(this.m_parentDivId,this.m_baseDivId);f.ScrollPaneContainer=h.getElementsByClassName("ScrollPaneContainer","div",g)[0];f.SPContentWrapper=h.getElementsByClassName("SPContentWrapper","div",g)[0];f.SPVerticalBar=h.getElementsByClassName("SPVerticalBar","div",g)[0];f.SPVertUpArrow=h.getElementsByClassName("SPVertUpArrow","div",g)[0];f.SPVertDownArrow=h.getElementsByClassName("SPVertDownArrow","div",g)[0];f.SPVertBarBody=h.getElementsByClassName("SPVertBarBody","div",g)[0];f.SPVertScroller=h.getElementsByClassName("SPVertScroller","div",g)[0];f.SPVertScrollerUp=h.getElementsByClassName("SPVertScrollerUp","div",g)[0];f.SPVertScrollerDown=h.getElementsByClassName("SPVertScrollerDown","div",g)[0];f.SPVertScrollerBody=h.getElementsByClassName("SPVertScrollerBody","div",g)[0];f.SPVertScrollerMiddle=h.getElementsByClassName("SPVertScrollerMiddle","div",g)[0];f.SPHorizontalBar=h.getElementsByClassName("SPHorizontalBar","div",g)[0];f.SPHorLeftArrow=h.getElementsByClassName("SPHorLeftArrow","div",g)[0];f.SPHorRightArrow=h.getElementsByClassName("SPHorRightArrow","div",g)[0];f.SPHorBarBody=h.getElementsByClassName("SPHorBarBody","div",g)[0];f.SPHorScroller=h.getElementsByClassName("SPHorScroller","div",g)[0];f.SPHorScrollerLeft=h.getElementsByClassName("SPHorScrollerLeft","div",g)[0];f.SPHorScrollerRight=h.getElementsByClassName("SPHorScrollerRight","div",g)[0];f.SPHorScrollerBody=h.getElementsByClassName("SPHorScrollerBody","div",g)[0];f.SPHorScrollerMiddle=h.getElementsByClassName("SPHorScrollerMiddle","div",g)[0];log.debug("ScrollPane: :: Leaving _createElementsMap");},__createImgElement:function(g){var f=document.createElement("img");f.src=g;return f;},_fixPNG:function(){log.debug("ScrollPane: :: Entering _fixPNG");var f=this.m_elemMap;f.SPVertUpArrow.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/up.png"));f.SPVertDownArrow.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/down.png"));f.SPHorLeftArrow.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/left.png"));f.SPHorRightArrow.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/right.png"));f.SPVertScrollerUp.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/GetUpdates_ScrollBarUp.png"));f.SPVertScrollerDown.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/GetUpdates_ScrollBarDown.png"));f.SPVertScrollerBody.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/GetUpdates_ScrollBarMiddle.png"));f.SPHorScrollerLeft.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/hb_left.png"));f.SPHorScrollerRight.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/hb_right.png"));f.SPHorScrollerBody.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/hb_body.png"));f.SPHorScrollerMiddle.appendChild(this.__createImgElement("/ngtemplates/ngassets/img/scrollpane/hb_middle.png"));log.debug("ScrollPane: :: Leaving _fixPNG");},_bindEventHandlers:function(){log.debug("ScrollPane: :: Entering _bindEventHendlers");var f=this.m_elemMap;YAHOO.util.Event.on(f.ScrollPaneContainer,"mousemove",this._moveHorizontalScroller,this,true);YAHOO.util.Event.on(f.ScrollPaneContainer,"mousemove",this._moveVerticalScroller,this,true);YAHOO.util.Event.on(f.SPVertScroller,"mousedown",this._mouseDownScroller,{type:"vertical"},this);YAHOO.util.Event.on(f.SPHorScroller,"mousedown",this._mouseDownScroller,{type:"horizontal"},this);YAHOO.util.Event.on(document,"mouseup",this._mouseUpScroller,this,true);YAHOO.util.Event.on(f.ScrollPaneContainer,"keydown",this._keyPress,this,true);YAHOO.util.Event.on(document,"mousedown",this._blur,this,true);YAHOO.util.Event.on(f.ScrollPaneContainer,"mousedown",this._focus,this,true);YAHOO.util.Event.on(f.SPVertUpArrow,"click",this._clickArrow,{direction:"up"},this);YAHOO.util.Event.on(f.SPVertDownArrow,"click",this._clickArrow,{direction:"down"},this);YAHOO.util.Event.on(f.SPHorLeftArrow,"click",this._clickArrow,{direction:"left"},this);YAHOO.util.Event.on(f.SPHorRightArrow,"click",this._clickArrow,{direction:"right"},this);YAHOO.util.Event.on(f.SPVertBarBody,"mousedown",this._clickVerticalBar,this,true);YAHOO.util.Event.on(f.SPHorBarBody,"mousedown",this._clickHorizontalBar,this,true);if(window.removeEventListener){window.addEventListener("DOMMouseScroll",this._bindMouseWheel(this),false);}else{if(window.attachEvent){window.attachEvent("onmousewheel",this._bindMouseWheel(this));}}log.debug("ScrollPane: :: Leaving _bindEventHendlers");},_moveVerticalScroller:function(f){var g={type:"DRAG_VERT",event:f};this.moveScrollSlider(g);},_moveHorizontalScroller:function(f){var g={type:"DRAG_HOR",event:f};this.moveScrollSlider(g);},_clickArrow:function(g,f){var h={type:"CLICK_ARROW",event:g,direction:f.direction};this.moveScrollSlider(h);},_clickVerticalBar:function(f){var g={type:"CLICK_VERT_BAR",event:f};this.moveScrollSlider(g);},_clickHorizontalBar:function(f){var g={type:"CLICK_HOR_BAR",event:f};this.moveScrollSlider(g);},_mouseDownScroller:function(g,f){if(!this.m_isDisabled){if(f.type=="vertical"){this.m_oldY=YAHOO.util.Event.getPageY(g);this._enableVertDrag=true;}else{if(f.type=="horizontal"){this.m_oldX=YAHOO.util.Event.getPageX(g);this._enableHorDrag=true;}}}},_mouseUpScroller:function(g,f){if(!this.m_isDisabled){this._enableHorDrag=false;this._enableVertDrag=false;}},_blur:function(f){if(!this.m_isDisabled&&!YAHOO.util.Dom.isAncestor(this.m_elemMap.ScrollPaneContainer,YAHOO.util.Event.getTarget(f))){this._isFocused=false;}},_focus:function(f){this._isFocused=true;},_keyPress:function(f){log.debug("ScrollPane: :: Entering _keyPress "+f.keyCode);var h;switch(f.keyCode){case 33:h="up";break;case 34:h="down";break;case 37:h="left";break;case 38:h="up";break;case 39:h="right";break;case 40:h="down";break;default:return;}var g={type:"CLICK_ARROW",event:f,direction:h};this.moveScrollSlider(g);},_bindMouseWheel:function(g){log.debug("ScrollPane: :: Entering _bindMouseWheel "+this.m_baseDivId+" "+this.m_parentDivId);var f=function(){return g._mouseWheel.apply(g,arguments);};return f;},_mouseWheel:function(f){log.debug("ScrollPane: :: Entering _mouseWheel "+this.m_baseDivId+" "+this.m_parentDivId);if(!this.m_isDisabled&&!this.m_isMouseWheelDisabled){var h=0;if(!f){f=window.event;}if(f.wheelDelta){h=f.wheelDelta/120;if(window.opera){h=-h;}}else{if(f.detail){h=-f.detail/3;}}if(h){var g={type:"MOUSE_WHEEL",event:f,delta:h};this.moveScrollSlider(g);}}log.debug("ScrollPane: :: Leaving _mouseWheel ");},_unBindEventHandlers:function(){log.debug("ScrollPane: :: Entering _unBindEventHandlers");var f=this.m_elemMap;YAHOO.util.Event.removeListener(f.ScrollPaneContainer,"mousemove",this._moveHorizontalScroller);YAHOO.util.Event.removeListener(f.ScrollPaneContainer,"mousemove",this._moveVerticalScroller);YAHOO.util.Event.removeListener(f.SPVertScroller,"mousedown",this._mouseDownScroller);YAHOO.util.Event.removeListener(f.SPHorScroller,"mousedown",this._mouseDownScroller);YAHOO.util.Event.on(document,"mouseup",this._mouseUpScroller,this,true);YAHOO.util.Event.on(f.ScrollPaneContainer,"keydown",this._keyPress,this,true);YAHOO.util.Event.removeListener(document,"mousedown",this._blur);YAHOO.util.Event.removeListener(f.ScrollPaneContainer,"mousedown",this._focus);YAHOO.util.Event.removeListener(f.SPVertUpArrow,"click",this._clickArrow);YAHOO.util.Event.removeListener(f.SPVertDownArrow,"click",this._clickArrow);YAHOO.util.Event.removeListener(f.SPHorLeftArrow,"click",this._clickArrow);YAHOO.util.Event.removeListener(f.SPHorRightArrow,"click",this._clickArrow);YAHOO.util.Event.removeListener(f.SPVertBarBody,"mousedown",this._clickVerticalBar);YAHOO.util.Event.removeListener(f.SPHorBarBody,"mousedown",this._clickHorizontalBar);if(window.removeEventListener){window.removeEventListener("DOMMouseScroll",this._bindMouseWheel,false);}else{if(window.attachEvent){window.detachEvent("onmousewheel",this._bindMouseWheel);}}log.debug("ScrollPane: :: Leaving _unBindEventHandlers");},getContainer:function(){log.debug("GetContainer---ScrollPane");return this.m_containerDiv;},getScrollPaneContainer:function(){log.debug("GetScrollPaneContainer---ScrollPane");return this.m_elemMap.ScrollPaneContainer;},scrollToPos:function(f,l,h){var k=this.m_containerDiv,g=this.m_elemMap.SPContentWrapper;var j=parseInt(k.style.left,10),i=parseInt(k.style.top,10);if(f){switch(f){case"START":j=0;break;case"END":j=g.offsetWidth-k.offsetWidth;break;default:j=f;if(j>0){j=0;}if(j<g.offsetWidth-k.offsetWidth){j=g.offsetWidth-k.offsetWidth;}break;}}if(l){switch(l){case"START":i=0;break;case"END":i=g.offsetHeight-k.offsetHeight;break;default:i=l;if(i>0){i=0;}if(i<g.offsetHeight-k.offsetHeight){i=g.offsetHeight-k.offsetHeight;}break;}}if(h&&!this._enableVertDrag&&!this._enableHorDrag){if(this.m_animContainer.isAnimated()){this.m_animContainer.stop();}this.m_animContainer.attributes={top:{to:i,unit:"px"},left:{to:j,unit:"px"}};this.m_animContainer.animate();}else{k.style.left=parseInt(j,10)+"px";k.style.top=parseInt(i,10)+"px";this.updateScrollers();}},moveScrollSlider:function(q){if(!this.m_isDisabled&&this._isFocused){var k=q.event;var p=parseInt(this.m_containerDiv.style.top,10);var g=parseInt(this.m_containerDiv.style.left,10);var r=this.m_constants.STEP;switch(q.type){case"DRAG_VERT":if(this._enableVertDrag){var m=YAHOO.util.Event.getPageY(k);this.scrollToPos(null,p-(m-this.m_oldY)*this._YRatio,this.m_animate);this.m_oldY=m;this._lastDragType="drag";}break;case"DRAG_HOR":if(this._enableHorDrag){var n=YAHOO.util.Event.getPageX(k);this.scrollToPos(g-(n-this.m_oldX)*this._XRatio,null,this.m_animate);this.m_oldX=n;this._lastDragType="drag";}break;case"CLICK_ARROW":switch(q.direction){case"up":p+=r;this.scrollToPos(null,p,this.m_animate);break;case"down":p-=r;this.scrollToPos(null,p,this.m_animate);break;case"left":g+=r;this.scrollToPos(g,null,this.m_animate);break;case"right":g-=r;this.scrollToPos(g,null,this.m_animate);break;}this._lastDragType="arrow";break;case"MOUSE_WHEEL":p+=q.delta*this.m_constants.WHEEL_MULTIPLIER;this.scrollToPos(null,p,this.m_animate);this._lastDragType="wheel";break;case"CLICK_VERT_BAR":var o=this.m_elemMap.SPVertScroller.offsetHeight;var f=YAHOO.util.Dom.getY(this.m_elemMap.SPVertScroller);m=YAHOO.util.Event.getPageY(k);if(m>f+o){this.moveScrollSlider({type:"CLICK_ARROW",event:k,direction:"down"});}else{if(m<f){this.moveScrollSlider({type:"CLICK_ARROW",event:k,direction:"up"});}}this._lastDragType="vert_bar";break;case"CLICK_HOR_BAR":var i=this.m_elemMap.SPVertScroller.offsetWidth;var j=YAHOO.util.Dom.getX(this.m_elemMap.SPHorScroller);n=YAHOO.util.Event.getPageX(k);if(n>j+i){this.moveScrollSlider({type:"CLICK_ARROW",event:k,direction:"right"});}else{if(n<j){this.moveScrollSlider({type:"CLICK_ARROW",event:k,direction:"left"});}}this._lastDragType="hor_bar";break;}if(k.preventDefault){k.preventDefault();}k.returnValue=false;}},updateScrollers:function(){var g=this.m_elemMap.SPVertBarBody.offsetHeight/this.m_elemMap.SPContentWrapper.offsetHeight;var f=this.m_elemMap.SPHorBarBody.offsetWidth/this.m_elemMap.SPContentWrapper.offsetWidth;var h=parseInt(this.m_containerDiv.style.top,10)/(this._YRatio/g);this.m_elemMap.SPVertScroller.style.top=parseInt(-h,10)+"px";this.m_elemMap.SPHorScroller.style.left=parseInt(-parseInt(this.m_containerDiv.style.left,10)/(this._XRatio/f),10);},updateScrollBar:function(){var g;var l;var f=this.m_elemMap;var o=this.m_constants;var k=this.getContainerHeight();var i=this.getContainerWidth();log.debug("ScrollPane: ::in updateScrollBar h "+this.m_widgetId+" "+k);log.debug("ScrollPane: ::in updateScrollBar w "+this.m_widgetId+" "+i);var n=this.getHeight();var j=this.getWidth();if(k>n){this._YRatio=k/(n-(i>j?o.SB_HEIGHT:0));g=n-(i>j?o.SB_HEIGHT:0)-2*o.ARROW_HEIGHT;f.SPVerticalBar.style.display="block";f.SPVertBarBody.style.height=g+"px";log.debug("ScrollPane: ::in updateScrollBar yratio "+this._YRatio+" h"+k+" hp:"+n);l=g/this._YRatio-2*o.SC_TOP_HEIGHT;if(l<o.SC_MIDDLE_HEIGHT){l=o.SC_MIDDLE_HEIGHT;}f.SPVertScrollerBody.style.height=l+"px";f.SPVertScrollerMiddle.style.top=(l-o.SC_MIDDLE_HEIGHT)/2+"px";f.SPContentWrapper.style.width=j-o.SB_WIDTH+"px";this.m_isMouseWheelDisabled=false;}else{f.SPVerticalBar.style.display="none";f.SPContentWrapper.style.width=j+"px";this.m_isMouseWheelDisabled=true;}if(i>j){this._XRatio=i/(j-(k>n?o.SB_WIDTH:0));g=j-(k>n?o.SB_WIDTH:0)-2*o.ARROW_WIDTH;f.SPHorizontalBar.style.display="block";f.SPHorBarBody.style.width=g+"px";l=g/this._XRatio-2*o.SC_LEFT_WIDTH;if(l<o.SC_MIDDLE_HEIGHT){l=o.SC_MIDDLE_HEIGHT;}f.SPHorScrollerBody.style.width=l+"px";f.SPHorScrollerMiddle.style.left=(l-o.SC_MIDDLE_HEIGHT)/2+"px";f.SPContentWrapper.style.height=n-o.SB_HEIGHT+"px";}else{f.SPHorizontalBar.style.display="none";f.SPContentWrapper.style.height=n+"px";}f.SPHorScroller.style.left="0px";f.SPVertScroller.style.top="0px";log.debug("ScrollPane: ::in updateScrollBar");this.m_containerDiv.style.top="0px";this.m_containerDiv.style.left="0px";log.debug("ScrollPane: ::in updateScrollBar this.m_containerDiv.id "+this.m_widgetId+" "+this.m_containerDiv.id);log.debug("ScrollPane: ::in updateScrollBar this.m_containerDiv.style.top "+this.m_widgetId+" "+this.m_containerDiv.style.top);log.debug("ScrollPane: ::in updateScrollBar this.m_containerDiv.style.left "+this.m_widgetId+" "+this.m_containerDiv.style.left);this.m_containerDiv.style.position="absolute";},resize:function(j){log.debug("ScrollPane: ::Resize to height:"+j[0].height+"  width:"+j[0].width);var f=parseInt(j[0].height,10);var i=parseInt(j[0].width,10);if(isNaN(f)||isNaN(i)){f=this.m_scrollPaneHeight;i=this.m_scrollPaneWidth;}this.m_scrollPaneHeight=f;this.m_scrollPaneWidth=i;this.m_elemMap.ScrollPaneContainer.style.height=this.m_scrollPaneHeight+"px";this.m_elemMap.ScrollPaneContainer.style.width=this.m_scrollPaneWidth+"px";this.updateScrollBar();if(j[0]&&j[0].top&&!isNaN(j[0].top)){var h=j[0].top;var g=this.getContainerHeight();if(g>=f){if((g+h)<f){h=(f-g);}this.getContainer().style.top=h+"px";this.updateScrollers();}}log.debug("ScrollPane: ::leaving Resize");},getCurrentState:function(){var f=this.getContainer().style.top;var g=parseInt(f.replace("px",""),10);return{top:g,height:this.getHeight(),width:this.getWidth()};},getHeight:function(){log.debug("getHeight---ScrollPane");return this.m_scrollPaneHeight;},getWidth:function(){log.debug("getWidth---ScrollPane");return this.m_scrollPaneWidth;},getContainerHeight:function(){log.debug("getContainerHeight---ScrollPane : height-"+this.m_containerDiv.style.height);return this.m_containerDiv.offsetHeight;},getContainerWidth:function(){log.debug("getContainerWidth---ScrollPane");return this.m_containerDiv.offsetWidth;},disable:function(){log.debug("disableEvents---ScrollPane");this.m_isDisabled=true;},enable:function(){log.debug("enableEvents---ScrollPane");this.m_isDisabled=false;},unload:function(){log.debug("ScrollPane:: Entering unload");this.disable();this._unBindEventHandlers();this.m_elemMap=null;this.m_animContainer=null;log.debug("ScrollPane:: Leaving unload");}};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var d=YAHOO.Bubbling;var f="com.forddirect.ng.widgets";var a=getPackageForName(f);var g=getPackageForName("com.forddirect.ng.util");a.InlineEditZipCode=function(j,l){this.el=j;var k;log.debug("Adding close-click handler.");k=g.getElementByClassName("zipcode-close-click","a",this.el);if(k){b.on(k,"click",this.hide,this,true);}log.debug("Adding on-change handlers.");k=this.getInput();if(k){b.on(k,"keyup",this.handleTextChange,this,true);}log.debug("Adding submit-click handler.");k=g.getElementByClassName("zipcode-submit-click","a",this.el);if(k){b.on(k,"click",this.handleSubmitZIPCode,this,true);}var i=_widgets.context.UserContext.get("zIPCode");log.debug("Initializing the ZIP code control with user zip '"+i+"'.");k=g.getElementByClassName("zip","span",this.el);if(k&&i){k.innerHTML=i;}var h=c.getElementsByClassName("current-date","span",this.el)[0];this.setCurrentDate(h);YAHOO.Bubbling.addDefaultAction("zipcode-change-click",g.Actions.newHandler(this.show,this));_widgets.context.UserContext.subscribe("zIPCodeChange",this.handleZIPCodeUpdate,this,true);_widgets.context.UserContext.onInvalidZIPCode.subscribe(this.onInvalidZIPCode,this,true);};var e=a.InlineEditZipCode.prototype;e.setCurrentDate=function(i){var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec "];var n=new Date();var h=n.getDate();var m=n.getMonth();var j=n.getFullYear();var l=k[m]+"  "+h+", "+j;i.innerHTML=l;};e.show=function(){var h=this.getInput();h.value=_widgets.context.UserContext.get("zIPCode");c.addClass(this.el,"active");h.focus();h.select();};e.hide=function(){c.removeClass(this.el,"active");document.getElementById("errorMsg").className="";};e.handleSubmitZIPCode=function(){var h=this.getSubmitControl();if(h){if(_widgets.context.UserContext.validateZIPCode(this.getUserText())){_widgets.context.UserContext.setExplicitZIPCode(this.getUserText());}else{this.onInvalidZIPCode();}}};e.getInput=function(){return c.get("ze-textbox");};e.getUserText=function(){return this.getInput().value;};e.onInvalidZIPCode=function(){document.getElementById("errorMsg").className="visible";var h=this.getInput();if(h){h.focus();h.select();}};e.handleZIPCodeUpdate=function(h){this.hide();c.get("zip").innerHTML=h.newValue;};e.getSubmitControl=function(){return g.getElementByClassName("zipcode-submit-click","a",this.el);};e.handleTextChange=function(j){var h=this.getSubmitControl();if(h){var i=this.getUserText();document.getElementById("errorMsg").className="";if(j.keyCode==13){this.handleSubmitZIPCode();}}};})();
(function(){var d=YAHOO.util.Dom;var c=YAHOO.util.Event;var e=YAHOO.widget;var f=getPackageForName("com.forddirect.ng.util");var j=getPackageForName("com.forddirect.ng.widgets");var h=0;var g=-24;var a=["top","right","bottom","left"];var i={tl:{tr:{arrow:"l",top:"15%"},bl:{arrow:"t",left:"15%"},def:{arrow:"l",top:"40%"}},tr:{tl:{arrow:"r",top:"15%"},br:{arrow:"t",left:"85%"},def:{arrow:"r",top:"40%"}},bl:{tl:{arrow:"b",left:"15%"},br:{arrow:"l",left:"85%"},def:{arrow:"l",top:"40%"}},br:{tr:{arrow:"b",left:"60%"},bl:{arrow:"r",top:"80%"},def:{arrow:"r",top:"40%"}},def:{def:{arrow:"r",top:"40%"}}};var b={t:{fn:d.setY,offset:{top:-7}},r:{fn:d.setX,offset:{right:-14}},b:{fn:d.setY,offset:{bottom:-15}},l:{fn:d.setX,offset:{left:-8}}};j.BSTooltip=function(m,o){this.el=m;var n={hidedelay:500,constraintoviewport:true,offset:{x:h,y:g}};if(o){for(var l in o){if(l=="offset"){if(o.offset.x){n.offset.x+=o.offset.x;}if(o.offset.y){n.offset.y+=o.offset.y;}}else{n[l]=o[l];}}}j.BSTooltip.superclass.constructor.call(this,m,n);if(_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent){_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent.subscribe(this.hideFlip,this,true);}};YAHOO.extend(j.BSTooltip,e.Tooltip,{init:function(k,l){j.BSTooltip.superclass.init.apply(this,arguments);c.on(k,"mouseover",this.onTooltipMouseOver,this,true);c.on(k,"mouseout",this.onContextMouseOut,this,true);this.subscribe("beforeShow",f.X.wrap(this.synchronizeArrows,this),this,true);this.subscribe("beforeHide",f.X.wrap(this.hideArrows,this),this,true);},initDefaultConfig:function(){j.BSTooltip.superclass.initDefaultConfig.call(this);this.cfg.addProperty("offset",{value:{x:0,y:0},validator:null,supercedes:null});},onContextMouseMove:function(q,p){var o=p.cfg.getProperty("context");if(o&&o.length>=2){var l=o[1];var k=o[2];var n=p.element;var m=function(t,u){switch(l){case e.Overlay.TOP_LEFT:p.pageX=u;var w=0;if(typeof window.pageYOffset=="number"){w=window.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){w=document.documentElement.scrollTop;}else{if(document.body&&document.body.scrollTop){w=document.body.scrollTop;}else{if(window.scrollY){w=window.scrollY;}}}}var s=0;if(window.innerHeight){s=window.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){s=document.documentElement.clientHeight;}else{if(document.body&&document.body.clientHeight){s=document.body.clientHeight;}}}if(t-w+n.offsetHeight<s){p.pageY=t-n.offsetHeight;}else{p.pageY=t;}break;case e.Overlay.TOP_RIGHT:p.pageX=u-n.offsetWidth;p.pageY=t;break;case e.Overlay.BOTTOM_LEFT:p.pageX=u;p.pageY=t-n.offsetHeight;break;case e.Overlay.BOTTOM_RIGHT:p.pageX=u-n.offsetWidth;p.pageY=t-n.offsetHeight;break;}var x=p.cfg.getProperty("offset");if(x){if(x.x){p.pageX+=x.x;}if(x.y){p.pageY+=x.y;}}};var r=d.getRegion(this);switch(k){case e.Overlay.TOP_LEFT:m(r.top,r.left);break;case e.Overlay.TOP_RIGHT:m(r.top,r.right);break;case e.Overlay.BOTTOM_LEFT:m(r.bottom,r.left);break;case e.Overlay.BOTTOM_RIGHT:m(r.bottom,r.right);break;}}else{p.pageX=c.getPageX(q);p.pageY=c.getPageY(q);}},setBody:function(){},onTooltipMouseOver:function(m,l){var k=this;if(k.title){l._tempTitle=k.title;k.title="";}if(l.fireEvent("contextMouseOver",k,m)&&!l.cfg.getProperty("disabled")){if(l.hideProcId){clearTimeout(l.hideProcId);l.hideProcId=null;}c.on(k,"mousemove",l.onContextMouseMove,l);l.showProcId=l.stopHide(m,k);}},stopHide:function(l,k){c.removeListener(k,"mousemove",this.onContextMouseMove);this.hideProcId=this.doHide();this.show();},hideFlip:function(){this.hide();},showFlip:function(){this.show();},hideArrows:function(){d.getElementsByClassName("tt-arrow",null,this.el,function(k){d.removeClass(k,"tt-arrow-active");});},positionArrow:function(m,n){var l=m.parentNode;var o=d.getRegion(l);if(n){var p=b[n];if(p){for(var q in p.offset){if(p.offset){var k=o[q]+p.offset[q];p.fn(m,k);}}}else{log.warn("Cannot find offset for '"+n+"'.");}}else{log.warn("Cannot reposition arrow with unknown error type.");}},synchronizeArrows:function(t,p){var s={t:{coord:1,g:true,reverse:"b"},b:{coord:1,g:false,reverse:"t"},l:{coord:0,g:false,reverse:"r"},r:{coord:0,g:false,reverse:"l"}};this.hideArrows();var l=this.cfg.getProperty("context");if(l){var m=l.length>=1?l[1]:null;var y=l.length>=2?l[2]:null;var q=d.getXY(this.el);var v=d.getXY(l[0]);var u=(m&&i[m])?i[m]:i.def;var x=(y&&u[y])?u[y]:u.def;if(x){if(x.arrow){var r=s[x.arrow].coord;if((q[r]>=v[r])!=s[x.arrow].g){x.arrow=s[x.arrow].reverse;}var n=d.getElementsByClassName("tt-arrow-"+x.arrow,null,this.el);if(n&&n.length>0){d.addClass(n,"tt-arrow-active");d.batch(n,this.positionArrow,x.arrow,this);for(var o=0,w=a.length;o<w;o++){var k=a[o];if(x[k]){d.setStyle(n,k,x[k]);}}}}}}}});})();
(function(){var b=YAHOO.util.Dom;var c=YAHOO.lang;var a=getPackageForName("com.forddirect.ng.widgets");a.Button=function(d,e){a.Button.superclass.constructor.apply(this,arguments);};c.extend(a.Button,YAHOO.util.Element,{disable:function(){b.setClass(this.getEl(),"disabled");},enable:function(){b.removeClass(this.getEl(),"disabled");}});})();
(function(){var c="com.forddirect.ng.widgets";var a=getPackageForName(c);var d=getPackageForName("com.forddirect.ng.util");var b=YAHOO.util.Dom;a.PromotionalArea=function(g,h){var j=b.getElementsByClassName("ng-widget promotional-tile","div",g);for(var f=0;f<j.length;f++){var e=new a.PromotionalTile(j[f],h);}};})();
(function(){var c="com.forddirect.ng.widgets";var a=getPackageForName(c);var d=getPackageForName("com.forddirect.ng.util");var b=YAHOO.util.Dom;a.PromotionalTile=function(h,i){var f=b.getElementsByClassName("promo-content","div",h);if(f&&f.length>0){var g=f[0];var e=g.getAttribute("dynamic");if(e){this.loadDynamicContent(h,g,i);}}};a.PromotionalTile.prototype.loadDynamicContent=function(g,f,i){var l=g.id;var k=f.id;var h=b.get("loading:"+k);if(h){d.Navigation.swapBlocks(k,h);}var e=f.getAttribute("promo-id");var j="?widget=promotional-tile&promo-area="+i+"&promo-id="+e;log.debug("Refreshing dynamic promotional tile from '"+j+"'.");d.Navigation.swapWith(l,j);};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var d=YAHOO.Bubbling;var g=getPackageForName("com.forddirect.ng.util");var f="com.forddirect.ng.widgets";var a=getPackageForName(f);a.Disclaimer=function(){log.debug("Disclaimer");_widgets.context.DisclaimerContext.onFootnoteAdded.subscribe(this.handleRefresh,this,true);var i;var h;};var e=a.Disclaimer.prototype;e.registerDisclaimers=function(h){log.debug("... registerDisclaimers");this.rootNodeOfDisclaimerArea=h;var i=this.findDisclaimerIdsForFootnotes(h);_widgets.context.DisclaimerContext.updateDisclaimers(i,h);};e.findDisclaimerIdsForFootnotes=function(h){log.debug("... findDisclaimerIdsForFootnotes");this.footnoteLocations=c.getElementsByClassName("footnoteIndicator","sup",h);var k=[];for(var j=0;j<this.footnoteLocations.length;j++){k[j]=this.footnoteLocations[j].getAttribute("disclaimer");}return k;};e.handleRefresh=function(j,h){log.debug("... handleRefresh");var k=h[0];var i=h[1];if(i.getAttribute("class")===this.rootNodeOfDisclaimerArea.getAttribute("class")){this.displayFootnoteIndicators(this.footnoteLocations,k);}};e.displayFootnoteIndicators=function(h,k){log.debug("... displayFootnoteIndicators ");if(h){for(var j=0;j<h.length;j++){h[j].innerHTML=k[h[j].getAttribute("disclaimer")];}}};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var d=YAHOO.Bubbling;var e="com.forddirect.ng.widgets";var a=getPackageForName(e);var f=getPackageForName("com.forddirect.ng.util");a.DisclaimerFlip=function(i,j){this.disclaimerEl=i;d.addDefaultAction("disclaimer-button-click",f.Actions.newHandler(this.onDisclaimerButtonClick,this));var h={zIndex:125};var g=c.get("global-disclaimers-flip");a.DisclaimerFlip.superclass.constructor.call(this,g,h);};YAHOO.extend(a.DisclaimerFlip,a.BSPanel);a.DisclaimerFlip.prototype.onDisclaimerButtonClick=function(g,h){this.setPanelHeader("Additional Disclosures");c.get("global-disclaimers-flip").style.display="block";this.alignTo(this.disclaimerEl,a.BSPanel.ALIGN_BOTTOM_LEFT);this.show();var i=g.getAttribute("footnote");if(i){this.scrollTo(i);}};a.DisclaimerFlip.prototype.scrollTo=function(k){var j=parseInt(k,10);if(j){var m;var i=f.getElementByClassName("bd","div",this.disclaimerEl);var l=c.get("globaldisclaimersList");var n=c.getElementsBy(function(q){return true;},"dt",l);var p=n.length;var o=f.getElementByClassName("contextualDisclaimerList","div",this.disclaimerEl);var g=c.getElementsBy(function(q){return true;},"dt",o);var h=g.length;if(j>0&&j<p){m=n[j-1];}else{if(j>=p&&j<(p+h)){m=g[j-1];}else{m=n[0];}}i.scrollTop=c.getY(m)-c.getY(l);}else{log.warn("Expecting 'footnote' either be a Number or a String that can be parsed as an Integer.");}};})();
(function(){var d=YAHOO.lang;var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var a=getPackageForName("com.forddirect.ng.widgets");var e=getPackageForName("com.forddirect.ng.util");a.BackToTop=function(f,g){};b.onDOMReady(function(){var f=c.get("back-to-top-link");if(f){YAHOO.Bubbling.addDefaultAction("back-to-top-click",e.Actions.newHandler(function(h,g){e.Animation.resetScroll();}));}else{log.warn("Cannot Move to Top.");}});})();
(function(){var b=YAHOO.util.Dom;var e=YAHOO.lang;var d=YAHOO.widget;var c=YAHOO.util;var g=getPackageForName("com.forddirect.ng.util");var h=getPackageForName("com.forddirect.ng.context");var a=getPackageForName("com.forddirect.ng.widgets");var f=getPackageForName("com.forddirect.ng.datasource");a.AsShownPrice=function(i,j){a.AsShownPrice.superclass.constructor.apply(this,arguments);};e.extend(a.AsShownPrice,a.BaseWidget,{init:function(i,j){a.AsShownPrice.superclass.init.apply(this,arguments);this.headEl=g.getElementByClassName("shown-price-head",null,this.getEl());if(!this.headEl){throw"Cannot initialize as-shown pricing widget with no head element.";}if(!b.hasClass(this.headEl,"static")){this.displayEl=g.getElementByClassName("shown-model-price",null,this.getEl());_widgets.context.SelectedContext.subscribe("configurationPricingChange",g.Event.newHandler(this.handleSelectedConfigurationChange,this));}},handleSelectedConfigurationChange:function(i){var j=i.newValue;if(j&&j.MSRP){this.updatePrice(j.MSRP);this.show();}else{this.hide();}},hide:function(){b.removeClass(this.headEl,"active");},show:function(){b.addClass(this.headEl,"active");},updatePrice:function(i){if(this.displayEl){if(i){this.displayEl.innerHTML="$"+g.formatWithComma(i);}else{this.displayEl.innerHTML="";}}}});})();
(function(){var c=YAHOO.util.Dom;var d=YAHOO.lang;var b=YAHOO.util.Event;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.BannerOverlay=function(f,g){this.isInitialized=false;a.BannerOverlay.superclass.constructor.apply(this,arguments);};d.extend(a.BannerOverlay,a.BaseWidget,{init:function(g,h){a.BannerOverlay.superclass.init.apply(this,arguments);this.bannerContent=e.Dom.getElementByClassName("banner-content","div",g);var i=e.Dom.getElementByClassName("close","div",g);var f=c.getElementsByClassName("featurenavigation","a",g);if(i){b.addListener(i,"click",this.hide,null,this);}b.addListener(f,"click",this.hide,null,this);c.setStyle(this.el,"visibility","hidden");this.isInitialized=true;},show:function(f){if(f){c.setStyle(this.bannerContent,"backgroundImage","url("+f+")");c.setStyle(this.el,"visibility","visible");}},hide:function(){log.debug("Hiding banner overlay.");c.setStyle(this.el,"visibility","hidden");}});})();
(function(){var e=YAHOO.lang;var c=YAHOO.util.Dom;var d=YAHOO.Bubbling;var b=getPackageForName("com.forddirect.ng.widgets");var f={autoplay:1,data:[{id:1,thumb:"",video:"",image:"",duration:"",description:""}]};f.current=f.data[0].id;b.VideoPlayer=function(h,k){k=k||{};this.el=h;this.status="";this.initCompleted=false;this.jsInstanceName=k.jsInstanceName;this.widgetId=k.widgetID||"VideoPlayer";this.bgColor=k.bgColor;this.width=k.width||1200;this.height=k.height||540;this.swfPath=k.swfPath;this.wmode=k.wmode||"transparent";this._videoStarted=false;this.emit=function(p,r,u){var o=_instances.flashFramework.thisMovie(this.widgetId);var n=o?(c.getAttribute(o,"name")||o.id):"(unknown)";var m=false;if(o&&o.eventHandler){try{o.eventHandler(p,r,u?(this.jsInstanceName+"."+u):null);m=true;}catch(q){log.warn("Exception received emitting flash event.",q);}}else{log.warn("Unable to emit event '"+p+"'. Widget has no event handler.");}return m;};var g={};this.getFlashID=function(n){var m=g[n]||n;return m;};this.setCurrentVideo=function(n){var m=this.getFlashID(n);if(typeof(m)!=="number"){throw"Cannot set the current video ID to a value that was not included in the constructor to this video player. '"+n+"' is not recognized.";}this.videoMetadata.current=m;};var j=function(o,p){log.debug("... updating video-player metadata.");this.videoMetadata=o;if(o.data&&o.data.length){for(var n=0;n<o.data.length;n++){var m=o.data[n];var q=m.id;if(typeof(q)!=="number"){m.id=n+1;g[q]=m.id;log.debug("... replacing nonnumeric ID '"+q+"' with '"+m.id+"' for use by NG video player.");}}if(o.current){this.setCurrentVideo(o.current);}else{this.setCurrentVideo(p||o.data[0].id);}}};j.apply(this,[k.videoMetadata||f,k.initialVideoID]);this.getMetadata=function(){log.debug("... Return meta data video-player metadata.");return this.videoMetadata;};this.resetRelaunchTrigger=function(){if(this.relaunchTrigger){clearTimeout(this.relaunchTrigger);this.relaunchTrigger=null;}};var l=function(){log.debug("... beginning Flash player update with new metdata.");try{var p=this.videoMetadata;var m=_instances.flashFramework.thisMovie(this.widgetId);if(m&&m.eventHandler){for(var n=0;n<p.data.length;n++){log.debug("... adding video for '"+p.data[n].id+"'.");}m.eventHandler("update",p,this.jsInstanceName+".onUpdateComplete");log.debug("Successfully updated movie '"+this.widgetId+"' with new metadata (current: '"+this.videoMetadata.current+"').");}else{log.warn("Unable to update '"+m+"'; no SWF event handler supported. Is initialization complete?");}}catch(o){log.error("Unable to update Flash player.",o);}};this.onInitComplete=function(m){log.debug("... Flash player initialization completed.");this.initCompleted=true;l.call(this);};this.onUpdateComplete=function(m){log.debug("Entering onUpdateComplete");this.resetRelaunchTrigger();if(this.videoMetadata.autoplay){this._videoStarted=true;}};this.onUnloadComplete=function(m){if(this.el){this.el.innerHTML="";}};this.onVideoStart=function(m){log.debug("... video started.");this._videoStarted=true;};this.onVideoEnd=function(m){log.debug("... video stopped.");log.debug("Firing event");_widgets.context.SelectedContext.fireEvent("fullVideoViewed",{type:"fullVideoViewed",id:this.widgetId});this._videoStarted=false;};this.onVideoLoaded=function(m){log.debug("... video loaded.");};this.onContextChange=function(q){var o=q[0];var m=q[1];log.debug("video player OnContextChange called...");if(o&&typeof(m)!=="undefined"){var n=m.p1;var p=m.p2;log.debug("Setting context parameter '"+n+"'  to  '"+p+"'.");if(n&&p){_widgets.context.SelectedContext.set(n,p);}}else{log.warn("Unable to parse context parameter update from event parameters. Skipping.");}};this.onFlashEvent=function(o){var n=o[0];var m=o[1];var m=o[1];log.debug("Received generic flash event '"+n+"' with parameters '"+m+"'.");};this.onFlashAction=function(o){var n=o[0];var m=o[1];d.triggerDefaultAction(n,m);};};e.augmentProto(b.VideoPlayer,{prototype:{init:function(g){if(!this.initCompleted){log.debug("Initializing Flash movie using '"+g+"'");if(!g){g="";}_instances.flashFramework.loadFlashMovie(this.el,this.widgetId,this.swfPath,this.width,this.height,this.jsInstanceName,this.bgColor,this.wmode,g);log.debug("... initialization complete; awaiting Flash player callback.");}},launchVideo:function(g){log.debug("Launching video with ID '"+g+"'.");if(this._videoStarted){this.stopVideo();}log.debug("... setting the current video ID.");this.setCurrentVideo(g);log.debug("... requesting a Flash launch with '"+this.videoMetadata.current+"'.");this.emit("launchVideo",{id:this.videoMetadata.current},"onUpdateComplete");},stopVideo:function(){log.debug("... recording video stop request.");if(this._videoStarted){this._videoStarted=false;var h={};h.dummy="";try{_instances.flashFramework.thisMovie(this.widgetId).eventHandler("stopVideo",h,null);}catch(g){log.error("Video player could not be stopped.",g);}}log.debug("... completed video stop request.");},unload:function(){log.debug("... video unload started.");try{this.stopVideo();emit("unload",{},"onUnloadComplete");}catch(g){log.warn("Error received attempting to unload video.",g);this.onUnloadComplete(true);}}}});})();td_site.page.videoPlayer={v:{groups:{},curOn:false,playing:{},flashVersion:9,reserved:{},dateHack:0,playerOrder:["flash","html","noplayer"],htmlCodecs:{m4v:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'}},u:{getAry:function(b){return _widgets.context.SelectedContext.get(b);},convertAll:function(g,c){if(!c){c=_widgets.context.SelectedContext.get(g);}var f={};var b=false;switch(g){case"model.highlights":for(var d in c){f[d]=this.convertOne(g,c[d]);}break;default:for(var d in c){f[d]=this.convertOne(g,c[d]);}break;}return f;},convertOne:function(g,f){switch(g){case"model.highlights":var d;var b;var e=f.flip.media;var c=f.carsid;if(c!=undefined){d=_widgets.context.SelectedContext.get("model.videos");b=_widgets.context.SiteContext.get("url.media");videoItem=d[c];if(e.videos){assetImage=b+videoItem.posterboardimage;assetVideo=b+videoItem.lowbandhiresflash;return{img:assetImage,alt:e.images.image_1.alttag,video:assetVideo,duration:videoItem.length,posterFrame:e.videos.video_1.posterFrame};}}else{if(e.videos){return{img:e.images.image_1.size_thumb.source,alt:e.images.image_1.alttag,video:e.videos.video_1.defaultSize.source,duration:e.videos.video_1.duration,posterFrame:e.videos.video_1.posterFrame};}}return false;break;case"innovationTopic.highlights":var e=f.flip.media;if(e.videos){return{img:e.images.image_1.size_thumb.source,alt:e.images.image_1.alttag,video:e.videos.video_1.defaultSize.source,duration:e.videos.video_1.duration,posterFrame:e.videos.video_1.posterFrame};}return false;break;default:return{img:f.image,alt:"",video:f.video,duration:f.duration,posterFrame:f.posterFrame};break;}},metrics:function(d,f,b,c){switch(d.type){case"seeking":s.Media.stop(b.metricVideoName,b.player.currentTime);break;case"pause":s.Media.stop(b.metricVideoName,b.player.currentTime);break;case"seeked":if(b.bPlayMetricSet){s.Media.play(b.metricVideoName,b.player.currentTime);}break;case"play":if(!b.bPlayMetricSet){b.metricsEndTime=b.player.duration*0.8;b.startTime=0;s.Media.open(b.metricVideoName,b.player.duration,"HTMLvideo");b.bPlayMetricSet=true;}s.Media.play(b.metricVideoName,b.player.currentTime);break;case"ended":if(b.bPlayMetricSet){s.Media.stop(b.metricVideoName,b.player.currentTime);s.Media.close(b.metricVideoName);b.bPlayMetricSet=false;}break;}},inish:function(b,c){this.par=c;this.name=b;}},funs:{},play:function(b){this.v.groups[b].play(oParams);},testEnabled:function(b){},addNew:function(b,g,c,k,f){if(!g){g=this.v.playerOrder;}this.v.canPlayFlash=false;if(this.v.groups[b]){this.v.groups[b].destroyVideo();}for(var d=0;d<g.length;d++){var j=g[d];if(this.funs[j]){this.v.groups[b]=new this.funs[j](k,this,this.site,b,c);if(f){this.v.groups[b].callBack=f;}if(this.v.groups[b].enabled()){break;}delete this.funs[j];this.v.groups[b]=false;}}if(!this.v.groups[b]){for(var h in this.funs){this.v.groups[b]=new this.funs[h](k,this,this.site,b,c);if(this.v.groups[b].enabled()){break;}this.v.groups[b]=false;}}this.setConfigFromObject(b,{imageurl:null,videourl:null,projectName:"NGBS",flashName:"videoplayer",country:"US",pageURL:document.location.toString(),account:s.un,charSet:"UTF-8",trackClickMap:true,movieID:"",debugTracking:true,trackLocal:true,Media:{autoTrack:"false",trackMilestones:"25,50,75",playerName:"NextGenPlayer",trackWhilePlaying:"true",trackVars:"prop16,eVar16,eVar11,channel,hier1"}});return this.v.groups[b];},extendExisting:function(c,e,d){var b=this.funs;this.funs[c]=d||function(){e.apply(this,arguments);};if(typeof e=="string"){e=this.funs[e];this.funs[c].prototype=new e(false,this,this.site,"",{flipObj:"x",divHolder:"x"});}else{this.funs[c].prototype=e;}this.funs[c].prototype.superclass=e;return this.funs[c].prototype;},setHolder:function(b,c){this.v.groups[b].setHolder(c);},loadVideo:function(b,d,c){if(c){if(c-this.v.dateHack<500){return;}this.v.dateHack=c;}this.v.groups[b].loadVideo(d);},hideVideo:function(b){this.v.groups[b].hideVideo();},stopVideo:function(b,c){if(typeof(b)=="string"){b=this.v.groups[b];}if(b&&b.stopVideo){if(this.v.curOn&&b==this.v.curOn){this.v.curOn=false;}b.stopVideo(c);}},destroyVideo:function(c){var b=this.v.groups[c];if(b&&b.destroyVideo){if(this.v.curOn&&b==this.v.curOn){this.v.curOn=false;}b.destroyVideo();}},playerReady:function(b){if(this.v.groups[b].playerReady){this.v.groups[b].playerReady(b);}},addPlayList:function(b,c){if(this.v.groups[b].addPlayList){this.v.groups[b].addPlayList(c);}},create:function(b){if(typeof(b)=="string"){b=this.v.groups[b];}if(!this.v.curOn||(this.v.curOn&&this.v.curOn!=b)){if(b.bOnlyOne&&this.v.curOn||this.v.curOn&&this.v.curOn.bOnlyOne){this.stopVideo(this.v.curOn,true);}this.v.curOn=b;b.create();}},cueVideo:function(b,c){if(this.v.groups[b].cueVideo!=null){return this.v.groups[b].cueVideo(c);}return false;},metricEvent:function(c,d,b){b="video"+b;if(d!=false){td_site.fireThoseMetrics.yo(0,0,"",b,0,1,{videoState:{j:b,k:d}});}},hasGroup:function(b){return this.v.groups[b];},check:function(oLog,oReq,oParamsOrig){eval("var oParams = "+JSON.stringify(oParamsOrig));for(var e in oReq){if(!oParams[e]){if(oReq[e]==null){oLog.er.push("Missing value: "+e);}else{oParams[e]=oReq[e];}}}return{log:oLog,params:oParams};},onInitComplete:function(b){a=1;},getVideoJSONrequest:function(e){if(typeof e==="string"){e=JSON.parse(e);}var c=td_site.u.clone(this.v.groups[e.sName].getVideoJSONRequest(e))||{};for(var f in s){if((s[f]!=null)&&typeof s[f]=="string"&&s[f]!=""){c[f]=s[f];}}var d=JSON.stringify(c);delete c;if(this.v.groups[e.sName].callBack&&this.v.groups[e.sName].callBack.getVideoJSONrequest){var b=this.v.groups[e.sName].callBack.getVideoJSONrequest;b.fun[b.cb](e.id);}return"["+d+"]";},setConfig:function(b,c,d){this.v.groups[b].setConfig(c,d);},setConfigFromObject:function(b,c){this.v.groups[b].setConfigFromObject(c);},getConfig:function(b,c){return this.v.groups[b].getConfig(c);},controls:function(b,c){if(this.v.groups[b]){this.v.groups[b].controls(c);}},dispError:function(c){var b=document.location.toString();if(b.search("http://ford.com")==-1&&b.search("www.ford.com")==-1&&console){console.log("Script Name: "+c.script);console.log("Intance: "+c.instance);console.log("Error Type: "+c.type);for(i=0;i<c.er.length;i++){console.log(c.er[i]);}}},inish:td_site.inish};td_site.page.videoPlayer.distroyVideo=td_site.page.videoPlayer.destroyVideo;td_site.page.videoPlayer.playVideo=td_site.page.videoPlayer.create;td_site.inish("td_site",td_site,0);(function(){function c(){}var b=td_site.videoPlayer.extendExisting("base",new Object(),function(g,h,e,f,d){this._playerConfig={};this._hashReference={};});b.controls=c;b.play=c;b.create=c;b.setHolder=function(d){this.divHolder=d.holder;};b.addPlayList=function(g){this._hashReference={};if(!(g instanceof Array)){var f=g;g=[];for(var e in f){var d=g.push(f[e])-1;g[d].id=e;this._hashReference[e]=d;}}this.playList=g;};b.convertId=function(e){if(typeof e==="string"){var d=parseInt(e);if(isNaN(d)){e=this._hashReference[e];}else{e=d;}}return e;};b.getVideoById=function(d){return this.playList[this.convertId(d)];};b.setCurrentVideo=function(d){this.curVideoId=this.convertId(d);this.currentVideo=this.getVideoById(d);this.setConfig("imageurl",this.currentVideo.img);this.setConfig("videourl",this.currentVideo.video);this.setConfig("autoplay","true");};b.getNext=function(){var d=this.playList.length-1;if(this.curVideoId<d){d=this.curVideoId+1;}return this.playList[d];};b.getPrevious=function(){var d=0;if(this.curVideoId>d){d=this.curVideoId-1;}return this.playList[d];};b.loadVideo=function(d){this.setCurrentVideo(d.id);if(d.bPlay){this.create();}};b.playVideo=b.create;b.hideVideo=function(){clearTimeout(this.metricsTO);if(this.controler){this.controler.distroy(this.par,this.name,"stopVideo");}else{this.par.distroy(this.name);}};b.stopVideo=c;b.destroyVideo=c;b.setConfig=function(d,e){this._playerConfig[d]=e;};b.setConfigFromObject=function(d){td_site.u.extend(this._playerConfig,d);};b.getConfig=function(d){return this._playerConfig[d];};b.getVideoJSONRequest=function(d){if(d.id){this.setCurrentVideo(d.id);}return this._playerConfig;};b.enabled=function(){return true;};})();(function(){var b=td_site.videoPlayer.extendExisting("flash","base",function(f,g,d,e,c){this.controler=f;this.par=g;this.site=d;this.name=e;this.supported=true;this.error=false;this.curVideoId=0;this.holderContents="";if(!this.par.v.reserved.flash){this.par.v.reserved.flash={canPlayFlash:null};}this.setVars("new",c);});b.setVars=function(k,c){var d={instance:this.name,script:this.par.name,type:"",er:[]};switch(k){case"new":d.type="new vars";var f={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:false,divHolder:null,oDivPlayer:false,id:"highlightVideoPlayer",bOnlyOne:true,persist:false,position:"relative",player:"/ngtemplates/ngassets/com/forddirect/ng/widgets/video-player/player_ford.swf",posterFrame:["<div class='td_video_posterFrame' style='border:1px solid red'>","hi","</div>"],currentVideo:{img:false,alt:false,video:false,duration:false}};var j=this;break;}var h=this.par.check(d,f,c);d=h.log;c=h.params;if(!d.er.length){for(var g in c){j[g]=c[g];}if(k=="new"){this.oDivPlayer=this.site.s.id(this.divHolder);this.addPlayList(c.playList);}}else{this.par.dispError(d);this.error=true;}};b.buildFlashVars=function(f,d,c,e){return"JSClass="+f+'.v.groups["'+d+'"]&exec='+f+"."+c+'&id={"id":"'+e+'","sName":"'+d+'"}&stageWidth='+this.width+"&stageHeight="+this.height;};b.buildFlash=function(j,q,u,l,o,c,k){var e=this.par.site.name+"."+this.par.name;var g={allowScriptAccess:"always",wmode:"transparent",flashvars:this.buildFlashVars(e,j,q,k.id),quality:"high",allowFullScreen:true,bgcolor:"#ffffff",play:true,movie:c};var h={id:o,type:"application/x-shockwave-flash",data:c,width:u,height:l};if(td_site.v.isIE){h.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";}var r="";var f="";for(var d in g){r+="<param name='"+d+"' value='"+g[d]+"' />";}for(var m in h){f+=" "+m+"='"+h[m]+"'";}return"<object"+f+">"+r+"</object>";};b.onInitComplete=function(c){this.initCompleted=true;var d={autoplay:1,current:1,data:[this.currentVideo]};if(!this.movie){this.movie=document.getElementById(this.id);}this.movie.eventHandler("update",d,this.site.name+".mang."+this.par.name+".v.groups."+this.name+".onUpdateComplete");};b.onUpdateComplete=function(){var c=1;};b.loadVideo=function(c){var d=this.getVideoById(c.id);if(d){this.setCurrentVideo(c.id);if(c.bPlay){if(this.controler){this.playVideo(this.name);}else{this.par.playVideo(this.name);}}}};b.create=function(){var c=this.site.s.id(this.divHolder);if(c){c.style.display="block";if(!this.movie){this.holderContents=document.createElement("div");this.holderContents.innerHTML=this.buildFlash(this.name,"getVideoJSONrequest",this.width,this.height,this.id,this.player,{id:this.curVideoId});c.appendChild(this.holderContents);}else{this.onInitComplete();}}};b.playVideo=b.create;b.destroyVideo=function(){if(this.movie&&this.movie.eventHandler){this.movie.eventHandler("stopVideo",{dummy:""},null);this.movie.parentNode.removeChild(this.movie);this.movie=null;}if(this.holderContents){this.holderContents.parentNode.removeChild(this.holderContents);}delete this.holderContents;};b.pauseVideo=function(){this.movie.eventHandler("stopVideo",{dummy:""},null);};b.enabled=function(){this.testFlash();if(this.supported&&!this.error){return true;}return false;};b.testFlash=function(){var d=null;var c=false;try{if(typeof ActiveXObject==="undefined"){d=document.createElement("object");d.setAttribute("type","application/x-shockwave-flash");document.body.appendChild(d);c=!!d.GetVariable;document.body.removeChild(d);}else{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");c=!!d.GetVariable("$version");}}catch(f){c=false;}delete d;this.supported=this.par.v.reserved.flash.canPlayFlash=c;return this.supported;};})();(function(){var b=td_site.videoPlayer.extendExisting("noplayer","base",function(f,g,d,e,c){this.controler=f;this.par=g;this.site=d;this.name=e;this.supported=true;this.error=false;this.setVars=function(o,h){var j={instance:this.name,script:this.par.name,type:"",er:[]};switch(o){case"new":j.type="new vars";var k={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:"td_future",divHolder:null,id:"highlightVideoPlayer",persist:false,position:"relative",player:document.createElement("video"),posterFrame:["<div class='td_video_posterFrame' style='border:1px solid red'>","hi","</div>"],currentVideo:{img:false,alt:false,video:false,duration:false}};var n=this;break;}var m=this.par.check(j,k,h);j=m.log;h=m.params;if(!j.er.length){for(var l in h){n[l]=h[l];}if(o=="new"){this.oDivPlayer=this.site.s.id(this.divHolder);this.addPlayList(h.playList);}this.player=false;}else{this.par.dispError(j);this.error=true;}};this.setVars("new",c);});b.create=function(){if(this.player){this.destroyVideo();}if(this.currentVideo.img){this.player=document.createElement("img");this.player.src=this.currentVideo.img;this.player.width=this.posterWidth;this.player.height=this.posterHeight;this.oDivPlayer.appendChild(this.player);}};b.destroyVideo=function(){if(this.player&&this.player.parentNode){this.player.parentNode.removeChild(this.player);delete this.player;}};})();(function(){var b=td_site.videoPlayer.extendExisting("html","base",function(j,k,e,h,c){td_site.videoPlayer.funs.base.apply(this,arguments);this.controler=j;this.par=k;this.site=e;this.name=h;this.supported=true;this.error=false;this.bPlayMetricSet=false;this.dragTO=false;this.metricVideoName=false;this.curVideoId=0;this.fileType="";if(this.site.v.isIpad){this.ipadIntVersion=parseInt(navigator.userAgent.toLowerCase().split("cpu os ").pop());}this.setVars("new",c);this.oDivPlayer=this.site.s.id(this.divHolder);this.flipObj=this.site.s.id(this.flipObj);var d={trackWhilePlaying:true,autoTrack:false,playerName:"HTMLvideo",trackMilestones:"0,80"};var g=function(f,m){for(var l in f){if(typeof(f[l])=="object"){if(!m[l]){m[l]={};}g(f[l],m[l]);}else{m[l]=f[l];}}};g(d,s.Media);});b.setVars=function(c,k){var f={instance:this.name,script:this.par.name,type:"",er:[]};switch(c){case"new":f.type="new vars";var m={width:593,height:348,posterWidth:590,posterHeight:332,flipObj:null,divReplace:"td_future",divHolder:null,oDivPlayer:false,id:"highlightVideoPlayer",persist:false,position:"relative",player:document.createElement("video"),bibAppendElm:"body",bibDiv:false,currentVideo:{img:false,alt:false,video:false,duration:false}};var g=this;break;}if(!m.player){this.supported=false;return false;}var l=false;var h="";if(m.player.canPlayType){for(var j in this.par.v.htmlCodecs){h=m.player.canPlayType(this.par.v.htmlCodecs[j]);if(h.length){l=true;this.fileType=j;if(h=="probably"){break;}}}}if(!l){this.supported=false;return false;}var d=this.par.check(f,m,k);f=d.log;k=d.params;if(!f.er.length){for(var j in k){g[j]=k[j];}if(c=="new"){this.addPlayList(k.playList);}this.player=false;}else{this.par.dispError(f);this.error=true;}};b.play=function(){this.player.play();};b.setHolder=function(c){this.divHolder=c.holder;};b.create=function(){if(this.player){this.destroyVideo();}var d=this.site.s.id(this.divHolder);if(this.site.v.isIpad){if(this.bibDiv){this.bibDiv.style.display="block";this.flipObj.style.zIndex="4000";window.scrollBy(1,0);}}if(!this.player){this.player=this.site.s.aC(d,"video");}var e=new this.site.fun.event(this,this.player,{});this.site.u.addListener(this.player,["loadedmetadata","seeked","seeking","play","pause","ended"],e.run);this.startTime=-10;this.metricsEndTime=0;d.style.display="block";this.player.poster=this.currentVideo.img;this.player.controls=true;this.player.autoplay=this.getConfig("autoplay");this.player.width=this.width;this.player.height=this.height;var c=this.currentVideo.video.split(".");this.metricVideoName=this.currentVideo.video.split("/").pop();c.pop();c.push(this.fileType);this.player.src=c.join(".");this.player.load();this.metricsTO=this.site.u.TO(this,"setVideoSource",{site:this.site,t:this},100,false);if(this.site.v.isIpad&&this.ipadIntVersion<4){clearTimeout(this.metricsTO);}};b.playVideo=b.create;b.setVideoSource=function(){if(!this.player.readyState){this.player.load();}};b.hideVideo=function(){clearTimeout(this.metricsTO);if(this.controler){this.controler.destroy(this.par,this.name,"destroyVideo");}else{this.par.destroyVideo(this.name);}};b.stopVideo=function(){this.player.paused=true;};b.destroyVideo=function(){if(this.player){this.player.src="";this.event({type:"ended"},this.player,this,{});this.site.s.id(this.divHolder).style.display="none";if(this.player.parentNode){this.player.parentNode.removeChild(this.player);}this.player=false;clearTimeout(this.metricsTO);if(this.bibDiv){this.flipObj.style.zIndex=3;this.bibDiv.style.display="none";}}};b.enabled=function(){if(this.supported&&!this.error){return true;}return false;};b.event=function(f,g,c,d){c.par.u.metrics(f,g,c,d);switch(f.type){case"error":c.setVideoSource();break;case"loadedmetadata":break;case"click":if(c.controler&&c.controler.click){c.controler.click(c.par,c.name,d);}else{if(c.par&&c.par.click){c.par.click(c.name,d);}else{c[d.action](d);}}break;}};b.controls=function(c){this.player.controls=c;};})();(function(){var b=td_site.videoPlayer.extendExisting("skinnable-html","html",function(){td_site.videoPlayer.funs.html.apply(this,arguments);this.scrubber_width=0;this.mouse_original=0;this.time_original=0;this.volume_height=0;this.cached_controls=null;this._controls={"video-controls":{play:document.createElement("div"),bar:{buffered:document.createElement("div"),played:document.createElement("div"),scrubber:document.createElement("div")},time:{current:document.createElement("time"),duration:document.createElement("time")},fullscreen:document.createElement("div"),audio:{volume:{level:document.createElement("div"),grip:document.createElement("div")},mute:document.createElement("div")}}};});b.addEventsFromObject=function(c,d){var e=new c.site.fun.event(c,d["video-controls"].play,{action:"clickPlay"});c.site.u.addListener(d["video-controls"].play,["click"],e.run);var e=new c.site.fun.event(c,d["video-controls"].audio.mute,{action:"clickMute"});c.site.u.addListener(d["video-controls"].audio.mute,["click"],e.run);var e=new c.site.fun.event(c,d["video-controls"].fullscreen,{action:"clickFullScreen"});c.site.u.addListener(d["video-controls"].fullscreen,["click"],e.run);c.site.u.addListener(d["video-controls"].bar.scrubber,["mousedown"],function(){c.mousedownScrubber.apply(c,arguments);});c.site.u.addListener(d["video-controls"].audio.volume.grip,["mousedown"],function(){c.mousedownVolume.apply(c,arguments);});c.site.u.addListener(d["video-controls"].audio.mute.parentNode,["mouseover"],function(){c.mouseoverMute.apply(c,arguments);});c.site.u.addListener(d["video-controls"].audio.mute.parentNode,["mouseout"],function(){c.mouseoutMute.apply(c,arguments);});if(c.volume_height==0){c.volume_height=d["video-controls"].audio.volume.grip.parentNode.offsetHeight;}d["video-controls"].audio.volume.grip.parentNode.style.display="none";d["video-controls"].audio.volume.grip.parentNode.style.height=0;};b.clickPlay=function(c){if(this.player.paused){this.player.play();}else{this.player.pause();}};b.clickFullScreen=function(c){};b.clickMute=function(c){this.player.muted=!this.player.muted;};b.mouseoverMute=function(g){var f=this._controls["video-controls"].audio.mute.parentNode;var c=g.relatedTarget;while(c&&c!==f){c=c.parentNode;}if(c!==f){var d=this._controls["video-controls"].audio.volume.grip.parentNode;d.style.display="block";td_site.animation.stop(d).go(d,{height:this.volume_height},1000,"exponential");}};b.mouseoutMute=function(g){var f=this._controls["video-controls"].audio.mute.parentNode;var c=g.relatedTarget;while(c&&c!==f){c=c.parentNode;}if(c!==f){var d=this._controls["video-controls"].audio.volume.grip.parentNode;td_site.animation.stop(d).go(d,{height:0},1000,"exponential",function(){d.style.display="none";});}};b.mousedownScrubber=function(d){var c=this;td_site.u.addListener(document,["mousemove"],c.mousemoveScrubber,c);td_site.u.addListener(document,["mouseup"],c.mouseupScrubber,c);this.scrubber_width=this._controls["video-controls"].bar.scrubber.parentNode.offsetWidth;this.mouse_original=d.screenX;this.time_original=this.player.currentTime;this.player.pause();};b.mousemoveScrubber=function(d,c){c.player.currentTime=((d.screenX-c.mouse_original)/c.scrubber_width)*c.player.duration+c.time_original;};b.mouseupScrubber=function(d,c){td_site.u.removeListener(document,["mousemove"],c.mousemoveScrubber);td_site.u.removeListener(document,["mouseup"],c.mouseupScrubber);c.player.play();};b.mousedownVolume=function(d){var c=this;td_site.u.addListener(document,["mousemove"],c.mousemoveVolume,c);td_site.u.addListener(document,["mouseup"],c.mouseupVolume,c);this.scrubber_width=this._controls["video-controls"].audio.volume.grip.parentNode.offsetHeight;this.mouse_original=d.screenY;this.time_original=this.player.volume;};b.mousemoveVolume=function(d,c){var f=-((d.screenY-c.mouse_original)/c.scrubber_width)+c.time_original;if(f>1){c.player.volume=1;}else{if(f<0){c.player.volume=0;}else{c.player.volume=-((d.screenY-c.mouse_original)/c.scrubber_width)+c.time_original;}}};b.mouseupVolume=function(d,c){td_site.u.removeListener(document,["mousemove"],c.mousemoveVolume);td_site.u.removeListener(document,["mouseup"],c.mouseupVolume);};b.buildElementsFromObject=function(f,c,e){for(var d in e){element=td_site.u.isDOMNode(e[d])?e[d]:this.buildElementsFromObject(f+"-"+d,document.createElement("div"),e[d]);element.id=f+"-"+d;element.className=f+"-"+d+" "+d;c.appendChild(element);}return c;};b.updateTime=function(d,c){var e=Math.floor(c%60).toString();if(e<10){e="0"+e;}this._controls["video-controls"].time[d].innerHTML=Math.floor(c/60)+":"+e;};b.destroyVideo=function(){if(this.player){this.player.src="";if(this.player.parentNode){this.player.parentNode.removeChild(this.player);}this.player=null;clearTimeout(this.metricsTO);if(this.bibDiv){}this.destroyControls(this.name);}};b.create=function(){if(this.player){this.destroyVideo();}var d=this.site.s.id(this.divHolder);if(this.site.v.isIpad){if(!this.bibDiv){if(this.bibAppendElm=="body"){}else{}}window.scrollBy(1,0);}if(!this.player){this.player=this.site.s.aC(d,"video");if(!this.cached_controls){this.cached_controls=this.buildControls(this.name,d);this.cached_controls=this.cached_controls.getElementsByClassName("video-controls")[0];}else{d.appendChild(this.cached_controls);}}var e=new this.site.fun.event(this,this.player,{});this.site.u.addListener(this.player,["timeupdate","progress","loadeddata","volumechange","loadedmetadata","seeked","seeking","play","pause","ended"],e.run);this.startTime=-10;this.metricsEndTime=0;d.style.display="block";this.player.poster=this.currentVideo.img;this.player.autoplay=this.getConfig("autoplay");this.player.width=this.width;this.player.height=this.height;var c=this.currentVideo.video.split(".");this.metricVideoName=this.currentVideo.video.split("/").pop();c.pop();c.push(this.fileType);this.player.src=c.join(".");this.player.load();if(this.site.v.isIpad){window.scrollBy(-1,0);}this.metricsTO=this.site.u.TO(this,"setVideoSource",{site:this.site,t:this},100,false);if(this.site.v.isIpad&&this.ipadIntVersion<4){clearTimeout(this.metricsTO);}};b.playVideo=b.create;b.event=function(g,d,c,f){c.par.u.metrics(g,d,c,f);switch(g.type){case"play":td_site.u.className.add(this._controls["video-controls"].play,"pause");td_site.u.className.remove(this._controls["video-controls"].play,"play");break;case"pause":td_site.u.className.add(this._controls["video-controls"].play,"play");td_site.u.className.remove(this._controls["video-controls"].play,"pause");break;case"timeupdate":c._controls["video-controls"].bar.scrubber.style.left=((d.currentTime/d.duration)*100)+"%";c._controls["video-controls"].bar.played.style.width=((d.currentTime/d.duration)*100)+"%";c.updateTime("current",d.currentTime);break;case"loadedmetadata":c.updateTime("duration",d.duration);break;case"loadeddata":case"progress":var h=0;var e=0;if(d.buffered&&d.buffered.length>0){h=d.buffered.start(0);e=d.buffered.end(0)-h;}c._controls["video-controls"].bar.buffered.style.left=((h/d.duration)*100)+"%";c._controls["video-controls"].bar.buffered.style.width=((e/d.duration)*100)+"%";break;case"volumechange":c._controls["video-controls"].audio.volume.grip.style.bottom=(d.volume*100)+"%";c._controls["video-controls"].audio.volume.level.style.height=(d.volume*100)+"%";if(d.muted){td_site.u.className.add(c._controls["video-controls"].audio.mute,"muted");}else{td_site.u.className.remove(c._controls["video-controls"].audio.mute,"muted");}break;case"error":t.setVideoSource();break;case"ended":c.player.pause();break;case"mouseover":case"mouseout":c[f.action](f);break;case"click":if(c.controler&&c.controler.click){c.controler.click(c.par,c.name,f);}else{if(c.par&&c.par.click){c.par.click(c.name,f);}else{c[f.action](f);}}break;}};b.buildControls=function(e,c){var d=null;this._controls["video-controls"].spacer=document.createElement("div");this.player.controls=false;d=this.buildElementsFromObject(e,c,this._controls);this.addEventsFromObject(this,this._controls);return d;};b.destroyControls=function(c){this.cached_controls.parentNode.removeChild(this.cached_controls);};b.controls=function(c){if(c){this.cached_controls.style.display="block";}else{this.cached_controls.style.display="none";}};})();
(function(){var c=YAHOO.util.Dom;var d=YAHOO.lang;var b=YAHOO.util.Event;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.BannerVideoOverlay=function(f,g){this.el=f;g=g||{};this.contextKey=g.contextKey||null;a.BannerVideoOverlay.superclass.constructor.call(this,f,g);_widgets.context.SelectedContext.subscribe(this.contextKey+"Change",function(){if(this.isInitialized&&this.initializeOverlay(f,g)){log.debug("Banner video overlay initailization completed.");this.show();}else{log.error("Failed to initailize the banner video overlay.");}},this,true);};YAHOO.extend(a.BannerVideoOverlay,a.BannerOverlay,{init:function(f,g){a.BannerVideoOverlay.superclass.init.apply(this,arguments);this.bannerOverlay=e.Dom.getElementByClassName("banner-overlay","div",this.el);this.container=e.Dom.getElementByClassName("container","div",this.el);this.bannerBackgroundImage=c.getStyle(this.bannerContent,"backgroundImage")||"none";},initializeOverlay:function(g,h){this.media=a.BannerVideoOverlay.getMedia(this.contextKey);if(this.media){var f=e.Dom.getElementByClassName("video-overlay","div",this.container);if(this.media.video&&this.media.video.source){this.videoPlayer=a.BannerVideoOverlay.getVideoPlayer(this.media,f,h.videoPlayer);if(!this.videoPlayer){log.error("Couldn't get the media player.");}else{c.replaceClass(this.bannerOverlay,"banner-image","banner-video");}}else{if(!this.media.image){log.error("Unable to initialize a banner video overlay with neither video nor image sources.");}else{log.debug("Hiding video overlay; no video associated.");c.setStyle(f,"visibility","hidden");c.replaceClass(this.bannerOverlay,"banner-video","banner-image");}}return true;}else{this.media={};log.debug("Couldn't fetch the media data.");return false;}},show:function(){e.Animation.resetScroll();if((this.media.video&&this.media.video.source)||(this.media.image&&this.media.image.source)){a.BannerVideoOverlay.superclass.show.call(this,this.media.image.source);c.setStyle(this.bannerOverlay,"visibility","visible");if(this.videoPlayer){this.videoPlayer.stopVideo();c.setStyle(this.bannerContent,"backgroundImage",this.bannerBackgroundImage);this.videoPlayer.launchVideo(this.media.id);}}else{log.error("Cannot show the overlay without any media content!");}var f=a.BannerVideoOverlay.getMacroData();if(f!==""){ngbsMetricsTracker.trackMacroData(f);}},hide:function(){c.setStyle(this.bannerOverlay,"visibility","hidden");a.BannerVideoOverlay.superclass.hide.call(this);if(this.videoPlayer){this.videoPlayer.stopVideo();}}});d.augmentObject(a.BannerVideoOverlay,{getMedia:function(f){var g=_widgets.context.SelectedContext.get(f);return g;},getVideoPlayer:function(j,f,k){k=k||{};try{var g;var m={};m={autoplay:1,data:[]};var i={};i.id=j.id;i.video=j.video.source;i.duration=j.video.duration;i.image=j.image.source;i.thumb=j.image.source;m.data.push(i);var l=j.id+"-VideoPlayer";g=_widgets.highlightsVideoPlayer=new a.VideoPlayer(f,{widgetID:k.id||l,jsInstanceName:"_widgets.highlightsVideoPlayer",videoMetadata:m,initialVideoID:j.id,swfPath:k.swfPath||"/ngtemplates/ngassets/com/forddirect/ng/widgets/video-player/player_ford.swf",width:k.width||591,height:k.height||333,bgColor:k.bgColor||"#000000",wmode:k.wmode||"transparent"});g.init();return g;}catch(h){log.error("Error while getting the video player: ",h);return null;}},getMacroData:function(){var g=_widgets.context.SelectedContext.get("currentView");var f;switch(g){case"innovation-sync-overview":f="techSyncVideo";break;case"innovation-electric-overview":f="techElectricVideo";break;default:f="";}return f;}});})();
(function(){var d=YAHOO.Bubbling;var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.ReserveFlip=function(f,g){g=g||{};g.contextKey="reservationContent";a.ReserveFlip.superclass.constructor.call(this,f,g);this.init(f,g);};YAHOO.extend(a.ReserveFlip,a.BannerVideoOverlay,{init:function(g,h){a.ReserveFlip.superclass.init.apply(this,arguments);var f=e.Dom.getElementByClassName("caption","div",g);this.domElements={desc:e.Dom.getElementByClassName("desc","p",f),points:e.Dom.getElementByClassName("points","ul",f)};if(this.isInitialized&&this.initializeOverlay(g,h)){log.debug("Banner video overlay initailization completed.");d.addDefaultAction("reserve-now",e.Actions.newHandler(function(){this.show();e.Animation.resetScroll();},this));}else{log.error("Banner video overlay initialization failed.");}_widgets.context.SelectedContext.subscribe("highlightChange",e.Event.newHandler(function(){this.hide();},this));},show:function(){var g=_widgets.context.SelectedContext.get("reservationContent").caption||null;var f=e.Text.asUL(g);this.domElements.desc.innerHTML=f.leadin;this.domElements.points.innerHTML=f.listHTML;a.ReserveFlip.superclass.show.apply(this,arguments);log.debug("Firing reserveOverview");ngbsMetricsTracker.trackMacroData("reserveOverview");}});})();
(function(){var d=YAHOO.util.Dom;var c=YAHOO.util.Event;var f="com.forddirect.ng.widgets";var b=getPackageForName(f);var g=getPackageForName("com.forddirect.ng.util");var a="buzz";var h="college-grad";b.ShareThis=function(i,j){j=j||{};this.init(i,j);};var e=b.ShareThis.prototype;e.init=function(i,k){try{if(i){c.addListener(i,"click",function(l,n){var m="";if(n.context===a){m="buzzShareThis";}else{if(n.context===h){m="collegeGradShareThis";}else{m="shareThis";}}log.debug("Track Metrics '"+m+"'");ngbsMetricsTracker.trackMicroData(m);dartTracker.trackEvent("shareit",ngbsMetricsTracker.nameplate(),1,ngbsMetricsTracker.getBrandType(),ngbsMetricsTracker.revealNameplate());dartTracker.trackEventsEfficient("shareit");},k);log.debug("Added listener for click on share-this.");}}catch(j){log.debug("Failed to add listener for click on share-this.");}};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var d=YAHOO.widget;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.ShoppingToolsList=function(f){};})();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var e=YAHOO.widget;var f=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.NameplateQuicklinks=function(j){var h=c.get("shop-tooltip");var g=f.Dom.getElementByClassName("more-shopping-tools-button","div",j);if(h&&g){this.flip=new a.BSTooltip(h,{context:[g,e.Overlay.TOP_RIGHT,e.Overlay.BOTTOM_RIGHT],effect:{effect:e.ContainerEffect.FADE,duration:0.1}});}this.applyCreditLink=f.Dom.getElementByClassName("apply-credit-link","a",j);var i=_widgets.context.PricingContext.getFordCreditLink();if(this.applyCreditLink&&i){this.applyCreditLink.href=i;}_widgets.context.PricingContext.subscribe("paymentDataChange",this.onPaymentDataUpdate,this,true);_widgets.context.PricingContext.subscribe("paymentTypeChange",this.onPaymentDataUpdate,this,true);};var d=a.NameplateQuicklinks.prototype;d.onPaymentDataUpdate=function(g){var h=_widgets.context.PricingContext.getFordCreditLink(true,true);if(this.applyCreditLink&&h){this.applyCreditLink.href=h;}};})();
(function(){var b=YAHOO.lang;var c=YAHOO.util.Dom;var d=YAHOO.Bubbling;var j=getPackageForName("com.forddirect.ng.widgets");var f=getPackageForName("com.forddirect.ng.util");var i="make";var a="modelName";var e="modelYear";var g="brochureCode";var h={OPTIN:"/services/lead/OptIn",REQUESTBROCHURE:"/services/lead/RequestBrochure"};j.LeadSubmission=function(k,l){j.LeadSubmission.superclass.constructor.apply(this,arguments);};b.extend(j.LeadSubmission,j.BaseWidget,{init:function(k,l){log.debug("lead-submission :: Start init.");l=l||{};this.onLeadCompleteSuccessEvent=new YAHOO.util.CustomEvent("onLeadCompleteSuccess");this.onLeadCompleteFailedEvent=new YAHOO.util.CustomEvent("onLeadCompleteFailed");if(!this.supportsCORS()){this.initFlash(k,l);}log.debug("lead-submission :: exit init.");},submit:function(k,m,l){if(this.matchesOrigin(k,window.location)){this.submitViaAJAX(k,m,l);}else{if(this.supportsCORS()){this.submitViaAJAX(k,m,l);}else{this.submitViaFlash(k,l);}}},matchesOrigin:function(k,l){l=l||window.location;return this.getOrigin(k)===this.getOrigin(l);},getOrigin:function(l){l=l||"";var m=new RegExp("^https?://[^/]+/?");var k=m.exec(l);return k?k[0].toLowerCase():null;},initFlash:function(l,n){this.flashWidgetID=n.flashWidgetID||"leadSubmissionSWF";this.flashContainerEl=f.Dom.getElementByClassName("lead-submission-flash-container","div",l);if(!_widgets[this.flashWidgetID]){log.debug("lead-submission :: Setting up flash.");if(!this.flashContainerEl){throw"Container Element for flash NOT Found!!! Expected a 'div' with class-name 'lead-submission-flash-container'.";}var m=_widgets.context.SiteContext.get("baseURL")||"";var k=m+"/ngtemplates/ngassets/com/forddirect/ng/widgets/lead-submission/lead-submission.swf";var o="instanceName=_widgets."+this.flashWidgetID;_widgets[this.flashWidgetID]=this.addWidget(this.flashContainerEl,j.VideoPlayer,{widgetID:this.flashWidgetID,jsInstanceName:"_widgets."+this.flashWidgetID,swfPath:k,width:2,height:1,bgColor:"#ffffff"});_widgets[this.flashWidgetID].init(o);_widgets[this.flashWidgetID].onSuccess=function(){log.debug("Lead submission was successfully.");this.leadSubmissionWidgetObj.onLeadSubmissionSuccess();};_widgets[this.flashWidgetID].onFailure=function(){log.debug("Lead submission failed.");this.leadSubmissionWidgetObj.onLeadSubmissionFailure();};_widgets[this.flashWidgetID].leadSubmissionWidgetObj=this;wtk.widgetInstances[this.flashWidgetID]=_widgets[this.flashWidgetID];}},supportsCORS:function(){if(YAHOO.env.ua.ie>0){return false;}return((typeof XMLHttpRequest)&&("withCredentials" in new XMLHttpRequest()));},createQueryString:function(m){var k="";for(var l in m){if(m.hasOwnProperty(l)){k+=(k?"&":"")+l+"="+escape(m[l]);}}return k;},sendRequest:function(k,m,l){if(m==="POST"){k.send(this.createQueryString(l));}else{k.send();}},appendData:function(l,m){var k=(l.indexOf("?")===-1)?"?":"&";return l+k+this.createQueryString(m);},submitViaAJAX:function(l,p,o){p=p||"POST";if(p==="GET"&&o){l=this.appendData(l,o);}if(typeof XMLHttpRequest){var n=new XMLHttpRequest();log.debug("Submitting CORS lead for CORS-Compliant browser");n.open(p,l,true);n.setRequestHeader("Content-Type","text/plain; charset=UTF-8");var k=this;var m=function(){if(n.readyState===4){if(n.status===200){k.onLeadSubmissionSuccess(n.responseText);}else{k.onLeadSubmissionFailure();}}};n.onreadystatechange=m;this.sendRequest(n,p,o);log.debug("After Lead Submission for CORS-Compliant browser");}},submitViaFlash:function(m,n){var l=_instances.flashFramework.thisMovie(this.flashWidgetID);var k=false;if(l&&l.submitLead){try{l.submitLead(m,n,this.flashWidgetID,"onSuccess","onFailure");k=true;}catch(o){log.error("Exception received emitting flash event.",o);}}else{log.error("Lead submission failed!!!!! 'submitLead' is not a method.");}return k;},format:function(k,t,w,p,x,z,o,m,s,v,n,B,l){var y=h[l.toUpperCase()];var C=_widgets.context.SelectedContext.get("make"),q="",u="",A="000";if(!y){throw"Lead request type submitted is invalid. It should be either OptIn or RequestBrochure";}var r=function(I,H){var G;var F="";for(G=0;G<I.length;G++){F+=I[G][H]+";";}return F;};if(s&&s.length>0){C=r(s,i);q=r(s,a);u=r(s,e);A=r(s,g);}var E={};E["customer.firstname"]=k;E["customer.lastname"]=t;E["customer.email"]=w;E["customer.phone"]=p;E["customer.address.street"]=x;E["customer.address.city"]=z;E["customer.address.state"]=o;E["customer.address.zipcode"]=m;E["purchase.timeframe"]=v;E.listid=B;E.qacodes=n;E.make=C;E.model=q;E.year=u;E.brochureCode=A;var D=_widgets.context.SiteContext.get("secure.baseURLForLeadSubmission")||_widgets.context.SiteContext.get("leadSubmission.baseURL")||"";return this.submit(D+y,"GET",E);},onLeadSubmissionSuccess:function(k){this.onLeadCompleteSuccessEvent.fire("Success");},onLeadSubmissionFailure:function(k){this.onLeadCompleteFailedEvent.fire("Failed");}});})();
(function(){var u=YAHOO.util.Dom;var r=YAHOO.DHTMLForms;var t=YAHOO.util.Event;var l=getPackageForName("com.forddirect.ng.widgets");var j=getPackageForName("com.forddirect.ng.util");var f="  -- Select a State --  ";var h=3;var a="@";var m="|";var v="both";var s="mail";var c="email";var b=c;var e="OptIn";var d="RequestBrochure";var i={Ford:"0793A",Lincoln:"0794A"};var o=[];var p={isApplicable:function(x,y){log.debug("in GetUpdatesForm :: validateEmail :: isApplicable");return true;},apply:function(y,z){log.debug("in GetUpdatesForm :: validateEmail :: apply");var x=u.get("f:get-updates-email-confirmation");return x&&y.value===x.value&&y.value.match(/^[^@]+@[^@\.]+\.[^@]+$/);},getDisplayText:function(){log.debug("in GetUpdatesForm :: validateEmail :: getDisplayText");return"Please enter a valid e-mail address.";}};var k={isApplicable:function(){log.debug("in GetUpdatesForm :: validateEmailConfirmation :: isApplicable");return true;},apply:function(z,A){log.debug("in GetUpdatesForm :: validateEmailConfirmation :: apply");var x=false;var y=u.get("f:get-updates-email");return y&&z.value===y.value&&z.value.match(/^[^@]+@[^@\.]+\.[^@]+$/);},getDisplayText:function(){return null;}};var n={isApplicable:function(x,y){log.debug("in GetUpdatesForm :: validateZIPCode :: isApplicable");return true;},apply:function(x,y){log.debug("in GetUpdatesForm :: validateZIPCode :: apply");return _widgets.context.UserContext.validateZIPCode(x.value);},getDisplayText:function(){log.debug("in GetUpdatesForm :: validateZIPCode :: getDisplayText");return"Please enter a valid 5 digit ZIP code.";}};var g={isApplicable:function(x,y){log.debug("in GetUpdatesForm :: validateState :: isApplicable");return true;},apply:function(z,A){log.debug("in GetUpdatesForm :: validateState :: apply");var y=u.get("yui_top_f:get-updates-state").innerHTML.indexOf("Select a State")===-1;var x=u.get("yui_f:get-updates-state");if(y){u.removeClass(x,"error");}else{u.addClass(x,"error");}return y;},getDisplayText:function(){log.debug("in GetUpdatesForm :: validateState :: getDisplayText");return"Please enter a State.";}};var q={isApplicable:function(x,y){log.debug("in GetUpdatesForm :: validateSelectedVehicles :: isApplicable");return true;},setUnselectedVehicleDisabled:function(C,B){var A={};var y;for(y=0;y<C.length-1;++y){A[C[y]]=1;}var x=u.getElementsByClassName("select-vehicles")[0];var z=u.getElementsByClassName("nameplate-id","input",x);for(y in z){if(!A[z[y].value]){z[y].disabled=B;}}},apply:function(z,A){log.debug("in GetUpdatesForm :: validateSelectedVehicles :: apply");var x=false;var y=[];if(z&&z.value){y=z.value.split(a);}if(y.length<=h+1){this.setUnselectedVehicleDisabled(y,false);}else{this.setUnselectedVehicleDisabled(y,true);}x=(y.length-1)<=h;return x;},getDisplayText:function(){log.debug("in GetUpdatesForm :: validateSelectedVehicles :: getDisplayText");return"You may only select a total of 3 vehicles.";}};var w={isApplicable:function(x,y){log.debug("in GetUpdatesForm :: validateCityName :: isApplicable");return true;},apply:function(z,A){log.debug("in GetUpdatesForm :: validateCityName :: apply");var y=z.value;var x=false;y=y.replace(/^\s+/,"");if(/[^a-z\s&'-\.]/gi.test(y)||y.length===0){y.value="";return x;}x=true;return x;},getDisplayText:function(){log.debug("in GetUpdatesForm :: validateCityName :: getDisplayText");return"You may only enter text values";}};l.GetUpdatesForm=function(x,z){log.debug("Inside Get Updates Form Widget Constructor");z=z||{};if(!z.gumode){z.gumode=b;}l.GetUpdatesForm.superclass.constructor.apply(this,arguments);this.el=x;var y=u.get("lead-submission");this.leadSubmission=new l.LeadSubmission(y);this.stateSelection=new r.SelectBox("f:get-updates-state",{formBody:this.formBody});this.stateSelection.render();u.get("yui_top_f:get-updates-state").innerHTML=f;this.inputFields=_widgets.context.SelectedContext.get("getUpdatesForm.inputFields")||{};this.zipCodeField=u.get("f:get-updates-zip-code");t.addListener(u.getElementsByClassName("communication-mode","input",x),"click",this.updateFormState,null,this);this.timeToBuyRadioButtons=u.getElementsByClassName("gu-timeToBuy","input",x);t.addListener(this.timeToBuyRadioButtons,"click",this.updateTimeToBuy,null,this);this.vehicleCheckBoxes=u.getElementsByClassName("nameplate-id","input",x);t.addListener(this.vehicleCheckBoxes,"click",this.updateNameplateID,null,this);this.successfulSubmissionEvent=new YAHOO.util.CustomEvent("successfulSubmission");this.successfulSubmissionEvent.subscribe(this.handleSuccess,this,true);this.fieldValidationErrorEvent=new YAHOO.util.CustomEvent("fieldValidationErrorEvent");if(this.leadSubmission&&this.leadSubmission.onLeadCompleteSuccessEvent){this.leadSubmission.onLeadCompleteSuccessEvent.subscribe(this.handleLeadSubmissionSuccess,this,true);}this.updateForm(z.gumode,z.gutitle);};YAHOO.lang.extend(l.GetUpdatesForm,l.FormWidget,{init:function(x,y){log.debug("Get Updates Form Widget Init");l.GetUpdatesForm.superclass.init.apply(this,arguments);this.formBody=u.get("get-updates-form");this.fieldDivs=u.getElementsByClassName("form-field","div",this.el);this.mailBox=u.get("mail-checkbox");this.emailBox=u.get("email-checkbox");this.globalError=u.get("get_updates_global_error");this.instructionalMessage=u.get("get_updates_instructional_error");this.selectedVehiclesMessage=u.get("gu-selectVehicles");this.selectedModelsList=j.getElementByClassName("selected-models-list","ul",this.el);_widgets.context.UserContext.onInvalidZIPCode.subscribe(this.handleZIPCodeError,this,true);log.debug("Get Updates Form Widget Init End");},updateTimeToBuy:function(y){log.debug("in GetUpdatesForm :: updateTimeToBuy");var x=u.get("f:get-updates-time-to-buy");if(x){u.batch(this.timeToBuyRadioButtons,function(z){if(z.checked){x.value=z.value;}});}},updateNameplateID:function(y){log.debug("in GetUpdatesForm :: updateNameplateID");var A=u.get("f:get-updates-select-vehicles");if(A){var x="";u.batch(this.vehicleCheckBoxes,function(B){if(B.checked){x+=B.value+a;}});A.value=x;ngbsMetricsTracker._gu_metrics=ngbsMetricsTracker._gu_metrics||{};if(typeof x==="string"&&x!==""){var z=ngbsMetricsTracker._gu_metrics.defaultVehicle||"";if(x.indexOf(z)!==-1&&z!==""){ngbsMetricsTracker._gu_metrics.vehicle=z;}else{ngbsMetricsTracker._gu_metrics.vehicle=x.split(a)[0];}}else{ngbsMetricsTracker._gu_metrics.vehicle="";}}this.updateField(A);},updateForm:function(y,A){log.debug("in GetUpdatesForm :: updateForm");var x=function(B){if(B==="mail+email"||B==="email+mail"){B=v;}else{if(!(B===s||B===c||B===v)){B=b;}}return B;};var z=x(y);if(A==="Brochures"){this.mailBox.disabled=true;}else{this.mailBox.disabled=false;}if(z===v){this.mailBox.checked=true;this.emailBox.checked=true;}else{if(z===s){this.mailBox.checked=true;this.emailBox.checked=false;}else{if(z===c){this.mailBox.checked=false;this.emailBox.checked=true;}else{this.mailBox.checked=false;this.emailBox.checked=false;}}}this.updateFormState();},updateFormState:function(){log.debug("in GetUpdatesForm :: updateFormState");if(this.mailBox.checked&&!this.emailBox.checked){this.state=s;}else{if(!this.mailBox.checked&&this.emailBox.checked){this.state=c;}else{if(this.mailBox.checked&&this.emailBox.checked){this.state=v;}else{this.state="none";u.addClass(this.globalError,"show");}}}if(this.state==s||this.state==c||this.state==v){this.populateFields(this.state);}},populateFields:function(y){log.debug("in GetUpdatesForm :: populateFields");u.removeClass(this.globalError,"show");u.removeClass(this.instructionalMessage,"show");this.zipCodeField.value=this.zipCodeField.value;var x=this.inputFields;u.batch(this.fieldDivs,function(A){var C=A.getAttribute("id");var z=j.getElementByClassName("optionality-indicator","span",A);var B=j.getElementByClassName("input-field","",A);if(z){z.innerHTML="";}u.removeClass(A,"error");if(x[C][y]==="notrequired"){u.replaceClass(A,"necessary","hidden");u.replaceClass(B,"necessary","hidden");}else{if(x[C][y]==="necessary"){if(z){z.innerHTML="*";}u.replaceClass(A,"hidden","necessary");u.replaceClass(B,"hidden","necessary");}else{if(x[C][y]==="optional"){u.removeClass(A,"hidden");u.removeClass(A,"necessary");u.removeClass(B,"hidden");u.removeClass(B,"necessary");}}}});if(y==s||y==v){this.showStateSelection();}else{this.hideStateSelection();}},handleSubmission:function(z){log.debug("in GetUpdatesForm :: handleSubmission");var x=this.areFieldInputsValid(z);if(!x){this.displayGlobalError();}var A=this.areSelectedVehiclesValid(z);if(!A){this.displaySelectedVehiclesError();}var y=u.get("f:get-updates-zip-code").value||"";if(y&&_widgets.context.UserContext.validateZIPCode(y)){j.getData("/services/geo/States?postalCode="+y,null,null,null,null,function(E){var B=false;var C=u.get("f:get-updates-state");if(u.hasClass(C,"necessary")){var D=E.responseXML.documentElement.getElementsByTagName("State")[0].firstChild.nodeValue;if(C.value!=D){B=true;this.showStateError();}}if(x&&!B){this.submitLead(z);}},function(){this.showZipCodeError();},this);}else{this.showZipCodeError();}if(!x||!A||!y||!_widgets.context.UserContext.validateZIPCode(y)){this.fieldValidationErrorEvent.fire();}if(this.mailBox.checked&&this.emailBox.checked){if(this.focusFirstNameError()){}else{if(this.focusLastNameError()){}else{if(this.focusAddressError()){}else{if(this.focusCityError()){}else{if(this.focusZipCodeError()){}else{if(this.focusEmailError()){}else{if(this.focusEmailConfirmationError()){}}}}}}}}else{if(this.mailBox.checked&&!this.emailBox.checked){if(this.focusFirstNameError()){}else{if(this.focusLastNameError()){}else{if(this.focusAddressError()){}else{if(this.focusCityError()){}else{if(this.focusZipCodeError()){}}}}}}else{if(!this.mailBox.checked&&this.emailBox.checked){if(this.focusZipCodeError()){}else{if(this.focusEmailError()){}else{if(this.focusEmailConfirmationError()){}}}}}}},updateField:function(y){var x=l.GetUpdatesForm.superclass.updateField.apply(this,arguments);if(this.stateSelection){this.stateSelection.updatePosition();}return x;},handleZIPCodeError:function(x){log.debug("in GetUpdatesForm :: handleZIPCodeError");this.updateFieldError(this.zipCodeField,n);},showStateSelection:function(){log.debug("in GetUpdatesForm :: showStateSelection");u.removeClass("yui_menu_f:get-updates-state","disabled");u.removeClass("yui_f:get-updates-state","disabled");u.get("yui_menu_f:get-updates-state").style.visibility="hidden";u.get("yui_menu_f:get-updates-state").style.height="200px";u.removeClass("yui_f:get-updates-state","error");if(this.stateSelection){this.stateSelection.updatePosition();}},hideStateSelection:function(){log.debug("in GetUpdatesForm :: hideStateSelection");u.addClass("yui_menu_f:get-updates-state","disabled");u.addClass("yui_f:get-updates-state","disabled");var x=u.get("gu-state");if(!u.hasClass(x,"hidden")){u.addClass(x,"hidden");}if(u.hasClass(x,"necessary")){u.removeClass(x,"necessary");}},getValidations:function(){log.debug("in GetUpdatesForm :: getValidations");var x={"f:get-updates-email":p,"f:get-updates-email-confirmation":k,"f:get-updates-zip-code":n,"f:get-updates-state":g,"f:get-updates-select-vehicles":q,"f:get-updates-city":w};return x;},handleLeadSubmissionSuccess:function(x){log.debug("in GetUpdatesForm :: handleLeadSubmissionSuccess");this.successfulSubmissionEvent.fire("success");},handleSuccess:function(x){log.debug("in GetUpdatesForm :: handlesuccess");var z=u.getElementsByClassName("nameplate-id","input",this.el);var y=j.getElementByClassName("selected-vehicles","h3",this.el);var A="";var B="";u.batch(z,function(C){if(C&&C.checked){if(u.hasClass(C,"current")){A+="<li>"+C.alt.toUpperCase()+"</li>";}else{if(u.hasClass(C,"future")){B+="<li>"+C.alt.toUpperCase()+"</li>";}else{if(u.hasClass(C,"commercial")){B+="<li>"+C.alt.toUpperCase()+"</li>";}}}}});B+=A;if(B!==""){this.selectedModelsList.innerHTML=B;if(u.hasClass(y,"hidden")){u.removeClass(y,"hidden");}}else{u.addClass(y,"hidden");}u.addClass("get-updates-wrapper","hide");u.removeClass("submission-confirmation","hide");j.Animation.resetScroll();},refreshForm:function(){log.debug("in GetUpdatesForm :: refreshForm");var B=u.get("yui_top_f:get-updates-state");if(B){B.innerHTML=f;u.removeClass(B,"error");}var A=function(){var G=_widgets.context.SelectedContext.get("getUpdatesForm.forVehicle")||{};var F=_widgets.context.SelectedContext.get("getUpdatesForm.futureVehicles")||{};var E="";if(typeof guFormVehicleType!=="undefined"){if(guFormVehicleType==="commercial"){var D=u.get("brochureCode5");if(D){var C=D.selectedIndex;if(D.options[C].value=="FTCC ConsumerBrochure"){return"Ford|Truck Commercial Connection|2011|truck|Truck Commercial Connection|329";}}}}if(G&&typeof G.make==="string"&&typeof G.model==="string"&&(typeof G.year==="string"||typeof G.year==="number")){E=G.make+m+G.model+m;if(F&&F[G.model]&&F[G.model].year===G.year){E=E+G.year;}}return E;};var x=this.getFields();for(var z in x){if(x[z].id==="f:get-updates-select-vehicles"){x[z].value="";var y=A();ngbsMetricsTracker._gu_metrics={};ngbsMetricsTracker._gu_metrics.vehicle="";ngbsMetricsTracker._gu_metrics.defaultVehicle="";u.batch(this.vehicleCheckBoxes,function(C){if(j.Text.startsWith(C.value,y)){x[z].value=C.value+a;C.checked=true;ngbsMetricsTracker._gu_metrics.vehicle=C.value;ngbsMetricsTracker._gu_metrics.defaultVehicle=C.value;}else{C.checked=false;}});}else{x[z].value="";if(x[z].id==="f:get-updates-time-to-buy"){u.batch(this.timeToBuyRadioButtons,function(C){C.checked=false;});}}}this.selectedModelsList.innerHTML="";u.removeClass(this.globalError,"show");u.removeClass(this.instructionalMessage,"show");u.removeClass(this.fieldDivs,"error");},getSourceID:function(z){log.debug("in GetUpdatesForm :: getSourceID");var y;if(this.state===s){y=this._sourceid;}else{var x=_widgets.context.SelectedContext.get("make");if(this._sourceid){y=i[x]+"|"+this._sourceid;}else{y=i[x];}}return y;},getCampaignID:function(){log.debug("in GetUpdatesForm :: getCampaignID");return this._campaignid;},submitLead:function(M){log.debug("in GetUpdatesForm :: submitLead");var y=d;if(this.state==c){y=e;}u.removeClass(this.instructionalMessage,"show");var D,O;D=this.getSourceID(this.state);O=this.getCampaignID();var N=u.get("f:get-updates-select-vehicles");var x,H,J,K,L,E,B,Q,C,I;x=u.get("f:get-updates-first-name").value||"";H=u.get("f:get-updates-last-name").value||"";J=u.get("f:get-updates-email").value||"";K=u.get("f:get-updates-address").value||"";L=u.get("f:get-updates-city").value||"";var G=_widgets.context.SelectedContext.get("getUpdatesForm.states")||{};var z=u.get("yui_top_f:get-updates-state");E=G[z.innerHTML]?G[z.innerHTML]:"";B=u.get("f:get-updates-zip-code").value||"";I=u.get("f:get-updates-time-to-buy").value||"";var F="";if(N&&N.value!==""){F=N.value.replace(new RegExp("@$","g"),"");Q=F.split(a);var R;var A=[];for(R=0;R<Q.length;R++){C=Q[R].split(m);var P={};P.make=C[0];P.modelName=C[1];P.modelYear=C[2];P.brochureCode=C[5];log.debug("in GetUpdatesForm :: submitLead :: make : "+C[0]+" , model : "+C[1]+", year : "+C[2]+", brochureCode : "+C[5]);A[R]=P;}this.leadSubmission.format(x,H,J,"",K,L,E,B,A,I,D,O,y);}else{this.leadSubmission.format(x,H,J,"",K,L,E,B,[],I,D,O,y);}},areFieldInputsValid:function(y){var A=l.GetUpdatesForm.superclass.handleSubmission.apply(this,arguments);var z=u.get("f:get-updates-select-vehicles");var x=q.apply(z,null);return A&&x;},areSelectedVehiclesValid:function(x){var y=u.get("f:get-updates-select-vehicles");return q.apply(y,null);},displayGlobalError:function(){log.debug("in GetUpdatesForm :: displayGlobalError");u.addClass(this.instructionalMessage,"show");j.Animation.resetScroll();j.getElementByClassName("bd","div","get-updates-flip").scrollTop=0;},displaySelectedVehiclesError:function(){log.debug("in GetUpdatesForm :: displaySelectedVehiclesError");u.addClass(this.selectedVehiclesMessage,"error");j.Animation.resetScroll();j.getElementByClassName("bd","div","get-updates-flip").scrollTop=0;},showZipCodeError:function(){log.debug("in GetUpdatesForm :: showZipCodeError");var y=u.get("gu-zipCode");var x=j.getElementByClassName("input-field","",y);if(!u.hasClass(y,"error")){u.addClass(y,"error");}this.displayGlobalError();},showStateError:function(){log.debug("in GetUpdatesForm :: showZipCodeError");var x=u.get("gu-state");var y=u.get("yui_f:get-updates-state");u.addClass(x,"error");u.addClass(y,"error");this.displayGlobalError();},focusFirstNameError:function(){log.debug("in GetUpdatesForm :: focusFirstNameError");var x=u.get("gu-firstName");var y=j.getElementByClassName("input-field","",x);if(u.hasClass(x,"error")){if(!u.hasClass(y,"focus")){u.addClass(y,"focus");}y.focus();return true;}return false;},focusLastNameError:function(){log.debug("in GetUpdatesForm :: focusLastNameError");var y=u.get("gu-lastName");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusAddressError:function(){log.debug("in GetUpdatesForm :: focusAddressError");var y=u.get("gu-address");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusCityError:function(){log.debug("in GetUpdatesForm :: focusCityError");var y=u.get("gu-city");var x=j.getElementByClassName("input-field","",y);if(!u.hasClass(x,"focus")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusZipCodeError:function(){log.debug("in GetUpdatesForm :: focusZipCodeError");var y=u.get("gu-zipCode");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusEmailError:function(){log.debug("in GetUpdatesForm :: focusEmailError");var x=u.get("gu-email");var y=j.getElementByClassName("input-field","",x);if(u.hasClass(x,"error")){if(!u.hasClass(y,"focus")){u.addClass(y,"focus");}y.focus();return true;}return false;},focusEmailConfirmationError:function(){log.debug("in GetUpdatesForm :: focusEmailConfirmationError");var y=u.get("gu-emailConfirmation");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;}});})();
(function(){var c=YAHOO.lang;var j=YAHOO.util.Dom;var g=YAHOO.util.Event;var p=getPackageForName("com.forddirect.ng.widgets");var n=getPackageForName("com.forddirect.ng.util");var d="Thank You!";var a="Brochures";var e="Get Updates";var i="email";var o="enabled";var b="0848";var m="Get Updates";var k={Ford:"310124",Lincoln:"320864",Mercury:"320863"};var l=false;var h={Ford:{"shop-tooltip":312727,globalnav:312726,"nameplate-header":312725,"nameplate-nav-menu":312725,shoppingTools:312725,"nameplate-quicklinks":312724,"banner-overlay":312723,shoppingToolsMap:312720,"shopping-tools-list":312720},Lincoln:{"shop-tooltip":320881,globalnav:320880,"nameplate-header":320879,"nameplate-quicklinks":320879,"banner-overlay":320877,shoppingToolsMap:320876,"shopping-tools-list":320876}};p.GetUpdatesFlip=function(s,t){if(_instances.getUpdatesFlip){throw"The get Updates Flip can only have a single instance.";}t=t||{};if(!t.gumode){t.gumode=i;}this.el=s;var q=_widgets.context.SelectedContext.get("make");p.GetUpdatesFlip.superclass.constructor.apply(this,arguments);this.panelEl=n.getElementByClassName("bs-panel","div",this.el);var u=n.getElementByClassName("get-updates-form","div",this.panelEl);if(this.panelEl&&u){this.panel=new p.BSPanel(this.panelEl,{underlay:"roundedShadow"});this.formWidget=new p.GetUpdatesForm(u,t);if(this.formWidget&&this.formWidget.successfulSubmissionEvent){this.formWidget.successfulSubmissionEvent.subscribe(function(z){this.setFlipTitle(d);ngbsMetricsTracker._getUpdates=ngbsMetricsTracker._getUpdates||{};if(!ngbsMetricsTracker._getUpdates.track){ngbsMetricsTracker._getUpdates.toolDescriptor=this.formWidget.state||i;if(m==a){if(this.formWidget.emailBox.checked){log.debug("Tracking metrics 'brochuresMailedAndEmailedConfirm'.");ngbsMetricsTracker.trackMacroData("brochuresMailedAndEmailedConfirm");dartTracker.trackEventsEfficient("eopt");}else{log.debug("Tracking metrics 'brochuresMailedConfirm'.");ngbsMetricsTracker.trackMacroData("brochuresMailedConfirm");dartTracker.trackEventsEfficient("br");}}else{if(m==e){log.debug("Tracking metrics 'getUpdatesThankYou'.");ngbsMetricsTracker.trackMacroData("getUpdatesThankYou");dartTracker.trackEventsEfficient("up");}}ngbsMetricsTracker._getUpdates.track=true;}},this,true);}if(this.formWidget&&this.formWidget.fieldValidationErrorEvent){this.formWidget.fieldValidationErrorEvent.subscribe(function(z){if(m==a&&_widgets.context.SelectedContext.get("make").toLowerCase()=="ford"){log.debug("Tracking metrics 'brochuresMailedContactError'.");ngbsMetricsTracker.trackMacroData("brochuresMailedContactError");}});}var r=_widgets.context.SelectedContext.get("getUpdatesFlip.params")||{};if(r&&r.guflip&&r.guflip===o){var y=r.gutitle||"";var v=r.gumode||"";if(this.formWidget){var x=r.sourceid;var w=r.campaignid;this.setNGPParams(x,w);}g.onDOMReady(function(){this.launchFlip(y,v);},null,this);}}if(this.panelEl){n.Dom.getElementByClassName("container-close",null,this.panelEl,function(z){g.on(z,"click",function(A){l=false;j.get("get-updates-flip").style.display="none";if(j.get("yui_change-model")){j.get("yui_change-model").style.display="block";}this.closeLightbox();if(this.formWidget){if(this.formWidget.stateSelection){this.formWidget.hideStateSelection();}ngbsMetricsTracker._getUpdates=ngbsMetricsTracker._getUpdates||{};if(!ngbsMetricsTracker._getUpdates.track){if(m!=a){ngbsMetricsTracker._getUpdates.toolDescriptor=this.formWidget.state||i;log.debug("Tracking metrics 'getUpdatesClose'.");ngbsMetricsTracker.trackMicroData("getUpdatesClose");ngbsMetricsTracker._getUpdates.track=true;}}}},null,this);},this);}YAHOO.Bubbling.addDefaultAction("get-updates-link",n.Actions.newHandler(function(z,A){n.Animation.resetScroll();this.launch(z,A);return true;},this));if(_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent){_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent.subscribe(this.hideOverlays,this,true);}};c.extend(p.GetUpdatesFlip,YAHOO.util.Element,{initAttributes:function(q){p.GetUpdatesFlip.superclass.initAttributes.apply(this,arguments);}});var f=p.GetUpdatesFlip.prototype;f.launch=function(r,s){var x="";var w="";if(r&&r.getAttribute&&r.getAttribute("guparameters")){var u=r.getAttribute("guparameters");var v=n.getArgumentMap(u)||{};x=v.gutitle||"";w=v.gumode||"";}var q=function(A){var B;var z=_widgets.context.SelectedContext.get("make");var y=j.getAncestorBy(A,function(E){var C=false;var D;if(E.id){for(D in h[z]){if(D==E.id){C=true;break;}}}return C;});if(y){B=h[z][y.id];}return B;};var t=q(r);this.setNGPParams(t);this.launchFlip(x,w);};f.launchFlip=function(s,r){s=s||e;r=r||i;if(!l){l=true;if(this.panel){if(j.get("yui_change-model")){j.get("yui_change-model").style.display="none";j.get("yui_menu_change-model").style.visibility="hidden";}this.openLightbox();j.get("get-updates-flip").style.display="block";j.addClass("submission-confirmation","hide");j.removeClass("get-updates-wrapper","hide");this.setFlipTitle(s);this.panel.center();this.panel.show();this.refreshFlip();if(this.formWidget&&this.formWidget.updateForm){this.formWidget.updateForm(r,s);}if(s==a){log.debug("Tracking metrics 'brochuresMailedContact'.");ngbsMetricsTracker.trackMacroData("brochuresMailedContact");m=a;}else{if(s==e){log.debug("Tracking metrics 'getUpdatesInfo'.");ngbsMetricsTracker.trackMacroData("getUpdatesInfo");m=e;}}ngbsMetricsTracker._getUpdates={};ngbsMetricsTracker._getUpdates.track=false;var q=j.get("f:get-updates-first-name");if(!j.hasClass(q,"focus")){j.addClass(q,"focus");}q.focus();}else{log.warn("Could not find flip panel.");}}_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent.fire();};f.openLightbox=function(){};f.closeLightbox=function(){};f.setFlipTitle=function(q){if(this.panel){this.panel.setPanelHeader(q);}};f.refreshFlip=function(){if(this.formWidget&&this.formWidget.refreshForm){this.formWidget.refreshForm();}if(this.panelEl){n.Dom.getElementByClassName("bd","div",this.el).scrollTop=0;}};f.setNGPParams=function(s,t){var r=_widgets.context.SelectedContext.get("make");var q="";if(s){q=b+s;}if(!t){t=k[r];}if(this.formWidget){this.formWidget._sourceid=q;this.formWidget._campaignid=t;}};f.hideOverlays=function(){try{if(td_site&&td_site.page&&td_site.page.nav&&td_site.page.nav.extClose){td_site.page.nav.extClose();}}catch(q){log.warn("get-updates-flip :: "+q);}};f.populateZip=function(){try{var t=getZipCodeFrmCookie();var u=_widgets.context.UserContext.get("zIPCode");if((u!=="")&&(t=="")){t=u;}var s=window.location.href;if(t!==""){if(s.indexOf("zip")<0&&(typeof(t)!="undefined")){}else{var q=getZipCodeFromQuery(s);if(q!==""){t=q;}}}else{var q=getZipCodeFromQuery(s);if(q!==""){t=q;}}zipCodeInputBox=document.getElementById("f:get-updates-zip-code");if(typeof(t)!="undefined"){_instances.cookieUtils.setZIPCode(t);zipCodeInputBox.value=t;}else{zipCodeBox.value="";}}catch(r){log.warn("get-updates-flip :: populateZip ::"+r);}};})();
(function(){var g=YAHOO.lang;var c=YAHOO.util.Dom;var f=YAHOO.Bubbling;var b=YAHOO.util.Event;var a=getPackageForName("com.forddirect.ng.widgets");var h=getPackageForName("com.forddirect.ng.util");var e=c.get("axz-price-update");h.Dom.getElementByClassName("container-close",null,e,function(i){b.on(i,"click",function(j){e.style.display="none";YAHOO.util.Dom.setStyle(h.Dom.getElementByClassName("lincoln-matte"),"display","none");},null,this);},this);function d(){YAHOO.util.Dom.getElementsByClassName("PlanType",null,e,function(i){i.innerHTML=td_site.pricing.getPlanTypeDisplay();},this);if(td_site.pricing.shouldShowMessage()){YAHOO.util.Dom.setStyle("axz-price-update","display","block");YAHOO.util.Dom.setStyle("axz-price-update","visibility","visible");YAHOO.util.Dom.setStyle(h.Dom.getElementByClassName("lincoln-matte"),"display","block");YAHOO.util.Dom.setStyle(h.Dom.getElementByClassName("lincoln-matte"),"visibility","visible");td_site.pricing.setMessageShown();}}b.onDOMReady(d);})();
