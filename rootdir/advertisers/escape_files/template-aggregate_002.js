(function(){var a=getPackageForName("com.forddirect.ng.widgets");var e=getPackageForName("com.forddirect.ng.util");var d=YAHOO.lang;var c="exterior";var b="interior";a.OverviewBanner=function(f,g){a.OverviewBanner.superclass.constructor.apply(this,arguments);};d.extend(a.OverviewBanner,a.BaseWidget,{init:function(i,f){a.OverviewBanner.superclass.init.apply(this,arguments);var j=document.getElementById("overviewBannerLink");if(j!==null){var p=_widgets.context.SelectedContext.get("nameplate");document.getElementById("overviewBannerLink").onclick=function(){ngbsMetricsTracker.trackMicroData("overviewBannerLink");document.location=document.getElementById("overviewBannerLink").getAttribute("link");};}var n=_widgets.context.SelectedContext.get("billboardSWF");if(n){var o=n.source;var m=n.parameters;_widgets.billboardVideoPlayer=this.addWidget("billboard-video-player",a.VideoPlayer,{jsInstanceName:"_widgets.billboardVideoPlayer",swfPath:o,width:1200,height:565});var l="";if(m){var r;for(r in m){if(m.hasOwnProperty(r)){var h=m[r];l+=h.id+"="+(h.source||h.value)+"&";}}}l+="instanceName=_widgets.billboardVideoPlayer";_widgets.billboardVideoPlayer.init(l);var g={exterior:false,interior:false};var q=function(t){if(t.colorizerType.toLowerCase()===c&&!g.exterior){log.debug("Tracking metrics 'exteriorColorizer'.");ngbsMetricsTracker.trackMicroData("exteriorColorizer");g.exterior=true;}else{if(t.colorizerType.toLowerCase()===b&&!g.interior){log.debug("Tracking metrics 'interiorColorizer'.");ngbsMetricsTracker.trackMicroData("interiorColorizer");g.interior=true;}}};var s=function(u){var t={type:u[0],args:u[1]};if(t.type==="launch-360"){log.debug("Tracking metrics 'home360popup'.");ngbsMetricsTracker._360popup={};if(typeof t.args==="object"){ngbsMetricsTracker._360popup=t.args;}ngbsMetricsTracker.trackMicroData("home360popup");}else{if(t.type==="rotate-360"){log.debug("Tracking metrics 'home360rotateClick'.");ngbsMetricsTracker._360popup={};if(typeof t.args==="object"){ngbsMetricsTracker._360popup=t.args;}ngbsMetricsTracker.trackMicroData("home360rotateClick");}else{if(t.type==="colorChange"){q(t.args);}}}log.debug("Flash event :: "+t.type+" has been caught by handler onFlashEvent.");};_widgets.billboardVideoPlayer.onFlashEvent=e.Event.newHandler(s,this);}var k=_widgets.context.SelectedContext.get("initialColorizerTrim");if(k){_widgets.context.SelectedContext.set("trim",k);}}});})();
(function(){var d=YAHOO.util.Dom;var c=YAHOO.util.Event;var h=getPackageForName("com.forddirect.ng.util");var o=getPackageForName("com.forddirect.ng.widgets");var a="highlight";var k="highlightVideoPlayer";var g="";var b="model";var n="/ngtemplates/ngassets/com/forddirect/ng/widgets/video-player/player_ford.swf";var m=593;var l=348;var f="3";var j=412;var e=943;var i="highlightPlayer";o.OverviewBannerVideoOverlay=function(r,s){o.OverviewBannerVideoOverlay.superclass.constructor.apply(this,arguments);var q="model.highlights";s=s||{};var p=s.contextKey||"";if(p==="Sync"||p==="ecoboost"||p==="electric"){b="innovationTopic";g=p;q="innovationTopic.highlights";}if(!td_site.videoPlayer.hasGroup(i)){td_site.videoPlayer.addNew(i,false,{width:593,height:348,flipObj:"banner-overlay",divHolder:"td_overlayVideo",id:"highlightVideoPlayer",playList:td_site.videoPlayer.u.convertAll(q),position:"static"},0);}};YAHOO.extend(o.OverviewBannerVideoOverlay,o.BannerOverlay,{init:function(q,s){o.OverviewBannerVideoOverlay.superclass.init.apply(this,arguments);var r=h.Dom.getElementByClassName("banner-overlay","div",q);var p=h.Dom.getElementByClassName("caption","div",r);this.domElements={overlay:r,caption:p,videooverlay:h.Dom.getElementByClassName("overlay-video","div",r),feature:h.Dom.getElementByClassName("feature","p",p),title:h.Dom.getElementByClassName("title","p",p),desc:h.Dom.getElementByClassName("desc","p",p),points:h.Dom.getElementByClassName("points","ul",p),ctas:h.Dom.getElementByClassName("ctas","div",p),ctabutton:h.Dom.getElementByClassName("cta-button","a",p),featurelink:h.Dom.getElementByClassName("cta-button-feature","span",p),disclaimers:h.Dom.getElementByClassName("disclaimers","ul",p),featurebutton:h.Dom.getElementByClassName("cta-button-div","div",p)};this.domElements.overlay.baseClasses=this.domElements.overlay.className;this.videoPlayer=null;_widgets.context.SelectedContext.subscribe(a+"Change",function(u){var t=u.newValue;this.initFlashVideoPlayer(t);if(t&&t!==""){this.show(t);}},this,true);},show:function(B){log.debug("... showing '"+B+"'.");h.Animation.resetScroll();d.setStyle(this.domElements.overlay,"visibility","visible");d.setStyle(this.domElements.overlay,"display","block");var t=_widgets.context.SelectedContext.get(b+".highlights");var z=_widgets.context.SelectedContext.get("model.videos");var u=_widgets.context.SiteContext.get("url.media");var O;var x;if(g!="Sync"&&g!="electric"&&typeof(_widgets.context.SelectedContext.get("nameplate.sitemap")["nameplate-feature-selection"])!="undefined"){O="nameplate-feature-selection";x=_widgets.context.SelectedContext.get("nameplate.sitemap")[O].url;}var J=_widgets.context.SelectedContext.get(b+".features.categories");var L=_widgets.context.SelectedContext.get("site.shoppingtools");var Q=t[B];var w=Q.carsid;var K;var F=false;if(w!=undefined){K=z[w];F=true;}var p=""+Q.categoryidref;var E="";if(J){if(p!==""&&J[p]&&J[p].title){E=""+J[p].title;var D=YAHOO.util.Dom.getElementsByClassName("cta-button-feature","","banner-imageoverlay-evt")[0];D.style.overflow="hidden";D.style.whiteSpace="nowrap";D.style.width="215px";D.style.display="block";if((E.length>10)&&(E.length<17)){D.style.letterSpacing="-1px";}else{if(E.length>=17){E="";D.style.letterSpacing="0px";}else{D.style.letterSpacing="0px";}}}}var A=null;var N;if(g!="Sync"&&g!="electric"&&typeof(_widgets.context.SelectedContext.get("nameplate.sitemap")["nameplate-feature-selection"])!="undefined"){N=x+"#page="+p;}else{if(document.location){var I=document.location.protocol+"//"+document.location.host+document.location.pathname;N=I+"/features/#page="+p;}}if(F){A=u+K.posterboardimage;}else{if(Q.flip&&Q.flip.media){var H=h.getImage(Q.flip.media);if(H){A=H.source;}}}var T=null;var C=null;if(Q.flip&&Q.flip.media){C=h.getVideo(Q.flip.media);}if(A){o.OverviewBannerVideoOverlay.superclass.show.call(this,A);}var G="";var s;var U=false;if(C){U=true;d.setStyle(this.bannerContent,"backgroundImage","none");if(Q.flip.template&&Q.flip.template==f){this.domElements.overlay.className=this.domElements.overlay.baseClasses+" flash-banner";}else{this.domElements.overlay.className=this.domElements.overlay.baseClasses+" banner-video";_widgets.context.SelectedContext.subscribe("fullVideoViewed",this.onVideoComplete,this,true);}this.domElements.videooverlay.style.display="";}else{this.domElements.overlay.className=this.domElements.overlay.baseClasses+" banner-image";this.domElements.videooverlay.style.display="none";}var q="";if(Q.disclaimers){for(var P in Q.disclaimers){if(Q.disclaimers.hasOwnProperty(P)){var S=Q.disclaimers[P];q+="<li>"+S+"</li>";}}}this.domElements.feature.innerHTML=E?E:"";this.domElements.title.innerHTML=Q.flip.title;var r=h.Text.asUL(Q.flip.copy);this.domElements.desc.innerHTML=r.leadin;this.domElements.points.innerHTML=r.listHTML;if(Q.ctas){for(var y in Q.ctas){if(Q.ctas.hasOwnProperty(y)){var R=Q.ctas[y];var M=""+R.link;var v=""+R.leadtext;var V=""+R.text;if(L[M]){M=L[M].url;}G+="<div class='cta'><p class='title'>"+v+"</p><a class='link' href='"+M+"'>"+V+"</a></div>";}}}this.domElements.ctas.innerHTML=G;this.domElements.featurelink.innerHTML="See all "+E+" Features";this.domElements.featurebutton.style.display=(p!="FeatureCategory")?"block":"none";this.domElements.ctabutton.href=N;this.domElements.disclaimers.innerHTML=q;if(g=="Sync"){if(U){ngbsMetricsTracker.trackMicroData("techSyncVideo");}else{ngbsMetricsTracker.itemName=Q.flip.title;ngbsMetricsTracker.trackMicroData("techSyncFeature");}}else{if(g=="electric"){if(U){oMetricsTracker.trackMicroData("techelectricVideo");}else{oMetricsTracker.itemName=Q.flip.title;oMetricsTracker.trackMicroData("techelectricFeature");}}else{if(U){ngbsMetricsTracker.itemName=Q.flip.title;ngbsMetricsTracker.trackMicroData("nameplateOverviewVideo");}else{ngbsMetricsTracker.itemName=Q.flip.title;ngbsMetricsTracker.trackMacroData("nameplateOverviewImage");}}}if(U){this.videoPlayer.launchVideo(B);}},hide:function(){td_site.videoPlayer.destroyVideo(i);o.OverviewBannerVideoOverlay.superclass.hide.apply(this,arguments);log.debug("Hiding video banner overlay.");d.setStyle(this.domElements.overlay,"display","none");if(this.videoPlayer){_widgets.context.SelectedContext.unsubscribe("fullVideoViewed",this.onVideoComplete);this.videoPlayer.stopVideo();}_widgets.context.SelectedContext.set(a,null);},initFlashVideoPlayer:function(p){if(p){td_site.videoPlayer.destroyVideo(i);var q=td_site.videoPlayer.loadVideo(i,{id:p,bPlay:true});}},onVideoComplete:function(p){if(typeof(p)==="object"&&p.id===k){log.debug("Track metrics 'fullVideoViewed'");ngbsMetricsTracker.trackMicroData("fullVideoViewed");}}});})();
(function(){var g=YAHOO.util.Dom;var c=YAHOO.lang;var i=YAHOO.widget;var f=YAHOO.util.Event;var m=YAHOO.extension;var l=getPackageForName("com.forddirect.ng.util");var n=getPackageForName("com.forddirect.ng.widgets");var h=YAHOO.util.Config;var a="highlight";var b="carousel-item-";var j=b+"selected";var k=false;var d=6;n.PromoSlider=function(o,p){this.el=o;this.init(o,p);};n.PromoSlider.prototype={init:function(o,p){this.initAttributes();this.initCarousel();this.initEvents();},initAttributes:function(o){this.currPage=0;this.sliderPages=g.getElementsByClassName("sliderpages","a",this.el);},initCarousel:function(){var o=d;var p=g.getElementsByClassName("carousel-item","li",this.el).length;this.nextTooltip=new n.BSTooltip("more-highlights-tooltip-next",{context:[g.get("next-arrow"),i.Overlay.BOTTOM_RIGHT,i.Overlay.TOP_RIGHT],hidedelay:500,offset:{x:46,y:-9}});this.prevTooltip=new n.BSTooltip("more-highlights-tooltip-prev",{context:[g.get("prev-arrow"),i.Overlay.BOTTOM_LEFT,i.Overlay.TOP_LEFT],hidedelay:500,offset:{x:-30,y:-9}});if(p>0&&p<=d){o=p;g.get("gal-page-buttons").style.display="none";g.get("next-arrow").style.display="none";g.get("prev-arrow").style.display="none";}this.carousel=new m.Carousel("promo-carousel",{numVisible:o,animationSpeed:0.15,scrollInc:d,navMargin:30,prevElement:"prev-arrow",nextElement:"next-arrow",revealAmount:0,size:p,prevButtonStateHandler:l.Event.newHandler(this.handlePrevButtonState,this),nextButtonStateHandler:l.Event.newHandler(this.handleNextButtonState,this),loadNextHandler:l.Event.newHandler(this.onNextPageClick,this),loadPrevHandler:l.Event.newHandler(this.onPrevPageClick,this)});},initEvents:function(){var o=g.getElementsByClassName("carousel-element","div",this.el);f.addListener(o,"click",this.onCarouselDivClick,this,true);_widgets.context.SelectedContext.subscribe(a+"Change",this.highlightSelectedItem,this,true);f.addListener(this.sliderPages,"click",this.onPageIconClick,null,this);}};var e=n.PromoSlider.prototype;e.onPageIconClick=function(q){var o=f.getTarget(q).rel;var p=Math.round(o/d);k=true;if(p!=this.currPage){this.setPageValue((p>this.currPage)?p-1:p+1);this.carousel.scrollTo(o);k=false;ngbsMetricsTracker.trackMicroData("carouselIndexClick");}};e.onNextPageClick=function(p,o){this.setPageValue(this.currPage+1);if(k===false){ngbsMetricsTracker.trackMicroData("carouselArrowClick");}};e.onPrevPageClick=function(p,o){this.setPageValue(this.currPage-1);if(k===false){ngbsMetricsTracker.trackMicroData("carouselArrowClick");}};e.handlePrevButtonState=function(r,o){var q=o[0];var s=o[1];this.prevTooltip.cfg.setProperty("disabled",!q);var p=document.all&&window.external;if(q){g.replaceClass("prev-arrow","carousel-prev-disabled","carousel-prev");if(p){g.get("more-highlights-tooltip-prev").firstChild.style.display="block";}else{g.get("more-highlights-tooltip-prev").style.display="block";}}else{g.replaceClass("prev-arrow","carousel-prev","carousel-prev-disabled");if(p){g.get("more-highlights-tooltip-prev").firstChild.style.display="none";}else{g.get("more-highlights-tooltip-prev").style.display="none";}this.prevTooltip.hide();}};e.handleNextButtonState=function(r,p){var q=p[0];var o=p[1];this.nextTooltip.cfg.setProperty("disabled",!q);if(q){g.replaceClass("next-arrow","carousel-next-disabled","carousel-next");}else{g.replaceClass("next-arrow","carousel-next","carousel-next-disabled");this.nextTooltip.hide();}};e.setPageValue=function(o){g.removeClass(this.sliderPages[this.currPage],"active");this.currPage=o;g.addClass(this.sliderPages[this.currPage],"active");};e.highlightSelectedItem=function(q){var p=q.newValue;var o=p&&p!=="";l.getElementByClassName(j,"li",this.el,function(r){g.removeClass(r,j);});l.getElementByClassName(b+p,"li",this.el,function(r){g.addClass(r,j);});g.setStyle("highlightsIndicator","visibility",o?"hidden":"visible");};e.onCarouselDivClick=function(o){var p=this.getSelectedHighlight(o);if(p){_widgets.context.SelectedContext.set(a,p);}};e.getSelectedHighlight=function(o){var q=f.getTarget(o);var p=null;if(q){if(q.classname=="carousel-element"){p=g.getAttribute(q,"rel");}else{var r=g.getAncestorByClassName(q,"carousel-element");if(r){p=g.getAttribute(r,"rel");}}}return p;};n.PromoSlider.getHighlightID=function(o){var p=o.getAttribute("rel");return p?p.substring(b.length):null;};})();
(function(){document.getElementsByClassNameYo=function(f,c){var d=[];c=c||this;if(!document.getElementsByClassName){var b=c.getElementsByTagName("*");var a=b.length;var e=new RegExp("(^|\\s)"+f+"(\\s|$)");for(i=0,j=0;i<a;i++){if(e.test(b[i].className)){d[j]=b[i];j++;}}}else{d=c.getElementsByClassName(f);}return d;};})();td_site.page.player360={constants:{FPS:function(){return 1000/30;}},v:{groups:{},palette:[[355,0.99,0.35],[355,0.98,0.22],[354,1,0.17]],trim_states:{},state:{node:null,animator:null,bar:null,arrows:null,selected:{model:null,color:null,background:null},dimensions:[0,0],frames:1,current:1,animation_interval:0,is_legacy:false,swipe_gesture:0,last:{model:"",swatch_set:"ext",x:null,touch:[0,0]},parts:["/resources/not/a/real/path/","","vehiclename_MY_color","/","vehiclename_MY_color","_env","_","","1",".jpg"]},all_parts:{ie:["progid:DXImageTransform.Microsoft.gradient (GradientType=0, startColorstr=","#ffffff",", endColorstr=","#ff0000",");"],wk:["-webkit-gradient(linear, left 20%, left bottom, from(","#ffffff","), to(","#ff0000","))"],ff:["-moz-linear-gradient(top, ","#ffffff"," 20%, ","#ff0000",")"],std:["gradient(linear, left 20%, left bottom, from(","#ffffff","), to(","#ff0000","))"]},rgbRegex:/rgb\s*\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/},f:{clampDeg:function(a){return a;},clampPercent:function(a){return((a<0)?0:((a>1)?1:a));},hex2hsl:function(a){return this.rgb2hsl.apply(this,[parseInt(a.charAt(1)+a.charAt(2),16)/255,parseInt(a.charAt(3)+a.charAt(4),16)/255,parseInt(a.charAt(5)+a.charAt(6),16)/255]);},rgb2hsl:function(c,d,h){var g=Math.max.apply(Math,arguments);var b=Math.min.apply(Math,arguments);var a=g-b;var f=0;var e=0;var k=(g+b)/2;if(a!==0){switch(g){case c:f=((d-h)/a)%6;break;case d:f=((h-c)/a)+2;break;case h:f=((c-d)/a)+4;break;}f=60*f;e=a/(1-Math.abs(2*k-1));}return[this.clampDeg(f),this.clampPercent(e),this.clampPercent(k)];},hsl2hex:function(c,e,f){function d(l,h,k){if(k<0){k=k+1;}else{if(k>1){k=k-1;}}if(k*6<1){return l+(h-l)*k*6;}else{if(k*2<1){return h;}else{if(k*3<2){return l+(h-l)*(2/3-k)*6;}}}return l;}function b(h){h=Math.floor(td_site.player360.f.clampPercent(h)*255).toString(16);h=(h.length<2)?"0"+h:h;return h;}var a=0;var g=0;c=c/360;if(f<=0.5){a=f*(e+1);}else{a=f+e-f*e;}g=f*2-a;return"#"+b(d(g,a,c+(1/3)))+b(d(g,a,c))+b(d(g,a,c-(1/3)));},rebasePalette:function(a,c){var b=[];for(color in a){if(a[color].length==3){b[color]=[];b[color][0]=c[0]*(a[color][0]/a[0][0]);b[color][1]=c[1]*(a[color][1]/a[0][1]);b[color][2]=c[2]*(a[color][2]/a[0][2]);}}return b;},buildBackground:function(c,f,e){var a="std";var b="background";if(td_site.v.isIE){a="ie";b="filter";}else{if(td_site.v.isFox){a="ff";}else{if(td_site.v.isChrome||td_site.v.isSafari){a="wk";}}}var d=td_site.player360.v.all_parts[a];d[1]=this.hsl2hex.apply(this,f);d[3]=this.hsl2hex.apply(this,e);c.style[b]=d.join("");},processTitle:function(a){var c=a.getAttribute("title");var b=document.createElement("div");if(c){a.setAttribute("title","");c=c.replace(/\s/g,"&nbsp;");c=c.replace(/-/g,"&#8209;");b.innerHTML=c;b.className="text";a.appendChild(b);b.style.left=((b.parentNode.offsetWidth/2)-(b.offsetWidth/2))+"px";}},initLegacyState:function(a){a.is_legacy=true;a.parts[6]="";},setState:function(k,a,c){var e=k.getAttribute("data-part");var h=k.getAttribute("data-frames");a=a||td_site.player360.v.state;c=!!c;if(h){a.frames=parseInt(h,10);if(!c){if(a.frames<=1){a.arrows.style.display="none";this.hideMessage(a);}else{a.arrows.style.display="block";}}}if(td_site.u.className.has(k,"color")){var f=td_site.u.className.has(k,"ext")?"ext":"int";if(a.last.swatch_set!=f){a.current=1;if(!c){a.animator.style.top="0";}}a.last.swatch_set=f;if(a.is_legacy){a.parts[1]=f+"/";}if(a.selected.color&&!c){td_site.u.className.remove(a.selected.color,"selected");}a.selected.color=k;a.parts[2]=a.parts[4]=e;}else{if(td_site.u.className.has(k,"trim")){var g=document.getElementById(k.id+"-ui");if(!c){if(a.selected.background){td_site.u.className.remove(a.selected.background,"selected");}if(a.selected.model){document.getElementById(a.selected.model.id+"-ui").style.display="none";td_site.u.className.remove(a.selected.model,"selected");}if(a.selected.color){td_site.u.className.remove(a.selected.color,"selected");}}if(td_site.player360.v.trim_states[k.id]){td_site.u.extend(a,td_site.player360.v.trim_states[k.id]);}if(!c){g.style.display="block";}if(!g.html5_360_text_centered&&!c){var b=document.getElementsByClassNameYo("text",g);for(var d=0;d<b.length;d++){b[d].style.left=((b[d].parentNode.offsetWidth/2)-(b[d].offsetWidth/2))+"px";}g.html5_360_text_centered=true;}a.selected.model=k;a.parts[0]=e;}else{if(td_site.u.className.has(k,"background")){if(a.selected.background&&!c){td_site.u.className.remove(a.selected.background,"selected");}a.parts[5]=e;a.selected.background=k;}}}if(!c){if(a.selected.background){td_site.u.className.add(a.selected.background,"selected");}if(a.selected.model){td_site.u.className.add(a.selected.model,"selected");}if(a.selected.color){td_site.u.className.add(a.selected.color,"selected");}}},updateBackgroundThumbs:function(d){var b=td_site.u.clone(d);var c=document.getElementById(b.selected.model.id+"-ui");var e=document.getElementsByClassNameYo("background",c);b.parts[8]=Math.floor(b.current)+1;for(var a in e){if(td_site.u.isDOMNode(e[a])){this.setState(e[a],b,true);e[a].childNodes[0].src=b.parts.join("");}}},updateFrame:function(b){var a=Math.floor(b.current);b.animator.style.top=-(a*b.dimensions[1])+"px";},build360:function(b){b.animator.innerHTML="";for(var a=1;a<=b.frames;a++){b.parts[8]=a;var c=document.createElement("div");c.style.background="url("+b.parts.join("")+") no-repeat";c.style.width=b.dimensions[0]+"px";c.style.height=b.dimensions[1]+"px";b.animator.appendChild(c);}},hideMessage:function(c){if(!c.hidden_message){var b=document.getElementsByClassNameYo("ui-message",c.node);for(var a=0;a<b.length;a++){b[a].style.display="none";}}c.hidden_message=true;},showUI:function(a){if(!a.is_legacy){a.bar.style.display="block";}},hideUI:function(a){if(!a.is_legacy){a.bar.style.display="none";}}},addNew:function(m,o,c){this.v.state.node=document.getElementById("html5-360");this.v.state.animator=document.getElementById("html5-360-animator");this.v.state.arrows=document.getElementsByClassNameYo("ui-arrows",this.v.state.node)[0];this.v.state.bar=document.getElementsByClassNameYo("ui-chips",this.v.state.node)[0];if(this.v.state.node&&this.v.state.node.getAttribute("data-version")=="legacy"){this.f.initLegacyState(this.v.state);}if((this.v.state.is_legacy||(swfobject&&!swfobject.hasFlashPlayerVersion("9")))&&this.v.state.node&&this.v.state.animator){this.v.state.node.style.zoom=1;this.v.state.dimensions=[this.v.state.node.offsetWidth,this.v.state.node.offsetHeight];this.v.state.node.style.zoom="";var e=document.getElementsByClassNameYo("chip",this.v.state.node);var g=0;for(chip in e){if(e[chip].style){td_site.u.addListener(e[chip],["click"],this.chip_click);this.f.processTitle(e[chip]);if(e[chip].parentNode.getAttribute("data-default")=="true"){if(e[chip].parentNode.className=="ext color"||e[chip].parentNode.className=="int color"){g++;this.v.trim_states["html5-360-trim-"+(g-1)]={};this.v.trim_states["html5-360-trim-"+(g-1)].color=e[chip].parentNode;}if(e[chip].parentNode.className=="background"){this.v.trim_states["html5-360-trim-"+(g-1)].background=e[chip].parentNode;}this.f.setState(e[chip].parentNode);}if(e[chip].style.backgroundColor!="transparent"&&e[chip].style.backgroundColor!="initial"&&e[chip].style.backgroundColor!==""){if(!td_site.u.isTouch()){td_site.u.addListener(e[chip],["mouseover"],function(){var p=td_site.player360.v.state;td_site.u.className.remove(p.selected.color,"selected");td_site.u.className.add(this.parentNode,"selected");});td_site.u.addListener(e[chip],["mouseout"],function(){var p=td_site.player360.v.state;td_site.u.className.remove(this.parentNode,"selected");td_site.u.className.add(p.selected.color,"selected");});}var d=[0,0,0];if(e[chip].style.backgroundColor.charAt(0)=="#"){d=this.f.hex2hsl(e[chip].style.backgroundColor);}else{var l=this.v.rgbRegex.exec(e[chip].style.backgroundColor);d=this.f.rgb2hsl.apply(this.f,[parseInt(l[1],10)/255,parseInt(l[2],10)/255,parseInt(l[3],10)/255]);}var f=this.f.rebasePalette(this.v.palette,d);this.f.buildBackground(e[chip],f[0],f[1]);}}}for(var b in this.v.trim_states){var h=this.v.trim_states[b].color;var a=this.v.trim_states[b].background;this.v.trim_states[b]=td_site.u.clone(this.v.state);this.f.setState(h,this.v.trim_states[b]);this.f.setState(a,this.v.trim_states[b]);}this.f.setState(this.v.state.selected.model);this.v.state.bar.style.left=((this.v.state.dimensions[0]-this.v.state.bar.offsetWidth)/2)+"px";this.hover(document.getElementsByClassNameYo("ui-dropdown",this.v.state.node),function(){this.getElementsByTagName("ul")[0].style.height="100px";},function(){this.getElementsByTagName("ul")[0].style.height="0px";});var k=document.getElementsByClassNameYo("left",this.v.state.arrows)[0];var n=document.getElementsByClassNameYo("right",this.v.state.arrows)[0];td_site.u.addListener(k,["mousedown","touchstart"],this.left_arrow_mousedown);td_site.u.addListener(n,["mousedown","touchstart"],this.right_arrow_mousedown);td_site.u.addListener(k,["mouseup","mouseout","touchend"],this.arrow_mouseup);td_site.u.addListener(n,["mouseup","mouseout","touchend"],this.arrow_mouseup);this.f.build360(this.v.state);this.f.updateBackgroundThumbs(this.v.state);td_site.u.addListener(this.v.state.node,["mousedown","touchstart"],this.vehicle_mousedown);td_site.u.addListener(this.v.state.bar,["touchstart","touchmove","mousedown","mousemove"],td_site.u.stopPropagation);td_site.u.addListener(this.v.state.arrows,["mousedown","touchstart"],td_site.u.stopPropagation);}},hover:function(c,d,a){for(var b=0;b<c.length;b++){c[b].hovering=false;if(td_site.u.isTouch()){td_site.u.addListener(c[b],["click"],function(h){var g=this;function f(k){a.apply(g,arguments);g.hovering=!g.hovering;td_site.u.removeListener(document,["touchstart","touchend"],f);}td_site.u.addListener(document,["touchstart","touchend"],f);if(g.hovering){a.apply(g,arguments);}else{d.apply(g,arguments);}g.hovering=!g.hovering;td_site.u.stopPropagation(h);});td_site.u.addListener(c[b],["touchstart","touchend"],td_site.u.stopPropagation);}else{td_site.u.addListener(c[b],["mouseover"],d);td_site.u.addListener(c[b],["mouseout"],a);}}},chip_click:function(a){td_site.player360.f.setState(this.parentNode);td_site.player360.f.build360(td_site.player360.v.state);td_site.player360.f.updateBackgroundThumbs(td_site.player360.v.state);},left_arrow_mousedown:function(a){td_site.player360.arrow_mousedown(1);},right_arrow_mousedown:function(a){td_site.player360.arrow_mousedown(-1);},arrow_mousedown:function(b){function a(){var c=td_site.player360.v.state;c.current=(b+c.current)%c.frames;c.current=(c.current<0)?c.frames+c.current:c.current;td_site.player360.f.updateFrame(c);}if(td_site.player360.v.state.frames>=10){if(td_site.player360.v.state.animation_interval){clearInterval(td_site.player360.v.state.animation_interval);td_site.player360.v.state.animation_interval=0;}td_site.player360.v.state.animation_interval=setInterval(a,td_site.player360.constants.FPS());td_site.player360.f.hideUI(td_site.player360.v.state);}else{a();}td_site.player360.f.hideMessage(td_site.player360.v.state);},arrow_mouseup:function(a){if(td_site.player360.v.state.frames>=10){if(td_site.player360.v.state.animation_interval){clearInterval(td_site.player360.v.state.animation_interval);td_site.player360.v.state.animation_interval=0;}td_site.player360.f.showUI(td_site.player360.v.state);}},vehicle_mousedown:function(a){if(!a.touches){td_site.player360.v.state.last.x=a.screenX;td_site.u.preventDefault(a);td_site.u.addListener(document,["mousemove"],td_site.player360.vehicle_mousemove);td_site.u.addListener(document,["mouseup"],td_site.player360.vehicle_mouseup);td_site.player360.f.hideMessage(td_site.player360.v.state);td_site.player360.f.hideUI(td_site.player360.v.state);}else{if(a.touches.length==2){td_site.player360.v.state.last.touch[0]=a.touches[0].pageX;td_site.player360.v.state.last.touch[1]=a.touches[1].pageX;td_site.u.addListener(document,["touchmove"],td_site.player360.vehicle_mousemove);td_site.u.addListener(document,["touchend"],td_site.player360.vehicle_mouseup);td_site.player360.f.hideMessage(td_site.player360.v.state);td_site.player360.f.hideUI(td_site.player360.v.state);}}},vehicle_mousemove:function(d){var c=td_site.player360.v.state;var a=0;if(d.touches&&d.touches.length==2){var b=((c.last.touch[0]-d.touches[0].pageX+0.00001)/(c.last.touch[1]-d.touches[1].pageX+0.00001));if(b>=0){c.swipe_gesture++;}if(c.swipe_gesture>5){a=c.last.touch[0]-d.touches[0].pageX;td_site.u.preventDefault(d);}c.last.touch[0]=d.touches[0].pageX;c.last.touch[1]=d.touches[1].pageX;}else{if(c.last.x&&d.screenX){a=c.last.x-d.screenX;c.last.x=d.screenX;td_site.u.preventDefault(d);}}c.current=(((a/(c.dimensions[0]/2))*c.frames)+c.current)%c.frames;c.current=(c.current<0)?c.frames+c.current:c.current;td_site.player360.f.updateFrame(c);},vehicle_mouseup:function(a){td_site.u.removeListener(document,["mousemove","touchmove"],td_site.player360.vehicle_mousemove);td_site.u.removeListener(document,["mouseup","touchend"],td_site.player360.vehicle_mouseup);td_site.player360.v.state.last.x=null;td_site.player360.v.state.last.touch[0]=0;td_site.player360.v.state.last.touch[1]=0;td_site.player360.v.state.swipe_gesture=0;td_site.player360.f.updateBackgroundThumbs(td_site.player360.v.state);if(!a.touches){td_site.u.preventDefault(a);}td_site.player360.f.showUI(td_site.player360.v.state);},inish:td_site.inish};td_site.inish("td_site",td_site);td_site.player360.addNew();
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var f="Super360";getPackageForName("com.forddirect.ng.widgets.avrplayer").VRPlayer=function(g,h){log.debug("VRPlayer 360Player");this.FLASHID="html5-360";this.widgetId="";this.jsInstance=h;this.el=g;this.flashDiv=c.getElementsByClassName("avrPlayerDiv","div",g)[0];this.close=c.getElementsByClassName("close","div",g)[0];b.addListener(this.close,"click",this.unload,null,this);this.clickInfo={exterior:false,interior:false};var i={path:_widgets.context.SelectedContext.get(f),asset:"_convertible",exterior:2,interior:0,background:"_env"};this.initialized=false;this.TheData=i;};var d=getPackageForName("com.forddirect.ng.widgets.avrplayer").VRPlayer.prototype;d.init=function(){log.debug("init 360Player");var h=this.TheData;var g="xmlPath="+h.path+"&instanceName="+this.jsInstance;_instances.flashFramework.loadFlashMovie(this.flashDiv,this.FLASHID,"/ngtemplates/ngassets/com/forddirect/ng/widgets/avrplayer/fordvehicles360_as2.swf",960,430,this.jsInstance,"#000000","transparent",g);log.debug("loadFlash()");loadFlash();};d.onInitComplete=function(g){this.update();this.initialized=true;};d.update=function(){_instances.flashFramework.thisMovie(this.FLASHID).eventHandler("update",{},"onUpdateComplete");};d.onUpdateComplete=function(g){};d.unload=function(){log.debug("... 360Player.unload");var g=_instances.flashFramework.thisMovie(this.FLASHID);var h=g.parentNode;swfobject.removeSWF(this.FLASHID);this.hide();h.appendChild(g);};d.hide=function(){log.debug("... 360Player.hide");c.setStyle(this.el,"visibility","hidden");};d.show=function(){log.debug("... 360Player.show");if(!this.initialized){this.init();}c.setStyle(this.el,"visibility","visible");ngbsMetricsTracker._360popup={};ngbsMetricsTracker.trackMicroData("home360popup");};d.new360=function(g){log.debug("... 360Player.new360");alert("new360 with callback to onUpdateComplete  "+g.id);_instances.flashFramework.thisMovie(this.FLASHID).eventHandler("new360",g,"onUpdateComplete");};d.stop360=function(){log.debug("... 360Player.stop360");var g={dummy:""};_instances.flashFramework.thisMovie(this.FLASHID).eventHandler("stop360",g,null);};d.onColorChipChange=function(g){log.debug("... 360Player.onColorChipChange");if(!this.clickInfo.exterior&&g.metrics.match(/ext/i)!==null){ngbsMetricsTracker.trackMicroData("exteriorColorizer");this.clickInfo.exterior=true;}else{if(!this.clickInfo.interior&&g.metrics.match(/int/i)!==null){ngbsMetricsTracker.trackMicroData("interiorColorizer");this.clickInfo.interior=true;}}};d.onRotationChange=function(g){log.debug("... 360Player.onRotationChange");ngbsMetricsTracker.trackMicroData("home360rotateClick");};})();
widgets.add("tooltip",function(f,c,e){var b,g,a=1000,h;var d=(function(){return{msie:(f.browser=="msie"?f.browser.version:0),getWindowRegion:function(){var i=f(window);return{top:i.scrollTop(),bottom:i.scrollTop()+i.height(),left:i.scrollLeft(),right:i.scrollLeft()+i.width(),width:i.width(),height:i.height()};},getRegion:function(n){var q,m,l,i,k,j,p=(this.msie<8&&this.msie>0)?-2:0;if(typeof(n)=="string"){n=document.getElementById(o);}q=f(window).scrollLeft();m=f(window).scrollTop();if(document.getBoxObjectFor){k=document.getBoxObjectFor(o);j={left:k.x,top:k.y,right:r.x+k.width,bottom:k.y+k.height,width:k.width,height:k.height};}else{if(n.getBoundingClientRect){k=n.getBoundingClientRect();j={left:k.left+p+q,top:k.top+p+m,right:k.right+p+q,bottom:k.bottom+p+m,width:n.offsetWidth,height:n.offsetHeight};}else{l=n.offsetLeft;i=n.offsetTop;j={left:l,top:i,right:l+n.offsetWidth,bottom:i+n.offsetHeight,width:n.offsetWidth,height:n.offsetHeight};}}return j;},_mouseover:false,params:{tooltipEl:"td_tooltip",contentEl:"td_tooltip_content",arrowEl:"td_tooltip_arrow"},init:function(i){f.extend(true,this.params,i);this.tooltipEl=this._get(this.params.tooltipEl);this.contentEl=this._get(this.params.contentEl);this.arrowEl=this._get(this.params.arrowEl);document.body.appendChild(this.tooltipEl);delete this.params.tooltipEl;delete this.params.contentEl;delete this.params.arrowEl;return this;},bind:function(j,i){i=i||{};i.hover=i.hover||false;i.click=i.click||false;i.close=i.close||false;j=this._get(j);if(!j){return false;}if(i.click){f(j).click({tooltip:this,options:i},this._show);}else{f(j).mouseover({tooltip:this,options:i},this._show);if(i.hover){f(j).mouseout({tooltip:this,options:i},this._timeout);f(j).mouseover({tooltip:this,options:i},this._cancel);}else{f(j).mouseout({tooltip:this,options:i},this._hide);}}},_show:function(C){var u=C.data||{};var D,z,j,F,B,A,k=this,n=u.tooltip,p={content:"",align:"top",position:"100%",style:{},className:"",hover:false,click:false,"static":false,arrow:{top:{width:20,height:14},bottom:{width:38,height:24},left:{width:14,height:20},right:{width:25,height:38},padding:20},offset:{width:5,height:5}};if(k.className.indexOf("td_tooltip_disabled")!==-1||(n._mouseover&&h==this)){return false;}h=this;b=false;f.extend(true,p,u.options);n.options=p;f(n.tooltipEl).unbind(["mouseover","mouseout"],[n._cancel,n._timeout]);if(p.hover){n._mouseover=true;f(n.tooltipEl).mouseover(u,n._cancel);f(n.tooltipEl).mouseout(u,n._timeout);}for(B in p.style){if(p.style.hasOwnProperty(B)){n.tooltipEl.style[B]=p.style[B];}}n.tooltipEl.className=p.className;n.contentEl.innerHTML=typeof p.content!=="string"?p.content.call(this,n):p.content;if(p.click||p.close){var v=document.createElement("div");v.className="close";v.innerHTML="Close";n.contentEl.appendChild(v);f(v).click({tooltip:n,options:p},n._hide);}D=n.getRegion(k);z=n.getRegion(n.tooltipEl);j=n.getWindowRegion();for(B in n.params.offset){if(n.params.offset.hasOwnProperty(B)){z[B]=z[B]+n.params.offset[B];}}F=n.getPosition(D,z,j);p.align=F.hasOwnProperty(p.align)?p.align:"top";A=n.validateAxis(F,p);if(F[A].fits){var y=F[A].point;n.tooltipEl.style[y]=F[A].position+"px";n.arrowEl.style[y]="";n.arrowEl.className=F[A].opposite;var m=(y==="left"||y==="right")?"height":"width";var q=(y==="left"||y==="right")?$E.getPageY(C):$E.getPageX(C);var t=(y==="left"||y==="right")?"top":"left";var w=(y==="left"||y==="right")?"bottom":"right";if(p["static"]){q=D[m]/2+D[t];}else{q=q>D[w]?D[w]:q;q=q<D[t]?D[t]:q;}var E=z[m]-n.options.arrow.padding*2-n.options.arrow[y][m];var x=p.position.indexOf("%")!==-1?parseInt(p.position.substring(0,p.position.length-1),10)/100*E+n.options.arrow.padding:parseInt(p.position,10);var s=q-n.options.arrow[y][m]/2;var l=s-x;n.arrowEl.style[t]=x+"px";n.tooltipEl.style[t]=l+"px";}n.tooltipEl.style.display="";},hide:function(){this.tooltipEl.style.cssText="";this.contentEl.style.display="none";this.contentEl.innerHTML="";this.tooltipEl.style.left="";this.tooltipEl.style.top="";this.tooltipEl.className="";this.contentEl.style.display="";},_timeout:function(l){var k=l.data||{},j=k.options||{},i=k.tooltip||this;if(typeof g!="number"){g=window.setTimeout(function(){i._hide(l,k);},a);}},_cancel:function(j,i){i=j.data||{};if(typeof g=="number"){window.clearTimeout(g);g=null;}},_hide:function(n){var l,m=n.data||{},k=m.options||{},j=m.tooltip||this;if(typeof k.style==="object"){for(l in k.style){if(k.style.hasOwnProperty(l)){j.tooltipEl.style[l]="";}}}j._mouseover=false;j.contentEl.style.display="none";j.contentEl.innerHTML="";j.tooltipEl.style.left="";j.tooltipEl.style.top="";j.tooltipEl.className="";j.contentEl.style.display="";},validateAxis:function(i,j){var k=i[j.align].opposite;var l=i[j.align].fits?j.align:false;l=l?l:k;if(!i[l].fits&&!b){if(l==="left"||l==="right"){j.align="top";}else{j.align="left";}b=true;l=this.validateAxis(i,j);}return l;},getPosition:function(k,j,i){return{right:{point:"left",opposite:"left",position:k.right+this.options.arrow.right.width,fits:k.right+j.width<i.right},left:{point:"left",opposite:"right",position:k.left-j.width-this.options.arrow.left.width,fits:k.left-j.width>i.left},bottom:{point:"top",opposite:"top",position:k.bottom+this.options.arrow.top.height,fits:k.bottom+j.height<i.bottom},top:{point:"top",opposite:"bottom",position:k.top-j.height-this.options.arrow.bottom.height,fits:k.top-j.height>i.top}};},_get:function(i){if(typeof i==="string"){return document.getElementById(i);}return i;}};}());d.init();td_widget.Tooltip=d;});
widgets.add("nameplate-colorizer",function(e,b,d){function g(i){var h=this;this.clicked=false;this.el=i;this.chips=e("li",i);this.chips.each(function(){var j=this.getAttribute("data-color");td_widget.Tooltip.bind(this,{position:"50%",align:"top",content:j,"static":true,className:"colorizer",arrow:{bottom:{width:7,height:4},padding:0}});});this.loadImage=function(j){var k=new Image();k.src=j;e(k).load(function(){e("#page").css("background-image","url("+k.src+")");});};this.chips.click(function(l){var j=this.getAttribute("data-image");if(j){h.chips.removeClass("selected");e(this).addClass("selected");if(!h.clicked){ngbsMetricsTracker.trackMicroData("exteriorColorizer");h.clicked=true;}var k=this.getAttribute("data-image");h.loadImage(k);}return false;});}for(var a=0,c=d.length;a<c;a++){var f=new g(d[a]);}});
widgets.add("overview-sidebar-inline-zipcode-editor",function(f,c,e){var a=YAHOO.util.Event;var b=YAHOO.util.Dom;if(e&&e[0]){var d=e[0];}var g={init:function(){_widgets.context.UserContext.subscribe("zIPCodeChange",this.setZIP,this,true);_widgets.context.UserContext.onInvalidZIPCode.subscribe(this.onError,this,true);this.setDate();if(_widgets.context.UserContext){var i=_widgets.context.UserContext.get("zIPCode");if(i){this.setZIP(i);}}var h=this;a.on("ize-form","submit",this.update);a.on("ize-value","focus",function(j){document.getElementById("ize-form").className="active";this.select();a.on(this,"mouseup",function(k){a.preventDefault(k);a.removeListener(this,"mouseup");});});},update:function(i){a.stopEvent(i);document.getElementById("ize-form").className="";var h=document.getElementById("ize-value").value;if(_widgets.context.UserContext.validateZIPCode(h)){_widgets.context.UserContext.setExplicitZIPCode(h);}else{b.addClass(d,"error");}},onError:function(){b.addClass(d,"error");},setDate:function(){var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var l=new Date();var h=l.getDate();var k=l.getMonth();var i=l.getFullYear();document.getElementById("ize-date").innerHTML=j[k]+"  "+h+", "+i;},setZIP:function(h){h=h.newValue?h.newValue:h;document.getElementById("ize-value").value=h;b.removeClass(d,"error");document.getElementById("ize-value").blur();}};_instances.bsLoader.initCompleteEvent.subscribe(g.init,g,true);});
widgets.add("overview-sidebar-monthly-price",function(d,b,c){var a=YAHOO.util.Dom;var e={zip:false,campaign:false,ttAnchorText:"",paymentsHref:"",leaseCampaigns:false,init:function(){var g,f=this;this.el=document.getElementById("overview-sidebar-monthly-price");this.setVisibility(false);_widgets.context.LocalContext.subscribe("incentivesChange",this.checkCampaign,this,true);var j=document.getElementById("monthly-price-tooltip-anchor");this.ttAnchorText=j.innerHTML;td_widget.Tooltip.bind(j,{position:"75%",align:"left",close:true,hover:true,content:function(m){var l=document.getElementById("monthly-price-tooltip").innerHTML;var k=document.getElementById("monthly-price-tooltip").className;m.tooltipEl.className=k;return l;},"static":true});var i=_widgets.context.SelectedContext.get("defaultTrim");if(i){_widgets.context.SelectedContext.set("currentTrim",i,true);this.trimUpdate=true;}var h=document.getElementById("overview-sidebar");if(h){b.listen(h,"trim-pricing",function(l,k){td_widget.Tooltip.hide();f.updatePricing(k);});}if(_widgets.context.UserContext.get("zIPCode")){this.checkCampaign();}},getNodeValue:function(f){if(typeof f.length!="undefined"&&f[0]){f=f[0];}if(f.childNodes&&f.childNodes[0]&&f.childNodes[0].nodeValue){return f.childNodes[0].nodeValue;}return false;},setVisibility:function(f){if(f){a.addClass(this.el,"active");}else{a.removeClass(this.el,"active");}},setPricing:function(){if(this.trimUpdate){bestOffer=_widgets.context.PricingContext.getBestOfferTrim();}else{bestOffer=_widgets.context.PricingContext.getBestOfferAmongTrims();}var f=_widgets.context.PricingContext.get("currentTrim");if(bestOffer){this.updateMonthlyPrice(bestOffer);}},checkCampaign:function(i){var n=this,g=i||false;td_widget.Tooltip.hide();var h=_widgets.context.UserContext.get("zIPCode");if(this.zip!=h&&(h&&__params.make&&__params.modelName&&__params.year)&&this.leaseCampaigns){var k=__params.modelName;var l=new RegExp(__params.make+"\\s*","i");k=k.replace(l,"");var m={success:function(q){var x=q.responseXML;var y,s,u=["Extract Lease - 800#","Extract Lease - NO 800#","A/X/Z/D Lease Payment Extract"];u=u.join("");if(x){var p=x.getElementsByTagName("Campaign");if(p.length){for(var t=0,r=p.length;t<r;t++){var w=p[t].getElementsByTagName("CampaignType");w=n.getNodeValue(w);if(w&&u.indexOf(w)!=-1){var v=p[t].getElementsByTagName("SecurityDeposite");v=n.getNodeValue(v);if(v=="$0"){return n.updateCampaignPricing(p[t]);}}}}}if(g){n.campaign=false;return n.updateYUIPricing(g);}}};var f="/services/incentives/SpecialOffers?make="+__params.make+"&model="+k+"&year="+__params.year+"&appContext=ngbs_sploffr&postalCode="+h;var j=td_site.pricing.getPlanTypeForServices();if(j&&j!="MSRP"){f+="&planType="+j;}this.zip=h;YAHOO.util.Connect.asyncRequest("GET",f,m);}else{if(g){this.updateYUIPricing(g);}}},updateYUIPricing:function(j){var f=j.newValue;if(f&&f.model&&f.model.trims){try{var g;var i;_widgets.context.PricingContext.set("trimsPricingData",f.model.trims);if(this.trimUpdate){i=_widgets.context.PricingContext.getBestOfferTrim();}else{i=_widgets.context.PricingContext.getBestOfferAmongTrims();}g=_widgets.context.PricingContext.get("currentTrim");if(i){this.updateMonthlyPrice(i);}}catch(h){log.error("Error while determining the best offer. Error : "+h);}}},updatePricing:function(f){this.trimUpdate=true;_widgets.context.SelectedContext.set("currentTrim",f.trim);var g=_widgets.context.PricingContext.getBestOfferTrim();if(g){this.updateMonthlyPrice(g);}},updateCampaignPricing:function(j){this.campaign=true;a.addClass("monthly-price-tooltip-anchor","td_tooltip_disabled");var i=document.getElementById("monthly-price-tooltip-anchor");var h=document.getElementById("monthly-price-tooltip-incentives");i.href=h.href;i.innerHTML=h.innerHTML;$E.removeListener("monthly-price-tooltip-anchor","click");var k=j.getElementsByTagName("CashDueAtSigning");k=this.getNodeValue(k);var f=j.getElementsByTagName("Payment");f=this.getNodeValue(f);var g=j.getElementsByTagName("Exclusion");g=this.getNodeValue(g);if(g!="No exclusions"){g+=" Extra";}if(f){document.getElementById("monthly-price-value").innerHTML=f;document.getElementById("monthly-price-type").innerHTML="lease";document.getElementById("monthly-price-tooltip").className="lease campaign";document.getElementById("monthly-price-due-signing").innerHTML=k;document.getElementById("monthly-price-campaign-exclusions").innerHTML=g;}this.setVisibility(true);},updateMonthlyPrice:function(k){if(this.campaign){return false;}a.removeClass("monthly-price-tooltip-anchor","td_tooltip_disabled");var f=document.getElementById("monthly-price-tooltip-anchor");var j=document.getElementById("monthly-price-tooltip-payments");f.href=j.href;f.innerHTML=this.ttAnchorText;$E.addListener("monthly-price-tooltip-anchor","click",function(l){$E.stopEvent(l);});var h=k.term;document.getElementById("monthly-price-value").innerHTML="$"+k.offer;if(k.type==="finance"){var i=k.apr;document.getElementById("monthly-price-type").innerHTML="financing";document.getElementById("monthly-price-tooltip-type").innerHTML="financing";document.getElementById("monthly-price-tooltip").className="financing";document.getElementById("monthly-price-tooltip-apr").innerHTML=i+"%";}else{var g=k.signingAmount;document.getElementById("monthly-price-type").innerHTML="lease";document.getElementById("monthly-price-tooltip-type").innerHTML="lease";document.getElementById("monthly-price-tooltip").className="lease default";document.getElementById("monthly-price-due-signing").innerHTML="$"+g;}document.getElementById("monthly-price-tooltip-term").innerHTML=h;this.updateLink(k);this.setVisibility(true);},updateLink:function(h){var g=document.getElementById("monthly-price-tooltip-payments");if(!this.paymentsHref){this.paymentsHref=g.href;}var f=_widgets.context.PricingContext.currentTrimID;g.href=this.paymentsHref+"?paymentType="+h.type+"&trim="+f;}};_instances.bsLoader.initCompleteEvent.subscribe(function(){e.init();});});


widgets.add("overview-sidebar-starting-price",function(d,a,c){var b=document.getElementById("overview-sidebar");if(b){a.listen(b,"trim-pricing",function(g,f){d("#overview-sidebar-starting-price li.active").removeClass("active");d("#starting-price-"+f.trim).addClass("active");});}});
widgets.add("overview-sidebar-as-shown-price",function(d,a,c){var b=document.getElementById("overview-sidebar");if(b){a.listen(b,"trim-pricing",function(g,f){d("#overview-sidebar-shown-price li.active").removeClass("active");d("#shown-price-"+f.trim).addClass("active");});}});

(function(){var i=YAHOO.Bubbling;var g=YAHOO.util.Dom;var f=YAHOO.util.Event;var j=getPackageForName("com.forddirect.ng.util");var h=YAHOO.util.Cookie;var a="com.forddirect.ng.widgets";var k=getPackageForName(a);var b=getPackageForName("com.forddirect.ng.widgets.avrplayer");var d=getPackageForName("com.forddirect.ng.views");var c="overview";d.OverviewView=function(){};YAHOO.extend(d.OverviewView,d.BaseView);var e=d.OverviewView.prototype;e.init=function(n){d.OverviewView.superclass.init.call(this,n);WTDfireMetrics.subscribe(this.fireMetrics);var m=g.get("overview-footer");var u=new k.PromotionalArea(m,c);var l=g.get("overview-promo-slider");var q=new k.PromoSlider(l);var v=_widgets.context.SelectedContext.get("currentModel");if(v!="Fiesta2011"||v!="Fiesta2012"){_widgets.context.SelectedContext.subscribe("vehicleImageColorChange",this.changeBckImageColor,this,true);}if(v=="Explorer2011"){this.endecaLivesearchInput=document.getElementById("endecaLiveSearchForm").getElementsByTagName("div")[0];f.addListener(this.endecaLivesearchInput,"click",this.fnCallback);}ngbsMetricsTracker.storeMacroData("nameplateOverview");var y=this.addWidget("banner-overlay",k.OverviewBannerVideoOverlay);var w;var o=document.getElementById("mboxImported-default-fv-vhp-billboard-0");if(o===null){w=this.addWidget("overview-banner",k.OverviewBanner);}var t=g.get("overview-avr-player");if(t){_widgets.player=new b.VRPlayer(t,"_widgets.player");}i.addDefaultAction("launch-super-360",j.Actions.newHandler(function(){_widgets.player.show();return true;}));var x=g.get("search-endeca-live");if(x){var r=new k.BaseWidget(x);var p=new k.SiteSearchInput(r.el,r.params);}};e.fnCallback=function(l){oMetricsTracker.trackMicroData("liveSearchAsk");};e.fireMetrics=function(){ngbsMetricsTracker.fireMacroData();};e.fireInterception=function(){var l=h.get("worldApp");if(l==null){var n=Math.floor(Math.random()*10000);h.set("worldApp",n,{path:"/"});var m=_widgets.context.SelectedContext.get("domainId");runInterceptRules(n,s.pageName,m);}};e.onLoaderInitComplete=function(){this.handleBrowserHistoryChange();this.fireInterception();};e.changeBckImageColor=function(){var l=function(o){var p="url("+o+")";g.setStyle(g.get("page"),"backgroundImage",p);};var n=new Image();n.onload=function(){l(this.src);};var m=_widgets.context.SelectedContext.get("vehicleImageColor");log.debug("Changing the background image to ..."+m);n.src=m;};})();var td_getinputValue=function(){return document.getElementById("endecaLiveSearchForm").getElementsByTagName("input")[0].value;};
