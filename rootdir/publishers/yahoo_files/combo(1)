YUI.add("substitute",function(g){var b=g.Lang,d="dump",f=" ",c="{",e="}",a=function(A,l,t,h){var q,p,n,y,x,z,w=[],m,r,u=A.length;for(;;){q=A.lastIndexOf(c,u);if(q<0){break;}p=A.indexOf(e,q);if(q+1>=p){break;}m=A.substring(q+1,p);y=m;z=null;n=y.indexOf(f);if(n>-1){z=y.substring(n+1);y=y.substring(0,n);}x=l[y];if(t){x=t(y,x,z);}if(b.isObject(x)){if(!g.dump){x=x.toString();}else{if(b.isArray(x)){x=g.dump(x,parseInt(z,10));}else{z=z||"";r=z.indexOf(d);if(r>-1){z=z.substring(4);}if(x.toString===Object.prototype.toString||r>-1){x=g.dump(x,parseInt(z,10));}else{x=x.toString();}}}}else{if(!b.isString(x)&&!b.isNumber(x)){x="~-"+w.length+"-~";w[w.length]=m;}}A=A.substring(0,q)+x+A.substring(p+1);if(!h){u=q-1;}}for(q=w.length-1;q>=0;q=q-1){A=A.replace(new RegExp("~-"+q+"-~"),c+w[q]+e,"g");}return A;};g.substitute=a;b.substitute=a;},"3.3.0",{optional:["dump"]});YUI.add("oop",function(h){var d=h.Lang,c=h.Array,b=Object.prototype,a="_~yuim~_",e="each",g="some",f=function(l,k,m,i,j){if(l&&l[j]&&l!==h){return l[j].call(l,k,m);}else{switch(c.test(l)){case 1:return c[j](l,k,m);case 2:return c[j](h.Array(l,0,true),k,m);default:return h.Object[j](l,k,m,i);}}};h.augment=function(i,x,l,v,p){var n=x.prototype,t=null,w=x,q=(p)?h.Array(p):[],k=i.prototype,o=k||i,u=false,j,m;if(k&&w){j={};m={};t={};h.Object.each(n,function(s,r){m[r]=function(){for(var y in j){if(j.hasOwnProperty(y)&&(this[y]===m[y])){this[y]=j[y];}}w.apply(this,q);return j[r].apply(this,arguments);};if((!v||(r in v))&&(l||!(r in this))){if(d.isFunction(s)){j[r]=s;this[r]=m[r];}else{this[r]=s;}}},t,true);}else{u=true;}h.mix(o,t||n,l,v);if(u){x.apply(o,q);}return i;};h.aggregate=function(k,j,i,l){return h.mix(k,j,i,l,0,true);};h.extend=function(l,k,i,n){if(!k||!l){h.error("extend failed, verify dependencies");}var m=k.prototype,j=h.Object(m);l.prototype=j;j.constructor=l;l.superclass=m;if(k!=Object&&m.constructor==b.constructor){m.constructor=k;}if(i){h.mix(j,i,true);}if(n){h.mix(l,n,true);}return l;};h.each=function(k,j,l,i){return f(k,j,l,i,e);};h.some=function(k,j,l,i){return f(k,j,l,i,g);};h.clone=function(l,m,r,s,k,q){if(!d.isObject(l)){return l;}if(h.instanceOf(l,YUI)){return l;}var n,j=q||{},i,p=h.each;switch(d.type(l)){case"date":return new Date(l);case"regexp":return l;case"function":return l;case"array":n=[];break;default:if(l[a]){return j[l[a]];}i=h.guid();n=(m)?{}:h.Object(l);l[a]=i;j[i]=l;}if(!l.addEventListener&&!l.attachEvent){p(l,function(t,o){if((o||o===0)&&(!r||(r.call(s||this,t,o,this,l)!==false))){if(o!==a){if(o=="prototype"){}else{this[o]=h.clone(t,m,r,s,k||l,j);}}}},n);}if(!q){h.Object.each(j,function(t,o){if(t[a]){try{delete t[a];}catch(u){t[a]=null;}}},this);j=null;}return n;};h.bind=function(i,k){var j=arguments.length>2?h.Array(arguments,2,true):null;return function(){var m=d.isString(i)?k[i]:i,l=(j)?j.concat(h.Array(arguments,0,true)):arguments;return m.apply(k||m,l);};};h.rbind=function(i,k){var j=arguments.length>2?h.Array(arguments,2,true):null;return function(){var m=d.isString(i)?k[i]:i,l=(j)?h.Array(arguments,0,true).concat(j):arguments;return m.apply(k||m,l);};};},"3.3.0");YUI.add("event-custom-base",function(b){b.Env.evt={handles:{},plugins:{}};var g=0,i=1,p={objs:{},before:function(s,u,v,w){var t=s,r;if(w){r=[s,w].concat(b.Array(arguments,4,true));t=b.rbind.apply(b,r);}return this._inject(g,t,u,v);},after:function(s,u,v,w){var t=s,r;if(w){r=[s,w].concat(b.Array(arguments,4,true));t=b.rbind.apply(b,r);}return this._inject(i,t,u,v);},_inject:function(r,t,u,w){var x=b.stamp(u),v,s;if(!this.objs[x]){this.objs[x]={};}v=this.objs[x];if(!v[w]){v[w]=new b.Do.Method(u,w);u[w]=function(){return v[w].exec.apply(v[w],arguments);};}s=x+b.stamp(t)+w;v[w].register(s,t,r);return new b.EventHandle(v[w],s);},detach:function(r){if(r.detach){r.detach();}},_unload:function(s,r){}};b.Do=p;p.Method=function(r,s){this.obj=r;this.methodName=s;this.method=r[s];this.before={};this.after={};};p.Method.prototype.register=function(s,t,r){if(r){this.after[s]=t;}else{this.before[s]=t;}};p.Method.prototype._delete=function(r){delete this.before[r];delete this.after[r];};p.Method.prototype.exec=function(){var t=b.Array(arguments,0,true),u,s,x,v=this.before,r=this.after,w=false;for(u in v){if(v.hasOwnProperty(u)){s=v[u].apply(this.obj,t);if(s){switch(s.constructor){case p.Halt:return s.retVal;case p.AlterArgs:t=s.newArgs;break;case p.Prevent:w=true;break;default:}}}}if(!w){s=this.method.apply(this.obj,t);}p.originalRetVal=s;p.currentRetVal=s;for(u in r){if(r.hasOwnProperty(u)){x=r[u].apply(this.obj,t);if(x&&x.constructor==p.Halt){return x.retVal;}else{if(x&&x.constructor==p.AlterReturn){s=x.newRetVal;p.currentRetVal=s;}}}}return s;};p.AlterArgs=function(s,r){this.msg=s;this.newArgs=r;};p.AlterReturn=function(s,r){this.msg=s;this.newRetVal=r;};p.Halt=function(s,r){this.msg=s;this.retVal=r;};p.Prevent=function(r){this.msg=r;};p.Error=p.Halt;var m="after",q=["broadcast","monitored","bubbles","context","contextFn","currentTarget","defaultFn","defaultTargetOnly","details","emitFacade","fireOnce","async","host","preventable","preventedFn","queuable","silent","stoppedFn","target","type"],n=9,a="yui:log";b.EventHandle=function(r,s){this.evt=r;this.sub=s;};b.EventHandle.prototype={batch:function(r,s){r.call(s||this,this);if(b.Lang.isArray(this.evt)){b.Array.each(this.evt,function(t){t.batch.call(s||t,r);});}},detach:function(){var r=this.evt,t=0,s;if(r){if(b.Lang.isArray(r)){for(s=0;s<r.length;s++){t+=r[s].detach();}}else{r._delete(this.sub);t=1;}}return t;},monitor:function(r){return this.evt.monitor.apply(this.evt,arguments);}};b.CustomEvent=function(r,s){s=s||{};this.id=b.stamp(this);this.type=r;this.context=b;this.logSystem=(r==a);this.silent=this.logSystem;this.subscribers={};this.afters={};this.preventable=true;this.bubbles=true;this.signature=n;this.subCount=0;this.afterCount=0;this.applyConfig(s,true);};b.CustomEvent.prototype={hasSubs:function(r){var v=this.subCount,t=this.afterCount,u=this.sibling;if(u){v+=u.subCount;t+=u.afterCount;}if(r){return(r=="after")?t:v;}return(v+t);},monitor:function(t){this.monitored=true;var s=this.id+"|"+this.type+"_"+t,r=b.Array(arguments,0,true);r[0]=s;return this.host.on.apply(this.host,r);},getSubs:function(){var u=b.merge(this.subscribers),r=b.merge(this.afters),t=this.sibling;if(t){b.mix(u,t.subscribers);b.mix(r,t.afters);}return[u,r];},applyConfig:function(s,r){if(s){b.mix(this,s,r,q);}},_on:function(w,u,t,r){if(!w){this.log("Invalid callback for CE: "+this.type);}var v=new b.Subscriber(w,u,t,r);if(this.fireOnce&&this.fired){if(this.async){setTimeout(b.bind(this._notify,this,v,this.firedWith),0);}else{this._notify(v,this.firedWith);}}if(r==m){this.afters[v.id]=v;this.afterCount++;}else{this.subscribers[v.id]=v;this.subCount++;}return new b.EventHandle(this,v);},subscribe:function(t,s){var r=(arguments.length>2)?b.Array(arguments,2,true):null;return this._on(t,s,r,true);},on:function(t,s){var r=(arguments.length>2)?b.Array(arguments,2,true):null;if(this.host){this.host._monitor("attach",this.type,{args:arguments});}return this._on(t,s,r,true);},after:function(t,s){var r=(arguments.length>2)?b.Array(arguments,2,true):null;return this._on(t,s,r,m);},detach:function(w,u){if(w&&w.detach){return w.detach();}var t,v,x=0,r=b.merge(this.subscribers,this.afters);for(t in r){if(r.hasOwnProperty(t)){v=r[t];if(v&&(!w||w===v.fn)){this._delete(v);x++;}}}return x;},unsubscribe:function(){return this.detach.apply(this,arguments);},_notify:function(v,u,r){this.log(this.type+"->sub: "+v.id);var t;t=v.notify(u,this);if(false===t||this.stopped>1){this.log(this.type+" cancelled by subscriber");return false;}return true;},log:function(s,r){if(!this.silent){}},fire:function(){if(this.fireOnce&&this.fired){this.log("fireOnce event: "+this.type+" already fired");return true;}else{var r=b.Array(arguments,0,true);this.fired=true;this.firedWith=r;if(this.emitFacade){return this.fireComplex(r);}else{return this.fireSimple(r);}}},fireSimple:function(r){this.stopped=0;this.prevented=0;if(this.hasSubs()){var s=this.getSubs();this._procSubs(s[0],r);this._procSubs(s[1],r);}this._broadcast(r);return this.stopped?false:true;},fireComplex:function(r){r[0]=r[0]||{};return this.fireSimple(r);},_procSubs:function(v,t,r){var w,u;for(u in v){if(v.hasOwnProperty(u)){w=v[u];if(w&&w.fn){if(false===this._notify(w,t,r)){this.stopped=2;}if(this.stopped==2){return false;}}}}return true;},_broadcast:function(s){if(!this.stopped&&this.broadcast){var r=b.Array(s);r.unshift(this.type);if(this.host!==b){b.fire.apply(b,r);}if(this.broadcast==2){b.Global.fire.apply(b.Global,r);}}},unsubscribeAll:function(){return this.detachAll.apply(this,arguments);},detachAll:function(){return this.detach();},_delete:function(r){if(r){if(this.subscribers[r.id]){delete this.subscribers[r.id];this.subCount--;}if(this.afters[r.id]){delete this.afters[r.id];this.afterCount--;}}if(this.host){this.host._monitor("detach",this.type,{ce:this,sub:r});}if(r){r.deleted=true;}}};b.Subscriber=function(t,s,r){this.fn=t;this.context=s;this.id=b.stamp(this);this.args=r;};b.Subscriber.prototype={_notify:function(v,t,u){if(this.deleted&&!this.postponed){if(this.postponed){delete this.fn;delete this.context;}else{delete this.postponed;return null;}}var r=this.args,s;switch(u.signature){case 0:s=this.fn.call(v,u.type,t,v);break;case 1:s=this.fn.call(v,t[0]||null,v);break;default:if(r||t){t=t||[];r=(r)?t.concat(r):t;s=this.fn.apply(v,r);}else{s=this.fn.call(v);}}if(this.once){u._delete(this);}return s;},notify:function(s,u){var v=this.context,r=true;if(!v){v=(u.contextFn)?u.contextFn():u.context;}if(b.config.throwFail){r=this._notify(v,s,u);}else{try{r=this._notify(v,s,u);}catch(t){b.error(this+" failed: "+t.message,t);}}return r;},contains:function(s,r){if(r){return((this.fn==s)&&this.context==r);}else{return(this.fn==s);}}};var j=b.Lang,h=":",e="|",l="~AFTER~",k=b.Array,c=b.cached(function(r){return r.replace(/(.*)(:)(.*)/,"*$2$3");}),o=b.cached(function(r,s){if(!s||!j.isString(r)||r.indexOf(h)>-1){return r;}return s+h+r;}),f=b.cached(function(u,w){var s=u,v,x,r;if(!j.isString(s)){return s;}r=s.indexOf(l);if(r>-1){x=true;s=s.substr(l.length);}r=s.indexOf(e);if(r>-1){v=s.substr(0,(r));s=s.substr(r+1);if(s=="*"){s=null;}}return[v,(w)?o(s,w):s,x,s];}),d=function(r){var s=(j.isObject(r))?r:{};this._yuievt=this._yuievt||{id:b.guid(),events:{},targets:{},config:s,chain:("chain" in s)?s.chain:b.config.chain,bubbling:false,defaults:{context:s.context||this,host:this,emitFacade:s.emitFacade,fireOnce:s.fireOnce,queuable:s.queuable,monitored:s.monitored,broadcast:s.broadcast,defaultTargetOnly:s.defaultTargetOnly,bubbles:("bubbles" in s)?s.bubbles:true}};};d.prototype={once:function(){var r=this.on.apply(this,arguments);r.batch(function(s){if(s.sub){s.sub.once=true;}});return r;},parseType:function(r,s){return f(r,s||this._yuievt.config.prefix);},on:function(v,A,t){var D=f(v,this._yuievt.config.prefix),F,G,s,J,C,B,H,x=b.Env.evt.handles,u,r,y,I=b.Node,E,z,w;this._monitor("attach",D[1],{args:arguments,category:D[0],after:D[2]});if(j.isObject(v)){if(j.isFunction(v)){return b.Do.before.apply(b.Do,arguments);}F=A;G=t;s=k(arguments,0,true);J=[];if(j.isArray(v)){w=true;}u=v._after;delete v._after;b.each(v,function(M,L){if(j.isObject(M)){F=M.fn||((j.isFunction(M))?M:F);G=M.context||G;}var K=(u)?l:"";s[0]=K+((w)?M:L);s[1]=F;s[2]=G;J.push(this.on.apply(this,s));},this);return(this._yuievt.chain)?this:new b.EventHandle(J);}B=D[0];u=D[2];y=D[3];if(I&&b.instanceOf(this,I)&&(y in I.DOM_EVENTS)){s=k(arguments,0,true);s.splice(2,0,I.getDOMNode(this));return b.on.apply(b,s);}v=D[1];if(b.instanceOf(this,YUI)){r=b.Env.evt.plugins[v];s=k(arguments,0,true);s[0]=y;if(I){E=s[2];if(b.instanceOf(E,b.NodeList)){E=b.NodeList.getDOMNodes(E);}else{if(b.instanceOf(E,I)){E=I.getDOMNode(E);}}z=(y in I.DOM_EVENTS);if(z){s[2]=E;}}if(r){H=r.on.apply(b,s);}else{if((!v)||z){H=b.Event._attach(s);}}}if(!H){C=this._yuievt.events[v]||this.publish(v);H=C._on(A,t,(arguments.length>3)?k(arguments,3,true):null,(u)?"after":true);}if(B){x[B]=x[B]||{};x[B][v]=x[B][v]||[];x[B][v].push(H);}return(this._yuievt.chain)?this:H;},subscribe:function(){return this.on.apply(this,arguments);},detach:function(A,C,r){var G=this._yuievt.events,v,x=b.Node,E=x&&(b.instanceOf(this,x));if(!A&&(this!==b)){for(v in G){if(G.hasOwnProperty(v)){G[v].detach(C,r);}}if(E){b.Event.purgeElement(x.getDOMNode(this));}return this;}var u=f(A,this._yuievt.config.prefix),z=j.isArray(u)?u[0]:null,H=(u)?u[3]:null,w,D=b.Env.evt.handles,F,B,y,t,s=function(M,K,L){var J=M[K],N,I;if(J){for(I=J.length-1;I>=0;--I){N=J[I].evt;if(N.host===L||N.el===L){J[I].detach();}}}};if(z){B=D[z];A=u[1];F=(E)?b.Node.getDOMNode(this):this;if(B){if(A){s(B,A,F);}else{for(v in B){if(B.hasOwnProperty(v)){s(B,v,F);}}}return this;}}else{if(j.isObject(A)&&A.detach){A.detach();return this;}else{if(E&&((!H)||(H in x.DOM_EVENTS))){y=k(arguments,0,true);y[2]=x.getDOMNode(this);b.detach.apply(b,y);return this;}}}w=b.Env.evt.plugins[H];if(b.instanceOf(this,YUI)){y=k(arguments,0,true);if(w&&w.detach){w.detach.apply(b,y);return this;}else{if(!A||(!w&&x&&(A in x.DOM_EVENTS))){y[0]=A;b.Event.detach.apply(b.Event,y);return this;}}}t=G[u[1]];if(t){t.detach(C,r);}return this;},unsubscribe:function(){return this.detach.apply(this,arguments);},detachAll:function(r){return this.detach(r);},unsubscribeAll:function(){return this.detachAll.apply(this,arguments);},publish:function(t,u){var s,y,r,x,w=this._yuievt,v=w.config.prefix;t=(v)?o(t,v):t;this._monitor("publish",t,{args:arguments});if(j.isObject(t)){r={};b.each(t,function(A,z){r[z]=this.publish(z,A||u);},this);return r;}s=w.events;y=s[t];if(y){if(u){y.applyConfig(u,true);}}else{x=w.defaults;y=new b.CustomEvent(t,(u)?b.merge(x,u):x);s[t]=y;}return s[t];},_monitor:function(u,r,v){var s,t=this.getEvent(r);if((this._yuievt.config.monitored&&(!t||t.monitored))||(t&&t.monitored)){s=r+"_"+u;v.monitored=u;this.fire.call(this,s,v);}},fire:function(v){var z=j.isString(v),u=(z)?v:(v&&v.type),y,s,x=this._yuievt.config.prefix,w,r=(z)?k(arguments,1,true):arguments;u=(x)?o(u,x):u;this._monitor("fire",u,{args:r});y=this.getEvent(u,true);w=this.getSibling(u,y);if(w&&!y){y=this.publish(u);}if(!y){if(this._yuievt.hasTargets){return this.bubble({type:u},r,this);}s=true;}else{y.sibling=w;s=y.fire.apply(y,r);}return(this._yuievt.chain)?this:s;},getSibling:function(r,t){var s;if(r.indexOf(h)>-1){r=c(r);s=this.getEvent(r,true);if(s){s.applyConfig(t);s.bubbles=false;s.broadcast=0;}}return s;},getEvent:function(s,r){var u,t;if(!r){u=this._yuievt.config.prefix;s=(u)?o(s,u):s;}t=this._yuievt.events;return t[s]||null;},after:function(t,s){var r=k(arguments,0,true);switch(j.type(t)){case"function":return b.Do.after.apply(b.Do,arguments);case"array":case"object":r[0]._after=true;break;default:r[0]=l+t;}return this.on.apply(this,r);},before:function(){return this.on.apply(this,arguments);}};b.EventTarget=d;b.mix(b,d.prototype,false,false,{bubbles:false});d.call(b);YUI.Env.globalEvents=YUI.Env.globalEvents||new d();b.Global=YUI.Env.globalEvents;},"3.3.0",{requires:["oop"]});YUI.add("event-custom-complex",function(f){var b,e,d={},a=f.CustomEvent.prototype,c=f.EventTarget.prototype;f.EventFacade=function(h,g){h=h||d;this._event=h;this.details=h.details;this.type=h.type;this._type=h.type;this.target=h.target;this.currentTarget=g;this.relatedTarget=h.relatedTarget;};f.extend(f.EventFacade,Object,{stopPropagation:function(){this._event.stopPropagation();this.stopped=1;},stopImmediatePropagation:function(){this._event.stopImmediatePropagation();this.stopped=2;},preventDefault:function(){this._event.preventDefault();this.prevented=1;},halt:function(g){this._event.halt(g);this.prevented=1;this.stopped=(g)?2:1;}});a.fireComplex=function(p){var r,l,g,n,i,o,u,j,h,t=this,s=t.host||t,m,k;if(t.stack){if(t.queuable&&t.type!=t.stack.next.type){t.log("queue "+t.type);t.stack.queue.push([t,p]);return true;}}r=t.stack||{id:t.id,next:t,silent:t.silent,stopped:0,prevented:0,bubbling:null,type:t.type,afterQueue:new f.Queue(),defaultTargetOnly:t.defaultTargetOnly,queue:[]};j=t.getSubs();t.stopped=(t.type!==r.type)?0:r.stopped;t.prevented=(t.type!==r.type)?0:r.prevented;t.target=t.target||s;u=new f.EventTarget({fireOnce:true,context:s});t.events=u;if(t.preventedFn){u.on("prevented",t.preventedFn);}if(t.stoppedFn){u.on("stopped",t.stoppedFn);}t.currentTarget=s;t.details=p.slice();t.log("Firing "+t.type);t._facade=null;l=t._getFacade(p);if(f.Lang.isObject(p[0])){p[0]=l;}else{p.unshift(l);}if(j[0]){t._procSubs(j[0],p,l);}if(t.bubbles&&s.bubble&&!t.stopped){k=r.bubbling;r.bubbling=t.type;if(r.type!=t.type){r.stopped=0;r.prevented=0;}o=s.bubble(t,p,null,r);t.stopped=Math.max(t.stopped,r.stopped);t.prevented=Math.max(t.prevented,r.prevented);r.bubbling=k;}if(t.defaultFn&&!t.prevented&&((!t.defaultTargetOnly&&!r.defaultTargetOnly)||s===l.target)){t.defaultFn.apply(s,p);}t._broadcast(p);if(j[1]&&!t.prevented&&t.stopped<2){if(r.id===t.id||t.type!=s._yuievt.bubbling){t._procSubs(j[1],p,l);while((m=r.afterQueue.last())){m();}}else{h=j[1];if(r.execDefaultCnt){h=f.merge(h);f.each(h,function(q){q.postponed=true;});}r.afterQueue.add(function(){t._procSubs(h,p,l);});}}t.target=null;if(r.id===t.id){n=r.queue;while(n.length){g=n.pop();i=g[0];r.next=i;i.fire.apply(i,g[1]);}t.stack=null;}o=!(t.stopped);if(t.type!=s._yuievt.bubbling){r.stopped=0;r.prevented=0;t.stopped=0;t.prevented=0;}return o;};a._getFacade=function(){var g=this._facade,j,i,h=this.details;if(!g){g=new f.EventFacade(this,this.currentTarget);}j=h&&h[0];if(f.Lang.isObject(j,true)){i={};f.mix(i,g,true,e);f.mix(g,j,true);f.mix(g,i,true,e);g.type=j.type||g.type;}g.details=this.details;g.target=this.originalTarget||this.target;g.currentTarget=this.currentTarget;g.stopped=0;g.prevented=0;this._facade=g;return this._facade;};a.stopPropagation=function(){this.stopped=1;if(this.stack){this.stack.stopped=1;}this.events.fire("stopped",this);};a.stopImmediatePropagation=function(){this.stopped=2;if(this.stack){this.stack.stopped=2;}this.events.fire("stopped",this);};a.preventDefault=function(){if(this.preventable){this.prevented=1;if(this.stack){this.stack.prevented=1;}this.events.fire("prevented",this);}};a.halt=function(g){if(g){this.stopImmediatePropagation();}else{this.stopPropagation();}this.preventDefault();};c.addTarget=function(g){this._yuievt.targets[f.stamp(g)]=g;this._yuievt.hasTargets=true;};c.getTargets=function(){return f.Object.values(this._yuievt.targets);};c.removeTarget=function(g){delete this._yuievt.targets[f.stamp(g)];};c.bubble=function(u,q,o,s){var m=this._yuievt.targets,p=true,v,r=u&&u.type,h,l,n,j,g=o||(u&&u.target)||this,k;if(!u||((!u.stopped)&&m)){for(l in m){if(m.hasOwnProperty(l)){v=m[l];h=v.getEvent(r,true);j=v.getSibling(r,h);if(j&&!h){h=v.publish(r);}k=v._yuievt.bubbling;v._yuievt.bubbling=r;if(!h){if(v._yuievt.hasTargets){v.bubble(u,q,g,s);}}else{h.sibling=j;h.target=g;h.originalTarget=g;h.currentTarget=v;n=h.broadcast;h.broadcast=false;h.emitFacade=true;h.stack=s;p=p&&h.fire.apply(h,q||u.details||[]);h.broadcast=n;h.originalTarget=null;if(h.stopped){break;}}v._yuievt.bubbling=k;}}}return p;};b=new f.EventFacade();e=f.Object.keys(b);},"3.3.0",{requires:["event-custom-base"]});YUI.add("event-custom",function(a){},"3.3.0",{use:["event-custom-base","event-custom-complex"]});YUI.add("io-base",function(d){var D="io:start",p="io:complete",b="io:success",f="io:failure",E="io:end",y=0,o={"X-Requested-With":"XMLHttpRequest"},z={},k=d.config.win;function l(){return k.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");}function e(){var w=y;y++;return w;}function x(G,w){var F={};F.id=d.Lang.isNumber(w)?w:e();G=G||{};if(!G.use&&!G.upload){F.c=l();}else{if(G.use){if(G.use==="native"){if(k.XDomainRequest){F.c=new XDomainRequest();F.t=G.use;}else{F.c=l();}}else{F.c=d.io._transport[G.use];F.t=G.use;}}else{F.c={};F.t="io:iframe";}}return F;}function i(w){if(k){if(w.c&&k.XMLHttpRequest){w.c.onreadystatechange=null;}else{if(d.UA.ie===6&&!w.t){w.c.abort();}}}w.c=null;w=null;}function q(H,I){var G=new d.EventTarget().publish("transaction:"+H),w=I.arguments,F=I.context||d;if(w){G.on(I.on[H],F,w);}else{G.on(I.on[H],F);}return G;}function u(G,F){var w=F.arguments;if(w){d.fire(D,G,w);}else{d.fire(D,G);}if(F.on&&F.on.start){q("start",F).fire(G);}}function g(G,H){var F=G.e?{status:0,statusText:G.e}:G.c,w=H.arguments;if(w){d.fire(p,G.id,F,w);}else{d.fire(p,G.id,F);}if(H.on&&H.on.complete){q("complete",H).fire(G.id,F);}}function j(F,G){var w=G.arguments;if(w){d.fire(E,F.id,w);}else{d.fire(E,F.id);}if(G.on&&G.on.end){q("end",G).fire(F.id);}i(F);}function t(F,G){var w=G.arguments;if(w){d.fire(b,F.id,F.c,w);}else{d.fire(b,F.id,F.c);}if(G.on&&G.on.success){q("success",G).fire(F.id,F.c);}j(F,G);}function h(G,H){var F=G.e?{status:0,statusText:G.e}:G.c,w=H.arguments;if(w){d.fire(f,G.id,F,w);}else{d.fire(f,G.id,F);}if(H.on&&H.on.failure){q("failure",H).fire(G.id,F);}j(G,H);}function a(G,w,H,F){i(G);H.xdr.use="flash";H.data=H.form&&F?F:null;return d.io(w,H,G.id);}function r(w,F){w+=((w.indexOf("?")==-1)?"?":"&")+F;return w;}function v(w,F){if(F){o[w]=F;}else{delete o[w];}}function c(G,w){var F;w=w||{};for(F in o){if(o.hasOwnProperty(F)){if(!w[F]){w[F]=o[F];}}}for(F in w){if(w.hasOwnProperty(F)){if(w[F]!=="disable"){G.setRequestHeader(F,w[F]);}}}}function n(F,w){if(F&&F.c){F.e=w;F.c.abort();}}function s(F,w){z[F.id]=k.setTimeout(function(){n(F,"timeout");},w);}function m(w){k.clearTimeout(z[w]);delete z[w];}function B(G,H){var w;try{w=(G.c.status&&G.c.status!==0)?G.c.status:0;}catch(F){w=0;}if(w>=200&&w<300||w===1223){t(G,H);}else{h(G,H);}}function C(w,F){if(w.c.readyState===4){if(F.timeout){m(w.id);}k.setTimeout(function(){g(w,F);B(w,F);},0);}}function A(G,O,K){var L,F,M,H,w,S,J,Q,I,R=G;O=d.Object(O);F=x(O.xdr||O.form,K);H=O.method?O.method=O.method.toUpperCase():O.method="GET";S=O.sync;J=O.data;if(d.Lang.isObject(O.data)&&d.QueryString){O.data=d.QueryString.stringify(O.data);}if(O.form){if(O.form.upload){return d.io.upload(F,G,O);}else{L=d.io._serialize(O.form,O.data);if(H==="POST"||H==="PUT"){O.data=L;}else{if(H==="GET"){G=r(G,L);}}}}if(O.data&&H==="GET"){G=r(G,O.data);}if(O.data&&H==="POST"){O.headers=d.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},O.headers);}if(F.t){return d.io.xdr(G,F,O);}if(!S){F.c.onreadystatechange=function(){C(F,O);};}try{F.c.open(H,G,S?false:true);if(O.xdr&&O.xdr.credentials){F.c.withCredentials=true;}}catch(P){if(O.xdr){return a(F,R,O,J);}}c(F.c,O.headers);u(F.id,O);try{F.c.send(O.data||"");if(S){M=F.c;Q=["status","statusText","responseText","responseXML"];w=O.arguments?{id:F.id,arguments:O.arguments}:{id:F.id};for(I=0;I<4;I++){w[Q[I]]=F.c[Q[I]];}w.getAllResponseHeaders=function(){return M.getAllResponseHeaders();};w.getResponseHeader=function(T){return M.getResponseHeader(T);};g(F,O);B(F,O);return w;}}catch(N){if(O.xdr){return a(F,R,O,J);}}if(O.timeout){s(F,O.timeout);}return{id:F.id,abort:function(){return F.c?n(F,"abort"):false;},isInProgress:function(){return F.c?F.c.readyState!==4&&F.c.readyState!==0:false;}};}A.start=u;A.complete=g;A.success=t;A.failure=h;A.end=j;A._id=e;A._timeout=z;A.header=v;d.io=A;d.io.http=A;},"3.3.0",{requires:["event-custom-base","querystring-stringify-simple"]});YUI.add("dom-base",function(d){(function(h){var o="nodeType",u="ownerDocument",v="documentElement",g="defaultView",m="parentWindow",s="tagName",k="parentNode",e="firstChild",t="previousSibling",w="nextSibling",l="contains",r="compareDocumentPosition",f="",i=[],y=h.config.doc.documentElement,n=/<([a-z]+)/i,j=function(B,z){var C=h.config.doc.createElement("div"),A=true;C.innerHTML=B;if(!C.firstChild||C.firstChild.tagName!==z.toUpperCase()){A=false;}return A;},p=h.Features.add,q=h.Features.test,x={byId:function(A,z){return x.allById(A,z)[0]||null;},getText:(y.textContent!==undefined)?function(A){var z="";if(A){z=A.textContent;}return z||"";}:function(A){var z="";if(A){z=A.innerText||A.nodeValue;}return z||"";},setText:(y.textContent!==undefined)?function(z,A){if(z){z.textContent=A;}}:function(z,A){if("innerText" in z){z.innerText=A;}else{if("nodeValue" in z){z.nodeValue=A;}}},ancestor:function(A,B,C){var z=null;if(C){z=(!B||B(A))?A:null;}return z||x.elementByAxis(A,k,B,null);},ancestors:function(B,C,D){var A=x.ancestor.apply(x,arguments),z=(A)?[A]:[];while((A=x.ancestor(A,C))){if(A){z.unshift(A);}}return z;},elementByAxis:function(z,C,B,A){while(z&&(z=z[C])){if((A||z[s])&&(!B||B(z))){return z;}}return null;},contains:function(A,B){var z=false;if(!B||!A||!B[o]||!A[o]){z=false;}else{if(A[l]){if(h.UA.opera||B[o]===1){z=A[l](B);}else{z=x._bruteContains(A,B);}}else{if(A[r]){if(A===B||!!(A[r](B)&16)){z=true;}}}}return z;},inDoc:function(B,C){var A=false,z;if(B&&B.nodeType){(C)||(C=B[u]);z=C[v];if(z&&z.contains&&B.tagName){A=z.contains(B);}else{A=x.contains(z,B);}}return A;},allById:function(E,z){z=z||h.config.doc;var A=[],B=[],C,D;if(z.querySelectorAll){B=z.querySelectorAll('[id="'+E+'"]');}else{if(z.all){A=z.all(E);if(A){if(A.nodeName){if(A.id===E){B.push(A);A=i;}else{A=[A];}}if(A.length){for(C=0;D=A[C++];){if(D.id===E||(D.attributes&&D.attributes.id&&D.attributes.id.value===E)){B.push(D);}}}}}else{B=[x._getDoc(z).getElementById(E)];}}return B;},create:function(D,G){if(typeof D==="string"){D=h.Lang.trim(D);}G=G||h.config.doc;var C=n.exec(D),E=x._create,A=x.creators,F=null,B,H,z;if(D!=undefined){if(C&&C[1]){B=A[C[1].toLowerCase()];if(typeof B==="function"){E=B;}else{H=B;}}z=E(D,G,H).childNodes;if(z.length===1){F=z[0].parentNode.removeChild(z[0]);}else{if(z[0]&&z[0].className==="yui3-big-dummy"){if(z.length===2){F=z[0].nextSibling;}else{z[0].parentNode.removeChild(z[0]);F=x._nl2frag(z,G);}}else{F=x._nl2frag(z,G);}}}return F;},_nl2frag:function(A,D){var B=null,C,z;if(A&&(A.push||A.item)&&A[0]){D=D||A[0].ownerDocument;B=D.createDocumentFragment();if(A.item){A=h.Array(A,0,true);}for(C=0,z=A.length;C<z;C++){B.appendChild(A[C]);}}return B;},CUSTOM_ATTRIBUTES:(!y.hasAttribute)?{"for":"htmlFor","class":"className"}:{htmlFor:"for",className:"class"},setAttribute:function(B,z,C,A){if(B&&z&&B.setAttribute){z=x.CUSTOM_ATTRIBUTES[z]||z;B.setAttribute(z,C,A);}},getAttribute:function(C,z,B){B=(B!==undefined)?B:2;var A="";if(C&&z&&C.getAttribute){z=x.CUSTOM_ATTRIBUTES[z]||z;A=C.getAttribute(z,B);if(A===null){A="";}}return A;},isWindow:function(z){return !!(z&&z.alert&&z.document);},_fragClones:{},_create:function(A,B,z){z=z||"div";var C=x._fragClones[z];if(C){C=C.cloneNode(false);}else{C=x._fragClones[z]=B.createElement(z);}C.innerHTML=A;return C;},_removeChildNodes:function(z){while(z.firstChild){z.removeChild(z.firstChild);}},addHTML:function(G,F,B){var z=G.parentNode,D=0,E,A=F,C;if(F!=undefined){if(F.nodeType){C=F;}else{if(typeof F=="string"||typeof F=="number"){A=C=x.create(F);}else{if(F[0]&&F[0].nodeType){C=h.config.doc.createDocumentFragment();while((E=F[D++])){C.appendChild(E);}}}}}if(B){if(B.nodeType){B.parentNode.insertBefore(C,B);}else{switch(B){case"replace":while(G.firstChild){G.removeChild(G.firstChild);}if(C){G.appendChild(C);}break;case"before":z.insertBefore(C,G);break;case"after":if(G.nextSibling){z.insertBefore(C,G.nextSibling);}else{z.appendChild(C);}break;default:G.appendChild(C);}}}else{if(C){G.appendChild(C);}}return A;},VALUE_SETTERS:{},VALUE_GETTERS:{},getValue:function(B){var A="",z;if(B&&B[s]){z=x.VALUE_GETTERS[B[s].toLowerCase()];if(z){A=z(B);}else{A=B.value;}}if(A===f){A=f;}return(typeof A==="string")?A:"";},setValue:function(z,A){var B;if(z&&z[s]){B=x.VALUE_SETTERS[z[s].toLowerCase()];if(B){B(z,A);}else{z.value=A;}}},siblings:function(C,B){var z=[],A=C;while((A=A[t])){if(A[s]&&(!B||B(A))){z.unshift(A);}}A=C;while((A=A[w])){if(A[s]&&(!B||B(A))){z.push(A);}}return z;},_bruteContains:function(z,A){while(A){if(z===A){return true;}A=A.parentNode;}return false;},_getRegExp:function(A,z){z=z||"";x._regexCache=x._regexCache||{};if(!x._regexCache[A+z]){x._regexCache[A+z]=new RegExp(A,z);}return x._regexCache[A+z];},_getDoc:function(z){var A=h.config.doc;if(z){A=(z[o]===9)?z:z[u]||z.document||h.config.doc;}return A;},_getWin:function(z){var A=x._getDoc(z);return A[g]||A[m]||h.config.win;},_batch:function(z,I,F,E,D,B){I=(typeof I==="string")?x[I]:I;var J,H=Array.prototype.slice.call(arguments,2),C=0,A,G;if(I&&z){while((A=z[C++])){J=J=I.call(x,A,F,E,D,B);if(typeof J!=="undefined"){(G)||(G=[]);G.push(J);}}}return(typeof G!=="undefined")?G:z;},wrap:function(C,A){var B=h.DOM.create(A),z=B.getElementsByTagName("*");if(z.length){B=z[z.length-1];}if(C.parentNode){C.parentNode.replaceChild(B,C);}B.appendChild(C);},unwrap:function(C){var A=C.parentNode,B=A.lastChild,C=A.firstChild,z=C,D;if(A){D=A.parentNode;if(D){while(C!==B){z=C.nextSibling;D.insertBefore(C,A);C=z;}D.replaceChild(B,A);}else{A.removeChild(C);}}},generateID:function(z){var A=z.id;if(!A){A=h.stamp(z);z.id=A;}return A;},creators:{}};p("innerhtml","table",{test:function(){var z=h.config.doc.createElement("table");try{z.innerHTML="<tbody></tbody>";}catch(A){return false;}return(z.firstChild&&z.firstChild.nodeName==="TBODY");}});p("innerhtml-div","tr",{test:function(){return j("<tr></tr>","tr");}});p("innerhtml-div","script",{test:function(){return j("<script><\/script>","script");}});p("value-set","select",{test:function(){var z=h.config.doc.createElement("select");z.innerHTML="<option>1</option><option>2</option>";z.value="2";return(z.value&&z.value==="2");}});(function(D){var E=x.creators,z=x.create,C=/(?:\/(?:thead|tfoot|tbody|caption|col|colgroup)>)+\s*<tbody/,B="<table>",A="</table>";if(!q("innerhtml","table")){E.tbody=function(G,H){var I=z(B+G+A,H),F=I.children.tags("tbody")[0];if(I.children.length>1&&F&&!C.test(G)){F[k].removeChild(F);}return I;};}if(!q("innerhtml-div","script")){E.script=function(F,G){var H=G.createElement("div");H.innerHTML="-"+F;H.removeChild(H[e]);return H;};x.creators.link=x.creators.style=x.creators.script;}if(!q("value-set","select")){x.VALUE_SETTERS.select=function(I,J){for(var G=0,F=I.getElementsByTagName("option"),H;H=F[G++];){if(x.getValue(H)===J){H.selected=true;break;}}};}D.mix(x.VALUE_GETTERS,{button:function(F){return(F.attributes&&F.attributes.value)?F.attributes.value.value:"";}});D.mix(x.VALUE_SETTERS,{button:function(G,H){var F=G.attributes.value;if(!F){F=G[u].createAttribute("value");G.setAttributeNode(F);}F.value=H;}});if(!q("innerhtml-div","tr")){D.mix(E,{option:function(F,G){return z('<select><option class="yui3-big-dummy" selected></option>'+F+"</select>",G);},tr:function(F,G){return z("<tbody>"+F+"</tbody>",G);},td:function(F,G){return z("<tr>"+F+"</tr>",G);},col:function(F,G){return z("<colgroup>"+F+"</colgroup>",G);},tbody:"table"});D.mix(E,{legend:"fieldset",th:E.td,thead:E.tbody,tfoot:E.tbody,caption:E.tbody,colgroup:E.tbody,optgroup:E.option});}D.mix(x.VALUE_GETTERS,{option:function(G){var F=G.attributes;return(F.value&&F.value.specified)?G.value:G.text;},select:function(G){var H=G.value,F=G.options;if(F&&F.length){if(G.multiple){}else{H=x.getValue(F[G.selectedIndex]);}}return H;}});})(h);h.DOM=x;})(d);var b,a,c;d.mix(d.DOM,{hasClass:function(g,f){var e=d.DOM._getRegExp("(?:^|\\s+)"+f+"(?:\\s+|$)");return e.test(g.className);},addClass:function(f,e){if(!d.DOM.hasClass(f,e)){f.className=d.Lang.trim([f.className,e].join(" "));}},removeClass:function(f,e){if(e&&a(f,e)){f.className=d.Lang.trim(f.className.replace(d.DOM._getRegExp("(?:^|\\s+)"+e+"(?:\\s+|$)")," "));if(a(f,e)){c(f,e);}}},replaceClass:function(f,e,g){c(f,e);b(f,g);},toggleClass:function(f,e,g){var h=(g!==undefined)?g:!(a(f,e));if(h){b(f,e);}else{c(f,e);}}});a=d.DOM.hasClass;c=d.DOM.removeClass;b=d.DOM.addClass;d.mix(d.DOM,{setWidth:function(f,e){d.DOM._setSize(f,"width",e);},setHeight:function(f,e){d.DOM._setSize(f,"height",e);},_setSize:function(f,h,g){g=(g>0)?g:0;var e=0;f.style[h]=g+"px";e=(h==="height")?f.offsetHeight:f.offsetWidth;if(e>g){g=g-(e-g);if(g<0){g=0;}f.style[h]=g+"px";}}});},"3.3.0",{requires:["oop"]});YUI.add("dom-style",function(a){(function(e){var p="documentElement",b="defaultView",n="ownerDocument",h="style",i="float",r="cssFloat",s="styleFloat",k="transparent",d="getComputedStyle",c="getBoundingClientRect",o=e.config.win,g=e.config.doc,t=undefined,q=e.DOM,f="transform",l=["WebkitTransform","MozTransform","OTransform"],m=/color$/i,j=/width|height|top|left|right|bottom|margin|padding/i;e.Array.each(l,function(u){if(u in g[p].style){f=u;}});e.mix(q,{DEFAULT_UNIT:"px",CUSTOM_STYLES:{},setStyle:function(x,u,y,w){w=w||x.style;var v=q.CUSTOM_STYLES;if(w){if(y===null||y===""){y="";}else{if(!isNaN(new Number(y))&&j.test(u)){y+=q.DEFAULT_UNIT;}}if(u in v){if(v[u].set){v[u].set(x,y,w);return;}else{if(typeof v[u]==="string"){u=v[u];}}}else{if(u===""){u="cssText";y="";}}w[u]=y;}},getStyle:function(x,u,w){w=w||x.style;var v=q.CUSTOM_STYLES,y="";if(w){if(u in v){if(v[u].get){return v[u].get(x,u,w);}else{if(typeof v[u]==="string"){u=v[u];}}}y=w[u];if(y===""){y=q[d](x,u);}}return y;},setStyles:function(v,w){var u=v.style;e.each(w,function(x,y){q.setStyle(v,y,x,u);},q);},getComputedStyle:function(v,u){var x="",w=v[n];if(v[h]&&w[b]&&w[b][d]){x=w[b][d](v,null)[u];}return x;}});if(g[p][h][r]!==t){q.CUSTOM_STYLES[i]=r;}else{if(g[p][h][s]!==t){q.CUSTOM_STYLES[i]=s;}}if(e.UA.opera){q[d]=function(w,v){var u=w[n][b],x=u[d](w,"")[v];if(m.test(v)){x=e.Color.toRGB(x);}return x;};}if(e.UA.webkit){q[d]=function(w,v){var u=w[n][b],x=u[d](w,"")[v];if(x==="rgba(0, 0, 0, 0)"){x=k;}return x;};}e.DOM._getAttrOffset=function(y,v){var A=e.DOM[d](y,v),x=y.offsetParent,u,w,z;if(A==="auto"){u=e.DOM.getStyle(y,"position");if(u==="static"||u==="relative"){A=0;}else{if(x&&x[c]){w=x[c]()[v];z=y[c]()[v];if(v==="left"||v==="top"){A=z-w;}else{A=w-y[c]()[v];}}}}return A;};e.DOM._getOffset=function(u){var w,v=null;if(u){w=q.getStyle(u,"position");v=[parseInt(q[d](u,"left"),10),parseInt(q[d](u,"top"),10)];if(isNaN(v[0])){v[0]=parseInt(q.getStyle(u,"left"),10);if(isNaN(v[0])){v[0]=(w==="relative")?0:u.offsetLeft||0;}}if(isNaN(v[1])){v[1]=parseInt(q.getStyle(u,"top"),10);if(isNaN(v[1])){v[1]=(w==="relative")?0:u.offsetTop||0;}}}return v;};q.CUSTOM_STYLES.transform={set:function(v,w,u){u[f]=w;},get:function(v,u){return q[d](v,f);}};})(a);(function(d){var b=parseInt,c=RegExp;d.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(e){if(!d.Color.re_RGB.test(e)){e=d.Color.toHex(e);}if(d.Color.re_hex.exec(e)){e="rgb("+[b(c.$1,16),b(c.$2,16),b(c.$3,16)].join(", ")+")";}return e;},toHex:function(f){f=d.Color.KEYWORDS[f]||f;if(d.Color.re_RGB.exec(f)){f=[Number(c.$1).toString(16),Number(c.$2).toString(16),Number(c.$3).toString(16)];for(var e=0;e<f.length;e++){if(f[e].length<2){f[e]="0"+f[e];}}f=f.join("");}if(f.length<6){f=f.replace(d.Color.re_hex3,"$1$1");}if(f!=="transparent"&&f.indexOf("#")<0){f="#"+f;}return f.toUpperCase();}};})(a);},"3.3.0",{requires:["dom-base"]});YUI.add("dom-screen",function(a){(function(f){var d="documentElement",q="compatMode",o="position",c="fixed",m="relative",g="left",h="top",i="BackCompat",p="medium",e="borderLeftWidth",b="borderTopWidth",r="getBoundingClientRect",k="getComputedStyle",l=f.DOM,n=/^t(?:able|d|h)$/i,j;if(f.UA.ie){if(f.config.doc[q]!=="quirks"){j=d;}else{j="body";}}f.mix(l,{winHeight:function(t){var s=l._getWinSize(t).height;return s;},winWidth:function(t){var s=l._getWinSize(t).width;return s;},docHeight:function(t){var s=l._getDocSize(t).height;return Math.max(s,l._getWinSize(t).height);},docWidth:function(t){var s=l._getDocSize(t).width;return Math.max(s,l._getWinSize(t).width);},docScrollX:function(u,v){v=v||(u)?l._getDoc(u):f.config.doc;var t=v.defaultView,s=(t)?t.pageXOffset:0;return Math.max(v[d].scrollLeft,v.body.scrollLeft,s);},docScrollY:function(u,v){v=v||(u)?l._getDoc(u):f.config.doc;var t=v.defaultView,s=(t)?t.pageYOffset:0;return Math.max(v[d].scrollTop,v.body.scrollTop,s);},getXY:function(){if(f.config.doc[d][r]){return function(x){var E=null,y,u,z,C,B,t,w,A,D,s,v;if(x&&x.tagName){D=x.ownerDocument;v=D[d];if(v.contains){s=v.contains(x);}else{s=f.DOM.contains(v,x);}if(s){y=(j)?D[j].scrollLeft:l.docScrollX(x,D);u=(j)?D[j].scrollTop:l.docScrollY(x,D);z=x[r]();E=[z.left,z.top];if(f.UA.ie){C=2;B=2;A=D[q];t=l[k](D[d],e);w=l[k](D[d],b);if(f.UA.ie===6){if(A!==i){C=0;B=0;}}if((A==i)){if(t!==p){C=parseInt(t,10);}if(w!==p){B=parseInt(w,10);}}E[0]-=C;E[1]-=B;}if((u||y)){if(!f.UA.ios||(f.UA.ios>=4.2)){E[0]+=y;E[1]+=u;}}}else{E=l._getOffset(x);}}return E;};}else{return function(t){var w=null,v,s,y,u,x;if(t){if(l.inDoc(t)){w=[t.offsetLeft,t.offsetTop];v=t.ownerDocument;s=t;y=((f.UA.gecko||f.UA.webkit>519)?true:false);while((s=s.offsetParent)){w[0]+=s.offsetLeft;w[1]+=s.offsetTop;if(y){w=l._calcBorders(s,w);}}if(l.getStyle(t,o)!=c){s=t;while((s=s.parentNode)){u=s.scrollTop;x=s.scrollLeft;if(f.UA.gecko&&(l.getStyle(s,"overflow")!=="visible")){w=l._calcBorders(s,w);}if(u||x){w[0]-=x;w[1]-=u;}}w[0]+=l.docScrollX(t,v);w[1]+=l.docScrollY(t,v);}else{w[0]+=l.docScrollX(t,v);w[1]+=l.docScrollY(t,v);}}else{w=l._getOffset(t);}}return w;};}}(),getX:function(s){return l.getXY(s)[0];},getY:function(s){return l.getXY(s)[1];},setXY:function(t,w,z){var u=l.setStyle,y,x,s,v;if(t&&w){y=l.getStyle(t,o);x=l._getOffset(t);if(y=="static"){y=m;u(t,o,y);}v=l.getXY(t);if(w[0]!==null){u(t,g,w[0]-v[0]+x[0]+"px");}if(w[1]!==null){u(t,h,w[1]-v[1]+x[1]+"px");}if(!z){s=l.getXY(t);if(s[0]!==w[0]||s[1]!==w[1]){l.setXY(t,w,true);}}}else{}},setX:function(t,s){return l.setXY(t,[s,null]);},setY:function(s,t){return l.setXY(s,[null,t]);},swapXY:function(t,s){var u=l.getXY(t);l.setXY(t,l.getXY(s));l.setXY(s,u);},_calcBorders:function(v,w){var u=parseInt(l[k](v,b),10)||0,s=parseInt(l[k](v,e),10)||0;if(f.UA.gecko){if(n.test(v.tagName)){u=0;s=0;}}w[0]+=s;w[1]+=u;return w;},_getWinSize:function(v,y){y=y||(v)?l._getDoc(v):f.config.doc;var x=y.defaultView||y.parentWindow,z=y[q],u=x.innerHeight,t=x.innerWidth,s=y[d];if(z&&!f.UA.opera){if(z!="CSS1Compat"){s=y.body;}u=s.clientHeight;t=s.clientWidth;}return{height:u,width:t};},_getDocSize:function(t){var u=(t)?l._getDoc(t):f.config.doc,s=u[d];if(u[q]!="CSS1Compat"){s=u.body;}return{height:s.scrollHeight,width:s.scrollWidth};}});})(a);(function(g){var d="top",c="right",h="bottom",b="left",f=function(m,k){var o=Math.max(m[d],k[d]),p=Math.min(m[c],k[c]),i=Math.min(m[h],k[h]),j=Math.max(m[b],k[b]),n={};n[d]=o;n[c]=p;n[h]=i;n[b]=j;return n;},e=g.DOM;g.mix(e,{region:function(j){var k=e.getXY(j),i=false;if(j&&k){i=e._getRegion(k[1],k[0]+j.offsetWidth,k[1]+j.offsetHeight,k[0]);}return i;},intersect:function(k,i,m){var j=m||e.region(k),l={},p=i,o;if(p.tagName){l=e.region(p);}else{if(g.Lang.isObject(i)){l=i;}else{return false;}}o=f(l,j);return{top:o[d],right:o[c],bottom:o[h],left:o[b],area:((o[h]-o[d])*(o[c]-o[b])),yoff:((o[h]-o[d])),xoff:(o[c]-o[b]),inRegion:e.inRegion(k,i,false,m)};},inRegion:function(l,i,j,o){var m={},k=o||e.region(l),q=i,p;if(q.tagName){m=e.region(q);}else{if(g.Lang.isObject(i)){m=i;}else{return false;}}if(j){return(k[b]>=m[b]&&k[c]<=m[c]&&k[d]>=m[d]&&k[h]<=m[h]);}else{p=f(m,k);if(p[h]>=p[d]&&p[c]>=p[b]){return true;}else{return false;}}},inViewportRegion:function(j,i,k){return e.inRegion(j,e.viewportRegion(j),i,k);},_getRegion:function(k,m,i,j){var n={};n[d]=n[1]=k;n[b]=n[0]=j;n[h]=i;n[c]=m;n.width=n[c]-n[b];n.height=n[h]-n[d];return n;},viewportRegion:function(j){j=j||g.config.doc.documentElement;var i=false,l,k;if(j){l=e.docScrollX(j);k=e.docScrollY(j);i=e._getRegion(k,e.winWidth(j)+l,k+e.winHeight(j),l);}return i;}});})(a);},"3.3.0",{requires:["dom-base","dom-style","event-base"]});YUI.add("selector-native",function(a){(function(e){e.namespace("Selector");var c="compareDocumentPosition",d="ownerDocument";var b={_foundCache:[],useNative:true,_compare:("sourceIndex" in e.config.doc.documentElement)?function(i,h){var g=i.sourceIndex,f=h.sourceIndex;if(g===f){return 0;}else{if(g>f){return 1;}}return -1;}:(e.config.doc.documentElement[c]?function(g,f){if(g[c](f)&4){return -1;}else{return 1;}}:function(j,i){var h,f,g;if(j&&i){h=j[d].createRange();h.setStart(j,0);f=i[d].createRange();f.setStart(i,0);g=h.compareBoundaryPoints(1,f);}return g;}),_sort:function(f){if(f){f=e.Array(f,0,true);if(f.sort){f.sort(b._compare);}}return f;},_deDupe:function(f){var g=[],h,j;for(h=0;(j=f[h++]);){if(!j._found){g[g.length]=j;j._found=true;}}for(h=0;(j=g[h++]);){j._found=null;j.removeAttribute("_found");}return g;},query:function(g,o,p,f){o=o||e.config.doc;var l=[],h=(e.Selector.useNative&&e.config.doc.querySelector&&!f),k=[[g,o]],m,q,j,n=(h)?e.Selector._nativeQuery:e.Selector._bruteQuery;if(g&&n){if(!f&&(!h||o.tagName)){k=b._splitQueries(g,o);}for(j=0;(m=k[j++]);){q=n(m[0],m[1],p);if(!p){q=e.Array(q,0,true);}if(q){l=l.concat(q);}}if(k.length>1){l=b._sort(b._deDupe(l));}}return(p)?(l[0]||null):l;},_splitQueries:function(h,l){var g=h.split(","),j=[],m="",k,f;if(l){if(l.tagName){l.id=l.id||e.guid();m='[id="'+l.id+'"] ';}for(k=0,f=g.length;k<f;++k){h=m+g[k];j.push([h,l]);}}return j;},_nativeQuery:function(f,g,h){if(e.UA.webkit&&f.indexOf(":checked")>-1&&(e.Selector.pseudos&&e.Selector.pseudos.checked)){return e.Selector.query(f,g,h,true);}try{return g["querySelector"+(h?"":"All")](f);}catch(i){return e.Selector.query(f,g,h,true);}},filter:function(g,f){var h=[],j,k;if(g&&f){for(j=0;(k=g[j++]);){if(e.Selector.test(k,f)){h[h.length]=k;}}}else{}return h;},test:function(h,k,p){var n=false,g=k.split(","),f=false,q,t,o,s,m,l,r;if(h&&h.tagName){if(!p&&!e.DOM.inDoc(h)){q=h.parentNode;if(q){p=q;}else{s=h[d].createDocumentFragment();s.appendChild(h);p=s;f=true;}}p=p||h[d];if(!h.id){h.id=e.guid();}for(m=0;(r=g[m++]);){r+='[id="'+h.id+'"]';o=e.Selector.query(r,p);for(l=0;t=o[l++];){if(t===h){n=true;break;}}if(n){break;}}if(f){s.removeChild(h);}}return n;},ancestor:function(g,f,h){return e.DOM.ancestor(g,function(i){return e.Selector.test(i,f);},h);}};e.mix(e.Selector,b,true);})(a);},"3.3.0",{requires:["dom-base"]});YUI.add("selector-css2",function(g){var h="parentNode",d="tagName",e="attributes",a="combinator",f="pseudos",c=g.Selector,b={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:true,_children:function(n,j){var k=n.children,m,l=[],o,p;if(n.children&&j&&n.children.tags){l=n.children.tags(j);}else{if((!k&&n[d])||(k&&j)){o=k||n.childNodes;k=[];for(m=0;(p=o[m++]);){if(p.tagName){if(!j||j===p.tagName){k.push(p);}}}}}return k||[];},_re:{attr:/(\[[^\]]*\])/g,pseudos:/:([\-\w]+(?:\(?:['"]?(.+)['"]?\)))*/i},shorthand:{"\\#(-?[_a-z]+[-\\w]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w]*)":"[className~=$1]"},operators:{"":function(j,i){return g.DOM.getAttribute(j,i)!=="";},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(i){return g.Selector._children(i[h])[0]===i;}},_bruteQuery:function(n,r,t){var o=[],i=[],q=c._tokenize(n),m=q[q.length-1],s=g.DOM._getDoc(r),k,j,p,l;if(m){j=m.id;p=m.className;l=m.tagName||"*";if(r.getElementsByTagName){if(j&&(r.all||(r.nodeType===9||g.DOM.inDoc(r)))){i=g.DOM.allById(j,r);}else{if(p){i=r.getElementsByClassName(p);}else{i=r.getElementsByTagName(l);}}}else{k=r.firstChild;while(k){if(k.tagName){i.push(k);}k=k.nextSilbing||k.firstChild;}}if(i.length){o=c._filterNodes(i,q,t);}}return o;},_filterNodes:function(u,q,s){var z=0,y,A=q.length,t=A-1,p=[],w=u[0],D=w,B=g.Selector.getters,o,x,m,r,k,v,l,C;for(z=0;(D=w=u[z++]);){t=A-1;r=null;testLoop:while(D&&D.tagName){m=q[t];l=m.tests;y=l.length;if(y&&!k){while((C=l[--y])){o=C[1];if(B[C[0]]){v=B[C[0]](D,C[0]);}else{v=D[C[0]];if(v===undefined&&D.getAttribute){v=D.getAttribute(C[0]);}}if((o==="="&&v!==C[2])||(typeof o!=="string"&&o.test&&!o.test(v))||(!o.test&&typeof o==="function"&&!o(D,C[0]))){if((D=D[r])){while(D&&(!D.tagName||(m.tagName&&m.tagName!==D.tagName))){D=D[r];}}continue testLoop;}}}t--;if(!k&&(x=m.combinator)){r=x.axis;D=D[r];while(D&&!D.tagName){D=D[r];}if(x.direct){r=null;}}else{p.push(w);if(s){return p;}break;}}}w=D=null;return p;},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:true},"+":{axis:"previousSibling",direct:true}},_parsers:[{name:e,re:/^\[(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\]]*?)['"]?\]/i,fn:function(k,l){var j=k[2]||"",i=g.Selector.operators,m;if((k[1]==="id"&&j==="=")||(k[1]==="className"&&g.config.doc.documentElement.getElementsByClassName&&(j==="~="||j==="="))){l.prefilter=k[1];l[k[1]]=k[3];}if(j in i){m=i[j];if(typeof m==="string"){k[3]=k[3].replace(g.Selector._reRegExpTokens,"\\$1");m=g.DOM._getRegExp(m.replace("{val}",k[3]));}k[2]=m;}if(!l.last||l.prefilter!==k[1]){return k.slice(1);}}},{name:d,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(j,k){var i=j[1].toUpperCase();k.tagName=i;if(i!=="*"&&(!k.last||k.prefilter)){return[d,"=",i];}if(!k.prefilter){k.prefilter="tagName";}}},{name:a,re:/^\s*([>+~]|\s)\s*/,fn:function(i,j){}},{name:f,re:/^:([\-\w]+)(?:\(['"]?(.+)['"]?\))*/i,fn:function(i,j){var k=c[f][i[1]];if(k){return[i[2],k];}else{return false;}}}],_getToken:function(i){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]};},_tokenize:function(l){l=l||"";l=c._replaceShorthand(g.Lang.trim(l));var k=c._getToken(),q=l,p=[],r=false,n,o,m,j;outer:do{r=false;for(m=0;(j=c._parsers[m++]);){if((n=j.re.exec(l))){if(j.name!==a){k.selector=l;}l=l.replace(n[0],"");if(!l.length){k.last=true;}if(c._attrFilters[n[1]]){n[1]=c._attrFilters[n[1]];}o=j.fn(n,k);if(o===false){r=false;break outer;}else{if(o){k.tests.push(o);}}if(!l.length||j.name===a){p.push(k);k=c._getToken(k);if(j.name===a){k.combinator=g.Selector.combinators[n[1]];}}r=true;}}}while(r&&l.length);if(!r||l.length){p=[];}return p;},_replaceShorthand:function(k){var l=c.shorthand,m=k.match(c._re.attr),p=k.match(c._re.pseudos),o,n,j;if(p){k=k.replace(c._re.pseudos,"!!REPLACED_PSEUDO!!");}if(m){k=k.replace(c._re.attr,"!!REPLACED_ATTRIBUTE!!");}for(o in l){if(l.hasOwnProperty(o)){k=k.replace(g.DOM._getRegExp(o,"gi"),l[o]);}}if(m){for(n=0,j=m.length;n<j;++n){k=k.replace("!!REPLACED_ATTRIBUTE!!",m[n]);}}if(p){for(n=0,j=p.length;n<j;++n){k=k.replace("!!REPLACED_PSEUDO!!",p[n]);}}return k;},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(j,i){return g.DOM.getAttribute(j,i);}}};g.mix(g.Selector,b,true);g.Selector.getters.src=g.Selector.getters.rel=g.Selector.getters.href;if(g.Selector.useNative&&g.config.doc.querySelector){g.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]";}},"3.3.0",{requires:["selector-native"]});YUI.add("selector",function(a){},"3.3.0",{use:["selector-native","selector-css2"]});YUI.add("dom",function(a){},"3.3.0",{use:["dom-base","dom-style","dom-screen","selector"]});YUI.add("dom-style-ie",function(a){(function(d){var A="hasLayout",l="px",m="filter",b="filters",x="opacity",q="auto",h="borderWidth",k="borderTopWidth",u="borderRightWidth",z="borderBottomWidth",i="borderLeftWidth",j="width",s="height",v="transparent",w="visible",c="getComputedStyle",C=undefined,B=d.config.doc.documentElement,p=d.Features.test,n=d.Features.add,t=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,o=(d.UA.ie>=8),f=function(e){return e.currentStyle||e.style;},r={CUSTOM_STYLES:{},get:function(e,E){var D="",F;if(e){F=f(e)[E];if(E===x&&d.DOM.CUSTOM_STYLES[x]){D=d.DOM.CUSTOM_STYLES[x].get(e);}else{if(!F||(F.indexOf&&F.indexOf(l)>-1)){D=F;}else{if(d.DOM.IE.COMPUTED[E]){D=d.DOM.IE.COMPUTED[E](e,E);}else{if(t.test(F)){D=r.getPixel(e,E)+l;}else{D=F;}}}}}return D;},sizeOffsets:{width:["Left","Right"],height:["Top","Bottom"],top:["Top"],bottom:["Bottom"]},getOffset:function(E,e){var I=f(E)[e],J=e.charAt(0).toUpperCase()+e.substr(1),F="offset"+J,D="pixel"+J,H=r.sizeOffsets[e],G=E.ownerDocument.compatMode,K="";if(I===q||I.indexOf("%")>-1){K=E["offset"+J];if(G!=="BackCompat"){if(H[0]){K-=r.getPixel(E,"padding"+H[0]);K-=r.getBorderWidth(E,"border"+H[0]+"Width",1);}if(H[1]){K-=r.getPixel(E,"padding"+H[1]);K-=r.getBorderWidth(E,"border"+H[1]+"Width",1);}}}else{if(!E.style[D]&&!E.style[e]){E.style[e]=I;}K=E.style[D];}return K+l;},borderMap:{thin:(o)?"1px":"2px",medium:(o)?"3px":"4px",thick:(o)?"5px":"6px"},getBorderWidth:function(D,F,e){var E=e?"":l,G=D.currentStyle[F];if(G.indexOf(l)<0){if(r.borderMap[G]&&D.currentStyle.borderStyle!=="none"){G=r.borderMap[G];}else{G=0;}}return(e)?parseFloat(G):G;},getPixel:function(E,e){var G=null,D=f(E),H=D.right,F=D[e];E.style.right=F;G=E.style.pixelRight;E.style.right=H;return G;},getMargin:function(E,e){var F,D=f(E);if(D[e]==q){F=0;}else{F=r.getPixel(E,e);}return F+l;},getVisibility:function(D,e){var E;while((E=D.currentStyle)&&E[e]=="inherit"){D=D.parentNode;}return(E)?E[e]:w;},getColor:function(D,e){var E=f(D)[e];if(!E||E===v){d.DOM.elementByAxis(D,"parentNode",null,function(F){E=f(F)[e];if(E&&E!==v){D=F;return true;}});}return d.Color.toRGB(E);},getBorderColor:function(D,e){var E=f(D),F=E[e]||E.color;return d.Color.toRGB(d.Color.toHex(F));}},g={};n("style","computedStyle",{test:function(){return"getComputedStyle" in d.config.win;}});n("style","opacity",{test:function(){return"opacity" in B.style;}});n("style","filter",{test:function(){return"filters" in B;}});if(!p("style","opacity")&&p("style","filter")){d.DOM.CUSTOM_STYLES[x]={get:function(E){var G=100;try{G=E[b]["DXImageTransform.Microsoft.Alpha"][x];}catch(F){try{G=E[b]("alpha")[x];}catch(D){}}return G/100;},set:function(E,H,D){var G,F=f(E),e=F[m];D=D||E.style;if(H===""){G=(x in F)?F[x]:1;H=G;}if(typeof e=="string"){D[m]=e.replace(/alpha([^)]*\))/gi,"")+((H<1)?"alpha("+x+"="+H*100+")":"");if(!D[m]){D.removeAttribute(m);}if(!F[A]){D.zoom=1;}}}};}try{d.config.doc.createElement("div").style.height="-1px";}catch(y){d.DOM.CUSTOM_STYLES.height={set:function(E,F,D){var e=parseFloat(F);if(e>=0||F==="auto"||F===""){D.height=F;}else{}}};d.DOM.CUSTOM_STYLES.width={set:function(E,F,D){var e=parseFloat(F);if(e>=0||F==="auto"||F===""){D.width=F;}else{}}};}if(!p("style","computedStyle")){g[j]=g[s]=r.getOffset;g.color=g.backgroundColor=r.getColor;g[h]=g[k]=g[u]=g[z]=g[i]=r.getBorderWidth;g.marginTop=g.marginRight=g.marginBottom=g.marginLeft=r.getMargin;g.visibility=r.getVisibility;g.borderColor=g.borderTopColor=g.borderRightColor=g.borderBottomColor=g.borderLeftColor=r.getBorderColor;d.DOM[c]=r.get;d.namespace("DOM.IE");d.DOM.IE.COMPUTED=g;d.DOM.IE.ComputedStyle=r;}})(a);},"3.3.0",{requires:["dom-style"]});YUI.add("dom-deprecated",function(a){a.mix(a.DOM,{children:function(d,b){var c=[];if(d){b=b||"*";c=a.Selector.query("> "+b,d);}return c;},firstByTag:function(b,c){var d;c=c||a.config.doc;if(b&&c.getElementsByTagName){d=c.getElementsByTagName(b)[0];}return d||null;},previous:function(b,d,c){return a.DOM.elementByAxis(b,"previousSibling",d,c);},next:function(b,d,c){return a.DOM.elementByAxis(b,"nextSibling",d,c);}});},"3.3.0",{requires:["dom-base"]});var GLOBAL_ENV=YUI.Env;if(!GLOBAL_ENV._ready){GLOBAL_ENV._ready=function(){GLOBAL_ENV.DOMReady=true;GLOBAL_ENV.remove(YUI.config.doc,"DOMContentLoaded",GLOBAL_ENV._ready);};GLOBAL_ENV.add(YUI.config.doc,"DOMContentLoaded",GLOBAL_ENV._ready);}YUI.add("event-base",function(e){e.publish("domready",{fireOnce:true,async:true});if(GLOBAL_ENV.DOMReady){e.fire("domready");}else{e.Do.before(function(){e.fire("domready");},YUI.Env,"_ready");}var b=e.UA,d={},a={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9,63272:46,63273:36,63275:35},c=function(h){if(!h){return h;}try{if(h&&3==h.nodeType){h=h.parentNode;}}catch(g){return null;}return e.one(h);},f=function(g,h,i){this._event=g;this._currentTarget=h;this._wrapper=i||d;this.init();};e.extend(f,Object,{init:function(){var i=this._event,j=this._wrapper.overrides,g=i.pageX,l=i.pageY,k,h=this._currentTarget;this.altKey=i.altKey;this.ctrlKey=i.ctrlKey;this.metaKey=i.metaKey;this.shiftKey=i.shiftKey;this.type=(j&&j.type)||i.type;this.clientX=i.clientX;this.clientY=i.clientY;this.pageX=g;this.pageY=l;k=i.keyCode||i.charCode;if(b.webkit&&(k in a)){k=a[k];}this.keyCode=k;this.charCode=k;this.which=i.which||i.charCode||k;this.button=this.which;this.target=c(i.target);this.currentTarget=c(h);this.relatedTarget=c(i.relatedTarget);if(i.type=="mousewheel"||i.type=="DOMMouseScroll"){this.wheelDelta=(i.detail)?(i.detail*-1):Math.round(i.wheelDelta/80)||((i.wheelDelta<0)?-1:1);}if(this._touch){this._touch(i,h,this._wrapper);}},stopPropagation:function(){this._event.stopPropagation();this._wrapper.stopped=1;this.stopped=1;},stopImmediatePropagation:function(){var g=this._event;if(g.stopImmediatePropagation){g.stopImmediatePropagation();}else{this.stopPropagation();}this._wrapper.stopped=2;this.stopped=2;},preventDefault:function(g){var h=this._event;h.preventDefault();h.returnValue=g||false;this._wrapper.prevented=1;this.prevented=1;},halt:function(g){if(g){this.stopImmediatePropagation();}else{this.stopPropagation();}this.preventDefault();}});f.resolve=c;e.DOM2EventFacade=f;e.DOMEventFacade=f;(function(){e.Env.evt.dom_wrappers={};e.Env.evt.dom_map={};var o=e.Env.evt,h=e.config,l=h.win,q=YUI.Env.add,j=YUI.Env.remove,n=function(){YUI.Env.windowLoaded=true;e.Event._load();j(l,"load",n);},g=function(){e.Event._unload();},i="domready",k="~yui|2|compat~",m=function(s){try{return(s&&typeof s!=="string"&&e.Lang.isNumber(s.length)&&!s.tagName&&!s.alert);}catch(r){return false;}},p=function(){var t=false,u=0,s=[],v=o.dom_wrappers,r=null,w=o.dom_map;return{POLL_RETRYS:1000,POLL_INTERVAL:40,lastError:null,_interval:null,_dri:null,DOMReady:false,startInterval:function(){if(!p._interval){p._interval=setInterval(p._poll,p.POLL_INTERVAL);}},onAvailable:function(x,B,F,y,C,E){var D=e.Array(x),z,A;for(z=0;z<D.length;z=z+1){s.push({id:D[z],fn:B,obj:F,override:y,checkReady:C,compat:E});}u=this.POLL_RETRYS;setTimeout(p._poll,0);A=new e.EventHandle({_delete:function(){if(A.handle){A.handle.detach();return;}var H,G;for(H=0;H<D.length;H++){for(G=0;G<s.length;G++){if(D[H]===s[G].id){s.splice(G,1);}}}}});return A;},onContentReady:function(B,z,A,y,x){return p.onAvailable(B,z,A,y,true,x);},attach:function(A,z,y,x){return p._attach(e.Array(arguments,0,true));},_createWrapper:function(D,C,x,y,B){var A,E=e.stamp(D),z="event:"+E+C;if(false===B){z+="native";}if(x){z+="capture";}A=v[z];if(!A){A=e.publish(z,{silent:true,bubbles:false,contextFn:function(){if(y){return A.el;}else{A.nodeRef=A.nodeRef||e.one(A.el);return A.nodeRef;}}});A.overrides={};A.el=D;A.key=z;A.domkey=E;A.type=C;A.fn=function(F){A.fire(p.getEvent(F,D,(y||(false===B))));};A.capture=x;if(D==l&&C=="load"){A.fireOnce=true;r=z;}v[z]=A;w[E]=w[E]||{};w[E][z]=A;q(D,C,A.fn,x);}return A;},_attach:function(D,C){var I,K,A,H,x,z=false,B,E=D[0],F=D[1],y=D[2]||l,L=C&&C.facade,J=C&&C.capture,G=C&&C.overrides;if(D[D.length-1]===k){I=true;}if(!F||!F.call){return false;}if(m(y)){K=[];e.each(y,function(N,M){D[2]=N;K.push(p._attach(D,C));});return new e.EventHandle(K);}else{if(e.Lang.isString(y)){if(I){A=e.DOM.byId(y);}else{A=e.Selector.query(y);switch(A.length){case 0:A=null;break;case 1:A=A[0];break;default:D[2]=A;return p._attach(D,C);}}if(A){y=A;}else{B=p.onAvailable(y,function(){B.handle=p._attach(D,C);},p,true,false,I);return B;}}}if(!y){return false;}if(e.Node&&e.instanceOf(y,e.Node)){y=e.Node.getDOMNode(y);}H=p._createWrapper(y,E,J,I,L);if(G){e.mix(H.overrides,G);}if(y==l&&E=="load"){if(YUI.Env.windowLoaded){z=true;}}if(I){D.pop();}x=D[3];B=H._on(F,x,(D.length>4)?D.slice(4):null);if(z){H.fire();}return B;},detach:function(E,F,z,C){var D=e.Array(arguments,0,true),H,A,G,B,x,y;if(D[D.length-1]===k){H=true;}if(E&&E.detach){return E.detach();}if(typeof z=="string"){if(H){z=e.DOM.byId(z);}else{z=e.Selector.query(z);A=z.length;if(A<1){z=null;}else{if(A==1){z=z[0];}}}}if(!z){return false;}if(z.detach){D.splice(2,1);return z.detach.apply(z,D);}else{if(m(z)){G=true;for(B=0,A=z.length;B<A;++B){D[2]=z[B];G=(e.Event.detach.apply(e.Event,D)&&G);}return G;}}if(!E||!F||!F.call){return p.purgeElement(z,false,E);}x="event:"+e.stamp(z)+E;y=v[x];if(y){return y.detach(F);}else{return false;}},getEvent:function(A,y,x){var z=A||l.event;return(x)?z:new e.DOMEventFacade(z,y,v["event:"+e.stamp(y)+A.type]);},generateId:function(x){return e.DOM.generateID(x);},_isValidCollection:m,_load:function(x){if(!t){t=true;if(e.fire){e.fire(i);}p._poll();}},_poll:function(){if(p.locked){return;}if(e.UA.ie&&!YUI.Env.DOMReady){p.startInterval();return;}p.locked=true;var y,x,C,z,B,D,A=!t;if(!A){A=(u>0);}B=[];D=function(G,H){var F,E=H.override;if(H.compat){if(H.override){if(E===true){F=H.obj;}else{F=E;}}else{F=G;}H.fn.call(F,H.obj);}else{F=H.obj||e.one(G);H.fn.apply(F,(e.Lang.isArray(E))?E:[]);}};for(y=0,x=s.length;y<x;++y){C=s[y];if(C&&!C.checkReady){z=(C.compat)?e.DOM.byId(C.id):e.Selector.query(C.id,null,true);if(z){D(z,C);s[y]=null;}else{B.push(C);}}}for(y=0,x=s.length;y<x;++y){C=s[y];if(C&&C.checkReady){z=(C.compat)?e.DOM.byId(C.id):e.Selector.query(C.id,null,true);if(z){if(t||(z.get&&z.get("nextSibling"))||z.nextSibling){D(z,C);s[y]=null;}}else{B.push(C);}}}u=(B.length===0)?0:u-1;if(A){p.startInterval();}else{clearInterval(p._interval);p._interval=null;}p.locked=false;return;},purgeElement:function(A,x,E){var C=(e.Lang.isString(A))?e.Selector.query(A,null,true):A,G=p.getListeners(C,E),B,D,F,z,y;if(x&&C){G=G||[];z=e.Selector.query("*",C);B=0;D=z.length;for(;B<D;++B){y=p.getListeners(z[B],E);if(y){G=G.concat(y);}}}if(G){B=0;D=G.length;for(;B<D;++B){F=G[B];F.detachAll();j(F.el,F.type,F.fn,F.capture);delete v[F.key];delete w[F.domkey][F.key];}}},getListeners:function(B,A){var C=e.stamp(B,true),x=w[C],z=[],y=(A)?"event:"+C+A:null,D=o.plugins;if(!x){return null;}if(y){if(D[A]&&D[A].eventDef){y+="_synth";}if(x[y]){z.push(x[y]);}y+="native";if(x[y]){z.push(x[y]);}}else{e.each(x,function(F,E){z.push(F);});}return(z.length)?z:null;},_unload:function(x){e.each(v,function(z,y){z.detachAll();j(z.el,z.type,z.fn,z.capture);delete v[y];delete w[z.domkey][y];});j(l,"unload",g);},nativeAdd:q,nativeRemove:j};}();e.Event=p;if(h.injected||YUI.Env.windowLoaded){n();}else{q(l,"load",n);}if(e.UA.ie){e.on(i,p._poll);}q(l,"unload",g);p.Custom=e.CustomEvent;p.Subscriber=e.Subscriber;p.Target=e.EventTarget;p.Handle=e.EventHandle;p.Facade=e.EventFacade;p._poll();})();e.Env.evt.plugins.available={on:function(i,h,k,j){var g=arguments.length>4?e.Array(arguments,4,true):null;return e.Event.onAvailable.call(e.Event,k,h,j,g);}};e.Env.evt.plugins.contentready={on:function(i,h,k,j){var g=arguments.length>4?e.Array(arguments,4,true):null;return e.Event.onContentReady.call(e.Event,k,h,j,g);}};},"3.3.0",{requires:["event-custom-base"]});(function(){var b,f=YUI.Env,d=YUI.config,g=d.doc,c=g&&g.documentElement,e="onreadystatechange",a=d.pollInterval||40;if(c.doScroll&&!f._ieready){f._ieready=function(){f._ready();};
/* DOMReady: based on work by: Dean Edwards/John Resig/Matthias Miller/Diego Perini */
if(self!==self.top){b=function(){if(g.readyState=="complete"){f.remove(g,e,b);f.ieready();}};f.add(g,e,b);}else{f._dri=setInterval(function(){try{c.doScroll("left");clearInterval(f._dri);f._dri=null;f._ieready();}catch(h){}},a);}}})();YUI.add("event-base-ie",function(c){var a=function(){c.DOM2EventFacade.apply(this,arguments);};c.extend(a,c.DOM2EventFacade,{init:function(){a.superclass.init.apply(this,arguments);var j=this._event,i=c.DOM2EventFacade.resolve,g,m,k,f,l,h;this.target=i(j.srcElement);if(("clientX" in j)&&(!g)&&(0!==g)){g=j.clientX;m=j.clientY;k=c.config.doc;f=k.body;l=k.documentElement;g+=(l.scrollLeft||(f&&f.scrollLeft)||0);m+=(l.scrollTop||(f&&f.scrollTop)||0);this.pageX=g;this.pageY=m;}if(j.type=="mouseout"){h=j.toElement;}else{if(j.type=="mouseover"){h=j.fromElement;}}this.relatedTarget=i(h);if(j.button){switch(j.button){case 2:this.which=3;break;case 4:this.which=2;break;default:this.which=j.button;}this.button=this.which;}},stopPropagation:function(){var d=this._event;d.cancelBubble=true;this._wrapper.stopped=1;this.stopped=1;},stopImmediatePropagation:function(){this.stopPropagation();this._wrapper.stopped=2;this.stopped=2;},preventDefault:function(d){this._event.returnValue=d||false;this._wrapper.prevented=1;this.prevented=1;}});var b=c.config.doc&&c.config.doc.implementation;if(b&&(!b.hasFeature("Events","2.0"))){c.DOMEventFacade=a;}},"3.3.0");YUI.add("event-delegate",function(a){var c=a.Array,h=a.Lang,b=h.isString,i=h.isObject,e=h.isArray,g=a.Selector.test,d=a.Env.evt.handles;function f(u,w,l,k){var s=c(arguments,0,true),t=b(l)?l:null,r,o,j,n,v,m,q,x,p;if(i(u)){x=[];if(e(u)){for(m=0,q=u.length;m<q;++m){s[0]=u[m];x.push(a.delegate.apply(a,s));}}else{s.unshift(null);for(m in u){if(u.hasOwnProperty(m)){s[0]=m;s[1]=u[m];x.push(a.delegate.apply(a,s));}}}return new a.EventHandle(x);}r=u.split(/\|/);if(r.length>1){v=r.shift();u=r.shift();}o=a.Node.DOM_EVENTS[u];if(i(o)&&o.delegate){p=o.delegate.apply(o,arguments);}if(!p){if(!u||!w||!l||!k){return;}j=(t)?a.Selector.query(t,null,true):l;if(!j&&b(l)){p=a.on("available",function(){a.mix(p,a.delegate.apply(a,s),true);},l);}if(!p&&j){s.splice(2,2,j);p=a.Event._attach(s,{facade:false});p.sub.filter=k;p.sub._notify=f.notifySub;}}if(p&&v){n=d[v]||(d[v]={});n=n[u]||(n[u]=[]);n.push(p);}return p;}f.notifySub=function(q,l,p){l=l.slice();if(this.args){l.push.apply(l,this.args);}var o=f._applyFilter(this.filter,l,p),n,m,j,k;if(o){o=c(o);n=l[0]=new a.DOMEventFacade(l[0],p.el,p);n.container=a.one(p.el);for(m=0,j=o.length;m<j&&!n.stopped;++m){n.currentTarget=a.one(o[m]);k=this.fn.apply(this.context||n.currentTarget,l);if(k===false){break;}}return k;}};f.compileFilter=a.cached(function(j){return function(l,k){return g(l._node,j,k.currentTarget._node);};});f._applyFilter=function(n,l,q){var p=l[0],j=q.el,o=p.target||p.srcElement,k=[],m=false;if(o.nodeType===3){o=o.parentNode;}l.unshift(o);if(b(n)){while(o){m=(o===j);if(g(o,n,(m?null:j))){k.push(o);}if(m){break;}o=o.parentNode;}}else{l[0]=a.one(o);l[1]=new a.DOMEventFacade(p,j,q);while(o){if(n.apply(l[0],l)){k.push(o);}if(o===j){break;}o=o.parentNode;l[0]=a.one(o);}l[1]=p;}if(k.length<=1){k=k[0];}l.shift();return k;};a.delegate=a.Event.delegate=f;},"3.3.0",{requires:["node-base"]});YUI.add("attribute-base",function(c){c.State=function(){this.data={};};c.State.prototype={add:function(B,C,E){var D=this.data;D[C]=D[C]||{};D[C][B]=E;},addAll:function(B,D){var C;for(C in D){if(D.hasOwnProperty(C)){this.add(B,C,D[C]);}}},remove:function(B,C){var D=this.data;if(D[C]&&(B in D[C])){delete D[C][B];}},removeAll:function(B,D){var C=this.data;c.each(D||C,function(F,E){if(c.Lang.isString(E)){this.remove(B,E);}else{this.remove(B,F);}},this);},get:function(B,C){var D=this.data;return(D[C]&&B in D[C])?D[C][B]:undefined;},getAll:function(B){var D=this.data,C;c.each(D,function(F,E){if(B in D[E]){C=C||{};C[E]=F[B];}},this);return C;}};var k=c.Object,f=c.Lang,l=c.EventTarget,w=".",t="Change",n="getter",m="setter",o="readOnly",x="writeOnce",u="initOnly",A="validator",h="value",p="valueFn",e="broadcast",r="lazyAdd",j="_bypassProxy",z="added",b="initializing",i="initValue",v="published",s="defaultValue",a="lazy",q="isLazyAdd",g,y={};y[o]=1;y[x]=1;y[n]=1;y[e]=1;function d(){var D=this,B=this.constructor.ATTRS,C=c.Base;D._ATTR_E_FACADE={};l.call(D,{emitFacade:true});D._conf=D._state=new c.State();D._stateProxy=D._stateProxy||null;D._requireAddAttr=D._requireAddAttr||false;if(B&&!(C&&c.instanceOf(D,C))){D.addAttrs(this._protectAttrs(B));}}d.INVALID_VALUE={};g=d.INVALID_VALUE;d._ATTR_CFG=[m,n,A,h,p,x,o,r,e,j];d.prototype={addAttr:function(C,B,E){var F=this,H=F._state,G,D;E=(r in B)?B[r]:E;if(E&&!F.attrAdded(C)){H.add(C,a,B||{});H.add(C,z,true);}else{if(!F.attrAdded(C)||H.get(C,q)){B=B||{};D=(h in B);if(D){G=B.value;delete B.value;}B.added=true;B.initializing=true;H.addAll(C,B);if(D){F.set(C,G);}H.remove(C,b);}}return F;},attrAdded:function(B){return !!this._state.get(B,z);},modifyAttr:function(C,B){var D=this,F,E;if(D.attrAdded(C)){if(D._isLazyAttr(C)){D._addLazyAttr(C);}E=D._state;for(F in B){if(y[F]&&B.hasOwnProperty(F)){E.add(C,F,B[F]);if(F===e){E.remove(C,v);}}}}},removeAttr:function(B){this._state.removeAll(B);},get:function(B){return this._getAttr(B);},_isLazyAttr:function(B){return this._state.get(B,a);},_addLazyAttr:function(C){var D=this._state,B=D.get(C,a);D.add(C,q,true);D.remove(C,a);this.addAttr(C,B);},set:function(B,D,C){return this._setAttr(B,D,C);},reset:function(B){var D=this,C;if(B){if(D._isLazyAttr(B)){D._addLazyAttr(B);}D.set(B,D._state.get(B,i));}else{C=D._state.data.added;c.each(C,function(E,F){D.reset(F);},D);}return D;},_set:function(B,D,C){return this._setAttr(B,D,C,true);},_getAttr:function(D){var E=this,I=D,F=E._state,G,B,H,C;if(D.indexOf(w)!==-1){G=D.split(w);D=G.shift();}if(E._tCfgs&&E._tCfgs[D]){C={};C[D]=E._tCfgs[D];delete E._tCfgs[D];E._addAttrs(C,E._tVals);}if(E._isLazyAttr(D)){E._addLazyAttr(D);}H=E._getStateVal(D);B=F.get(D,n);if(B&&!B.call){B=this[B];}H=(B)?B.call(E,H,I):H;H=(G)?k.getValue(H,G):H;return H;},_setAttr:function(D,G,B,E){var K=true,C=this._state,H=this._stateProxy,M=C.data,J,N,O,F,I,L;if(D.indexOf(w)!==-1){N=D;O=D.split(w);D=O.shift();}if(this._isLazyAttr(D)){this._addLazyAttr(D);}J=(!M.value||!(D in M.value));if(H&&D in H&&!this._state.get(D,j)){J=false;}if(this._requireAddAttr&&!this.attrAdded(D)){}else{I=C.get(D,x);L=C.get(D,b);if(!J&&!E){if(I){K=false;}if(C.get(D,o)){K=false;}}if(!L&&!E&&I===u){K=false;}if(K){if(!J){F=this.get(D);}if(O){G=k.setValue(c.clone(F),O,G);if(G===undefined){K=false;}}if(K){if(L){this._setAttrVal(D,N,F,G);}else{this._fireAttrChange(D,N,F,G,B);}}}}return this;},_fireAttrChange:function(H,G,E,D,B){var J=this,F=H+t,C=J._state,I;if(!C.get(H,v)){J.publish(F,{queuable:false,defaultTargetOnly:true,defaultFn:J._defAttrChangeFn,silent:true,broadcast:C.get(H,e)});C.add(H,v,true);}I=(B)?c.merge(B):J._ATTR_E_FACADE;I.attrName=H;I.subAttrName=G;I.prevVal=E;I.newVal=D;J.fire(F,I);},_defAttrChangeFn:function(B){if(!this._setAttrVal(B.attrName,B.subAttrName,B.prevVal,B.newVal)){B.stopImmediatePropagation();}else{B.newVal=this.get(B.attrName);}},_getStateVal:function(B){var C=this._stateProxy;return C&&(B in C)&&!this._state.get(B,j)?C[B]:this._state.get(B,h);},_setStateVal:function(B,D){var C=this._stateProxy;if(C&&(B in C)&&!this._state.get(B,j)){C[B]=D;}else{this._state.add(B,h,D);}},_setAttrVal:function(M,L,I,G){var O=this,J=true,D=O._state,E=D.get(M,A),H=D.get(M,m),K=D.get(M,b),N=this._getStateVal(M),C=L||M,F,B;if(E){if(!E.call){E=this[E];}if(E){B=E.call(O,G,C);if(!B&&K){G=D.get(M,s);B=true;}}}if(!E||B){if(H){if(!H.call){H=this[H];}if(H){F=H.call(O,G,C);if(F===g){J=false;}else{if(F!==undefined){G=F;}}}}if(J){if(!L&&(G===N)&&!f.isObject(G)){J=false;}else{if(D.get(M,i)===undefined){D.add(M,i,G);}O._setStateVal(M,G);}}}else{J=false;}return J;},setAttrs:function(B,C){return this._setAttrs(B,C);},_setAttrs:function(C,D){for(var B in C){if(C.hasOwnProperty(B)){this.set(B,C[B]);}}return this;},getAttrs:function(B){return this._getAttrs(B);},_getAttrs:function(E){var G=this,I={},F,C,B,H,D=(E===true);E=(E&&!D)?E:k.keys(G._state.data.added);for(F=0,C=E.length;F<C;F++){B=E[F];H=G.get(B);if(!D||G._getStateVal(B)!=G._state.get(B,i)){I[B]=G.get(B);}}return I;},addAttrs:function(B,C,D){var E=this;if(B){E._tCfgs=B;E._tVals=E._normAttrVals(C);E._addAttrs(B,E._tVals,D);E._tCfgs=E._tVals=null;}return E;},_addAttrs:function(C,D,E){var G=this,B,F,H;for(B in C){if(C.hasOwnProperty(B)){F=C[B];F.defaultValue=F.value;H=G._getAttrInitVal(B,F,G._tVals);if(H!==undefined){F.value=H;}if(G._tCfgs[B]){delete G._tCfgs[B];}G.addAttr(B,F,E);}}},_protectAttrs:function(C){if(C){C=c.merge(C);for(var B in C){if(C.hasOwnProperty(B)){C[B]=c.merge(C[B]);}}}return C;},_normAttrVals:function(B){return(B)?c.merge(B):null;},_getAttrInitVal:function(B,C,E){var F,D;if(!C[o]&&E&&E.hasOwnProperty(B)){F=E[B];}else{F=C[h];D=C[p];if(D){if(!D.call){D=this[D];}if(D){F=D.call(this);}}}return F;},_getAttrCfg:function(B){var D,C=this._state.data;if(C){D={};c.each(C,function(E,F){if(B){if(B in E){D[F]=E[B];}}else{c.each(E,function(H,G){D[G]=D[G]||{};D[G][F]=H;});}});}return D;}};c.mix(d,l,false,null,1);c.Attribute=d;},"3.3.0",{requires:["event-custom"]});YUI.add("attribute-complex",function(b){var a=b.Object,c=".";b.Attribute.Complex=function(){};b.Attribute.Complex.prototype={_normAttrVals:function(g){var i={},h={},j,d,f,e;if(g){for(e in g){if(g.hasOwnProperty(e)){if(e.indexOf(c)!==-1){j=e.split(c);d=j.shift();f=h[d]=h[d]||[];f[f.length]={path:j,value:g[e]};}else{i[e]=g[e];}}}return{simple:i,complex:h};}else{return null;}},_getAttrInitVal:function(m,j,p){var e=j.value,o=j.valueFn,d,f,h,g,q,n,k;if(o){if(!o.call){o=this[o];}if(o){e=o.call(this);}}if(!j.readOnly&&p){d=p.simple;if(d&&d.hasOwnProperty(m)){e=d[m];}f=p.complex;if(f&&f.hasOwnProperty(m)){k=f[m];for(h=0,g=k.length;h<g;++h){q=k[h].path;n=k[h].value;a.setValue(e,q,n);}}}return e;}};b.mix(b.Attribute,b.Attribute.Complex,true,null,1);},"3.3.0",{requires:["attribute-base"]});YUI.add("attribute",function(a){},"3.3.0",{use:["attribute-base","attribute-complex"]});YUI.add("base-base",function(b){var i=b.Object,k=b.Lang,j=".",g="destroy",p="init",o="initialized",h="destroyed",d="initializer",m="bubbleTargets",e="_bubbleTargets",c=Object.prototype.constructor,l="deep",q="shallow",n="destructor",a=b.Attribute;function f(){b.stamp(this);a.call(this);var r=b.Plugin&&b.Plugin.Host;if(this._initPlugins&&r){r.call(this);}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true;}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments);}f._ATTR_CFG=a._ATTR_CFG.concat("cloneDefaultValue");f.NAME="base";f.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};f.prototype={init:function(r){this._yuievt.config.prefix=this._eventPrefix;this.publish(p,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(r);this.fire(p,{cfg:r});return this;},_preInitEventCfg:function(s){if(s){if(s.on){this.on(s.on);}if(s.after){this.after(s.after);}}var t,r,v,u=(s&&m in s);if(u||e in this){v=u?(s&&s.bubbleTargets):this._bubbleTargets;if(k.isArray(v)){for(t=0,r=v.length;t<r;t++){this.addTarget(v[t]);}}else{if(v){this.addTarget(v);}}}},destroy:function(){this.publish(g,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(g);this.detachAll();return this;},_defInitFn:function(r){this._initHierarchy(r.cfg);if(this._initPlugins){this._initPlugins(r.cfg);}this._set(o,true);},_defDestroyFn:function(r){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins();}this._set(h,true);},_getClasses:function(){if(!this._classes){this._initHierarchyData();}return this._classes;},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData();}return this._attrs;},_filterAttrCfgs:function(v,s){var t=null,r,u=v.ATTRS;if(u){for(r in u){if(u.hasOwnProperty(r)&&s[r]){t=t||{};t[r]=s[r];delete s[r];}}}return t;},_initHierarchyData:function(){var t=this.constructor,s=[],r=[];while(t){s[s.length]=t;if(t.ATTRS){r[r.length]=t.ATTRS;}t=t.superclass?t.superclass.constructor:null;}this._classes=s;this._attrs=this._aggregateAttrs(r);},_aggregateAttrs:function(y){var v,z,u,r,A,s,x,t=f._ATTR_CFG,w={};if(y){for(s=y.length-1;s>=0;--s){z=y[s];for(v in z){if(z.hasOwnProperty(v)){u=b.mix({},z[v],true,t);r=u.value;x=u.cloneDefaultValue;if(r){if((x===undefined&&(c===r.constructor||k.isArray(r)))||x===l||x===true){u.value=b.clone(r);}else{if(x===q){u.value=b.merge(r);}}}A=null;if(v.indexOf(j)!==-1){A=v.split(j);v=A.shift();}if(A&&w[v]&&w[v].value){i.setValue(w[v].value,A,r);}else{if(!A){if(!w[v]){w[v]=u;}else{b.mix(w[v],u,true,t);}}}}}}}return w;},_initHierarchy:function(w){var t=this._lazyAddAttrs,x,y,z,u,s,v=this._getClasses(),r=this._getAttrCfgs();for(z=v.length-1;z>=0;z--){x=v[z];y=x.prototype;if(x._yuibuild&&x._yuibuild.exts){for(u=0,s=x._yuibuild.exts.length;u<s;u++){x._yuibuild.exts[u].apply(this,arguments);}}this.addAttrs(this._filterAttrCfgs(x,r),w,t);if(y.hasOwnProperty(d)){y.initializer.apply(this,arguments);}}},_destroyHierarchy:function(){var v,s,u,r,t=this._getClasses();for(u=0,r=t.length;u<r;u++){v=t[u];s=v.prototype;if(s.hasOwnProperty(n)){s.destructor.apply(this,arguments);}}},toString:function(){return this.name+"["+b.stamp(this,true)+"]";}};b.mix(f,a,false,null,1);f.prototype.constructor=f;b.Base=f;},"3.3.0",{requires:["attribute-base"]});YUI.add("pluginhost-base",function(c){var a=c.Lang;function b(){this._plugins={};}b.prototype={plug:function(g,d){var e,h,f;if(a.isArray(g)){for(e=0,h=g.length;e<h;e++){this.plug(g[e]);}}else{if(g&&!a.isFunction(g)){d=g.cfg;g=g.fn;}if(g&&g.NS){f=g.NS;d=d||{};d.host=this;if(this.hasPlugin(f)){this[f].setAttrs(d);}else{this[f]=new g(d);this._plugins[f]=g;}}}return this;},unplug:function(f){var e=f,d=this._plugins;if(f){if(a.isFunction(f)){e=f.NS;if(e&&(!d[e]||d[e]!==f)){e=null;}}if(e){if(this[e]){this[e].destroy();delete this[e];}if(d[e]){delete d[e];}}}else{for(e in this._plugins){if(this._plugins.hasOwnProperty(e)){this.unplug(e);}}}return this;},hasPlugin:function(d){return(this._plugins[d]&&this[d]);},_initPlugins:function(d){this._plugins=this._plugins||{};if(this._initConfigPlugins){this._initConfigPlugins(d);}},_destroyPlugins:function(){this.unplug();}};c.namespace("Plugin").Host=b;},"3.3.0",{requires:["yui-base"]});YUI.add("pluginhost-config",function(c){var b=c.Plugin.Host,a=c.Lang;b.prototype._initConfigPlugins=function(e){var g=(this._getClasses)?this._getClasses():[this.constructor],d=[],h={},f,j,l,m,k;for(j=g.length-1;j>=0;j--){f=g[j];m=f._UNPLUG;if(m){c.mix(h,m,true);}l=f._PLUG;if(l){c.mix(d,l,true);}}for(k in d){if(d.hasOwnProperty(k)){if(!h[k]){this.plug(d[k]);}}}if(e&&e.plugins){this.plug(e.plugins);}};b.plug=function(e,j,g){var k,h,d,f;if(e!==c.Base){e._PLUG=e._PLUG||{};if(!a.isArray(j)){if(g){j={fn:j,cfg:g};}j=[j];}for(h=0,d=j.length;h<d;h++){k=j[h];f=k.NAME||k.fn.NAME;e._PLUG[f]=k;}}};b.unplug=function(e,h){var j,g,d,f;if(e!==c.Base){e._UNPLUG=e._UNPLUG||{};if(!a.isArray(h)){h=[h];}for(g=0,d=h.length;g<d;g++){j=h[g];f=j.NAME;if(!e._PLUG[f]){e._UNPLUG[f]=j;}else{delete e._PLUG[f];}}}};},"3.3.0",{requires:["pluginhost-base"]});YUI.add("pluginhost",function(a){},"3.3.0",{use:["pluginhost-base","pluginhost-config"]});YUI.add("node-base",function(c){var i=".",e="nodeName",m="nodeType",b="ownerDocument",l="tagName",d="_yuid",o=Array.prototype.slice,f=c.DOM,j=function(q){var p=(q.nodeType!==9)?q.uniqueID:q[d];if(p&&j._instances[p]&&j._instances[p]._node!==q){q[d]=null;}p=p||c.stamp(q);if(!p){p=c.guid();}this[d]=p;this._node=q;j._instances[p]=this;this._stateProxy=q;c.EventTarget.call(this,{emitFacade:true});if(this._initPlugins){this._initPlugins();}this.SHOW_TRANSITION=j.SHOW_TRANSITION;this.HIDE_TRANSITION=j.HIDE_TRANSITION;},n=function(q){var p=null;if(q){p=(typeof q=="string")?function(r){return c.Selector.test(r,q);}:function(r){return q(c.one(r));};}return p;};j.NAME="node";j.re_aria=/^(?:role$|aria-)/;j.SHOW_TRANSITION="fadeIn";j.HIDE_TRANSITION="fadeOut";j.DOM_EVENTS={abort:1,beforeunload:1,blur:1,change:1,click:1,close:1,command:1,contextmenu:1,dblclick:1,DOMMouseScroll:1,drag:1,dragstart:1,dragenter:1,dragover:1,dragleave:1,dragend:1,drop:1,error:1,focus:1,key:1,keydown:1,keypress:1,keyup:1,load:1,message:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mousemultiwheel:1,mouseout:1,mouseover:1,mouseup:1,mousewheel:1,orientationchange:1,reset:1,resize:1,select:1,selectstart:1,submit:1,scroll:1,textInput:1,unload:1};c.mix(j.DOM_EVENTS,c.Env.evt.plugins);j._instances={};j.getDOMNode=function(p){if(p){return(p.nodeType)?p:p._node||null;}return null;};j.scrubVal=function(q,p){if(q){if(typeof q=="object"||typeof q=="function"){if(m in q||f.isWindow(q)){q=c.one(q);}else{if((q.item&&!q._nodes)||(q[0]&&q[0][m])){q=c.all(q);}}}}else{if(typeof q==="undefined"){q=p;}else{if(q===null){q=null;}}}return q;};j.addMethod=function(p,r,q){if(p&&r&&typeof r=="function"){j.prototype[p]=function(){var t=o.call(arguments),u=this,s;if(t[0]&&c.instanceOf(t[0],j)){t[0]=t[0]._node;}if(t[1]&&c.instanceOf(t[1],j)){t[1]=t[1]._node;}t.unshift(u._node);s=r.apply(u,t);if(s){s=j.scrubVal(s,u);}(typeof s!="undefined")||(s=u);return s;};}else{}};j.importMethod=function(r,p,q){if(typeof p=="string"){q=q||p;j.addMethod(q,r[p],r);}else{c.Array.each(p,function(s){j.importMethod(r,s);});}};j.one=function(s){var p=null,r,q;if(s){if(typeof s=="string"){if(s.indexOf("doc")===0){s=c.config.doc;}else{if(s.indexOf("win")===0){s=c.config.win;}else{s=c.Selector.query(s,null,true);}}if(!s){return null;}}else{if(c.instanceOf(s,j)){return s;}}if(s.nodeType||c.DOM.isWindow(s)){q=(s.uniqueID&&s.nodeType!==9)?s.uniqueID:s._yuid;p=j._instances[q];r=p?p._node:null;if(!p||(r&&s!==r)){p=new j(s);}}}return p;};j.create=function(p,q){if(q&&q._node){q=q._node;}return c.one(f.create(p,q));};j.ATTRS={text:{getter:function(){return f.getText(this._node);},setter:function(p){f.setText(this._node,p);return p;}},options:{getter:function(){return this._node.getElementsByTagName("option");}},children:{getter:function(){var s=this._node,r=s.children,t,q,p;if(!r){t=s.childNodes;r=[];for(q=0,p=t.length;q<p;++q){if(t[q][l]){r[r.length]=t[q];}}}return c.all(r);}},value:{getter:function(){return f.getValue(this._node);},setter:function(p){f.setValue(this._node,p);return p;}}};j.DEFAULT_SETTER=function(p,r){var q=this._stateProxy,s;if(p.indexOf(i)>-1){s=p;p=p.split(i);c.Object.setValue(q,p,r);}else{if(typeof q[p]!="undefined"){q[p]=r;}}return r;};j.DEFAULT_GETTER=function(p){var q=this._stateProxy,r;if(p.indexOf&&p.indexOf(i)>-1){r=c.Object.getValue(q,p.split(i));}else{if(typeof q[p]!="undefined"){r=q[p];}}return r;};c.mix(j,c.EventTarget,false,null,1);c.mix(j.prototype,{toString:function(){var s=this[d]+": not bound to a node",r=this._node,p,t,q;if(r){p=r.attributes;t=(p&&p.id)?r.getAttribute("id"):null;q=(p&&p.className)?r.getAttribute("className"):null;s=r[e];if(t){s+="#"+t;}if(q){s+="."+q.replace(" ",".");}s+=" "+this[d];}return s;},get:function(p){var q;if(this._getAttr){q=this._getAttr(p);}else{q=this._get(p);}if(q){q=j.scrubVal(q,this);}else{if(q===null){q=null;}}return q;},_get:function(p){var q=j.ATTRS[p],r;if(q&&q.getter){r=q.getter.call(this);}else{if(j.re_aria.test(p)){r=this._node.getAttribute(p,2);}else{r=j.DEFAULT_GETTER.apply(this,arguments);}}return r;},set:function(p,r){var q=j.ATTRS[p];if(this._setAttr){this._setAttr.apply(this,arguments);}else{if(q&&q.setter){q.setter.call(this,r,p);}else{if(j.re_aria.test(p)){this._node.setAttribute(p,r);}else{j.DEFAULT_SETTER.apply(this,arguments);}}}return this;},setAttrs:function(p){if(this._setAttrs){this._setAttrs(p);}else{c.Object.each(p,function(q,r){this.set(r,q);},this);}return this;},getAttrs:function(q){var p={};if(this._getAttrs){this._getAttrs(q);}else{c.Array.each(q,function(r,s){p[r]=this.get(r);},this);}return p;},create:j.create,compareTo:function(p){var q=this._node;if(c.instanceOf(p,j)){p=p._node;}return q===p;},inDoc:function(q){var p=this._node;q=(q)?q._node||q:p[b];if(q.documentElement){return f.contains(q.documentElement,p);}},getById:function(r){var q=this._node,p=f.byId(r,q[b]);if(p&&f.contains(q,p)){p=c.one(p);}else{p=null;}return p;},ancestor:function(p,q){return c.one(f.ancestor(this._node,n(p),q));},ancestors:function(p,q){return c.all(f.ancestors(this._node,n(p),q));},previous:function(q,p){return c.one(f.elementByAxis(this._node,"previousSibling",n(q),p));},next:function(q,p){return c.one(f.elementByAxis(this._node,"nextSibling",n(q),p));},siblings:function(p){return c.all(f.siblings(this._node,n(p)));},one:function(p){return c.one(c.Selector.query(p,this._node,true));},all:function(p){var q=c.all(c.Selector.query(p,this._node));q._query=p;q._queryRoot=this._node;return q;},test:function(p){return c.Selector.test(this._node,p);},remove:function(q){var r=this._node,p=r.parentNode;if(p){p.removeChild(r);}if(q){this.destroy();}return this;},replace:function(p){var q=this._node;if(typeof p=="string"){p=j.create(p);}q.parentNode.replaceChild(j.getDOMNode(p),q);return this;},replaceChild:function(q,p){if(typeof q=="string"){q=f.create(q);}return c.one(this._node.replaceChild(j.getDOMNode(q),j.getDOMNode(p)));},appendChild:function(p){return j.scrubVal(this._insert(p));},insertBefore:function(q,p){return c.Node.scrubVal(this._insert(q,p));},purge:function(q,p){c.Event.purgeElement(this._node,q,p);return this;},destroy:function(p){this.purge();if(this.unplug){this.unplug();}this.clearData();if(p){this.all("*").destroy();}this._node=null;this._stateProxy=null;delete j._instances[this[d]];},invoke:function(w,q,p,v,u,t){var s=this._node,r;if(q&&c.instanceOf(q,j)){q=q._node;}if(p&&c.instanceOf(p,j)){p=p._node;}r=s[w](q,p,v,u,t);return j.scrubVal(r,this);},insert:function(q,p){this._insert(q,p);return this;},_insert:function(s,q){var r=this._node,p=null;if(typeof q=="number"){q=this._node.childNodes[q];}else{if(q&&q._node){q=q._node;}}if(s&&typeof s!="string"){s=s._node||s._nodes||s;}p=f.addHTML(r,s,q);return p;},prepend:function(p){return this.insert(p,0);},append:function(p){return this.insert(p,null);},appendTo:function(p){c.one(p).append(this);return this;},setContent:function(p){this._insert(p,"replace");return this;},getContent:function(p){return this.get("innerHTML");},swap:c.config.doc.documentElement.swapNode?function(p){this._node.swapNode(j.getDOMNode(p));}:function(p){p=j.getDOMNode(p);var r=this._node,q=p.parentNode,s=p.nextSibling;if(s===r){q.insertBefore(r,p);}else{if(p===r.nextSibling){q.insertBefore(p,r);}else{r.parentNode.replaceChild(p,r);f.addHTML(q,r,s);}}return this;},getData:function(q){var p;this._data=this._data||{};if(arguments.length){p=this._data[q];}else{p=this._data;}return p;},setData:function(p,q){this._data=this._data||{};if(arguments.length>1){this._data[p]=q;}else{this._data=p;}return this;},clearData:function(p){if("_data" in this){if(p){delete this._data[p];}else{delete this._data;}}return this;},hasMethod:function(q){var p=this._node;return !!(p&&q in p&&typeof p[q]!="unknown"&&(typeof p[q]=="function"||String(p[q]).indexOf("function")===1));},SHOW_TRANSITION:null,HIDE_TRANSITION:null,show:function(p){p=arguments[arguments.length-1];this.toggleView(true,p);return this;},_show:function(){this.setStyle("display","");},_isHidden:function(){return c.DOM.getStyle(this._node,"display")==="none";},toggleView:function(p,q){this._toggleView.apply(this,arguments);},_toggleView:function(p,q){q=arguments[arguments.length-1];if(typeof p!="boolean"){p=(this._isHidden())?1:0;}if(p){this._show();}else{this._hide();}if(typeof q=="function"){q.call(this);}return this;},hide:function(p){p=arguments[arguments.length-1];this.toggleView(false,p);return this;},_hide:function(){this.setStyle("display","none");},isFragment:function(){return(this.get("nodeType")===11);},empty:function(p){this.get("childNodes").remove(p);return this;}},true);c.Node=j;c.one=c.Node.one;var a=function(p){var q=[];if(typeof p==="string"){this._query=p;p=c.Selector.query(p);}else{if(p.nodeType||f.isWindow(p)){p=[p];}else{if(c.instanceOf(p,c.Node)){p=[p._node];}else{if(c.instanceOf(p[0],c.Node)){c.Array.each(p,function(r){if(r._node){q.push(r._node);}});p=q;}else{p=c.Array(p,0,true);}}}}this._nodes=p;};a.NAME="NodeList";a.getDOMNodes=function(p){return(p&&p._nodes)?p._nodes:p;};a.each=function(p,s,r){var q=p._nodes;if(q&&q.length){c.Array.each(q,s,r||p);}else{}};a.addMethod=function(p,r,q){if(p&&r){a.prototype[p]=function(){var t=[],s=arguments;c.Array.each(this._nodes,function(y){var x=(y.uniqueID&&y.nodeType!==9)?"uniqueID":"_yuid",v=c.Node._instances[y[x]],w,u;if(!v){v=a._getTempNode(y);}w=q||v;u=r.apply(w,s);if(u!==undefined&&u!==v){t[t.length]=u;}});return t.length?t:this;};}else{}};a.importMethod=function(r,p,q){if(typeof p==="string"){q=q||p;a.addMethod(p,r[p]);}else{c.Array.each(p,function(s){a.importMethod(r,s);});}};a._getTempNode=function(q){var p=a._tempNode;if(!p){p=c.Node.create("<div></div>");a._tempNode=p;}p._node=q;p._stateProxy=q;return p;};c.mix(a.prototype,{item:function(p){return c.one((this._nodes||[])[p]);},each:function(r,q){var p=this;c.Array.each(this._nodes,function(t,s){t=c.one(t);return r.call(q||t,t,s,p);});return p;},batch:function(q,p){var r=this;c.Array.each(this._nodes,function(u,t){var s=c.Node._instances[u[d]];if(!s){s=a._getTempNode(u);}return q.call(p||s,s,t,r);});return r;},some:function(r,q){var p=this;return c.Array.some(this._nodes,function(t,s){t=c.one(t);q=q||t;return r.call(q,t,s,p);});},toFrag:function(){return c.one(c.DOM._nl2frag(this._nodes));},indexOf:function(p){return c.Array.indexOf(this._nodes,c.Node.getDOMNode(p));},filter:function(p){return c.all(c.Selector.filter(this._nodes,p));},modulus:function(s,q){q=q||0;var p=[];a.each(this,function(t,r){if(r%s===q){p.push(t);}});return c.all(p);},odd:function(){return this.modulus(2,1);},even:function(){return this.modulus(2);},destructor:function(){},refresh:function(){var s,q=this._nodes,r=this._query,p=this._queryRoot;if(r){if(!p){if(q&&q[0]&&q[0].ownerDocument){p=q[0].ownerDocument;}}this._nodes=c.Selector.query(r,p);}return this;},_prepEvtArgs:function(s,r,q){var p=c.Array(arguments,0,true);if(p.length<2){p[2]=this._nodes;}else{p.splice(2,0,this._nodes);}p[3]=q||this;return p;},on:function(r,q,p){return c.on.apply(c,this._prepEvtArgs.apply(this,arguments));},once:function(r,q,p){return c.once.apply(c,this._prepEvtArgs.apply(this,arguments));},after:function(r,q,p){return c.after.apply(c,this._prepEvtArgs.apply(this,arguments));},size:function(){return this._nodes.length;},isEmpty:function(){return this._nodes.length<1;},toString:function(){var s="",r=this[d]+": not bound to any nodes",p=this._nodes,q;if(p&&p[0]){q=p[0];s+=q[e];if(q.id){s+="#"+q.id;}if(q.className){s+="."+q.className.replace(" ",".");}if(p.length>1){s+="...["+p.length+" items]";}}return s||r;}},true);a.importMethod(c.Node.prototype,["append","destroy","detach","detachAll","empty","insert","prepend","remove","set","setContent","show","hide","toggleView"]);a.prototype.get=function(q){var t=[],s=this._nodes,r=false,u=a._getTempNode,p,v;if(s[0]){p=c.Node._instances[s[0]._yuid]||u(s[0]);v=p._get(q);if(v&&v.nodeType){r=true;}}c.Array.each(s,function(w){p=c.Node._instances[w._yuid];if(!p){p=u(w);}v=p._get(q);if(!r){v=c.Node.scrubVal(v,p);}t.push(v);});return(r)?c.all(t):t;};c.NodeList=a;c.all=function(p){return new a(p);};c.Node.all=c.all;c.Array.each(["removeChild","hasChildNodes","cloneNode","hasAttribute","removeAttribute","scrollIntoView","getElementsByTagName","focus","blur","submit","reset","select","createCaption"],function(p){c.Node.prototype[p]=function(t,r,q){var s=this.invoke(p,t,r,q);return s;};});c.Node.importMethod(c.DOM,["contains","setAttribute","getAttribute","wrap","unwrap","generateID"]);c.NodeList.importMethod(c.Node.prototype,["getAttribute","setAttribute","removeAttribute","unwrap","wrap","generateID"]);(function(q){var p=["hasClass","addClass","removeClass","replaceClass","toggleClass"];q.Node.importMethod(q.DOM,p);q.NodeList.importMethod(q.Node.prototype,p);})(c);if(!c.config.doc.documentElement.hasAttribute){c.Node.prototype.hasAttribute=function(p){if(p==="value"){if(this.get("value")!==""){return true;}}return !!(this._node.attributes[p]&&this._node.attributes[p].specified);};}c.Node.prototype.focus=function(){try{this._node.focus();}catch(p){}};c.Node.ATTRS.type={setter:function(q){if(q==="hidden"){try{this._node.type="hidden";}catch(p){this.setStyle("display","none");this._inputType="hidden";}}else{try{this._node.type=q;}catch(p){}}return q;},getter:function(){return this._inputType||this._node.type;},_bypassProxy:true};if(c.config.doc.createElement("form").elements.nodeType){c.Node.ATTRS.elements={getter:function(){return this.all("input, textarea, button, select");}};}c.mix(c.Node.ATTRS,{offsetHeight:{setter:function(p){c.DOM.setHeight(this._node,p);return p;},getter:function(){return this._node.offsetHeight;}},offsetWidth:{setter:function(p){c.DOM.setWidth(this._node,p);return p;},getter:function(){return this._node.offsetWidth;}}});c.mix(c.Node.prototype,{sizeTo:function(p,q){var r;if(arguments.length<2){r=c.one(p);p=r.get("offsetWidth");q=r.get("offsetHeight");}this.setAttrs({offsetWidth:p,offsetHeight:q});}});var k=c.NodeList,h=Array.prototype,g=["concat","pop","push","shift","slice","splice","unshift"];c.Array.each(g,function(p){k.prototype[p]=function(){var r=[],s=0,q;while((q=arguments[s++])){r.push(q._node||q._nodes||q);}return c.Node.scrubVal(h[p].apply(this._nodes,r));};});},"3.3.0",{requires:["dom-base","selector-css2","event-base"]});YUI.add("node-style",function(a){(function(c){var b=["getStyle","getComputedStyle","setStyle","setStyles"];c.Node.importMethod(c.DOM,b);c.NodeList.importMethod(c.Node.prototype,b);})(a);},"3.3.0",{requires:["dom-style","node-base"]});YUI.add("node-screen",function(a){a.each(["winWidth","winHeight","docWidth","docHeight","docScrollX","docScrollY"],function(b){a.Node.ATTRS[b]={getter:function(){var c=Array.prototype.slice.call(arguments);c.unshift(a.Node.getDOMNode(this));return a.DOM[b].apply(this,c);}};});a.Node.ATTRS.scrollLeft={getter:function(){var b=a.Node.getDOMNode(this);return("scrollLeft" in b)?b.scrollLeft:a.DOM.docScrollX(b);},setter:function(c){var b=a.Node.getDOMNode(this);if(b){if("scrollLeft" in b){b.scrollLeft=c;}else{if(b.document||b.nodeType===9){a.DOM._getWin(b).scrollTo(c,a.DOM.docScrollY(b));}}}else{}}};a.Node.ATTRS.scrollTop={getter:function(){var b=a.Node.getDOMNode(this);return("scrollTop" in b)?b.scrollTop:a.DOM.docScrollY(b);},setter:function(c){var b=a.Node.getDOMNode(this);if(b){if("scrollTop" in b){b.scrollTop=c;}else{if(b.document||b.nodeType===9){a.DOM._getWin(b).scrollTo(a.DOM.docScrollX(b),c);}}}else{}}};a.Node.importMethod(a.DOM,["getXY","setXY","getX","setX","getY","setY","swapXY"]);a.Node.ATTRS.region={getter:function(){var b=a.Node.getDOMNode(this),c;if(b&&!b.tagName){if(b.nodeType===9){b=b.documentElement;}}if(b.alert){c=a.DOM.viewportRegion(b);}else{c=a.DOM.region(b);}return c;}};a.Node.ATTRS.viewportRegion={getter:function(){return a.DOM.viewportRegion(a.Node.getDOMNode(this));}};a.Node.importMethod(a.DOM,"inViewportRegion");a.Node.prototype.intersect=function(b,d){var c=a.Node.getDOMNode(this);if(a.instanceOf(b,a.Node)){b=a.Node.getDOMNode(b);}return a.DOM.intersect(c,b,d);};a.Node.prototype.inRegion=function(b,d,e){var c=a.Node.getDOMNode(this);if(a.instanceOf(b,a.Node)){b=a.Node.getDOMNode(b);}return a.DOM.inRegion(c,b,d,e);};},"3.3.0",{requires:["dom-screen"]});YUI.add("node-pluginhost",function(a){a.Node.plug=function(){var b=a.Array(arguments);b.unshift(a.Node);a.Plugin.Host.plug.apply(a.Base,b);return a.Node;};a.Node.unplug=function(){var b=a.Array(arguments);b.unshift(a.Node);a.Plugin.Host.unplug.apply(a.Base,b);return a.Node;};a.mix(a.Node,a.Plugin.Host,false,null,1);a.NodeList.prototype.plug=function(){var b=arguments;a.NodeList.each(this,function(c){a.Node.prototype.plug.apply(a.one(c),b);});};a.NodeList.prototype.unplug=function(){var b=arguments;a.NodeList.each(this,function(c){a.Node.prototype.unplug.apply(a.one(c),b);});};},"3.3.0",{requires:["node-base","pluginhost"]});YUI.add("node-event-delegate",function(a){a.Node.prototype.delegate=function(d){var c=a.Array(arguments,0,true),b=(a.Lang.isObject(d)&&!a.Lang.isArray(d))?1:2;c.splice(b,0,this._node);return a.delegate.apply(a,c);};},"3.3.0",{requires:["node-base","event-delegate"]});YUI.add("node",function(a){},"3.3.0",{requires:["dom","event-base","event-delegate","pluginhost"],use:["node-base","node-style","node-screen","node-pluginhost","node-event-delegate"],skinnable:false});YUI.add("node-deprecated",function(b){var a=b.Node;a.ATTRS.data={getter:function(){return this._dataVal;},setter:function(c){this._dataVal=c;return c;},value:null};b.get=a.get=function(){return a.one.apply(a,arguments);};b.mix(a.prototype,{query:function(c){return this.one(c);},queryAll:function(c){return this.all(c);},each:function(d,c){c=c||this;return d.call(c,this);},item:function(c){return this;},size:function(){return this._node?1:0;}});},"3.3.0",{requires:["node-base"]});YUI.add("json-parse",function(b){function l(e){return(b.config.win||this||{})[e];}var j=l("JSON"),k=l("eval"),m=(Object.prototype.toString.call(j)==="[object JSON]"&&j),f=!!m,p=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,g=/(?:^|:|,)(?:\s*\[)+/g,q=/[^\],:{}\s]/,o=function(e){return"\\u"+("0000"+(+(e.charCodeAt(0))).toString(16)).slice(-4);},c=function(s,e){var r=function(y,w){var u,t,x=y[w];if(x&&typeof x==="object"){for(u in x){if(x.hasOwnProperty(u)){t=r(x,u);if(t===undefined){delete x[u];}else{x[u]=t;}}}}return e.call(y,w,x);};return typeof e==="function"?r({"":s},""):s;},h=function(r,e){r=r.replace(p,o);if(!q.test(r.replace(n,"@").replace(d,"]").replace(g,""))){return c(k("("+r+")"),e);}throw new SyntaxError("JSON.parse");};b.namespace("JSON").parse=function(r,e){if(typeof r!=="string"){r+="";}return m&&b.JSON.useNativeParse?m.parse(r,e):h(r,e);};function a(r,e){return r==="ok"?true:e;}if(m){try{f=(m.parse('{"ok":false}',a)).ok;}catch(i){f=false;}}b.JSON.useNativeParse=f;},"3.3.0");YUI.add("json-stringify",function(b){var j=(b.config.win||{}).JSON,J=b.Lang,n=J.isFunction,E=J.isObject,s=J.isArray,k=Object.prototype.toString,z=(k.call(j)==="[object JSON]"&&j),C=!!z,A="undefined",p="object",x="null",H="string",y="number",t="boolean",l="date",B={"undefined":A,string:H,"[object String]":H,number:y,"[object Number]":y,"boolean":t,"[object Boolean]":t,"[object Date]":l,"[object RegExp]":p},g="",o="{",a="}",v="[",i="]",q=",",c=",\n",m="\n",D=":",h=": ",r='"',f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function K(L){var e=typeof L;return B[e]||B[k.call(L)]||(e===p?(L?p:x):A);}function G(e){if(!d[e]){d[e]="\\u"+("0000"+(+(e.charCodeAt(0))).toString(16)).slice(-4);}return d[e];}function u(e){return r+e.replace(f,G)+r;}function w(e,L){return e.replace(/^/gm,L);}function F(L,T,e){if(L===undefined){return undefined;}var N=n(T)?T:null,S=k.call(e).match(/String|Number/)||[],U=b.JSON.dateToString,R=[],P,O,Q;if(N||!s(T)){T=undefined;}if(T){P={};for(O=0,Q=T.length;O<Q;++O){P[T[O]]=true;}T=P;}e=S[0]==="Number"?new Array(Math.min(Math.max(0,e),10)+1).join(" "):(e||g).slice(0,10);function M(X,ad){var ab=X[ad],af=K(ab),aa=[],Z=e?h:D,Y,W,ae,V,ac;if(E(ab)&&n(ab.toJSON)){ab=ab.toJSON(ad);}else{if(af===l){ab=U(ab);}}if(n(N)){ab=N.call(X,ad,ab);}if(ab!==X[ad]){af=K(ab);}switch(af){case l:case p:break;case H:return u(ab);case y:return isFinite(ab)?ab+g:x;case t:return ab+g;case x:return x;default:return undefined;}for(W=R.length-1;W>=0;--W){if(R[W]===ab){throw new Error("JSON.stringify. Cyclical reference");}}Y=s(ab);R.push(ab);if(Y){for(W=ab.length-1;W>=0;--W){aa[W]=M(ab,W)||x;}}else{ae=T||ab;W=0;for(V in ae){if(ae.hasOwnProperty(V)){ac=M(ab,V);if(ac){aa[W++]=u(V)+Z+ac;}}}}R.pop();if(e&&aa.length){return Y?v+m+w(aa.join(c),e)+m+i:o+m+w(aa.join(c),e)+m+a;}else{return Y?v+aa.join(q)+i:o+aa.join(q)+a;}}return M({"":L},"");}if(z){try{C=("0"===z.stringify(0));}catch(I){C=false;}}b.mix(b.namespace("JSON"),{useNativeStringify:C,dateToString:function(L){function e(M){return M<10?"0"+M:M;}return L.getUTCFullYear()+"-"+e(L.getUTCMonth()+1)+"-"+e(L.getUTCDate())+"T"+e(L.getUTCHours())+D+e(L.getUTCMinutes())+D+e(L.getUTCSeconds())+"Z";},stringify:function(M,e,L){return z&&b.JSON.useNativeStringify?z.stringify(M,e,L):F(M,e,L);}});},"3.3.0");YUI.add("json",function(a){},"3.3.0",{use:["json-parse","json-stringify"]});YUI.add("anim-base",function(b){var c="running",n="startTime",l="elapsedTime",j="start",i="tween",m="end",d="node",k="paused",o="reverse",h="iterationCount",a=Number;var f={},e;b.Anim=function(){b.Anim.superclass.constructor.apply(this,arguments);b.Anim._instances[b.stamp(this)]=this;};b.Anim.NAME="anim";b.Anim._instances={};b.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;b.Anim.DEFAULT_UNIT="px";b.Anim.DEFAULT_EASING=function(q,p,s,r){return s*q/r+p;};b.Anim._intervalTime=20;b.Anim.behaviors={left:{get:function(q,p){return q._getOffset(p);}}};b.Anim.behaviors.top=b.Anim.behaviors.left;b.Anim.DEFAULT_SETTER=function(s,t,v,w,y,r,u,x){var q=s._node,p=u(y,a(v),a(w)-a(v),r);if(t in q._node.style||t in b.DOM.CUSTOM_STYLES){x=x||"";q.setStyle(t,p+x);}else{if(q._node.attributes[t]){q.setAttribute(t,p);}else{q.set(t,p);}}};b.Anim.DEFAULT_GETTER=function(r,p){var q=r._node,s="";if(p in q._node.style||p in b.DOM.CUSTOM_STYLES){s=q.getComputedStyle(p);}else{if(q._node.attributes[p]){s=q.getAttribute(p);}else{s=q.get(p);}}return s;};b.Anim.ATTRS={node:{setter:function(p){p=b.one(p);this._node=p;if(!p){}return p;}},duration:{value:1},easing:{value:b.Anim.DEFAULT_EASING,setter:function(p){if(typeof p==="string"&&b.Easing){return b.Easing[p];}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!f[b.stamp(this)];},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};b.Anim.run=function(){var q=b.Anim._instances;for(var p in q){if(q[p].run){q[p].run();}}};b.Anim.pause=function(){for(var p in f){if(f[p].pause){f[p].pause();}}b.Anim._stopTimer();};b.Anim.stop=function(){for(var p in f){if(f[p].stop){f[p].stop();}}b.Anim._stopTimer();};b.Anim._startTimer=function(){if(!e){e=setInterval(b.Anim._runFrame,b.Anim._intervalTime);}};b.Anim._stopTimer=function(){clearInterval(e);e=0;};b.Anim._runFrame=function(){var p=true;for(var q in f){if(f[q]._runFrame){p=false;f[q]._runFrame();}}if(p){b.Anim._stopTimer();}};b.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var g={run:function(){if(this.get(k)){this._resume();}else{if(!this.get(c)){this._start();}}return this;},pause:function(){if(this.get(c)){this._pause();}return this;},stop:function(p){if(this.get(c)||this.get(k)){this._end(p);}return this;},_added:false,_start:function(){this._set(n,new Date()-this.get(l));this._actualFrames=0;if(!this.get(k)){this._initAnimAttr();}f[b.stamp(this)]=this;b.Anim._startTimer();this.fire(j);},_pause:function(){this._set(n,null);this._set(k,true);delete f[b.stamp(this)];this.fire("pause");},_resume:function(){this._set(k,false);f[b.stamp(this)]=this;this._set(n,new Date()-this.get(l));b.Anim._startTimer();this.fire("resume");},_end:function(p){var q=this.get("duration")*1000;if(p){this._runAttrs(q,q,this.get(o));}this._set(n,null);this._set(l,0);this._set(k,false);delete f[b.stamp(this)];this.fire(m,{elapsed:this.get(l)});},_runFrame:function(){var u=this._runtimeAttr.duration,r=new Date()-this.get(n),q=this.get(o),p=(r>=u),s,v;this._runAttrs(r,u,q);this._actualFrames+=1;this._set(l,r);this.fire(i);if(p){this._lastFrame();}},_runAttrs:function(A,z,w){var x=this._runtimeAttr,r=b.Anim.behaviors,y=x.easing,p=z,u=false,q,s,v;if(A>=z){u=true;}if(w){A=z-A;p=0;}for(v in x){if(x[v].to){q=x[v];s=(v in r&&"set" in r[v])?r[v].set:b.Anim.DEFAULT_SETTER;if(!u){s(this,v,q.from,q.to,A,z,y,q.unit);}else{s(this,v,q.from,q.to,p,z,y,q.unit);}}}},_lastFrame:function(){var p=this.get("iterations"),q=this.get(h);q+=1;if(p==="infinite"||q<p){if(this.get("direction")==="alternate"){this.set(o,!this.get(o));}this.fire("iteration");}else{q=0;this._end();}this._set(n,new Date());this._set(h,q);},_initAnimAttr:function(){var w=this.get("from")||{},v=this.get("to")||{},p={duration:this.get("duration")*1000,easing:this.get("easing")},r=b.Anim.behaviors,u=this.get(d),t,s,q;b.each(v,function(A,y){if(typeof A==="function"){A=A.call(this,u);}s=w[y];if(s===undefined){s=(y in r&&"get" in r[y])?r[y].get(this,y):b.Anim.DEFAULT_GETTER(this,y);}else{if(typeof s==="function"){s=s.call(this,u);}}var x=b.Anim.RE_UNITS.exec(s);var z=b.Anim.RE_UNITS.exec(A);s=x?x[1]:s;q=z?z[1]:A;t=z?z[2]:x?x[2]:"";if(!t&&b.Anim.RE_DEFAULT_UNIT.test(y)){t=b.Anim.DEFAULT_UNIT;}if(!s||!q){b.error('invalid "from" or "to" for "'+y+'"',"Anim");return;}p[y]={from:s,to:q,unit:t};},this);this._runtimeAttr=p;},_getOffset:function(q){var s=this._node,t=s.getComputedStyle(q),r=(q==="left")?"getX":"getY",u=(q==="left")?"setX":"setY";if(t==="auto"){var p=s.getStyle("position");if(p==="absolute"||p==="fixed"){t=s[r]();s[u](t);}else{t=0;}}return t;},destructor:function(){delete b.Anim._instances[b.stamp(this)];}};b.extend(b.Anim,b.Base,g);},"3.3.0",{requires:["base-base","node-style"]});YUI.add("anim-easing",function(b){var a={easeNone:function(f,e,h,g){return h*f/g+e;},easeIn:function(f,e,h,g){return h*(f/=g)*f+e;},easeOut:function(f,e,h,g){return -h*(f/=g)*(f-2)+e;},easeBoth:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f+e;}return -h/2*((--f)*(f-2)-1)+e;},easeInStrong:function(f,e,h,g){return h*(f/=g)*f*f*f+e;},easeOutStrong:function(f,e,h,g){return -h*((f=f/g-1)*f*f*f-1)+e;},easeBothStrong:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+e;}return -h/2*((f-=2)*f*f*f-2)+e;},elasticIn:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return -(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;},elasticOut:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return f*Math.pow(2,-10*g)*Math.sin((g*j-h)*(2*Math.PI)/i)+k+e;},elasticBoth:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j/2)===2){return e+k;}if(!i){i=j*(0.3*1.5);}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}if(g<1){return -0.5*(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;}return f*Math.pow(2,-10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i)*0.5+k+e;},backIn:function(f,e,i,h,g){if(g===undefined){g=1.70158;}if(f===h){f-=0.001;}return i*(f/=h)*f*((g+1)*f-g)+e;},backOut:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+e;},backBoth:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+e;}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+e;},bounceIn:function(f,e,h,g){return h-b.Easing.bounceOut(g-f,0,h,g)+e;},bounceOut:function(f,e,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+e;}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+e;}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+e;}}}return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+e;},bounceBoth:function(f,e,h,g){if(f<g/2){return b.Easing.bounceIn(f*2,0,h,g)*0.5+e;}return b.Easing.bounceOut(f*2-g,0,h,g)*0.5+h*0.5+e;}};b.Easing=a;},"3.3.0",{requires:["anim-base"]});YUI.add("anim-node-plugin",function(b){var a=function(c){c=(c)?b.merge(c):{};c.node=c.host;a.superclass.constructor.apply(this,arguments);};a.NAME="nodefx";a.NS="fx";b.extend(a,b.Anim);b.namespace("Plugin");b.Plugin.NodeFX=a;},"3.0.0",{requires:["node-pluginhost","anim-base"]});YUI.add("cookie",function(c){var k=c.Lang,i=c.Object,g=null,d=k.isString,n=k.isObject,f=k.isUndefined,e=k.isFunction,h=encodeURIComponent,b=decodeURIComponent,m=c.config.doc;function j(o){throw new TypeError(o);}function l(o){if(!d(o)||o===""){j("Cookie name must be a non-empty string.");}}function a(o){if(!d(o)||o===""){j("Subcookie name must be a non-empty string.");}}c.Cookie={_createCookieString:function(q,t,r,p){p=p||{};var v=h(q)+"="+(r?h(t):t),o=p.expires,u=p.path,s=p.domain;if(n(p)){if(o instanceof Date){v+="; expires="+o.toUTCString();}if(d(u)&&u!==""){v+="; path="+u;}if(d(s)&&s!==""){v+="; domain="+s;}if(p.secure===true){v+="; secure";}}return v;},_createCookieHashString:function(o){if(!n(o)){j("Cookie._createCookieHashString(): Argument must be an object.");}var p=[];i.each(o,function(r,q){if(!e(r)&&!f(r)){p.push(h(q)+"="+h(String(r)));}});return p.join("&");},_parseCookieHash:function(s){var r=s.split("&"),t=g,q={};if(s.length){for(var p=0,o=r.length;p<o;p++){t=r[p].split("=");q[b(t[0])]=b(t[1]);}}return q;},_parseCookieString:function(w,y){var x={};if(d(w)&&w.length>0){var o=(y===false?function(z){return z;}:b),u=w.split(/;\s/g),v=g,p=g,r=g;for(var q=0,s=u.length;q<s;q++){r=u[q].match(/([^=]+)=/i);if(r instanceof Array){try{v=b(r[1]);p=o(u[q].substring(r[1].length+1));}catch(t){}}else{v=b(u[q]);p="";}x[v]=p;}}return x;},_setDoc:function(o){m=o;},exists:function(o){l(o);var p=this._parseCookieString(m.cookie,true);return p.hasOwnProperty(o);},get:function(p,o){l(p);var s,q,r;if(e(o)){r=o;o={};}else{if(n(o)){r=o.converter;}else{o={};}}s=this._parseCookieString(m.cookie,!o.raw);q=s[p];if(f(q)){return g;}if(!e(r)){return q;}else{return r(q);}},getSub:function(o,q,p){var r=this.getSubs(o);if(r!==g){a(q);if(f(r[q])){return g;}if(!e(p)){return r[q];}else{return p(r[q]);}}else{return g;}},getSubs:function(o){l(o);var p=this._parseCookieString(m.cookie,false);if(d(p[o])){return this._parseCookieHash(p[o]);}return g;},remove:function(p,o){l(p);o=c.merge(o||{},{expires:new Date(0)});return this.set(p,"",o);},removeSub:function(p,s,o){l(p);a(s);o=o||{};var r=this.getSubs(p);if(n(r)&&r.hasOwnProperty(s)){delete r[s];if(!o.removeIfEmpty){return this.setSubs(p,r,o);}else{for(var q in r){if(r.hasOwnProperty(q)&&!e(r[q])&&!f(r[q])){return this.setSubs(p,r,o);}}return this.remove(p,o);}}else{return"";}},set:function(p,q,o){l(p);if(f(q)){j("Cookie.set(): Value cannot be undefined.");}o=o||{};var r=this._createCookieString(p,q,!o.raw,o);m.cookie=r;return r;},setSub:function(p,r,q,o){l(p);a(r);if(f(q)){j("Cookie.setSub(): Subcookie value cannot be undefined.");}var s=this.getSubs(p);if(!n(s)){s={};}s[r]=q;return this.setSubs(p,s,o);},setSubs:function(p,q,o){l(p);if(!n(q)){j("Cookie.setSubs(): Cookie value must be an object.");}var r=this._createCookieString(p,this._createCookieHashString(q),false,o);m.cookie=r;return r;}};},"3.3.0",{requires:["yui-base"]});/* Copyright (c) 2011, Yahoo! Inc.  All rights reserved. */
YUI.add("yui-untrusted",function(a){},"3.0.0",{use:["ua","yui-later","yui-log","substitute"]});YModules={};YUI.add("module_platform",function(J){var i,R=J.Lang,aa=J.Array,al=J.Object,at=R.isString,F=R.isUndefined,ao=R.isBoolean,am=R.isFunction,t=R.isObject,a=R.isArray,N=R.later,E=true,p=false,V=null,aq=0,S=V,ai=V,ap={},U={},ad={},ah={},af=[],K={init:function(){}},M=["closeView","hideView","isViewOpen","openView","openViewHtml","refreshView","showView","setView"],h="modulestart",x="viewload",ae="viewunload",ay="started",au="props",n="config",I="res",aw="resourcemgr",T="signal",H="state",ac="message",O="MPServices",z="ModulePlatformProvider";function aj(az,L,Y){if(!t(L)){L=new Error(L);}if(S.debug){throw L;}else{var A={type:"error",errorType:az,error:L};if(t(Y)){J.mix(A,Y);}i.fire(A);}}function P(A,L){return t(ap[A])?ap[A].getService(i,L):V;}function C(az,Y,A){if(A){var L=al(A);al.each(A,function(aA,aB){if(am(aA)&&!S.debug){L[aB]=function(){try{return aA.apply(this,arguments);}catch(aC){aj(aB,aC,{moduleId:az});}};}});return L;}else{return K;}}function ag(L,A,Y){f(A,"viewevent",[Y,L]);}function Z(az,Y){var aA=ad[az],aC,A,aB,L;if(aA){if(!aA[ay]){aC=aA[n];L=aC[au];A=YModules[L.ns];aB=aC[H];aA.module=C(az,L.type,A);aA.module.init(aA.api);aA[ay]=E;if(Y&&aB&&at(aB.view)){f(az,x,[aB.view]);}i.fire({type:h,moduleId:az});}}}function l(A){var L=af.shift();Z(L,A);if(af.length){ai=N(0,V,l,[A]);}else{if(aq==1){aq=4;i.fire({type:"ready"});}ai=V;}}function o(Y,L){var A=Y[L];delete Y[L];return A;}function an(Y,A,az){i.fire({type:ac,messageName:A,moduleId:Y,data:az});var L=ah[A];if(L){al.each(L,function(aB,aA){f(aA,ac,[A,ad[Y].api.getProperty("type"),az]);});}}function ax(L,A){i.fire({type:"navigate",moduleId:L,url:A});}function D(L,A){if(!(A instanceof Array)){A=[A];}aa.each(A,function(Y){if(!ah[Y]){ah[Y]={};}ah[Y][L]=1;i.fire({type:"listen",moduleId:L,messageName:Y});});}function G(L,A){if(A&&!(A instanceof Array)){A=[A];}else{A=al.keys(ah);}aa.each(A,function(Y){if(ah[Y]){delete ah[Y][L];i.fire({type:"unlisten",moduleId:L,messageName:Y});}});}function f(L,aB,aD){if(!at(L)){aj(T,"Module ID must be a string.");return E;}else{if(!ad[L]){aj(T,"No module information for module ("+L+"), couldn't signal ("+aB+")");return E;}}aD=aD||[];var aI=E,A=ad[L],aF=A.module,aE=A[ay],aC=A.api,aG=aD[0],az=A.handlers,Y,aH,aA;if(aE){if(aB==x||aB==ae){Y=aC.getViewNode(aD[0]);aA=aF.viewevents||[];if(!az[aG]){az[aG]=[];}if(aB==x){if(aA.length){if(Y){aa.each(aA,function(aJ){az[aG].push(Y.on(aJ,J.rbind(ag,i,L,aG)));});}else{aj(T,"Module missing a node for '"+aG+"' view",{moduleId:L});}}}else{if(az[aG]){aH=az[aG].pop();while(aH){aH.detach();aH=az[aG].pop();}}}}i.fire({type:"modulesignal",signal:aB,moduleId:L,args:aD});aB="on"+aB;if(aF[aB]){aI=aF[aB].apply(aF,aD);if(ao(aI)){}else{aI=E;}}else{}}else{}return aI;}function u(){return S;}function W(A){return F(ad[A])?V:ad[A].api;}function q(A){return F(ad[A])?V:ad[A][n][H]||V;}function m(A){return S[au][A];}function e(L,A){return P(aw).getString(L,A);}function k(A,L){return U[L]?U[L].getViewDirection(A):V;}function av(A,L){return U[L]?U[L].getViewNode(A):V;}function c(A){ap[A.name]=A;}function B(A){return o(ap,A);}function X(A){return !!ad[A];}function ab(aD){var Y=aD[au],L=aD.mods,aA=Y.id,aC=P(aw),az=YModules[Y.ns],A,aB;if(ad[aA]){A=ad[aA].config;aa.each(["strs","data","prefs"],function(aE){if(!A[aE]){A[aE]={};}J.mix(A[aE],aD[aE],E);});A.mods=aD.mods;}else{ad[aA]={config:aD,api:J.ModuleApi(i,aD),started:p,handlers:{}};aC.setLoaded(aD[I]);}aC.setStrings(Y.type,aD.strs);if(a(L)){aa.each(L,ab);}if(at(Y.parentId)){aB=ad[Y.parentId].config;if(!a(aB.mods)){aB.mods=[];}if(aa.indexOf(aB.mods,aD)==-1){aB.mods.push(aD);}}if(Y.trusted&&az&&a(az.services)){aa.each(az.services,c);}}function v(L){var A=ad[L];if(A){if(A[ay]){aj("unregisterModule","Module "+L+" must be stopped before being unregistered.",{moduleId:L});}aa.each(b(L),v);delete ad[L];}else{}}function Q(L,aA){var az=P("transport"),Y=aA.success||function(){},A=aA.scope||V;aA.success=function(aB,aC){ab(aB.mod);aB.data=aB.data||{};aB.data.moduleId=aB.mod.props.id;delete aB.mod;Y.call(A,aB,aC);};az.makeRequest(J.merge({type:"loadmodule"},L),aA);}function y(A){U[A.name]=A.create(i);}function d(A){return o(U,A);}function ar(L){var A=[];al.each(ad,function(Y,az){if(L(az)){A.push(az);}});return A;}function r(){return ar(function(){return E;});}function b(az){var L=ad[az],Y=L?L.config.mods:V,A=[];if(S&&a(Y)){aa.each(Y,function(aA){A.push(aA.props.id);});}return A;}function g(L,Y){var A=[];aa.each(Y,function(az){A.push(ad[az].config);});ad[L].config.mods=A;}function w(A){return ad[A]&&!!ad[A][ay];}function s(A){af.push(A);aa.each(b(A),s);}function j(A,Y,L){if(at(A)){A=[A];Y=(ao(Y)?Y:p);}else{if(A instanceof Array){Y=(ao(Y)?Y:E);}else{return;}}if(Y){aa.each(A,s);if(ai===V){ai=N(0,V,l,[L]);}}else{aa.each(A,function(az){Z(az,L);j(b(az),Y,L);});}}function ak(A){var Y=P("transport"),L;if(at(A)){A=[A];}aa.each(A,function(az){var aA=ad[az];Y.abortModuleRequests(az);al.each(U,function(aB,aC){i.closeView(az,aC);});if(w(az)){f(az,"destroy");aA[ay]=p;aA.module=V;G(az);i.fire({type:"modulestop",moduleId:az});L=b(az);if(a(L)){ak(L);}}});}i={error:aj,getConfig:u,getModuleApi:W,getModuleState:q,getProperty:m,getService:P,getString:e,getModules:r,getChildModules:b,setChildModules:g,queryModules:ar,isStarted:w,start:j,stop:ak,broadcast:an,listen:D,unlisten:G,navigate:ax,signal:f,getViewDirection:k,getViewNode:av,registerService:c,unregisterService:B,registerViewType:y,unregisterViewType:d,isModuleRegistered:X,loadModule:Q,registerModule:ab,unregisterModule:v};J.augment(i,J.Event.Target);J.ModulePlatform={BaseViewType:{getViewDirection:function(){return V;},getViewNode:function(){return V;}},init:function(L,A){S=L||{};if(L){P(aw).setLoaded(S[I]);if(S.mods){aa.each(S.mods,function(Y){ab(Y);if(!Y[H]||!Y[H].defer){j(Y[au].id,E,A);}});}aq=1;this.fire({type:"init"});}}};aa.each(M,function(A){i[A]=function(){var Y=arguments,L=function(){var aC=arguments,aD=aC[0],aB=aC.length==3?[aD,aC[2]]:[aD],aA=U[aC[1]];return aA?aA[A].apply(aA,aB):p;};if(S.debug){return L.apply(this,Y);}else{try{return L.apply(this,Y);}catch(az){aj(A,az,{moduleId:Y[0],view:Y[1]});}}};J.ModulePlatform.BaseViewType[A]=function(){return p;};});J.mix(J.ModulePlatform,i);J.namespace(O);J[O][z]={name:"moduleplatform",getService:function(A,Y){if(!Y){return A;}else{var L=A.getModuleApi(Y);return(L&&L.getProperty("trusted")?i:V);}}};J.ModulePlatform.registerService(J[O][z]);},"1.0",{requires:["event-base"]});YUI.add("resourcemgr",function(a){var s=null,h=true,b={},o={},q={},t={},r=s,k=s,l=0,u=s,c={},m=a.ModulePlatform,f=a.Object,j=a.Lang,d,g="MPServices",n="ResourceMgrProvider";function i(w){var v=t[w];if(!j.isUndefined(v)){v();delete t[w];}delete o[w];d.fire({type:"complete",target:d,id:w});}function p(A){var C=A.data.id,B=A.tId,z=A.data.pkgs,y=s,w,v;for(w=0,v=z.length;w<v;w++){y=z[w];q[y]=1;if(A.data.js){a.use(y);}delete b[y];a.Object.each(o,function(x,D){if(x[y]){delete o[D][y];}if(e(D)){i(D);}},this);}}function e(v){return(a.Object.size(o[v])==0);}d={_clearAll:function(){q={};b={};},getString:function(w,v){return c[w+"_"+v]||s;},isLoaded:function(v){return !!q[v];},load:function(x,C){var v=l++,B={js:{urls:[],names:[]},css:{urls:[],names:[]}},w,D,z,y,A;if(C){t[v]=C;}o[v]={};a.Array.each(["js","css"],function(E){D=B[E];z=[];f.each(x[E],function(F,G){if(b[G]){b[G].push(v);o[v][G]=1;}else{if(!q[G]){b[G]=[v];o[v][G]=1;D.names.push(G);if(F.indexOf("http")!==0){if(k){z.push(F);}else{D.urls.push(r+F);}}else{D.urls.push(F);}}}});if(z.length>0){D.urls.unshift(k+z.join("&"));}});if(e(v)){i(v);}else{y=B.js.urls;A=B.css.urls;if(y.length||A.length){if(A.length){w=a.Get.css(A,{onSuccess:p,scope:this,data:{id:v,pkgs:B.css.names}});}if(y.length){w=a.Get.script(y,{onSuccess:p,scope:this,data:{id:v,js:true,pkgs:B.js.names}});}this.fire({type:"start",target:this,id:v});}}},setLoaded:function(v){if(v){f.each(v.js,function(w,x){q[x]=h;});f.each(v.css,function(w,x){q[x]=h;});}},setStrings:function(v,w){f.each(w,function(y,x){c[v+"_"+x]=y;});}};a.augment(d,a.Event.Target);a.namespace(g);a[g][n]={name:"resourcemgr",getService:function(w,v){if(!u){u=w;r=u.getProperty("libRoot");k=u.getProperty("comboRoot");}return v?s:d;}};if(m){m.registerService(a[g][n]);}},"1.0");window.transportEval=function(code){return eval("("+code+")");};YUI.add("transport",function(W){var f="MPServices",N="TransportProvider",aC="transport",ao="POST",o="GET",w="proxyUrl",aM="proxyTimeout",x="DaliRequestWs",m="module",aE="cfg.dali.handler.ws",aN="cfg.maple_dali.handler.add",ac="INVALID_CRUMB",aD=aN,I=x,au="ok",am="post",r="pr",z="dt",q="rt",ak="default",ae="response",i="request",a="server",aA="browser",aa="crumb",av="abort",an="timeout",s=a,A="nocookies",U="badcrumb",y="badformat",u=2,aw=1,n=0,b=i,ar=ae,aK=av,L="failure",t="success",Q="failure",C="error",aB=15000,ab=1500,j=2,c=5,p="Gateway Timeout",Z=W.Lang,aG=Z.isString,ay=Z.isFunction,B=Z.isObject,S=Z.isUndefined,aL=Z.isNull,d=Z.isArray,P=Z.isNumber,aI=null,e=false,ad={},al=null,G=n,K=null,v={},l=W.ModulePlatform,h=/Content-Type\:\s([^\n]+)/,E=/boundary=([^\n\s]+)\;/,ag=/\{[^\n]+\}/,at=/Content-ID\:\s([0-9]+)/,O={tData:{},rData:{}};RequestBlackboard=function(){var Y={};var aO=1;return{create:function(aP){Y[aO]=aP;return aO++;},remove:function(aP){if(Y[aP]){delete (Y[aP]);return true;}else{return false;}},setProp:function(aR,aP,aQ){if(Y[aR]){Y[aR][aP]=aQ;}else{return false;}},getProp:function(aQ,aP){if(!S(Y[aQ])){return Y[aQ][aP];}else{return false;}},queryAll:function(aP){var aT=[];for(var aQ in Y){if(Y.hasOwnProperty(aQ)){var aS=Y[aQ];if(!S(aS)&&aP(Y[aQ])){Y[aQ].txId=aQ;var aR=Y[aQ];aT.push(Y[aQ]);}}}return aT;},getByTx:function(aQ){var aP=aQ;return this.queryAll(function(aR){if(aR.transactionId==aP){return true;}else{return false;}});},get:function(aP){return Y[aP];},reset:function(){aO=1;Y={};O={tData:{},rData:{}};},getSize:function(){if(aO===1){return 0;}var aQ=0;for(var aP in Y){aQ++;}return aQ;},_requestStore:Y};}();var aF=function(){var Y=[];return{enqueue:function(aO){return Y.push(aO);},next:function(){return Y.shift();},peek:function(){return Y[0];},getSize:function(){return Y.length;},reset:function(){Y=[];}};}();function H(){l=W.ModulePlatform;aI=null;RequestBlackboard.reset();aF.reset();aj.reset();al=R;ad[m]=aH;ad[x]=ax;G=n;if(ay(e.cancel)){e.cancel();}}function T(){return new Date();}var ah={disable:function(Y){G=Y?u:aw;},enable:function(){if(G===u){af();}G=n;},isEnabled:function(){return(G==n);},setRequestFormatter:function(Y,aO){ad[Y]=aO;},setResponseFormatter:function(Y){al=Y;},abortRequest:function(aO,Y){if((!Y)||Y==RequestBlackboard.getProp(aO,"moduleId")){F(aO);this.fire(aK,{type:av,response:{}});return aq(aO,Q,av,"");}else{return false;}},abortModuleRequests:function(Y){var aO=RequestBlackboard.queryAll(function(aP){return aP.originId==Y;});W.Array.each(aO,function(aP){this.abortRequest(aP.txId,Y);},this);},isRequestPending:function(aP,aO){if(aO){var Y=RequestBlackboard.get(aP);return(B(Y)&&(Y.moduleId==aO));}else{return(RequestBlackboard.get(aP))?true:false;}},makeRequest:function(aP,aR,aQ){if(G!==aw){if(d(aP)&&aP.length>1){for(var aO=0,Y=aP.length;aO<Y;aO++){g(aP[aO],aR,aQ);}return null;}else{return g((d(aP)?aP[0]:aP),aR,aQ);}}else{return false;}},getMetrics:function(Y){return(B(O.rData[Y])?O.rData[Y]:null);},clearMetrics:function(aO){if(aO){delete (O.rData[aO]);}else{var Y=RequestBlackboard.get(aO);if(RequestBlackboard.getSize()>0){O.rData={};}else{O={tData:{},rData:{}};}}},_simulateResponse:function(aS,aP,aR){var aQ="";var Y=aj.simulateResponse;if(aP._raw){Y(1,{status:200,statusText:"OK",responseText:aP._raw});return;}if(aP._result){switch(aP._result){case"abort":Y(1,{status:0,statusText:aP._result},1);break;case"timeout":Y(1,{status:0,statusText:aP._result},1);break;case"ok":aQ='[{"txId":'+aS+',"status":200,"statusText":"OK", "data":';if(aP.html){aQ+='"html":"'+aP.html+'",';}aQ+='{"mods":[{"props":{}}]}}]';var aO='{"props":{}, "status":"OK", "resps":'+aQ+"}";Y(1,{status:200,statusText:"OK",responseText:aO},1);break;case C:if(aP._resultDetail&&aP._resultDetail=="badcrumb"){aQ="[]";Y(1,{status:200,statusText:"ok",responseText:'{"props":{}, "status":400, "statusText":"Bad Request", "resps":'+aQ+"}"},false);return true;}else{if(aP._resultDetail&&aP._resultDetail=="nocookies"){aQ="[]";Y(1,{status:200,statusText:C,responseText:'{"props":{}, "status":400, "statusText":"Bad Request", "resps":'+aQ+"}"},true);return true;}}aQ='[{"txId":'+aS+',"status":404,"statusText":"ERROR", "data":{"mods":[{"props":{}}]}}]';Y(1,{status:404,statusText:"File not Found",responseText:"<html><head><title>404</title></head><body><p>File not found</p></body></html>"},false);break;}}},_reset:H};function aJ(Y){var aQ=W.Object(Y.data);var aP=false;var aO=false;aQ.getResponseHeader=function(aV){if(!aP){this.responseHeader=aQ.responseHeader.replace("\r\n","\n");aO=true;var aS=aQ.responseHeader.split("\n");var aR=aS.length;aP={};for(var aT=0;aT<aR;aT++){var aU=aS[aT].split(": ");aP[aU[0]]=aU[1];}}return aP[aV];};aQ.getAllResponseHeaders=function(){if(!aO){this.responseHeader=aQ.responseHeader.replace("\r\n","\n");}return this.responseHeader;};return W.mix(Y,aQ);}var az=function(aO,Y){if(aO.data&&aO.data.responseText){return aJ(aO);}else{if(aO.data){if(aO.data.mods){aO.mods=aO.data.mods;aO.mod=aO.mods[0];delete (aO.data.mods);}if(aO.data.html){aO.html=aO.data.html;delete (aO.data.html);}if(aO.data.res){aO.res=aO.data.res;delete (aO.data.res);}}return aO;}};function R(aO,Y){return aO;}al=R;function F(Y){if(!RequestBlackboard.getProp(Y,"isBatch")){var aO=RequestBlackboard.getProp("transactionObject");if(B(aO)&&aO.isInProgress()){aO.abort();}}else{}}function aq(aW,aT,aY,aR){var aO=RequestBlackboard.get(aW);if(S(aO)){return false;}var aP=aO.response||{},aU=null,a4=null;aP.result=aY||au;aP.resultDetail=aR||"";aP.originId=aO.originId||null;aP.targetId=aO.targetId||aO.originId;if(aO.html){aP.html=aO.html;}ah.fire(ar,{type:ar,response:aP});if(B(aP.data)){a4=aP.data.res;aU=aP.data.mods;}if(B(aU)){if(aU[0].state&&aU[0].state.defer){if(!ap(aW,aU[0].state)){RequestBlackboard.remove(aW);aP.status=504;aP.statusText=p;aT=Q;}else{return;}}for(var a1=0,Y=aU.length;a1<Y;a1++){if(aU[a1].props&&aU[a1].props.id){aI.registerModule(aU[a1]);}}}aP=az(aP);aP=al(aP,aI);var aZ=aO.cb,aV,aQ=this,a3=null;if(O.tData[aO.transactionId]&&aY==au){a3=O.tData[aO.transactionId];O.rData[aW]={rt:a3.rt,pr:a3.pr,dt:0};}if(!S(aZ.argument)){aP.argument=aZ.argument;aV=aZ.argument;}if(ay(aZ[aT])){var aS=W.bind(aZ[aT],aZ.scope||this,aP,aV);if(B(a4)){var a2=aI.getService("resourcemgr"),aX=null;if(a3){aX=T();var a0=O.rData[aW];}a2.load(a4,function(){if(a3){a0.dt=T()-aX;}aS();});}else{aS();}}return RequestBlackboard.remove(aW);}function ap(aR,aQ){var Y=RequestBlackboard.get(aR);var aS=RequestBlackboard.getProp(aR,"retries");if((aS>(c))){return false;}var aO=aQ.retryCount||c;var aP=aQ.retryInterval;aS=(P(aS))?aS:0;if(aS<aO){++aS;W.Lang.later(aP,this,function(){RequestBlackboard.setProp((g(Y.requestObject,Y.cb,Y.originId)),"retries",aS);});RequestBlackboard.remove(aR);return true;}else{return false;}}function X(aP,aW,aQ){var Y=aP.txId;var aO=RequestBlackboard.get(Y);if(S(aO)){return;}var aR=true;var aU={data:aP.data};var aY,aV;var aS=aO.cb;if(aP.status==200||aP.status==201){aU.status=au;aU.result=au;aY=au;aR=false;}else{aU.status=C;aU.result=C;if(aP.status==400){var aT=aa,aX="Invalid crumb.";aV=U;aY=C;if(!window.navigator.cookieEnabled||aQ=="badcookie"){aT=aA;aV=A;aX="Cookies are disabled";}aI[C](aT,aX);}}RequestBlackboard.setProp(Y,ae,aU);aq(Y,((aR)?Q:t),aY,aV);}function J(Y,aR,aO){var aQ=null,aP=aO||false;if(Y.resps&&Y.resps.length===0){aQ=RequestBlackboard.getByTx(aR);W.Array.each(aQ,function(aU){var aT=aa,aS=U;if(!window.navigator.cookieEnabled||(aP===true)){aT=aA;aS=A;}aI[C](aT,"A crumb error occured: ",Y);aq(aU.txId,Q,C,aS);},this);}else{W.Array.each(Y.resps,function(aS){aI[C](aa,"A crumb error occured: ",Y);aS.status=400;X(aS,ioResponseObj);},this);}delete (v[aR]);}function V(bg,aX,aO){var aT=aO||false,a7=aX.status,bb=bg,a3="",a1=C;if(a7!=200&&a7!=201&&a7!=au){if(a7===0){a1=(aX.statusText==an)?an:av;}else{a3=a;aI[C](a,"A server error occured: ",{responseObject:aX});}var a2=RequestBlackboard.getByTx(bb);W.Array.each(a2,function(bc){if(O.rData[bc.txId]){delete (O.rData[bc.txId]);}aq(bc.txId,Q,a1,a3);});}else{O.tData[bg].startParse=T();var aZ=aX.responseText;var be=aX.getResponseHeader("Content-Type");if(be.indexOf("Multipart/Related")!==-1){var a0=E.exec(be),aQ=aX.responseText.split("--"+a0[1]),ba=aQ.length;for(var a9=1;a9<ba;a9++){var aP=aQ[a9],a6=h.exec(aP),aS=a6[1];if(aS.match(/application\/json/)){var aY=aP.match(ag)[0];aZ=aY;}else{if(aS.match(/text\/html/)){var bh=at.exec(aP),bd=bh[1],aR=aP.substring(aP.search(/\n\n/));aR=Z.trim(aR);RequestBlackboard.setProp(bd,"html",aR);}}}}var aV;try{aV=window.transportEval(aZ);}catch(bf){aI[C](a,"A parse error occured: "+bf.message,bf);var a5=RequestBlackboard.getByTx(bg);W.Array.each(a5,function(bc){aq(bc.txId,Q,C,y);},this);return;}if(!B(aV)){result=C;resultDetail=y;aI[C](a,"A parse error occured: ",aX);var aW=RequestBlackboard.getByTx(bg);W.Array.each(aW,function(bc){aq(bc.txId,Q,result,resultDetail);},this);return;}switch(aV.status){case ac:try{K.dali.crumb=aV.props.dali.crumb;}catch(a8){J(aV,bg,badcoookie);return;}var aU=v[bg];if(S(aU.cfg.retries)){aU.cfg.retries=1;}else{++aU.cfg.retries;}if(aU.cfg.retries<j){var Y=k(aU.cfg,aU.forcepost);var a4=RequestBlackboard.getByTx(bg);W.Array.each(a4,function(bc){bc.transactionId=Y.id;},this);delete (v[bg]);}else{J(aV,bg,aO);}break;case 400:J(aV,bg,aO);break;default:delete (v[bg]);O.tData[bg].pr=T()-O.tData[bg].startParse;W.Array.each(aV.resps,function(bc){X(bc,aX,aT);},this);break;}}}var aj=function(){var aP=null,aO={};function Y(aU,aT,aR){var aS=(new Date())-aO[aU];O.tData[aU]={rt:aS,pr:null};V(aU,aT,aR);}function aQ(aR){aO[aR]=new Date();}return{execute:function(aT,aW,aX){if(!aP){var aV=aI.getProperty(aM);if(!S(aV)){aP=aV;}else{aP=aB;}}var aS=am+"="+encodeURIComponent(aW);aT=(aX==o)?D(aT,"&__r="+new Date().getTime()):aT;var aR={method:aX,data:aS,on:{success:Y,failure:Y,start:aQ},timeout:aP};var aU=W.io(aT,aR);return aU;},simulateResponse:function(aT,aR,aS){aR.getResponseHeader=function(){return"";};if(aS){Y(aT,aR,true);}else{Y(aT,aR,false);}},reset:function(){aO={};v={};}};}();function D(Y,aO){return Y+((Y.indexOf("?")==-1)?"?":"&")+aO;}var ax=function(Y){var aP=aE,aQ=Y.batchable||false;if(S(Y.method)){Y.method="get";}var aO=false;switch(Y.method.toUpperCase()){case ao:aO=true;var aR=Y.data;if(!aG(aR)){aI[C](aC,"data must be a string");}else{Y.data=aR;}break;case (o||"DELETE"):if(Y.data!==undefined&&aG(Y.data)){Y.url=D(Y.url,Y.data);}break;default:}return{handler:aP,data:Y,batchable:aQ,forcepost:aO,targetId:Y.url};};var aH=function(aQ,aR,Y){var aO=aQ.args||{};var aP=aQ.moduleId||null;aO.moduleId=aP;if(aO.maple){aO.maple.module=aP;}else{aO.maple={module:aP};}return{handler:aN,data:aO,batchable:aQ.batchable||false};};ad[m]=aH;ad[x]=ax;function M(aQ,aP){var aO=aP.requestObject;var Y=aO.type||I;aO=(ay(ad[Y]))?ad[Y](aO,aP.moduleId,aI):aO;aO.txId=aQ;if(Y==x&&S(aP.targetId)){aP.targetId=aO.targetId;}if(S(aO.handler)){aO.handler=aD;}return aO;}function g(aO,Y,aR){var aP={requestObject:aO,cb:Y,moduleId:aR,originId:aR};if(aO.moduleId){aP.targetId=aO.moduleId;}var aQ=RequestBlackboard.create(aP);if(aO.batchable!==true&&G===n){af(aQ);}else{aF.enqueue(aQ);if(aO.batchable===true){if(!e){e=W.later(1,this,af);}else{e.cancel();e=W.later(1,this,af);}}else{if(G===n){af();}}}return aQ;}function k(aR,aS){var aO=aI.getProperty(w);if(aL(K)){K={};K.dali=aI.getProperty("dali")||{};}var aP=W.JSON.stringify({reqs:aR,props:K});var Y="GET";if((encodeURIComponent(aP).length>ab)||aS){Y="POST";}var aQ=aj.execute(aO,aP,Y);v[aQ.id]={ioObj:aQ,cfg:aR,forcepost:aS};return aQ;}function af(aV){var aO=false;var aW=[];var aS=[];var aU=false;if(aV){var aT=RequestBlackboard.get(aV);ah.fire(b,{type:b,request:aT.requestObject,originId:aT.originId});var Y=M(aV,aT);aW.push(Y);if(Y.forcepost===true){aU=true;}RequestBlackboard.setProp(aV,"isBatch",false);aS[0]=aV;}else{if(ay(e.cancel)){e.cancel();}var aX=aF.next();while(aX){var aQ=RequestBlackboard.get(aX),aR=false;if(aQ){ah.fire(b,{type:b,request:aQ.requestObject,originId:aQ.originId});aQ=M(aX,aQ);if(aQ.batchable!==true){if(aQ.forcepost===true){aR=true;}tx=k([aQ],aR);RequestBlackboard.setProp(aX,"transactionId",tx.id);RequestBlackboard.setProp(aX,"transactionObject",tx);aO=true;}else{if(aQ.forcepost===true){aU=true;}aW.push(aQ);aS.push(aX);}}aX=aF.next();}}if(aW.length>=1){var aP=k(aW,aU);W.Array.each(aS,function(aY){RequestBlackboard.setProp(aY,"transactionId",aP.id);RequestBlackboard.setProp(aY,"transactionObject",aP);aO=true;});}}function ai(){RequestBlackboard.reset();aF.reset();aj.reset();O={tData:{},rData:{}};}W.on("unload",ai,window);W.augment(ah,W.Event.Target);W.namespace(f);W[f][N]={name:"transport",getService:function(aO,Y){if(Y){return null;}if(!aI){aI=aO;}return ah;}};if(l){l.registerService(W[f][N]);}},"1.6.1",{requires:["event","io"]});YUI.add("arcade_transport",function(e){var M=null,ag=false,H=true,S,d=e.ModulePlatform,c=M,ah,h=encodeURIComponent,m=e.Lang,k=e.Object,v=e.Array,N,F,C,G,ab=ag,P={},ad={},ai=[],w,f=ag,t,n,X=0,aj=1,r=2,u=3,B=2048,af=131072,o="_status",Z="_txnid",U="POST",z="GET",g="getProperty",R="MPServices",ac="TransportProvider";function K(L,A){c.error("transport",L,A);}function W(O){var L=M,A;switch(O.type){case"moduleload":L={_action:"show",_create:1,_suid:O.contentId};break;case"setpref":L={_action:"save",_subAction:S,_type:"pref",modid:O.moduleId,_create:1};break;case"loadview":if(O.view=="pa"){A=c.queryModules(function(ak){var Y=c.getModuleApi(ak);return Y&&Y.getProperty("type")=="pa";})[0];L={_action:"show",_subAction:"single",modId:O.moduleId,_container:0,_id:A};}else{L={_action:"show",_subAction:O.view=="default"?S:O.view,_id:O.moduleId,_container:O.chrome?1:0};}break;case"arcade":case"module":L=O.args;L._container=O.chrome?1:0;L._id=O.moduleId;break;default:K("Request doesn't have a type.");break;}O=L?e.merge(L,O):e.mix({},O);delete O.type;delete O.moduleId;delete O.args;return O;}function J(L){var A=L.match(/^((?:\w+:\/\/)?[^#?]+)/);return(A&&m.isArray(A))?A[1]:"";}function aa(L){if(!L){return"";}var A=[];k.each(L,function(Y,O){if(m.isValue(Y)){if(!m.isString(Y)){Y=e.JSON.stringify(Y);}A.push(O+"="+h(Y));}});return A.join("&");}function D(O,am,al){if(!al){K("Proxy request: No module id given, unable to look up proxy signature.");}var ak=J(O.url),Y=c.getModuleState(al).proxy[ak],L,A;if(!Y){K("Proxy request: '"+O.url+"' has not been registered for proxying.");}L=F+"?url="+h(O.url)+"&.sig="+Y+"&.crumb="+N;A={method:O.method,data:O.bodyData,on:am,headers:O.headers};return e.io(L,A);}function b(al,ap,L){if(al.type=="xhr"){return D(al,ap,L).id;}var A=C,am={method:z,on:w},ak={_crumb:N,_mode:"json"},ao,an,Y,O;if(m.isArray(al)){am.method=U;}else{al=[al];}ak[Z]=new Date().getTime();v.each(al,function(ar,aq){al[aq]=W(ar);al[aq][Z]=ak[Z];});if(am.method==z){ao=e.merge(al[0],ak);an=aa(ao);if(an.length>2000){am.method=U;}else{A=C+"?"+an;}}if(G){A+=(A.indexOf("?")>-1?"&":"?")+G;}if(am.method==U){am.data=aa(ak)+"&_json="+h(e.JSON.stringify(al));}Y=e.io(A,am);O=Y.id;P[O]={args:arguments,moduleId:L,conn:Y};if(ap){P[O].callback=ap;}return O;}function l(){if(m.isArray(n)){while(n.length>0){var A=n.shift();b.apply(this,A);}t.detach();t=n=M;}f=ag;}function i(A){f=H;if(A){n=[];t=e.on("unload",e.bind(l,this,H),window);}}function y(ak,Y,O){var L=Y.responseText,A;if(L){A=L.indexOf("<!--");if(A>0){L=L.substring(0,A);}}N=L;l();ab=ag;}function T(O,L,A){K("Unable to update crumb.");}function E(){if(ab){return ag;}ab=H;i(H);var A={success:y,failure:T,scope:this};e.io("/?_mode=html&_action=show&_type=pref&_create=1&_subAction=_cFetch",{method:z,on:A});}function q(O,Y,L){if(f){if(m.isArray(n)){var A=e.Array(arguments);n.push(A);return M;}return ag;}return b(O,Y,L);}function a(L){var A=(P[L]&&P[L].conn&&P[L].conn.isInProgress());return A;}function V(A){if(a(A)){P[A].conn.abort();}else{return false;}}function s(A){if(A&&P[A]&&P[A].args){q.apply(M,P[A].args);delete P[A];delete ad[A];return H;}return ag;}function j(ak,O,A){if(m.isUndefined(O)){O=H;}if(m.isFunction(ak)){ak(ak.argument,A);}else{var L=ak.scope||ak,Y=O?ak.success:ak.failure;if(Y){Y.call(L,A,ak.argument);}}}function x(Y,A,L){var O=P[Y].callback;if(O){j(O,L,A);}if(!m.isUndefined(ad[Y])){if(ad[Y]>1){ad[Y]-=1;}else{delete ad[Y];}}if(m.isUndefined(ad[Y])){delete P[Y];}}function Q(al,A){var L=A._errorCode,Y=A._error,ak=P[al].callback,O={message:Y,moduleId:P[al].moduleId};if(A[o]==aj){if(L==af){if(!ab){E();}s(al);}else{K(Y,O);if(O.moduleId){return;}}}if(ak){j(ak,ag,O);}}function ae(){var A=ai.shift(),O,L;if(A){O=A[Z];if(A[o]!=X){Q(O,A);}else{L=c.getService("resourcemgr");if(A.props&&A.props.id){c.registerModule(A);}if(A.res){L.load(A.res,e.bind(x,M,O,A));}else{x(O,A);}}if(ai.length){m.later(1,this,ae);}}}function I(O,L,A){setTimeout(function(){x(O,L,ag);},0);}function p(ak,Y,A){var O;try{O=e.JSON.parse(Y.responseText);}catch(L){}finally{if(!m.isArray(O)){I(ak,Y,A);return;}}v.each(O,function(am){if(am[o]!=X){Q(ak,am);return;}var al;if(am.response){al=am.response;}else{al=[am];}if(!ad[ak]){ad[ak]=0;}ad[ak]+=al.length;v.each(al,function(an,ao){an._partId=ao;an[Z]=ak;if(!an.data){an.data={};}an.data=e.merge(am.data,an.data);});ai=ai.concat(al);});if(ai.length){m.later(1,this,ae);}}ah={E_OK:X,E_FATAL:aj,E_GLOBAL:r,E_MODULE:u,EC_CRUMB_ERR:B,EC_CRUMB_STALE:af,disable:i,enable:l,isEnabled:function(){return !f;},makeRequest:q,abortRequest:V,isRequestPending:a,_reset:function(){ab=ag;P={};ad={};ai=[];n=M;l();}};w={success:p,failure:I,scope:this};e.namespace(R);e[R][ac]={name:"arcade_transport",getService:function(L,A){if(!c){c=L;N=c[g]("crumb");if(m.isUndefined(N)){N=c[g]("dali").crumb;}F=c[g]("proxyUrl");C=c[g]("requestUrlLite");G=c[g]("passthru");}return A?M:ah;}};if(d){d.registerService(e[R][ac]);}},"1.0",{requires:["event","io"]});YUI.add("metro_dali",function(b){var a=b.ModulePlatform;a.subscribe("init",function(){var f=a.getService("transport"),e=0,d="cfg.maple_dali.handler.add",c="cfg.maple_dali.handler.refresh";f.setResponseFormatter(function(g){if(g.mod){g.data=g.mod.data;}if(g.data){delete g.data.maple;}return g;});f.setRequestFormatter("arcade",function(h,i){var g=b.mix({},h),j=h._id;delete g.type;if(!j){j=i;}if(h._type){j=h._type;}return{handler:c,data:{maple:{module:j,ba:b.merge(g,{_txnid:e++,_mode:"json",_id:j,_container:0,chrome:"false"})}}};});f.setRequestFormatter("loadview",function(k,j){var g=b.mix({},k),i=a.queryModules(function(p){var o=a.getModuleApi(p);return o&&o.getProperty("type")=="pa";})[0],m,n=k.moduleId,h=n,l=a.getModuleApi(n);switch(g.view){case"pa":g={handler:c,data:{maple:{module:i,ba:{_action:"show",_subAction:"single",modId:n,chrome:(g.chrome?"true":"false"),_txnid:e++,_mode:"json",_id:i,_container:(g.chrome?1:0),cpos:l.getProperty("cpos")||undefined,pointer:(l.isViewOpen("default")||l.isViewOpen("edit"))?1:undefined}}},batchable:true};break;case"default":if(g.chrome){if(i){m=a.queryModules(function(q){var p=a.getModuleApi(q),o=p&&p.getProperty("type");return o=="pacontainer";})[0];h=m;}g={handler:d,data:{maple:{module:h,ba:{_action:"show",chrome:(g.chrome?"true":"false"),_txnid:e++,_mode:"json",_id:h,modId:n,_container:(g.chrome?1:0),view:"default"}}}};break;}default:g={handler:c,data:{maple:{module:n,ba:{_action:"show",_subAction:g.view=="default"?undefined:g.view,view:g.view,_txnid:e++,_mode:"json",_id:n,_container:(g.chrome?1:0),chrome:(g.chrome?"true":"false")}}}};break;}delete g.moduleId;delete g.type;return g;});f.setRequestFormatter("module",function(g,h){var i=g.moduleId;if(!i){i=h;}return{handler:c,data:{maple:{module:i,ba:b.merge({_txnid:e++,_mode:"json",_id:i,_container:0},g.args)}}};});});},"1.0",{requires:["transport"]});YUI.add("module_api",function(a){a.ModuleApi=function(d,i){var h=i.props,f=a.Lang.isUndefined,b=h.id,j=i.prefs||{},g=null,c=["broadcast","listen","unlisten","closeView","getViewNode","getViewDirection","isViewOpen","navigate","openView","refreshView","setView"],e={getContextData:function(k){var m=i.data,l;if(m){l=(k?m[k]:m);}return(f(l)?g:l);},getId:function(){return b;},getProperty:function(k){var l=h[k];return f(l)?g:l;},getString:function(k){return d.getString(h.type,k);},getPref:function(k){var l=j[k];return f(l)?g:l;},setPref:function(k,l){var m=d.getService("transport");j[k]=l;if(m){m.makeRequest({type:"setpref",prefName:k,prefValue:l,moduleId:b},g,b);return true;}else{return false;}},getService:function(k){return d.getService(k,b);},error:function(k,l){d.error("module",k,a.merge((l?l:{}),{moduleId:b}));},abortRequest:function(k){var l=d.getService("transport");return !!(l&&l.abortRequest(k,b));},isRequestPending:function(k){var l=d.getService("transport");return !!(l&&l.isRequestPending(k,b));},makeRequest:function(k,m){var l=d.getService("transport");return(l?l.makeRequest(k,m,b):-1);}};a.Array.each(c,function(k){e[k]=function(){var l=a.Array(arguments,0,true);l.unshift(b);return d[k].apply(d,l);};});return e;};},"1.0");YUI.add("metro_viewtype",function(d){var c=null,b=false,a=true;d.namespace("Metro");d.Metro.createViewType=function(l,f){function k(p,o){return f.signal(p,o,[l]);}function j(o){return(o=="fp"||o=="toolbar")?d.one("body"):d.one("#"+l+"-"+o+"-bd");}function e(p){var o=j(p);return o?o.getStyle("direction"):c;}function i(q,p){var o=q.targetId,r=p?p.callback:c;this.setView(o,q.html);if(d.Lang.isFunction(r)){r(o,l);}}function n(o){return j(o)!=c;}function m(p,o,r){p=d.Array(p);var q=[];d.Array.each(p,function(s){q.push({type:"loadview",view:l,moduleId:s,chrome:o});});return f.getService("transport").makeRequest(q,r);}function h(p){var q=[],o=a;p=d.Array(p);if(p.length){d.Array.each(p,function(r){if(n(r)){var s=k(r,"viewrefresh");if(s){q.push(r);}}else{o=o&&b;}});if(o){this.loadView(q,false,{success:d.bind(i,this)});}}else{o=b;}return o;}function g(p,o){if(n(p)){k(p,"viewunload");j(p).set("innerHTML",o);this._afterSetView(p,o);k(p,"viewload");return a;}else{return b;}}return d.merge(d.ModulePlatform.BaseViewType,{_afterSetView:function(){},getViewDirection:e,getViewNode:j,isViewOpen:n,loadView:m,refreshView:h,setView:g});};},"1.0");YUI.add("default_viewtype",function(c){var m=c.ModulePlatform,h=null,j=false,g=true,k=c.Lang,o=c.DOM,b=j,i={},l={},d={},e,n="default",a="MPViewTypes",f="DefaultViewTypeProvider";c.on("unload",function(){b=g;},window);c.namespace(a);c[a][f]={name:n,create:function(r){function u(B,C,E){var G=r.getModuleApi(B),A=G.getProperty("detailUrl"),F,K,z,D,I,H=j,J=r.queryModules(function(N){var M=r.getModuleApi(N),L=M&&M.getProperty("type");return L=="pacontainer";})[0];switch(C){case"badcrumb":E=r.getProperty("crumbErrorHtml");H=g;break;case"nocookies":E=r.getProperty("cookieErrorHtml");break;default:if(!E){E=c.Lang.substitute(r.getProperty("modErrorHtml"),{message:r.getString("fp","STR.MODULE.ERROR_FALLBACK_TEXT"),name:G.getProperty("title"),img:G.getProperty("icon"),title:G.getProperty("title"),url:G.getProperty("detailUrl")});}}F=E.indexOf('id="default-'+B+'"')>-1?E:c.Lang.substitute(r.getProperty("modChromeHtml"),{html:E,type_name:G.getProperty("type"),view_name:"error"});K=E.indexOf('id="default-'+J+'"')>-1?F:c.Lang.substitute(r.getString("pa","pacontainerHtml"),{html:F,title:G.getProperty("title")});z=o.create(K);if(!A){o.addClass(z,"no-link");}if(H){D=o.create('<p class="oops"><a href="'+window.location.href+'" class="cta-btn">'+r.getString("pa","STR.OK")+"</a></p>");}else{if(e!=B){D=o.create('<p class="oops"><button class="cta-btn pa-mod-err-retry">'+r.getString("pa","STR.TRY_AGAIN")+"</button></p>");}}if(D){I=c.Selector.query(".oops-msg",z,g);if(I){I.appendChild(D);}}e=B;return z;}function v(A,z){if(k.isFunction(A)){A(z,n);}}function p(A){var z=r.getService("pa");return !!(z&&z.isPAModule(A));}function x(A,z){return r.signal(A,z,[n]);}function t(B){if(p(B)){var z=r.getModuleApi(B),C=z.getProperty("type"),A=r.getString("pa","STR.PA.DISCLAIMER"),D;if(A&&!z.getProperty("trusted")&&C!="yap"){D=c.one("#default-"+B+"-ft");if(D){D.set("innerHTML",A);}}}}function q(D,A){var C=r.getService("pa"),E=C.getPacontainerId(),B=r.getService("metrics"),z;if(B){B.start("rv",{moduleId:D});}z=o.create(A);if(z&&!z.length){if(!r.isStarted(E)){r.start(E);}C.setChild(z,D);t(D);C.setModuleLoading(j);x(E,"viewload");i[D]=z;}else{r.error("loadview","Invalid HTML received",{moduleId:D});}if(B){B.stop("rv");}}function w(B,C,z){var A=r.getService("pa"),D=A.getPacontainerId();if(!r.isStarted(D)){r.start(D);}A.setChild(u(B,C,z),B,C);A.setModuleLoading(j);x(D,"viewload");}function y(E,B){var C=E.targetId,A=l[C],H=B?B.callback:h,G=r.getService("metrics"),D=r.getService("transport"),F=E.html,z;if(G){z=D.getMetrics(A);if(z){if("rt" in z){G.set("rt",z.rt);}if("pr" in z){G.set("pr",z.pr);}if("dt" in z){G.set("js",z.dt);}}D.clearMetrics();G.stop("ov");}q(C,F);delete l[C];delete d[C];v(H,C);}function s(C,B){if(!b){var A=C.targetId,D=B?B.callback:h,z;d[A]=1;delete l[A];if(C.result!="abort"){z=r.getService("metrics");if(z){z.clear("ov");}r.error("loadview","Server error while loading default view.",{moduleId:A,html:(C?C.html:""),viewName:n});w(A,C.resultDetail,C.html);v(D,A);}}}return c.merge(c.Metro.createViewType(n,r),{closeView:function(B,D){var A=r.getService("pa"),C=A&&A.getPacontainerId(),z=(A&&p(B))?C:B;if(this.isViewOpen(B)&&x(z,"viewclose")){x(z,"viewunload");if(z==C){delete i[B];A.clearChild(B);}v(D,B);return g;}else{if(k.isNumber(l[B])){r.getService("transport").abortRequest(l[B]);delete l[B];}}return j;},hideView:function(A){var z=r.getService("pa"),B=z&&z.getPacontainerId();if(z&&p(A)&&this.isViewOpen(A)){this.getViewNode(A).get("parentNode").setStyle("display","none");x(B,"viewresize");return g;}return j;},openView:function(B,D){var A=r.getService("pa"),C=A&&A.getPacontainerId(),z;if(A&&p(B)&&!this.isViewOpen(B)&&x(C,"viewopen")){z=r.getService("metrics");if(z){z.start("ov",{moduleId:B});}l[B]=this.loadView(B,g,{success:y,failure:s,argument:{moduleId:B,callback:D}});return l[B]!=-1;}else{return j;}},showView:function(A){var z=r.getService("pa"),B=z&&z.getPacontainerId();if(z&&p(A)&&this.isViewOpen(A)){this.getViewNode(A).get("parentNode").setStyle("display","");x(B,"viewresize");return g;}return j;},_afterSetView:function(A,z){t(A);}});}};if(m){m.registerViewType(c[a][f]);}},"1.0");YUI.add("edit_viewtype",function(c){var p=null,m=false,i=true,k=c.ModulePlatform,s=p,g=m,r,e=p,f={},h="viewload",o="edit",j="MPViewTypes",a="EditViewTypeProvider";function n(u,t){return s.signal(u,t,[o]);}function d(w,v){var u=w.targetId,t=s.getService("pa");if(t){g=m;r.setView(t.getPacontainerId(),w.html);if(c.Lang.isFunction(v.callback)){v.callback(u,o);}}}function b(w,v){var u=w.targetId,x=v?v.callback:p,t=s.getService("pa");delete f[u];g=m;e=c.DOM.create(w.html);if(e&&!e.length){s.hideView(u,"default");s.getViewNode(u,"default").get("parentNode").insert(e,"after");t.setModuleLoading(m);n(u,h);if(c.Lang.isFunction(x)){x(u,o);}}else{s.error("loadview","Invalid HTML received",{moduleId:u});}}function q(u){var t=s.getModuleApi(u);return c.Lang.substitute(s.getProperty("modErrorHtml"),{message:s.getString("fp","STR.MODULE.ERROR_FALLBACK_TEXT"),name:t.getProperty("title"),img:t.getProperty("icon"),title:t.getProperty("title"),url:t.getProperty("detailUrl")});}function l(w,v){var u=w.targetId,x=v?v.callback:p,t=s.getService("pa");g=m;s.error("loadview","Server error while loading edit view.",{moduleId:u,html:(w?w.html:""),viewName:o});delete f[u];if(t){t.setModuleLoading(m);t.showAppError(q(u));}if(c.Lang.isFunction(x)){x(u,o);}}r={closeView:function(u,w){var t=s.getService("pa"),v=t?t.getPacontainerId():p;if(t&&this.isViewOpen(u)&&n(v,"viewclose")){n(v,"viewunload");e.parentNode.removeChild(e);s.showView(u,"default");if(c.Lang.isFunction(w)){w(u,o);}return i;}else{if(c.Lang.isValue(f[u])){s.getService("transport").abortRequest(f[u]);delete f[u];}else{return m;}}},getViewNode:function(t){return c.Node.get("#edit-"+t+"-bd");},isViewOpen:function(t){return this.getViewNode(t)!=p;},loadView:function(t,u){g=i;return s.getService("transport").makeRequest({type:"loadview",view:"edit",moduleId:t,chrome:true},u);},openView:function(u,w){var t=s.getService("pa"),v=t&&t.getPacontainerId();if(t&&t.isPAModule(u)&&!this.isViewOpen(u)&&!g&&n(v,"viewopen")){f[u]=this.loadView(u,{success:b,failure:l,argument:{moduleId:u,callback:w}});return f[u]!=-1;}else{return m;}},refreshView:function(v){if(this.isViewOpen(v)){var t=s.getService("pa"),w=t&&n(t.getPacontainerId(),"viewrefresh"),u;if(w){u={type:"loadview",view:o,moduleId:v,chrome:false};s.getService("transport").makeRequest(u,{success:d,argument:v});}return w;}else{return m;}},setView:function(u,t){if(this.isViewOpen(u)){n(u,"viewunload");this.getViewNode(u).set("innerHTML",t);n(u,h);return i;}else{return m;}},showView:function(t){return m;}};c.namespace(j);c[j][a]={name:o,create:function(t){s=t;return r;}};if(k){k.registerViewType(c[j][a]);}},"1.0");YUI.add("pa_viewtype",function(e){var d=e.ModulePlatform,c="pa",b="MPViewTypes",a="DefaultViewTypeProvider";e.namespace(b);e[b][a]={name:c,create:function(f){return e.Metro.createViewType(c,f);}};if(d){d.registerViewType(e[b][a]);}},"1.0");/* Copyright (c) 2011, Yahoo! Inc.  All rights reserved. */
YUI.add("userinfo_service",function(g){var d=null,c=g.ModulePlatform,a=d,f,b="MPServices",e="UserInfoProvider";f={getDisplayName:function(){return a.getProperty("user");},isLoggedIn:function(){return !!a.getProperty("user");},getLocation:function(){var i={},l=a.getProperty("userLocation"),j=["zip","city","state","country"],h=j.length,k;if(l){while((k=j[--h])){i[k]=l[k]||null;}}return i;}};g.namespace(b);g[b][e]={name:"userinfo",getService:function(i,h){if(!a){a=i;}return f;}};if(c){c.registerService(g[b][e]);}},"1.0");if(typeof YAHOO=="undefined"){YAHOO={};}if(!YAHOO.ULT){YAHOO.ULT={};}if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON="http://geo.yahoo.com/t";}if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}YAHOO.ULT.SRC_SPACEID_KEY="_S";YAHOO.ULT.DEST_SPACEID_KEY="_s";YAHOO.ULT.YLC_LIBSRC=2;YAHOO.ULT.CTRL_C="\x03";YAHOO.ULT.CTRL_D="\x04";YAHOO.ULT.BASE64_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-";(function(){YAHOO.ULT.track_click=function(c,g){if(!c||!g){return c;}g._r=YAHOO.ULT.YLC_LIBSRC;var h=[];var d=0;for(var b in g){var a=g[b];if(typeof(a)=="undefined"){a=g[b]="";}if(b.length<1){return c;}if(b.length>8){return c;}if(b.indexOf(" ")!=-1){return c;}if(YAHOO.ULT.has_ctrl_char(b)||YAHOO.ULT.has_ctrl_char(a)){return c;}h[d++]=b;}h=h.sort();var e=[];for(d=0;d<h.length;d++){e[d]=h[d]+YAHOO.ULT.CTRL_C+g[h[d]];}e=e.join(YAHOO.ULT.CTRL_D);if(e.length<1||e.length>1024){return c;}e=";_ylc="+YAHOO.ULT.encode64(e);d=c.indexOf("/*");if(d==-1){d=c.indexOf("/?");}if(d==-1){d=c.indexOf("?");}if(d==-1){return c+e;}else{return c.substr(0,d)+e+c.substr(d);}};YAHOO.ULT.beacon_click=function(c,b){if(!b){b=YAHOO.ULT.IMG;}if(c){var a=YAHOO.ULT.track_click(YAHOO.ULT.BEACON,c);a+="?t="+Math.random();b.src=a;}return true;};YAHOO.ULT.has_ctrl_char=function(b){for(var a=0;a<b.length;a++){if(b.charCodeAt(a)<32){return true;}}return false;};YAHOO.ULT.encode64=function(c){var a="";var k,h,f="";var j,g,e,d="";var b=0;do{k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64;}else{if(isNaN(f)){d=64;}}a=a+YAHOO.ULT.BASE64_STR.charAt(j)+YAHOO.ULT.BASE64_STR.charAt(g)+YAHOO.ULT.BASE64_STR.charAt(e)+YAHOO.ULT.BASE64_STR.charAt(d);k=h=f="";j=g=e=d="";}while(b<c.length);return a;};})();YUI.add("instrumentation",function(c){var v=null,q=false,j=c.ModulePlatform,y=v,t=v,z=v,k=v,x=q,e=v,i={},g,s,w="getProperty",p="data-b",o="aria-disabled",h="MPServices",m="InstrumentationProvider";function d(){var A=new Image();A.id=c.guid();i[A.id]=A;A.onload=A.onerror=function(){delete i[this.id];};return A;}function n(D){var B=D.hasAttribute(p)?D:D.ancestor(function(E){return E.hasAttribute(p);}),A=D.getAttribute(o)=="true",C=B?B.getAttribute(o)=="true":q;if(B&&!D.hasClass("nobeacon")&&!A&&!C){return B.getAttribute(p);}else{return v;}}function a(C,A){if(C instanceof c.Node){C=n(C);}if(!C){return;}var B=d();if(c.Lang.isObject(C)){if(!C[YAHOO.ULT.SRC_SPACEID_KEY]){C[YAHOO.ULT.SRC_SPACEID_KEY]=t;}if(A){YAHOO.ULT.BEACON=YAHOO.ULT.BEACON+";"+A;}YAHOO.ULT.beacon_click(C,B);if(A){YAHOO.ULT.BEACON=k;}}else{if(A){C+=";"+A;}B.src=(z||YAHOO.ULT.BEACON)+";"+C+"?t="+(new Date()).getTime();}}function l(C){if(x){return;}var B=y.getProperty("ylp"),A=d();if(!B){return;}if(!C){return;}A.src=(z||YAHOO.ULT.BEACON)+";"+B+"?t="+(new Date()).getTime()+"&"+C;x=true;}function r(B){if(e){return;}var A=n(B);if(A){e=A;}else{}}function u(){e=v;}function b(){return(e!==v);}function f(){if(e){a(e);e=v;}}g={fireBeacon:a,fireUltBeacon:a};s={collectData:r,fireBeacon:a,fireUltBeacon:a,firePageParameterBeacon:l,clearPendingBeacons:u,firePendingBeacons:f,hasPendingBeacons:b};c.namespace(h);c[h][m]={name:"instrumentation",getService:function(B,A){if(!y){y=B;t=y[w]("ultSpaceId");z=y[w]("ultBeaconHost");if(z){YAHOO.ULT.BEACON=z;}k=YAHOO.ULT.BEACON;}return(!A||y.getModuleApi(A)[w]("trusted")?s:g);}};if(j){j.registerService(c[h][m]);}});YUI.add("metrologger",function(b){var j=b.ModulePlatform,c,k="/jserror",g="/perf.gif",h=k,i={},f,d="MPServices",a="MetroLoggerProvider";function e(o,n){var m=new Image(),l="",p=b.merge(o,{rid:c.getProperty("requestId")});m.id=b.guid();i[m.id]=m;m.onload=m.onerror=function(){delete i[this.id];};b.Object.each(p,function(r,q){l+=encodeURIComponent(q)+"="+encodeURIComponent(r)+"&";});m.src=n+"?"+l;return l;}f={logError:function(m,l){e({moduleId:m,msg:l},k);},logPAPerf:function(l){e(l,g);},logAd:function(l){var m=e(l,h);}};b.namespace(d);b[d][a]={name:"metrologger",getService:function(m,l){if(!c){c=m;}return(!l||m.getModuleApi(l).getProperty("trusted")?f:null);}};if(j){j.registerService(b[d][a]);}});YUI.add("ads_bridge_service",function(b){var m=b.config,c=m.win,g=m.doc.documentElement,n=b.DOM,j="ad-takeover",h="ad-running",d=false,i,k=b.ModulePlatform,f="MPServices",a="AdsBridgeProvider",e,l;c.ad_running=function(q){if(d){return false;}var p=g.className.match(/[^\-](bkt\d+)/),o=p&&p[1]?h+"-"+p[1]:"",r=q?n.addClass:n.removeClass;r(g,h);r(g,o);return true;};c.ad_takeover=function(q){if(d){return false;}var p=g.className.match(/[^\-](bkt\d+)/),o=p&&p[1]?j+"-"+p[1]:"",r=q?n.addClass:n.removeClass;r(g,j);r(g,o);return true;};c.ad_feature_active=function(){return d;};c.ad_user_info=function(){var o=null;if(l){o={loc:l.getLocation()||null};}return o;};i={MODULE_ACTIVE:"moduleactive",fire:function(o){var p=c.ad_action;if(o.type==this.MODULE_ACTIVE){d=!!o.active;}if(b.Lang.isFunction(p)){p(b.merge({detail:{}},o));}}};b.namespace(f);b[f][a]={name:"ads_bridge",getService:function(p,o){if(!e){e=p;l=e.getService("userinfo");}return i;}};if(k){k.registerService(b[f][a]);}});YUI.add("autohide_service",function(h){var f=h.ModulePlatform,b={},e=-1,a,c="MPServices",g="AutoHideProvider";a={register:function(i){b[++e]=i;if(!i.triggers){i.triggers=["click"];}return e;},unregister:function(i){delete b[i];}};function d(i){h.Object.each(b,function(n){if(h.Array.indexOf(n.triggers,i.type)>-1){var o=i.target,k=n.targets,l=true,m=0,j=k.length;if(!o.inDoc(document)){l=false;}else{for(;m<j&&l;m++){if(o.compareTo(k[m])||k[m].contains(o)){l=false;}}}if(l){n.hide();}}});}h.on("click",d,document);h.on("keydown",d,document);h.on("unload",function(){h.detach("click",d,document);h.detach("keydown",d,document);},window);h.namespace(c);h[c][g]={name:"autohide",getService:function(){return a;}};if(f){f.registerService(h[c][g]);}},"1.0");YUI.add("sethomepage_service",function(a){var B=null,w=false,h=true,n=a.ModulePlatform,C,q,j=a.Cookie,p=a.UA,g="MPServices",s="SetHomepageProvider",b="m.",e="click",f="HP",i="ilc",c="keydown",o=27,k="mousedown",y="y-hpset-show",l,A;function t(D){j.set(i,D,{domain:q});}function r(){return j.get(i);}function v(E,D){j.set(f,D,{domain:".yahoo.com"});if(E){t(E);}}function m(){return j.get(f);}function u(D){D=!a.Lang.isUndefined(D)?D:r();var E=window.location.host;if(E.indexOf(b)===0){E=E.substring(2);}return"http://"+E+"/"+(D?"?ilc="+D:"");}function d(E){var D,F=w;if(l){D=u(E);l.setHomePage(D);F=l.isHomePage(D);if(F){v(E,"1");}}return F;}function z(E){var D,F=w;if(j.get(f)==1){F=h;}else{if(p.ie){if(window.location.host.indexOf(b)===0){F=window.history.length==1;}else{D=u(E);F=l.isHomePage(D);}}else{if((p.gecko||p.webkit)&&window.history.length==1){F=h;}else{if(p.opera&&window.history.length===0){F=h;}}}}return F;}function x(F,E){var D;F=a.Node.get(F);E=E||{};F.on(e,this._handleClick,this);F.on(c,this._handleKeydown,this);F.on(k,this._handleMousedown,this);D=E.autohideTargets||[];D.push(F);this.autohide=C.getService("autohide");this.autohideId=this.autohide.register({targets:D,hide:a.bind(this.hide,this)});this.instrumentation=C.getService("instrumentation");this.overlay=F;this.options=E;}x.prototype={autohide:B,autohideId:B,instrumentation:B,options:B,overlay:B,_handleClick:function(E){var D=E.target;if(D.hasClass("hs-close")){this.hide();}else{if(D.hasClass("hs-drag-icon")){E.preventDefault();}}},_handleMousedown:function(D){if(D.target.hasClass("hs-drag-icon")){v(this.options.ilc,"1");this.instrumentation.fireBeacon(this.options.dragBeacon);}},_handleKeydown:function(D){if(D.keyCode==o){this.hide();}},getRootNode:function(){return this.overlay;},hide:function(){this.overlay.removeClass(y);},show:function(){var D=this.overlay,E=D.one("h3");D.addClass(y);E.setAttribute("tabIndex","-1").focus();},toggle:function(){if(this.overlay.hasClass(y)){this.hide();}else{this.show();}},destroy:function(){var D=this.overlay;this.hide();D.detach(e,this._handleClick);D.detach(c,this._handleKeydown);D.detach(k,this._handleMousedown);this.autohide.unregister(this.autohideId);this.overlay=B;}};A={createOverlay:function(E,D){return new x(E,D);},isHomepageSet:z,getHpCookie:m,setHpCookie:v,getIlcCookie:r,setIlcCookie:t,setIEHomepage:d};a.namespace(g);a[g][s]={name:"sethomepage",getService:function(E,D){if(!C){C=E;q=C.getProperty("cookieDomain");}if(a.UA.ie&&!l){l=document.createElement("DIV");l.id="y-ieshp";l.style.behavior="url(#default#homepage)";document.body.appendChild(l);}return A;}};if(n){n.registerService(a[g][s]);}},"1.0");YUI.add("metrics_service",function(e){var c=e.ModulePlatform,b={},f,a="MPServices",d="MetricsProvider";f={clear:function(g){delete b[g+":start"];delete b[g+":total"];delete b[g+":data"];},getData:function(g){return b[g+":data"]||null;},getTotal:function(g){return b[g+":total"];},start:function(g,h){b[g+":start"]=+new Date();b[g+":data"]=h;},stop:function(g){b[g+":total"]=(new Date())-b[g+":start"];delete b[g+":start"];this.fire({type:"datapoint",name:g,total:this.getTotal(g),data:this.getData(g)});return this.getTotal(g);},set:function(g,h,i){b[g+":total"]=h;b[g+":data"]=i;this.fire({type:"datapoint",name:g,total:h,data:i});}};e.augment(f,e.Event.Target);e.namespace(a);e[a][d]={name:"metrics",getService:function(g,h){return f;}};if(c){c.registerService(e[a][d]);}});YUI.add("metro_performance",function(c){var a=c.ModulePlatform,b=a.getService("metrics");b.subscribe("datapoint",function(e){if(e.name=="rv"){if(!isNaN(b.getTotal("ov"))){var d=b.getData("ov").moduleId;a.getService("metrologger").logPAPerf({moduleId:d,suid:d.split("_")[1],rt:b.getTotal("rt"),ov:b.getTotal("ov"),rv:b.getTotal("rv"),pr:b.getTotal("pr"),js:b.getTotal("js")});b.clear("rt");b.clear("ov");b.clear("rv");b.clear("pr");b.clear("js");}}});});YUI.add("gallery-base64",function(b){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";b.Base64={decode:function(h){h=h.replace(/\s/g,"");if(!(/^[a-z0-9\+\/\s]+\={0,2}$/i.test(h))||h.length%4>0){throw new Error("Not a base64-encoded string.");}var g,e,f,d=0,c=[];h=h.replace(/\=/g,"");while(d<h.length){g=a.indexOf(h.charAt(d));f=d%4;switch(f){case 1:c.push(String.fromCharCode(e<<2|g>>4));break;case 2:c.push(String.fromCharCode((e&15)<<4|g>>2));break;case 3:c.push(String.fromCharCode((e&3)<<6|g));break;}e=g;d++;}return c.join("");},encode:function(h){if(/([^\u0000-\u00ff])/.test(h)){throw new Error("Can't base64 encode non-ASCII characters.");}var e=0,g,f,d,c=[];while(e<h.length){g=h.charCodeAt(e);d=e%3;switch(d){case 0:c.push(a.charAt(g>>2));break;case 1:c.push(a.charAt((f&3)<<4|(g>>4)));break;case 2:c.push(a.charAt((f&15)<<2|(g>>6)));c.push(a.charAt(g&63));break;}f=g;e++;}if(d===0){c.push(a.charAt((f&3)<<4));c.push("==");}else{if(d==1){c.push(a.charAt((f&15)<<2));c.push("=");}}return c.join("");}};},"@VERSION@");YUI.add("gallery-y64",function(b){var a=b.Base64;b.Y64={decode:function(c){c=c.replace(/\s/g,"");if(!(/^[a-z0-9\._\s]+\-{0,2}$/i.test(c))||c.length%4>0){throw new Error("Not a Y64-encoded string.");}c=c.replace(/[\._\-]/g,function(d){switch(d){case".":return"+";case"-":return"=";case"_":return"/";}});return a.decode(c);},encode:function(d){if(/([^\u0000-\u00ff])/.test(d)){throw new Error("Can't Y64 encode non-ASCII characters.");}var c=a.encode(d);c=c.replace(/[\+=\/]/g,function(e){switch(e){case"+":return".";case"=":return"-";case"/":return"_";}});return c;}};},"@VERSION@",{requires:["gallery-base64"]});YUI.add("rdsig_click",function(g){var f="href",h="data-ultlink",d="false",a=document.body;function e(i){return i.tagName.toUpperCase()=="A";}function b(j){j=j||window.event;var k=j.target||j.srcElement,i;if(k.tagName.toUpperCase()!="A"){k=g.DOM.ancestor(k,e);}if(k){i=k.getAttribute(h);if(i){k.href=i;}}}function c(j){j=j||window.event;var l=j.target||j.srcElement,i,m,k;if(!l||!l.tagName){return;}if(l.tagName.toUpperCase()!="A"){l=g.DOM.ancestor(l,e);}if(l){i=l.getAttribute(f);if(i){k=i.match(/\/RU=(.*)\//);m=(k&&k[1])?k[1]:null;if(m){m=g.Y64.decode(m);l.setAttribute(h,i);l.href=m;}}}}if(a.addEventListener){a.addEventListener("click",b,d);a.addEventListener("contextmenu",c,d);}else{a.attachEvent("onclick",b);a.attachEvent("oncontextmenu",c);}},"1.0",{requires:["gallery-y64"]});YUI.add("yui_service",function(e){var c=e.ModulePlatform,b=YUI({core:["yui-base","object","oop"],useBrowserConsole:e.config.useBrowserConsole,bootstrap:e.config.bootstrap}).use("yui-untrusted"),a="MPServices",d="YUIProvider";b.log=b.bind(e.log,e);delete b.use;if(e.Plugin&&e.Plugin.NodeFX){e.Node.plug(e.Plugin.NodeFX);}e.namespace(a);e[a][d]={name:"yui",getService:function(f,h){if(!h){return e;}else{var g=f.getModuleApi(h);return(g&&g.getProperty("trusted")?e:b);}}};if(c){c.registerService(e[a][d]);}},"1.0");YUI.add("aria_service",function(d){var i=d.ModulePlatform,g="MPServices",a="AriaProvider",c,f,h="aria-",e={hidden:["hide","show","isHidden"],disabled:["disable","enable","isDisabled"],selected:["select","unselect","isSelected"]},b=(d.UA.ie>=8||d.UA.gecko>=1.9||d.UA.webkit>=530);f={isSupported:function(){return b;},setRole:function(j,k){return j.setAttribute("role",k);},alert:function(m,j){var n=document,l,k;j=d.Node.getDOMNode(j)||n.body;if(b&&m){k=j.firstChild;while(k){if(d.DOM.hasClass(k,"aria-alert")){l=k;break;}k=k.nextSibling;}if(!l){l=n.createElement("div");l.role="alert";l.setAttribute(h+"live","assertive");l.className="hide-offscreen aria-alert";j.appendChild(l);}l.innerHTML="<p>"+m+"</p>";}this.update();},update:function(){if(!c){c=document.createElement("input");c.type="hidden";c.value=1;document.body.appendChild(c);}c.value=(c.value==1?0:1);},clearState:function(j,k){return j.removeAttribute(h+k);},hasState:function(k,l){var j=h+l;return k.hasAttribute?k.hasAttribute(j):k.getAttribute(j)!==null;},setState:function(j,k){j.setAttribute(h+k,true);},focusable:function(k,j){k.tabIndex=j?0:-1;}};d.Object.each(e,function(j,k){f[j[0]]=function(l){return f.setState(l,k);};f[j[1]]=function(l){return f.clearState(l,k);};f[j[2]]=function(l){return f.hasState(l,k);};});d.namespace(g);d[g][a]={name:"aria",getService:function(k,j){return f;}};if(i){i.registerService(d[g][a]);}},"1.0");YUI.add("tablist_service",function(a){var t=null,i=true,q=false,l=a.ModulePlatform,p="tab",c="tabpanel",v="data-pos",g="selected",n="href",u="click",f="keydown",e="aria-labelledby",d="tab",w=37,j=39,s=a.DOM,r=a.Selector,b,o=q,h="MPServices",m="TabListProvider";function k(z,x,y){x=x||{};this.node=a.one(z);this._tabQuery="li.tab";this.options=x;this._panels=x.panels;this._panel=x.panel;this._tabs=null;this._selectedIndex=-1;this._links=[];this._id=a.guid();this._moduleId=y;this._stickyKey=x.stickyKey||d;this._init();}k.prototype={_init:function(){if(!this.node){l.error("TabList","Invalid node passed into TabList.");}if(!b){b=l.getService("aria");o=b.isSupported();}b.setRole(this.node,"tablist");var z=this.node,A=a.Node.getDOMNode(z),G=r.query(this._tabQuery,A),E=this._panels?a.NodeList.getDOMNodes(this._panels):t,C,B=0,D,y,F,x;if(!G.length){G=r.query("li",A);this._tabQuery="li";}this._tabs=G;for(D=G.length;B<D;B++){y=G[B];y.setAttribute(v,B);if(y.id===""){y.id=a.guid();}F=s.firstByTag("a",y);this._links.push(F.getAttribute(n,2));if(o){b.setRole(y,"presentation");b.setRole(F,p);b.focusable(F,q);F.removeAttribute(n);if(E){x=E[B];b.setRole(x,c);b.focusable(x,q);x.setAttribute(e,y.id);if(!s.hasClass(y,g)){b.hide(x);}else{b.focusable(x,i);}}}if(s.hasClass(y,g)){this._selectedIndex=B;b.focusable(F,i);}}if(this._panel){x=this._panel;b.focusable(x,i);b.setRole(x,c);x.setAttribute(e,G[this._selectedIndex].id);}if(o){z.on(f,this._handleKeyDown,this);}z.on(u,this._handleMouseEvent,this);C=this.options.tabchange||l.getProperty("ui.tabchange");if(C&&C!=u){z.on(C,this._handleMouseEvent,this);}},_handleMouseEvent:function(z){var A=z.target,y=(A.get("tagName")=="LI")?A:A.ancestor("LI"),x;if(y&&y.hasAttribute(v)){x=Number(y.getAttribute(v));z.preventDefault();if(z.type==u&&this.options.enableSelectedTabLink&&x==this._selectedIndex){z.stopPropagation();location.href=this._links[x];}this.switchTo(x);}},_handleKeyDown:function(x){switch(x.keyCode){case j:this.next();break;case w:this.previous();break;}},destroy:function(){var x=this.node;if(o){x.detach(f,this.handleKeyDown);}x.detach(u,this.handleClick);this.unsubscribeAll();a.Object.each(this,function(z,y){delete this[y];},this);},getSelectedIndex:function(){return this._selectedIndex;},getTabNode:function(x){return a.one(this._tabs[x]);},getTabNodes:function(){return this.node.queryAll(this._tabQuery);},getTabPanelNode:function(x){return this._panels.item(x);},getTabUrl:function(x){return this._links[x];},next:function(x){if(this._selectedIndex<this._tabs.length-1){this.switchTo(this._selectedIndex+1);}else{if(x){this.switchTo(0);}}},previous:function(x){if(this._selectedIndex>0){this.switchTo(this._selectedIndex-1);}else{if(x){this.switchTo(this._tabs.length-1);}}},switchTo:function(I){if(I!=this._selectedIndex){var G=this._tabs,H=this._selectedIndex,z=G[H],y=G[I],E=G.length,F=this._panels,x=this._panel,C=0,K,J,B,A,D;this.fire({type:"beforetabchange",toIndex:I,fromIndex:H});s.removeClass(z,g);if(o){while(C<E){B=s.firstByTag("a",G[C]);if(G[C]!==y){b.focusable(B,q);b.unselect(B);}else{b.focusable(B,i);b.select(B);B.focus();}C++;}}s.addClass(y,g);if(F&&F.size()>1){K=F.item(H);J=F.item(I);K.toggleClass(g);J.toggleClass(g);if(o){b.hide(K);b.focusable(K,q);b.show(J);b.focusable(J,i);}}else{if(x){x.setAttribute(e,y.id);}}this._selectedIndex=I;if(this.options.sticky){A=l.getModuleApi(this._moduleId);if(A){D=A.getService("statemgr");if(D){D.setUserModuleState(this._stickyKey,I);}}}this.fire({type:"tabchange",toIndex:I,fromIndex:H});}}};a.augment(k,a.Event.Target);a.namespace(h);a[h][m]={name:"tablist",getService:function(y,x){return{create:function(A,z){return new k(A,z,x);}};}};if(l){l.registerService(a[h][m]);}},"1.0");YUI.add("iframeshim_service",function(c){var k=c.ModulePlatform,j=c.Node,p=c.Lang.isNumber,e,f="MPServices",a="IFrameShimProvider",o='<iframe class="y-iframe-shim" tabindex="-1" role="presentation" title="For presentation purposes. Please ignore." src="javascript:false"></iframe>',m="auto",g="display",i="parentNode",h="px",n="zIndex",l,b;function d(){var q=j.create(o);q.setStyle("frameBorder","0");q.setStyle("opacity",0);return q;}l=function(q){this.target=null;this.iframe=d();this.retarget(q);};l.prototype={show:function(){this._positionIFrame();this.iframe.setStyle(g,"block");},hide:function(){this.iframe.setStyle(g,"none");},retarget:function(q){this.hide();this.target=j.get(q);this._attachIFrame();},destroy:function(){this.iframe.get(i).removeChild(this.iframe);this.iframe=this.target=null;},_attachIFrame:function(){var r=this.iframe,q=r.get(i),s=this.target;if(s){s.get(i).insertBefore(r,s);}else{if(q){q.removeChild(r);}}},_positionIFrame:function(){if(!this.target){return;}var r=this.iframe,t=this.target,q=parseInt(t.getStyle("top"),10),v=parseInt(t.getStyle("left"),10),u=t.get(n),s=t.get("region");r.setStyles({top:p(q)?q+h:m,left:p(v)?v+h:m,width:s.width+h,height:s.height+h});if(p(u)){r.setStyle(n,u-1);}}};b={create:function(q){return new l(q);},isShimNeeded:function(){return c.UA.ie>5&&c.UA.ie<7;}};c.namespace(f);c[f][a]={name:"iframeshim",getService:function(r,q){if(!e){e=r;}return b;}};if(k){k.registerService(c[f][a]);}},"1.0");YUI.add("menu_service",function(b){var v=false,j=true,z=null,l=b.ModulePlatform,r="data-pos",e="selected",k="px",s="LI",i="visibility",t=38,d=40,n=27,g=13,c,u,a,q=v,m=[],o=b.Lang.isNumber,y=b.DOM,w,h="MPServices",p="MenuProvider";function x(){b.Array.each(m,function(A){A.hide();});}function f(B,A){this.node=b.one(B);this.options=A||{};this._items=[];this._selectedIndex=-1;this._visible=v;this._id=-1;this._shim=z;this._autohideId=-1;this._autohideTimer=z;this._init();}f.prototype={_init:function(){if(!c){c=l.getService("aria");q=c.isSupported();}var E=this.node,C=b.Node.getDOMNode(E),B=C.firstChild,F=0,A,D;while(B){if(B.nodeType==3){A=B.nextSibling;C.removeChild(B);B=A;}else{D=b.one(y.firstByTag("a",B));this._items.push({element:B,linkElement:D,url:D.get("href")});if(q){c.setRole(B,"presentation");c.setRole(D,"menuitem");c.focusable(D,v);D.removeAttribute("href");}if(!B.id){B.id=b.guid();}B.setAttribute(r,F);B=B.nextSibling;F++;}}if(u.isShimNeeded()){this._shim=u.create(E);}if(q){c.setRole(E,"menu");c.hide(E);}E.on("keydown",this._handleKeyDown,this);E.on("click",this._handleMouseEvents,this);E.on("mouseover",this._handleMouseEvents,this);this._id=m.length;m.push(this);},hide:function(A){if(this._visible){var D=this._shim,B=this.node,C=this.options.focusNode;B.setStyle(i,"hidden");c.hide(B);this._visible=v;if(D){D.hide();}this._clearAutohide();this.fire({type:"hide",target:this});if(A&&C){b.one(C).focus();}}},isVisible:function(){return this._visible;},show:function(A,F,D){if(!this._visible){x();var E=A.left,C=A.right,B=this.node,G=this._shim;D=D||k;if(o(E)){B.setStyle("left",E+D);}else{if(o(C)){B.setStyle("right",C+D);}}B.setStyle("top",A.top+D).setStyle(i,"visible");if(F){this.options.focusNode=F;}if(q){c.show(B);}this.select(0);if(G){G.show();}this._visible=j;this.fire({type:"show",target:this});this._clearAutohide();this._autohideTimer=b.later(50,this,function(){this._autohideTimer=z;this._autohideId=a.register({targets:[this.node],hide:b.bind(function(){this.hide();},this)});});}},_clearAutohide:function(){var A=this._autohideTimer;a.unregister(this._autohideId);if(A){A.cancel();this._autohideTimer=z;}},_handleMouseEvents:function(C){var D=C.target,B=(D.get("tagName")==s)?D:D.ancestor(s),A=-1;if(B&&B.hasAttribute(r)){C.preventDefault();A=Number(B.getAttribute(r));switch(C.type){case"click":this.execute(A);break;case"mouseover":this.select(A);break;default:}}},_handleKeyDown:function(C){var D=C.target,B=(D.get("tagName")==s)?D:null,A=v;switch(C.keyCode){case d:this.selectNext(j);A=j;break;case t:this.selectPrevious(j);A=j;break;case n:this.hide(j);break;case g:if(B){this.execute(Number(B.getAttribute(r)));}break;default:}if(A){C.preventDefault();}},destroy:function(){var A=this.node,B=this._shim;if(q){A.detach("keydown",this._handleKeyDown);}A.detach("click",this._handleMouseEvents);A.detach("mouseover",this._handleMouseEvents);this._clearAutohide();if(B){B.destroy();}b.Object.each(this,function(C,E,D){delete D[E];});m[this._id]=null;},getSelectedIndex:function(){return this._selectedIndex;},getItemNode:function(A){return this.getItemNodes().item(A);},getItemNodes:function(){return this.node.all("li");},getItemUrl:function(A){return this._items[A].url;},execute:function(A){if(A>=0&&A<this._items.length){this.hide(j);this.fire({type:"execute",target:this,relatedTarget:this.getItemNode(A),index:A,url:this._items[A].url});}},selectNext:function(A){if(this._selectedIndex<this._items.length-1){this.select(this._selectedIndex+1);}else{if(A){this.select(0);}}},selectPrevious:function(A){if(this._selectedIndex>0){this.select(this._selectedIndex-1);}else{if(A){this.select(this._items.length-1);}}},select:function(B){if(B!=this._selectedIndex){var D=this._selectedIndex,C=this._items[D],A=this._items[B];if(C){y.removeClass(C.element,e);}y.addClass(A.element,e);if(q){if(C){c.focusable(C.linkElement,v);}c.focusable(A.linkElement,j);}A.linkElement.focus();this._selectedIndex=B;this.fire({type:"select",target:this,toIndex:B,fromIndex:D});}}};b.augment(f,b.Event.Target);w={create:function(B,A){return new f(B,A);}};b.namespace(h);b[h][p]={name:"menu",getService:function(B,A){if(!c){c=l.getService("aria");u=l.getService("iframeshim");a=l.getService("autohide");}return w;}};if(l){l.registerService(b[h][p]);}});function ad_el(b){var a=document;if(a.getElementById){return a.getElementById(b);}else{if(a.all){return a.all[b];}else{if(a.layers){return a.layers[b];}else{return null;}}}}function ad_params(g,f){var e="",b=arguments;for(var d=1;d<b.length;d++){if(g=="object"){e+="<param name="+b[d][0]+' value="'+b[d][1]+'">';}else{if(g=="embed"){e+=b[d][0]+'="'+b[d][1]+'"';if(d<(b.length-1)){e+=" ";}}else{return;}}}return[g,e];}function ad_embedObj(l,i,k,j,f,a){var b="";switch(l){case"swf":var e="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";break;default:return;}var c=l+i;if(a[0]=="object"){b='<object classid="'+e+'" id="'+c+'" width="'+j+'" height="'+f+'">'+a[1]+"</object>";}else{if(a[0]=="embed"){b='<embed name="'+c+'" '+a[1]+"></embed>";}else{return;}}if(k!==""){var g=ad_el(k);g.innerHTML=b;}else{document.write(b);}}ad_jsl=1;if(document.getElementById("l_yodel")&&typeof(yodel)!="undefined"){function callYodel(){var a=["FlashVars","startplay=1"];if(yodel.cap){ad_embedObj("swf","yod1","l_fl",yodel.swf_w,yodel.swf_h,ad_params("object",["movie",yodel.swf],["quality","autohigh"],["loop","false"],["play","false"],["wmode","transparent"],a));}else{ad_embedObj("swf","yod1","l_fl","","",ad_params("embed",["src",yodel.swf],["height",yodel.swf_h],["width",yodel.swf_w],["quality","autohigh"],["play","false"],["loop","false"],["wmode","transparent"],a,["type","application/x-shockwave-flash"],["pluginspage","http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"]));}}function yodelCheckFlash(){var a=document.documentElement.className.toString();if(a.match("flash-gt"+(yodel.nfv-1))){if(a.match("ua-ie")){yodel.cap=1;}else{yodel.ncap=1;}}if(yodel.cap||yodel.ncap){var b=document.createElement("div");b.id="l_fl";b.style.position="absolute";b.style.top="0px";b.style.left="0px";document.getElementById("l_yodel").appendChild(b);ad_el("l_logo").useMap="#yodelmap";}}if(typeof(ad_jsl)!="undefined"){if(window.attachEvent){window.attachEvent("onload",yodelCheckFlash);}else{if(window.addEventListener){window.addEventListener("load",yodelCheckFlash,0);}}}}if(document.getElementById("hdrm_mh")&&typeof(ad_hdrm)!="undefined"){var hdrm_init=(function(){var b=document.documentElement.className.toString();if(b.match("flash-gt"+(ad_hdrm.nfv-1))&&typeof(ad_jsl)!="undefined"){if(b.match("ua-ie")){ad_hdrm.cap=1;}else{ad_hdrm.ncap=1;}}var a=document.createElement("div");a.id="mh_swf";a.style.position="absolute";a.style.top=ad_hdrm.off_y+"px";a.style.left=ad_hdrm.off_x+"px";ad_el("hdrm_mh").appendChild(a);var c="logo_clk="+ad_hdrm.redir+"&swfext="+ad_hdrm.dir+"&country=us";if(ad_hdrm.cap){ad_embedObj("swf","l1","mh_swf",ad_hdrm.swf_w,ad_hdrm.swf_h,ad_params("object",["movie",ad_hdrm.dir+ad_hdrm.swf],["FlashVars",c],["allowScriptAccess","always"],["quality","autohigh"],["menu","false"],["loop","false"],["wmode","transparent"],["play","true"]));}else{if(ad_hdrm.ncap){ad_embedObj("swf","l1","mh_swf","","",ad_params("embed",["alt",ad_hdrm.alt],["src",ad_hdrm.dir+ad_hdrm.swf],["id","swfl1"],["FlashVars",c],["allowScriptAccess","always"],["loop","false"],["menu","false"],["quality","high"],["width",ad_hdrm.swf_w],["play","true"],["height",ad_hdrm.swf_h],["wmode","transparent"],["type","application/x-shockwave-flash"],["pluginspage","http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"]));}else{ad_el("hdrm_mh").innerHTML='<a href="'+ad_hdrm.redir+'"><img src="'+ad_hdrm.dir+ad_hdrm.img+'" height="'+ad_hdrm.swf_h+'" width="'+ad_hdrm.swf_w+'" border="0" alt="'+ad_hdrm.alt+'" /></a>';}}if(ad_hdrm.cap){ad_el("swfl1").alt=ad_hdrm.alt;}})();}YUI.add("statemgr_service",function(b){var k=b.ModulePlatform,g="MPServices",m="StateMgrProvider",j="MSC",i="fpps",e="fpms",p="_page",l,h,c,d,r,o;function f(){var t=new Date();t.setFullYear(t.getFullYear()+1);return t;}function s(x,v,u){var w=h.getSub(x,v),t=null;if(w){t=c.parse(w)[u];}return t;}function a(z,w,t){var y=h.getSub(z,w),x,v,u;if(y){x=c.parse(y);delete x[t];v=c.stringify(x);u={expires:f(),domain:l,path:"/"};if(v=="{}"){h.removeSub(z,w,u);}else{h.setSub(z,w,v,u);}}}function q(y,u,t,w){var x=h.getSub(y,u),v=x?b.JSON.parse(x):{};v[t]=w;h.setSub(y,u,c.stringify(v),{expires:f(),domain:l,path:"/"});}function n(t){if(!d[t]){d[t]=r.getModuleApi(t).getProperty("trusted")?b.Object(o):{};b.mix(d[t],{getUserModuleState:function(u){return s(e,t,u);},removeUserModuleState:function(u){a(e,t,u);},setUserModuleState:function(u,v){q(e,t,u,v);}});}return d[t];}o={isUpdated:function(){return !!h.get(j);},update:function(){h.set(j,"1",{domain:l,path:"/"});},getUserPageState:function(t){return s(i,p,t);},removeUserPageState:function(t){a(i,p,t);},setUserPageState:function(t,u){q(i,p,t,u);}};b.namespace(g);b[g][m]={name:"statemgr",getService:function(u,t){r=u;h=b.Cookie;c=b.JSON;l=u.getProperty("cookieDomain");if(!d){d={};}return !t?o:n(t);},destroy:function(){d=null;}};if(k){k.registerService(b[g][m]);}},"1.0");YUI.add("carousel_service",function(c){var o=c.ModulePlatform,g="MPServices",a="CarouselProvider",l="tabindex",h="A",m="offsetWidth",b="right",p="mouseout",f="mouseover",e=300,i=true,k=false,j=null,d;function n(u,r,t){var v,s;v=this.node=c.one(u);if(v.hasClass("y-carousel-list")){this._carouselList=v;this.node=v.get("parentNode");}else{this._carouselList=v.query(".y-carousel-list");}this.options=r||{};this._loop=r.loop||k;this._autoscrollPlaying=k;this._autoscrollLazyPause=0;this._autoscrollInterval=r.autoscrollInterval||0;this._autoscrollIntervalFirst=r.autoscrollIntervalFirst||this._autoscrollInterval;this._autoscrollTimer=j;s=this._carouselItems=this._carouselList.get("children");this._maxItems=s.size();this._currentIndex=0;this._pixelToEmRatio=0;this._moduleapi=t;this._direction=(t.getViewDirection("default")=="rtl")?b:"left";this._init();}n.prototype={_init:function(){var r=this.node;r.addClass("horz");if(this._autoscrollInterval>0){this.attachEngagingAreaMouseEvents();if(c.UA.ie<8){this.activeElement=document.activeElement;document.onfocusout=c.bind(this.handleIEBlur,this);document.onfocusin=c.bind(this.handleIEFocus,this);}else{c.on("blur",c.bind(this.handleBlur,this),window);c.on("focus",c.bind(this.handleFocus,this),window);}}},_getWrapAroundToPosition:function(B,s){var C,y,r,v,D,z=this._direction,u=this._maxItems,x=this._carouselItems,w=x.item(0).get(m),A=u*w,E=x.item(B),t=parseInt(E.getComputedStyle(z),10);t=isNaN(t)?0:t;C=s*w+t;y=t;if(B>s){C+=A;y+=A;}else{C-=A;y-=A;}E=x.item(s);D=this._carouselList;r=D.getComputedStyle(z);if(r){if(r.indexOf("em")>-1){v=parseInt(r,10);D.setStyle(z,this._convertToPixels(v)+"px");}else{if(r.indexOf("auto")>-1){D.setStyle(z,"0");}}}E.setStyle(z,y+"px");return -C;},_getToPosition:function(u,w){var x,v,r=this._direction,s=this._carouselItems,t=s.item(0).get(m);x=-(u*t);this._carouselList.setStyle(r,x+"px");v=s.item(u);v.setStyle(r,"");v=s.item(w);v.setStyle(r,"");return -(w*t);},destroy:function(){var s=this._scrollEventHandle,r=this._fontResizeHandle;if(s){s.detach();}if(r){r.detach();}this.detachEngagingAreaMouseEvents();this._scrollEventHandle=this._fontResizeHandle=this.node=this._carouselItems=this._carouselList=j;this.unsubscribeAll();},getItemNode:function(r){return this._carouselItems.item(r);},getCurrentIndex:function(){return this._currentIndex;},_doAutoscroll:function(){if(this._autoscrollPlaying){if(this._autoscrollLazyPause===0){this.next();if(this._autoscrollInterval>0){this._autoscrollTimer=c.later(this._autoscrollInterval*1000,this,this._doAutoscroll);}}else{this._autoscrollTimer=j;}}},play:function(r){if(this._autoscrollIntervalFirst===0){return k;}if(r){if(this._autoscrollLazyPause>0){this._autoscrollLazyPause-=1;}if(this._autoscrollPlaying===k){return;}}if(this._autoscrollLazyPause===0&&(this._autoscrollPlaying===k||this._autoscrollTimer===j)){this._autoscrollTimer=c.later((this._autoscrollIntervalFirst*1000),this,this._doAutoscroll);this._autoscrollPlaying=i;}},pause:function(r){if(r){this._autoscrollLazyPause+=1;}else{this._autoscrollPlaying=k;if(this._autoscrollTimer!==j){this._autoscrollTimer.cancel();this._autoscrollTimer=j;}}},next:function(s){var r=this._currentIndex;if(r==this.getItemCount()-1){if(this._loop||s){r=0;}}else{++r;}this.scrollTo(r);},previous:function(s){var r=this._currentIndex;if(r===0){if(this._loop||s){r=this.getItemCount()-1;}}else{--r;}this.scrollTo(r);},scrollTo:function(v,y){var B,r,C,s=k,w=this._maxItems,A=this._currentIndex,D,u=this._carouselList.fx,z=this._direction,t,x={type:"scroll",fromIndex:A,toIndex:v};if(this.isScrolling()||v==A){return;}r=this.getItemNode(A);this._activateTabIndex(r,k);y=y===undefined||y===j?i:y;if(6==c.UA.ie&&b==z){y=k;}s=(A===0&&v==w-1)||(A==w-1&&v===0);this._currentIndex=v;if(y&&s&&w>2){B=this._getWrapAroundToPosition(A,v);}else{B=this._getToPosition(A,v);}this.fire({type:"beforescroll",fromIndex:A,toIndex:v});t=this.options.animate||o.getProperty("ui.carousel.animate");if(t){C=this._scrollEventHandle;if(C){C.detach();}this._scrollEventHandle=u.on("end",function(){this._handleScrollEnd(x);},this);if(b==z){D={to:{right:B}};}else{D={to:{left:B}};}D.duration=this.options.animDuration||0.5;D.easing=this.options.easing||c.Easing.easeBoth;u.setAttrs(D);u.run();}else{this._carouselList.setStyle(z,B+"px");this._handleScrollEnd(x);}},_handleScrollEnd:function(t){var r,s,w,u,v;if(c.UA.ie){r=this._direction;v=this._carouselList;w=parseInt(v.getComputedStyle(r),10);u=this._convertToEms(w);if(isFinite(u)){v.setStyle(r,u-0.068+"em");}}s=this.getItemNode(this._currentIndex);this._activateTabIndex(s,i);this.fire(t);},_convertToEms:function(r){return 1/this._calculateEm()*parseInt(r,10);},_convertToPixels:function(r){return this._calculateEm()*parseInt(r,10);},_calculateEm:function(){var r,t,s=this.node;r=s.create('<div style="width: 50em; height: 0; position: absolute;'+this._direction+': -999em;"></div>');s.appendChild(r);t=r.get(m)/50;s.removeChild(r);if(t===0&&this._pixelToEmRatio!==0){t=this._pixelToEmRatio;}else{if(t>0){this._pixelToEmRatio=t;}}return t;},_activateTabIndex:function(t,r){var s=t.queryAll(h);if(s){if(r){s.each(function(u){u.removeAttribute(l);});}else{s.each(function(u){u.setAttribute(l,"-1");});}}},getItemNodes:function(){return this._carouselItems;},getItemCount:function(){return this._maxItems;},isScrolling:function(){return this._carouselList.fx.get("running");},attachEngagingAreaMouseEvents:function(){this.node.on(f,this.handleEngagingAreaMouseover,this);this.node.on(p,this.handleEngagingAreaMouseout,this);},detachEngagingAreaMouseEvents:function(){this.node.detach(f,this.handleEngagingAreaMouseover);this.node.detach(p,this.handleEngagingAreaMouseout);},handleBlur:function(){this.pause(i);this.detachEngagingAreaMouseEvents();},handleFocus:function(){this.play(i);this.attachEngagingAreaMouseEvents();},handleIEBlur:function(){if(this.activeElement){}if(this.activeElement==document.activeElement){this.activeElement=j;this.handleBlur();}},handleIEFocus:function(){if(this.activeElement==j){this.handleFocus();}this.activeElement=document.activeElement;},handleEngagingAreaMouseover:function(r){c.later(e,this,this.pause,i);},handleEngagingAreaMouseout:function(r){c.later(e,this,this.play,i);}};c.augment(n,c.Event.Target);function q(r){this.moduleapi=r;}q.prototype={create:function(s,r){return new n(s,r,this.moduleapi);}};c.namespace(g);c[g][a]={name:"carousel",getService:function(s,r){if(!d){d=s;}return new q(d.getModuleApi(r));}};if(o){o.registerService(c[g][a]);}},"1.0");YUI.add("ulm_service",function(c){var t=c.ModulePlatform,o=c.Lang,C,m="MPServices",u="UlmProvider",z=null,n=true,v=false,s="alt-text-color",b="blur",A="checked",k="click",g="defaultValue",f="focus",d="innerHTML",B="submit",r="text-color",j="value",y="y-ulm-alert",i="y-ulm-dd",l="y-ulm-q",p="y-ulm-open",a="y-ulm-setdefault",h="y-ulm-locations",x="y-ulm-custom-list",w="_ULM_";function q(E,G,D){var F=c.Node.get(E),I=F.query("."+i),H=F.query("."+l);D=c.merge({serverOnSuccess:this.serverOnSuccess,setDefault:!!I,showRecent:this.showRecent,showSaved:this.showSaved},D);this.serverOnSuccess=D.serverOnSuccess;this.setDefault=D.setDefault;this.showRecent=D.showRecent;this.showSaved=D.showSaved;this.dropdownLink=I;this.transport=C.getService("transport");this.form=F;this.moduleapi=G;this.locationCache={};this.commonRequest={type:"arcade",_container:0,_type:"ulm",hostId:G.getId(),hostType:G.getProperty("type"),filter:G.getContextData(w+"FILTER"),customFilter:G.getContextData(w+"CUSTOM_FILTER"),customList:G.getContextData(w+"CUSTOM_LIST"),customIcons:G.getContextData(w+"CUSTOM_ICONS"),hostSec:G.getContextData(w+"SEC")};F.on(k,this.handleClick,this);F.on(B,this.handleSubmit,this);if(H){this.initSearchBox(H);}}q.prototype={moduleapi:z,autohideId:z,alertBody:z,form:z,dropdownLink:z,pop:z,iframeShim:z,searchBox:z,setDefault:v,isPopBodyLoaded:v,showRecent:n,showSaved:n,locationCache:z,requestId:-1,quickLocRequestId:-1,commonRequest:z,serverOnSuccess:"",transport:z,initSearchBox:function(G){var F=this.handleFocusBlur,D=this.moduleapi.getString(w+"PROMPT"),E=G.get(j);G.set(g,D);if(E===""||E===D){G.replaceClass(r,s);G.set(j,D);}G.blur();G.on(f,F,this);G.on(b,F,this);this.searchBox=G;},destroy:function(){var F=this.autohideId,E=this.form,I=this.handleFocusBlur,D=this.iframeShim,H=this.searchBox,G=this.transport;G.abortRequest(this.requestId);G.abortRequest(this.quickLocRequestId);if(F!==z){C.getService("autohide").unregister(F);this.autohideId=z;}E.detach(k,this.handleClick);E.detach(B,this.handleSubmit);if(H){H.detach(f,I);H.detach(b,I);}if(D){D.destroy();}this.unsubscribeAll("locationselect");this.locationCache={};this.alertBody=this.dropdownLink=this.form=this.pop=this.iframeShim=this.searchBox=z;},isDestroyed:function(){return this.form===z;},handleFocusBlur:function(F){var E=F.target,D=F.type;if(D===f){if(this.searchBox){this.openPop();}if(E.get(j)===E.get(g)){E.replaceClass(s,r);E.set(j,"");}}else{if(D===b){if(o.trim(E.get(j))===""){E.replaceClass(r,s);E.set(j,E.get(g));}}}},handleSubmit:function(E){var F=this.searchBox,D;E.preventDefault();if(!this.isPopOpen()){this.openPop();}else{D=o.trim(F.get(j));if(D&&D!=F.get(g)){this.setLocation(D);}}},handleClick:function(J){var I=J.target,D=I.get("href"),F=I.get("className"),E=F?F.split(/\s+/):[],H=E.length,G;while(H--){switch(E[H]){case i:this.togglePop();break;case"y-ulm-item":J.preventDefault();G=D.substring(D.indexOf("#")+1);this.setLocationDirect(I.get(d),G);break;case"y-ulm-close":this.closePop();break;}}},cacheLocations:function(D){var E=D.length,G,F=this.locationCache;while(E--){G=D[E];F[G.id]=G;}},getCachedLocation:function(D){return this.locationCache[D];},isPopOpen:function(){return this.pop&&this.form.hasClass(p);},togglePop:function(){if(this.isPopOpen()){this.closePop();}else{this.openPop();}},openPop:function(){if(this.isPopOpen()){return;}if(!this.pop){this.createPop();}if(!this.isPopBodyLoaded){this.setAlert(this.moduleapi.getString(w+"LOADING_HTML"));this.loadPopBody();}else{this.clearAlert();this.updateLocations();}this.form.addClass(p);this.contentSizeChanged();},createPop:function(){var F,K=this.dropdownLink,J=this.moduleapi,I=this.form,E,D,H=this.iframeShim,G;D=I.create(J.getString(w+"POP_HTML"));I.appendChild(D);E=D.query(".y-ulm-pop");E.addClass(K?"y-ulm-pop-dropdown":"y-ulm-pop-search");this.pop=E;G=C.getService("iframeshim");if(G.isShimNeeded()){H=G.create(D.query(".y-ulm-pop-shadow"));this.iframeShim=H;}this.alertBody=E.query(".y-ulm-alert-bd");F=K?[E,K]:[E,this.searchBox,I.query(".y-ulm-search-btn")];this.autohideId=C.getService("autohide").register({targets:F,hide:c.bind(this.closePop,this)});},closePop:function(){var D=this.iframeShim,G=this.dropdownLink,F=this.searchBox;if(this.isPopOpen()){this.form.removeClass(p);if(D){D.hide();}if(G&&F&&document.activeElement===c.Node.getDOMNode(F)){try{G.focus();}catch(E){}}this.fire("ulmclose",{target:this});}},contentSizeChanged:function(){var D=this.iframeShim;if(D){D.show();}},initPopBodyFromHtml:function(F){var D=this.pop,G=D.create(F),E=G.query("."+l);this.clearAlert();D.insertBefore(G,this.alertBody);if(E){this.initSearchBox(E);}G.query("."+a+" input").set("checked",this.setDefault);this.isPopBodyLoaded=n;this.contentSizeChanged();},loadPopBody:function(){var F,D,E=this.transport;if(E.isRequestPending(this.requestId)){return;}D=c.merge(this.commonRequest,{_action:"show",_subAction:"loadpopup",mode:this.dropdownLink?"view_dropdown":"view_search",recent:this.showRecent?1:z,saved:this.showSaved?1:z});F={success:this.onLoadPopBodySuccess,failure:this.onLoadPopBodyFailure,scope:this};this.requestId=E.makeRequest(D,F);},onLoadPopBodySuccess:function(E){var D=E.data;this.cacheLocations(D.locations);this.initPopBodyFromHtml(E.html);},onLoadPopBodyFailure:function(D){if(this.isDestroyed()){return;}this.setAlert(this.moduleapi.getString(w+"TIMEOUT_HTML"));},setLocation:function(E){var D={q:E},F={success:this.onSetLocationSuccess,failure:this.onSetLocationFailure,scope:this};this.setLocationCore(D,F);},setLocationCore:function(E,G){var D=this.pop,F=this.transport;if(F.isRequestPending(this.requestId)){return;}E._action="save";E._subAction="setlocation";E.setDefault=Number(D.query("."+a+" input").get(A));if(this.serverOnSuccess){E.onsuccess=this.serverOnSuccess;}E=c.merge(this.commonRequest,E);G.argument=c.merge({setDefault:E.setDefault},G.argument);this.requestId=F.makeRequest(E,G);},onSetLocationSuccess:function(K,D){var J=K.data,H=K.html,G=parseInt(J[w+"HIT_COUNT"],10),F=J[w+"LOCATION"],E=J[w+"DISPLAY"],I=!!J[w+"DEFAULT"];if(G===1){delete J[w+"HIT_COUNT"];delete J[w+"DISPLAY"];delete J[w+"LOCATION"];delete J[w+"DEFAULT"];this.onLocationSelect(E,F,K,I);}else{if(G===0){H=H.replace("MSG_NO_MATCH",this.moduleapi.getString(w+"NO_MATCH"));}else{this.cacheLocations(J.locations);}this.setAlert(H);}},setLocationDirect:function(F,D){var E=this.getCachedLocation(D),G={q:F,loc:E},H={success:this.onSetLocationDirectSuccess,failure:this.onSetLocationFailure,scope:this,argument:{displayName:F,location:E}};this.setLocationCore(G,H);},onSetLocationDirectSuccess:function(I,F){var H=I.data,E=I.html,D=parseInt(H[w+"HIT_COUNT"],10),G=!!H[w+"DEFAULT"];if(D===0){E=E.replace("MSG_NO_MATCH",this.moduleapi.getString(w+"NO_MATCH"));this.setAlert(E);}else{delete H[w+"HIT_COUNT"];delete H[w+"DEFAULT"];this.onLocationSelect(F.displayName,F.location,I,G);}},onSetLocationFailure:function(F,D){var E=this.moduleapi;if(D.setDefault){E.getService("ulm").updateDefaultLocation({displayName:D.displayName||""});}if(!this.isDestroyed()){this.setAlert(E.getString(w+"TIMEOUT_HTML"));}},onLocationSelect:function(E,D,F,G){var H=this.dropdownLink;if(H){H.set(d,E);}this.closePop();if(G){this.moduleapi.getService("ulm").updateDefaultLocation({displayName:E});}this.fire("locationselect",{target:this,response:F,displayName:E,location:D});},setAlert:function(D){this.alertBody.set(d,D);this.pop.addClass(y);this.contentSizeChanged();},clearAlert:function(){this.pop.removeClass(y);this.contentSizeChanged();},updateLocations:function(){var F,D,E=this.transport;if(E.isRequestPending(this.quickLocRequestId)){return;}D=c.merge(this.commonRequest,{_action:"show",_subAction:"getlocations",recent:this.showRecent?1:z,saved:this.showSaved?1:z});F={success:this.onUpdateLocationsSuccess,scope:this};this.quickLocRequestId=E.makeRequest(D,F);},onUpdateLocationsSuccess:function(F){var D=this.pop,E;this.cacheLocations(F.data.locations);if(F.html){E=this.commonRequest.customList?x:h;D.query("."+E).set(d,F.html);this.contentSizeChanged();}}};c.augment(q,c.EventTarget);function e(D){this.moduleapi=D;}e.prototype={create:function(E,D){return new q(E,this.moduleapi,D);},updateDefaultLocation:function(D){var F=this.moduleapi,G=F&&F.getId(),E=C.getService("statemgr");if(!D.hasOwnProperty("displayName")){C.error("UlmService","invalid default location token",{token:D});}C.broadcast(G,"ulm:defaultlocation",{displayName:D.displayName});if(E){E.update();}}};c.namespace(m);c[m][u]={name:"ulm",getService:function(E,D){if(!C){C=E;}return new e(C.getModuleApi(D));}};if(t){t.registerService(c[m][u]);}},"1.0");YUI.add("toolbar_bridge_service",function(Y){var MP=Y.ModulePlatform,ToolbarBridgeService,platform,doc=document,win=window,TRUE=true,FALSE=false,NULL=null,m_settings=NULL,m_ytb=NULL,queue=[],onloadFired=FALSE,bridgeOpen=FALSE,toolbarInstalled=NULL,SERVICES_NAMESPACE="MPServices",SERVICE_PROVIDER="ToolbarBridgeProvider";function isToolbarInstalled(){if(toolbarInstalled===NULL){if(Y.UA.ie){var o,version;try{version=Y.Cookie.getSub("CP","v");if(version>80000){if(version<80102){o=TRUE;}else{o=new ActiveXObject("yt.YToolbarBand");}}}catch(ex){}toolbarInstalled=(o)?TRUE:FALSE;o=NULL;}else{if(win.Customizer){toolbarInstalled=TRUE;}else{toolbarInstalled=(onloadFired)?FALSE:NULL;}}}return toolbarInstalled;}function openBridge(){if(bridgeOpen){return TRUE;}else{if(isToolbarInstalled()===FALSE){return FALSE;}}var set,qlength,qItem,i;try{if(Y.UA.ie){if(toolbarInstalled){m_ytb=doc.createElement("OBJECT");m_ytb.classid="CLSID:EF99BD32-C1FB-11D2-892F-0090271D4F88";m_ytb=doc.body.appendChild(m_ytb);}if(m_ytb){set=m_ytb.Settings;if(set&&(set.ClientVersion>80000)){m_settings=set;}}}else{m_ytb=win.Customizer;if(m_ytb){m_settings=m_ytb.Setting;}}if(m_settings){bridgeOpen=TRUE;if(queue.length>0){for(i=0,qlength=queue.length;i<qlength;i++){qItem=queue.shift();ToolbarBridgeService[qItem[0]].apply(this,qItem[1]);}}}}catch(ex){}return bridgeOpen;}function setParam(name,value){if(bridgeOpen){m_settings.SetExtraParam(name,value);}}function broadcastAlert(id,values){if(bridgeOpen&&values&&id){m_settings.BroadcastAlert(id,values);}}ToolbarBridgeService={PING_ADD:400,PING_REMOVE:401,isToolbarInstalled:isToolbarInstalled,ping:function(timestamp){openBridge();if(bridgeOpen){if(Y.UA.gecko||(Y.UA.ie&&m_settings.ClientVersion>=80100)){broadcastAlert(this.PING_ADD,timestamp);}}else{if(isToolbarInstalled()===NULL){queue.push(["ping",arguments]);}}},send:function(suid,data){openBridge();if(bridgeOpen){var binfo,button,id,arr,str;try{binfo=m_settings.GetButtonFromSID("@ma_"+suid);if(binfo){button=eval(binfo);if(button&&button.length&&button[0].params&&button[0].params){id=button[0].params.alrt;switch(id){case"204":setParam("woe",data.woeid);setParam("wt",data.scale);setParam("wloc",data.location);arr=[data.cond_code,data.temp+"",data.location,data.cond_text];break;case"200":arr=[data.count];break;default:break;}if(arr){str=Y.JSON.stringify(arr);broadcastAlert(id,str);}}}}catch(ex){}}else{if(isToolbarInstalled()===NULL){queue.push(["send",arguments]);}}}};Y.on("load",function(){onloadFired=TRUE;if(queue.length){openBridge();}},win,NULL,this);Y.namespace(SERVICES_NAMESPACE);Y[SERVICES_NAMESPACE][SERVICE_PROVIDER]={name:"toolbar_bridge",getService:function(moduleplatform,id){if(!platform){platform=moduleplatform;}return ToolbarBridgeService;}};if(MP){MP.registerService(Y[SERVICES_NAMESPACE][SERVICE_PROVIDER]);}},"1.0");YUI.add("sortable_service",function(e){var w=null,d=e.ModulePlatform,N=false,u=true,A="MPServices",L="SortableProvider",K,v=e.DOM,F=e.Event,q=e.Node,B=e.NodeList,j=1,n=2,E=3,g=document,o=g.createElement("DIV"),p="application",G="y-sortable",x="bottom",z="height",r="left",l="parentNode",Q="px",P="right",R="role",I="tabIndex",C="top",h="width",m=G+"-active",O=G+"-false",k=G+"-proxy",D=G+"-shims",y=G+"-stage",s=G+"-stage-active",J=G+"-idx",c=13,i=27,a=32,H=38,t=40,M={9:1,13:1,27:1,32:1,38:1,40:1};function f(S){return S.compareTo(g)?-1:parseInt(S.getAttribute(J)||-1,10);}function b(U,V){var T,S,W;if(U instanceof q){W=U;U=q.getDOMNode(U);}else{if(typeof U=="string"){W=q.getById(U);U=v.byId(U);}}if(!U||!U.nodeType){throw"Sortable(): 'stage' is missing or invalid";}this.sortableClass=V;this.nodeStage=W;S=U.getElementsByTagName("OL");T=U.getElementsByTagName("LI");if(V){T=W.all("."+V);T=B.getDOMNodes(T);}v.addClass(U,y);U.setAttribute(R,p);this.READY=j;this.KEYBOARD=n;this.MOUSE=E;this.subscribers=[];this.stage=U;this.items=T;this.lists=S;this.sync();this.start(j);}b.prototype={mode:w,stage:w,stageRegion:w,items:w,lists:w,shims:w,drag:w,proxy:w,subscribers:w,startTimer:w,offset:w,coord:w,activeIndex:w,shouldIgnoreKeys:w,destroy:function(){var V=this.stage,X=this.items,aa=this.shims,W=this.proxy,Y=aa[l],T=W[l],S,U,Z;this.stop();if(V.parentNode){v.removeClass(V,y);V.removeAttribute(R,p);U=X.length;for(S=0;S<U;S++){v.removeClass(X[S],G);}}if(Y){Y.removeChild(aa);}if(T){T.removeChild(W);}for(Z in this){if(this.hasOwnProperty(Z)){this[Z]=w;}}},sync:function(){this.syncShims();this.syncProxy();},syncProxy:function(){var U=v.region(this.items[0]),S=this.proxy,T;if(!S){S=o.cloneNode(N);S.setAttribute(I,-1);S.className=k;this.stage.appendChild(S);this.proxy=S;}T=S.style;T[h]=(U[P]-U[r])+Q;T[z]=(U[x]-U[C])+Q;},syncShims:function(){var aa=this.stage,af,ad,Y,ab=g.createDocumentFragment(),ac=v.region(aa),T,Z,V,ae=o.cloneNode(N),S,W,ag,U,X;this.stageRegion=ac;af=this.stage.getElementsByTagName("OL");ad=this.stage.getElementsByTagName("LI");if(this.sortableClass){ad=this.nodeStage.all("."+this.sortableClass);ad=B.getDOMNodes(ad);}Y=ad.length;for(X=0;X<Y;X++){ag=ad[X];W=o.cloneNode(N);W.setAttribute(J,X);if(!v.hasClass(ag,O)){v.addClass(ag,G);ag.setAttribute(I,-1);}U=this._getAsStageXY(v.getXY(ag));T=v.region(ag);Z=T[P]-T[r];V=T[x]-T[C];S=W.style;S[h]=Z+Q;S[z]=V+Q;S[r]=U[0]+Q;S[C]=U[1]+Q;ab.appendChild(W);}if(this.shims){aa.removeChild(this.shims);}ae.className=D;ae.appendChild(ab);aa.appendChild(ae);this.shims=ae;},updateShimHeights:function(){var aa=this.shims.getElementsByTagName("DIV"),X=this.stage,Y=v.region(X),ab,Z,T,U,W,S,V;this.stageRegion=Y;Z=X.getElementsByTagName("LI");if(this.sortableClass){Z=this.nodeStage.all("."+this.sortableClass);Z=B.getDOMNodes(Z);}W=Z.length;for(V=0;V<W;V++){ab=Z[V];if(ab.tagName==="DIV"){continue;}T=this._getAsStageXY(v.getXY(ab));U=ab.offsetHeight;S=aa[V].style;S[z]=U+Q;S[C]=T[1]+Q;}this.items=Z;},start:function(T,S){var U=this.coord;if(!T||(T!=j&&T!=n&&T!=E)){throw"Sortable::start(): Unknown mode of ("+T+")";}else{if(this.mode){this.stop();}}this._attach(T);this.mode=T;if(T!=j){if(S instanceof q){S=q.getDOMNode(S);}v.addClass(this.stage,s);v.addClass(S,m);this.drag=S;this.activeIndex=this._getItemIndex(S);this._positionProxy(U);this.proxy.focus();this._fireEvent({type:"start",pageX:U[0],pageY:U[1]});}},stop:function(){var T=this.mode,S=this.drag;if(T==n||T==E){S.focus();v.removeClass(this.stage,s);v.removeClass(S,m);this.shouldIgnoreKeys=N;this._fireEvent({type:"stop"});this.coord=this.drag=this.activeIndex=w;}this._detach();this.mode=w;},_attach:function(Y){var S,X=this.subscribers,T=this.stage,V=this.shims,W,U;if(Y==E){W={mouseover:V,mouseout:V,mouseup:g,mousemove:g,keydown:g,selectstart:g,dragstart:g};}else{if(Y==n){W={keyup:T,keypress:T,keydown:T,click:g};}else{W={keydown:T,mousedown:T};}}for(U in W){if(W.hasOwnProperty(U)){S=F.attach(U,this[U],W[U],this);if(S){X.push(S);}else{this._detach();throw"_attach(): Failed to attach "+U;}}}},_detach:function(){var T=this.subscribers,S=T.length;while(S--){T[S].detach();}this.subscribers=[];},_fireEvent:function(T){var S={type:w,pageX:w,pageY:w,drop:w,droppable:N,drag:this.drag,index:this.activeIndex,proxy:this.proxy,mode:this.mode};this.fire(e.merge(S,T));},_getItemIndex:function(V){var S=this.items,U,T=0;while((U=S[T])){if(U==V){return T;}T++;}return -1;},_getSortableAncestor:function(T){var S=this.stage;if(T instanceof q){T=q.getDOMNode(T);}while(T!=S){if(v.hasClass(T,O)){return w;}else{if(v.hasClass(T,G)){return T;}}T=T[l];}return w;},_getAsStageXY:function(T){var S=this.stageRegion;return[T[0]-S[r],T[1]-S[C]];},_handleKeyCode:function(Y){var Z=this.activeIndex,S=this.items[Z],aa=v.getXY(S),W=this.items,X,V,T,U;if(this.shouldIgnoreKeys){return;}this.shouldIgnoreKeys=u;switch(Y){case i:U={type:"cancel"};this._fireEvent(U);this.start(j);break;case c:case a:U={type:"hit",drop:S,droppable:u,pageX:aa[0],pageY:aa[1]};this._fireEvent(U);this.start(j);break;case H:case t:U={type:"leave",drop:S,droppable:u,pageX:aa[0],pageY:aa[1]};this._fireEvent(U);X=Z+(Y==H?-1:1);if(X>=0&&(T=W[X])){aa=v.getXY(T);V=!v.hasClass(T,O);if(V){this.activeIndex=X;this._positionProxy(aa);}U={drop:T,droppable:V,pageX:aa[0],pageY:aa[1],index:X};U.type="enter";this._fireEvent(U);U.type="over";this._fireEvent(U);}break;default:}},_positionProxy:function(ac){var af=ac[0],ae=ac[1],T=this.proxy.style,Z=this.offset,W=Z[r],Y=Z[P],U=Z[C],X=Z[x],ad=this.stageRegion,ag=ad[r],ab=ad[P],aa=ad[C],ah=ad[x],S=af+W,ai=ae+U,V;if(S<=ag){S=ag;}else{if(af+Y>=ab){S=ab-(-W+Y);}}if(ai<=aa){ai=aa;}else{if(ae+X>=ah){ai=ah-(-U+X);}}V=this._getAsStageXY([S,ai]);T[r]=V[0]+Q;T[C]=V[1]+Q;},click:function(S){this._handleKeyCode(i);},keypress:function(S){if(this.mode==n&&M[S.keyCode]){S.preventDefault();}},keydown:function(U){var T=U.keyCode,W=this.mode,V={},S;if(W==j){if(T==a&&(S=this._getSortableAncestor(U.target))){U.preventDefault();V[C]=V[P]=V[x]=V[r]=0;this.shouldIgnoreKeys=u;this.coord=v.getXY(S);this.offset=V;this.start(n,S);}}else{if(T in M){U.preventDefault();if(W==n||W==E&&T==i){this._handleKeyCode(T);}}}},keyup:function(S){this.shouldIgnoreKeys=N;},mousedown:function(V){var T,U,W={},S=V.pageX,X=V.pageY;if(V.button>1||!(T=this._getSortableAncestor(V.target))){return;}V.preventDefault();U=v.region(T);W[C]=U[C]-X;W[P]=U[P]-S;W[x]=U[x]-X;W[r]=U[r]-S;this.coord=[S,X];this.offset=W;this.start(E,T);},mousemove:function(X){var Y,T,U=X.pageX,S=X.pageY,W,V;if(!X.button){this.mouseup(X);return;}this._positionProxy([U,S]);T=f(X.target);if(T>-1){Y=this.items[T];W=!v.hasClass(Y,O);V={type:"over",drop:Y,droppable:W,pageX:U,pageY:S};if(W){this.activeIndex=T;}else{V.index=T;}this._fireEvent(V);}},mouseover:function(S){this.onmouseoverout(S);},mouseout:function(S){this.onmouseoverout(S);},onmouseoverout:function(X){this.updateShimHeights();var T=f(X.target),U=(X.type=="mouseout")?"leave":"enter",S=this.items,Y,W,V;if(T>-1){if(X.type=="mouseout"){U="leave";Y=S[this.activeIndex];}else{U="enter";Y=S[T];}W=!v.hasClass(Y,O);V={type:(X.type=="mouseout")?"leave":"enter",drop:Y,droppable:W,pageX:X.pageX,pageY:X.pageY};if(W){this.activeIndex=T;}else{V.index=T;}this._fireEvent(V);}},mouseup:function(V){var S=f(V.target),W=w,U,T={type:"miss",pageX:V.pageX,pageY:V.pageY,index:S};if(S>-1){W=this.items[S];U=!v.hasClass(W,O);if(U){T.type="hit";T.drop=W;T.droppable=U;this.activeIndex=S;}}this._fireEvent(T);this.start(j);},selectstart:function(S){S.preventDefault();},dragstart:function(S){S.preventDefault();}};e.augment(b,e.Event.Target);K={create:function(S,T){return new b(S,T);}};e.namespace(A);e[A][L]={name:"sortable",getService:function(T,S){return K;}};if(d){d.registerService(e[A][L]);}},"1.0");YUI.add("tooltip_service",function(b){var m=b.ModulePlatform,n,d,e="MPServices",a="ToolTipProvider",i="hide",l="bottom",f="top",h=null,c="left",j="right",g="px";function k(p){var o;this.options=b.merge({position:{box:"b",arrow:"c"},msg:"<!-- empty -->",className:"y-tooltip-default",pointerClass:"y-glbl-universal",borderClass:"",parentNode:document.body,autohide:false,role:"alert",scrollIntoView:false},p);this.options.parentNode=b.one(this.options.parentNode);if(b.Lang.isArray(this.options.borderClass)){this.options.borderClass=this.options.borderClass.join(" ");}if(b.Lang.isArray(this.options.className)){this.options.className=this.options.className.join(" ");}if(b.Lang.isArray(this.options.pointerClass)){this.options.pointerClass=this.options.pointerClass.join(" ");}o="<div class='y-tooltip "+this.options.className+"'><div class='tooltip hide' role='"+this.options.role+"'><div class='content "+this.options.borderClass+"'></div><span class='"+this.options.pointerClass+" pointer'></span><div class='crnr-rt'></div><div class='crnr-rb'></div></div></div>";this.toolTipBody=b.Node.create(o);this.pointAtMe=h;this.toolTip=this.toolTipBody.query(".tooltip");this.content=this.toolTipBody.query(".content");this.pointer=this.toolTipBody.query(".pointer");this.autohideId=h;this.options.parentNode.insertBefore(this.toolTipBody,this.options.parentNode.get("firstChild"));if(this.options.autohide){this.autohideId=d.getService("autohide").register({targets:[this.toolTip],hide:b.bind(this.hide,this)});}}k.prototype={getNode:function(){return this.toolTipBody;},setContent:function(o){if(typeof(o)==="string"){this.content.set("innerHTML",o);}else{this.content.set("innerHTML","");this.content.appendChild(b.one(o));}return this.content;},positionToolTip:function(r,C){var t,z,y,v,s=C.msg,x=C.position.box,A=C.position.arrow,q=C.position.alignNode,p=this.toolTip,o=this.pointer,u,B,w=C.parentNode.getStyle("direction");if(w==="rtl"){if(x==="r"){x="l";}else{if(x==="l"){x="r";}}if(A==="l"){A="r";}else{if(A==="r"){A="l";}}}v=this.pointAtMe=b.one(r);if(q){q=b.one(q);}if(s){this.setContent(s);}t=b.DOM.region(b.Node.getDOMNode(v));z=t.left+(t.width/2);y=t.top+(t.height/2);u=this.toolTip.get("parentNode").get("region");B=this.toolTip.get("region");if(t){switch(x){case"b":p.replaceClass(f,l);break;case"t":p.replaceClass(l,f);break;case"l":p.replaceClass(j,c);break;case"r":p.replaceClass(c,j);break;}switch(A){case"l":o.replaceClass("rightpointer","leftpointer");o.setStyle(c,"");p.setStyle(c,(t.left-u.left)-(this.pointer.getX()-B.left+(this.pointer.get("offsetWidth")/2))+(t.width/2)+g);break;case"c":if(x=="b"||x=="t"){o.setStyle(c,(B.width/2)-(this.pointer.get("offsetHeight")/2)+g);p.setStyle(c,(t.left-(B.width/2)+(t.width/2))-u.left+g);}else{o.setStyle(f,((B.height/2)-(this.pointer.get("offsetHeight")/2))+g);}break;case"r":o.replaceClass("leftpointer","rightpointer");o.setStyle(c,"");p.setStyle(c,((t.right-B.width)-u.left)+g);break;case"t":o.replaceClass("pointerbottom","pointertop");break;case"b":o.replaceClass("pointertop","pointerbottom");break;}switch(x){case"b":p.setStyle(f,(t.top-u.top+t.height+this.pointer.get("offsetHeight"))+g);break;case"t":p.setStyle(f,(t.top-u.top-B.height-this.pointer.get("offsetHeight"))+g);break;case"l":if(q){p.setStyle(f,(q.getY()-u.top)+g);}else{p.setStyle(f,(y-(this.pointer.getY()-B.top)-(this.pointer.get("offsetHeight")/2))-u.top+g);}p.setStyle(c,(t.left-u.left-B.width-this.pointer.get("offsetWidth"))+g);break;case"r":if(q){p.setStyle(f,(q.getY()-u.top)+g);}else{p.setStyle(f,(y-(this.pointer.getY()-B.top)-(this.pointer.get("offsetHeight")/2))-u.top+g);}p.setStyle(c,t.right-u.left+this.pointer.get("offsetWidth")+g);break;}}},show:function(q,o){var p=b.merge(this.options,o);this.toolTip.removeClass(i);if(q){this.positionToolTip(q,p);}this.toolTip.setAttribute("role",p.role);if(p.scrollIntoView){this.content.scrollIntoView();}return this.content;},hide:function(){this.toolTip.addClass(i);},isVisible:function(){return !this.toolTip.hasClass(i);},destroy:function(){if(this.autohideId!==h){d.getService("autohide").unregister(this.autohideId);this.autohideId=h;}this.toolTipBody.get("parentNode").removeChild(this.toolTipBody);this.toolTipBody=this.pointAtMe=this.toolTip=this.content=this.pointer=h;}};n={create:function(o){return new k(o);}};b.namespace(e);b[e][a]={name:"tooltip",getService:function(p,o){if(!d){d=p;}return n;}};if(m){m.registerService(b[e][a]);}},"1.0");YUI.add("ipv6test_service",function(c){var j=false,i=true,m=c.ModulePlatform,f,o,d=c.Cookie,g="MPServices",a="IPv6TestProvider",h="ipv6",n=10000,k;function p(q){d.set(h,q,{domain:o});}function l(){return d.get(h);}function e(){var q=l(),r=(q!==null);if(r){d.remove(h,{domain:o});p(q);}return r;}function b(){var A=j,y=0,v=0,q=document.createElement("img"),t=document.createElement("img"),r=null,z=function(B){if(A){return;}if(!B){if(!y){return;}if(!v){return;}}clearTimeout(r);A=i;document.body.removeChild(t);document.body.removeChild(q);if(y<1){p("1");}else{if(v<1){p("0");}else{p("0");}}},s=function(){y=1;z(j);},u=function(){v=1;z(j);},w=function(){y=-1;z(j);},x=function(){v=-1;z(j);};r=setTimeout(function(){z(i);},n);document.body.appendChild(q);document.body.appendChild(t);q.style.display="none";q.setAttribute("id","dualStackImg");if(q.addEventListener){q.addEventListener("load",s,j);q.addEventListener("error",w,j);}else{if(q.attachEvent){q.attachEvent("onload",s);}}q.setAttribute("src","http://dstest.yahoo.com/eng/test/eye-test.png");t.style.display="none";t.setAttribute("id","ipv6Img");if(t.addEventListener){t.addEventListener("load",u,j);t.addEventListener("error",x,j);}else{if(t.attachEvent){t.attachEvent("onload",u);}}t.setAttribute("src","http://v6test.yahoo.com/eng/test/eye-test.png");}k={testIPv6:b,hasCookie:e};c.namespace(g);c[g][a]={name:"ipv6test",getService:function(r,q){if(!f){f=r;o=f.getProperty("cookieDomain");}return k;}};if(m){m.registerService(c[g][a]);}},"1.0");/* Copyright (c) 2011, Yahoo! Inc.  All rights reserved. */
(function(){var l,m,h,b,e,c,o,j,k,n,p=[],f="",d="",a="pa:open",i="pa:close",g;YModules.type_fp={viewevents:["click","contextmenu"],init:function(q){h=q;e=h.getService("moduleplatform");c=h.getService("yui");b=h.getId();l=h.getService("ads_bridge");m=h.getService("instrumentation");j=h.getService("sethomepage");o=h.getService("metrologger");},onviewload:function(u){if(u=="default"){var t=h.getContextData("ilc"),r=c.one("#y-width"),v=c.one("#y-min-width"),q,s;if(r&&v&&6==c.UA.ie){this.fontResizeDetect();}p=e.queryModules(function(w){var x=e.getModuleState(w);return !!(x&&x.defer);});e.subscribe("error",this.handleError,this,true);e.subscribe("navigate",this.handleNavigate,this,true);e.subscribe("modulesignal",this.handleModuleSignal,this,true);e.subscribe("ready",this.handleReady,this,true);h.listen(i);h.listen(a);if(p.length>0){c.on("load",c.bind(this.loadDeferred,this),window);}if(h.getContextData("deferredRes")){s=h.getContextData("deferredResDelay");if(s>0){c.on("load",c.rbind(function(w){c.later(w,this,this.loadDeferredRes);},this,[s]),window);}else{c.on("load",c.bind(this.loadDeferredRes,this),window);}}if(j.getHpCookie()===null){q=j.isHomepageSet(t)?"1":"0";j.setHpCookie(t,q);c.on("load",c.bind(this.logHomepageSet,this,t,q),window);}if(c.UA.ie===9){if(window.external&&("msIsSiteModeFirstRun" in window.external)&&(1===window.external.msIsSiteModeFirstRun(true))){this.beaconIE9PinningAction();}}c.on("unload",function(){f="unload";e.stop(e.getModules());},window);}},onviewunload:function(q){if(q=="default"){if(n){n.cancel();}e.unsubscribe("error",this.handleError);e.unsubscribe("navigate",this.handleNavigate);e.unsubscribe("modulesignal",this.handleModuleSignal);e.unsubscribe("ready",this.handleReady);n=k=null;}},onviewevent:function(t,r){if(r.type=="contextmenu"){var s=r.target,q;s=s.get("tagName")=="A"?s:s.ancestor("A");if(s){q=s.getAttribute("href").replace(location.href,"");if(q.charAt(0)=="#"||/^javascript:/i.test(q)){r.preventDefault();}}}},onmessage:function(v,t,u){var s=!!u.type,r=v==a,q="y-pa-open";if(!k){k=c.one("#y-cols");}if(r){k.addClass(q);}else{k.removeClass(q);}if(!d||v!=d){d=v;l.fire({type:l.MODULE_ACTIVE,module:t,active:r,detail:{mode:s?"module":"panel"}});}},loadDeferred:function(){c.Array.each(p,function(q){e.refreshView(q,"default");});p=[];},loadDeferredRes:function(){var q=h.getContextData("deferredRes"),r;if(q){r=e.getService("resourcemgr");c.Array.each(q,function(s){r.load(s);});}},logHomepageSet:function(r,q){m.firePageParameterBeacon("hpset="+q+(r?"&ilc="+r:""));},handleReady:function(r){var q=OnloadCache;q.dispatch();q.reset();},handleError:function(u){o.logError(u.moduleId,u.errorType+"(view="+u.view+",pageMode= "+f+"):"+u.error.message);if(f!="unload"){var q,t,r,s,w,v;if(!u.moduleId){return;}if(u.errorType=="onviewunload"&&(u.viewName=="default"||(u.args&&u.args[0]=="default"))){}else{q=u.html;t=u.moduleId;r=e.getModuleApi(t);w=r.getProperty("type");s=h.getString("STR.MODULE.ERROR_FALLBACK_TEXT");v=e.getProperty("errorDetails");if(v||(w!="pa"&&w!="pacontainer"&&w!="masthead"&&w!="fptoday")){if(v){s="JavaScript error: "+u.error.message;}if(!q){q=c.Lang.substitute(e.getProperty("modErrorHtml"),{message:s,name:r.getProperty("title"),img:r.getProperty("icon"),title:r.getProperty("title"),url:r.getProperty("detailUrl")});}this.showModuleDefaultViewError(t,q);}}}},handleModuleStart:function(t){var s=t.moduleId,q=e.getModuleApi(s),u=q.getProperty("type"),r=q.getContextData("mods");if(u!="fp"&&u!="pa"){if(c.Lang.isArray(r)){c.Array.each(r,function(v){e.registerModule(v);e.start(v.props.id,true,true);});}}},handleNavigate:function(q){if(m.hasPendingBeacons()){m.firePendingBeacons();}c.later(200,this,function(r){location.href=r;},q.url);},handleModuleSignal:function(s){if(s.signal=="viewevent"){var r=s.args[1],t=r.target,q=t.get("tagName");if((q=="SELECT"||q=="OPTION")){if(q=="SELECT"){c.detach("selectchange|change");t.on("selectchange|change",function(u){this.processInstrumentation(u.target,true);},this);}return;}this.processInstrumentation(t,(s.moduleId==b));}},processInstrumentation:function(r,q){m.collectData(r);if(q){m.firePendingBeacons();}},showModuleDefaultViewError:function(x,t){var v=e.getModuleApi(x),s=v.getProperty("detailUrl"),q=e.getViewNode(x,"default"),w=(q?q.ancestor(".mod"):null),r=c.Lang.substitute(e.getProperty("modChromeHtml"),{html:t,type_name:v.getProperty("type"),view_name:"error"}),u=c.Node.create(r);if(!s){u.addClass("no-link");}if(w){w.set("innerHTML","").appendChild(u);}},fontResizeDetect:function(){var r=c.one("#y-width"),t=parseInt(r.getComputedStyle("width").substring(-2),10),u=c.one("#y-min-width"),s=parseInt(u.getComputedStyle("width").substring(-2),10),q=c.one("body");if(t<s){q.addClass("min-width");}else{if(t>s){q.removeClass("min-width");}}n=c.later(300,this,this.fontResizeDetect);},beaconIE9PinningAction:function(){var q=Math.random(),r="http://pclick.internal.yahoo.com/p/s=2145185763&t="+q;g=new Image();g.onload=g.onerror=function(){g=null;};g.src=r;}};})();(function(){var b=true,c=false,f=null;function e(g){this.reserveHeight(b);}function a(g){this.reserveHeight(c);}function d(g){this.reserveHeight(c);}YModules.type_ads={api:f,deferred:f,id:f,location:f,locationCtr:f,Y:f,init:function(g){var h=g.getService("yui");this.api=g;this.id=g.getId();this.Y=h;},onviewload:function(m){var j=this.api,i=this.Y.Node.getDOMNode(j.getViewNode(m)),l=j.getContextData,q=l("def"),g=l("ref"),n=l("adlocs"),o=this.Y.Selector.query("."+n,i,b),h,k,p;this.location=n;this.locationCtr=o;if(q||g){k=j.getService("ads_deferred");h=l("data");p={defer:q,refresh:g,moduleId:this.id,location:h.l,node:o,data:h,fallback:l("fallback")};this.deferred=k.register(p,{start:e,success:a,failure:d,scope:this});}else{this.reserveHeight(c);}},onviewunload:function(g){if(this.deferred){this.deferred.unregister();}this.body=this.deferred=f;},reserveHeight:function(g){var i=g?"add":"remove",h=this.Y.DOM[i+"Class"];h(this.locationCtr,this.location+"-reserve");}};})();(function(){var n=true,w=false,z=null,c="expand",r,C,v,k,g="innerHTML",u="interactive",x="data-b",B="change-lang",b="select-lang",y="lang-hide",p="y-link",d="y-txt-1",i=".lang-dd",f="ta",q="0",s="1",A="play",t="pause",h="pa:open",j="pa:close",e="sayt:open",a="sayt:close",m=0,l=1,o=2;YModules.type_news={tablist:z,moduleapi:z,body:z,moduleId:z,ulmService:z,autoHideService:z,ulmWidget:z,carousel:z,SCIDs:z,tabLoaded:z,tabIndex:z,refreshStatus:m,viewevents:["click"],newsType:"",newsSections:"",autoAnimData:"",activeElement:z,crslNewsTabData:[],crslPrefetchCount:1,crslContentReqId:z,arcadeTransport:z,init:function(D){this.Y=D.getService("yui");this.moduleId=D.getId();this.moduleapi=D;this.ulmService=D.getService("ulm");this.id=D.getId();this.arcadeTransport=D.getService("moduleplatform").getService("arcade_transport");this.setStrings();},onviewload:function(N){if(N=="default"){this.body=this.moduleapi.getViewNode("default");var S=this.moduleId,O=this.body,U=this.moduleapi,G=U.getService("tablist"),R=O.query(".y-tablist"),D,H,K=O.query(".y-tabpanels"),Q=O.getById(S+"-locationselect"),T=O.getById(S+"-tablist-id"),P=O.query(".y-carousel"),L=O.one(".lang-select"),M,E,J,I,F;U.listen(h);U.listen(j);U.listen(e);U.listen(a);this.statemgr=U.getService("statemgr");this.newsType=U.getContextData("newsType");this.autoAnimData=U.getContextData("autoAnimData");this.newsSections=U.getContextData("newsSections");E=U.getContextData("crslPrefetchCount");if(E){this.crslPrefetchCount=E;}if(Q){this.subscribeUlmWidget(Q);}if(T){this.tablist=G.create(T,{panels:K.get("children"),enableSelectedTabLink:n});F=this.tablist.getSelectedIndex();this.tablist.subscribe("tabchange",function(V){this.handleTabChange(V.toIndex);},this,n);this.tablist.subscribe("beforetabchange",this.handleBeforeTabChange,this,n);D=R.queryAll("li").size();this.SCIDs=new Array(D);this.tabLoaded=[];this.carousel=[];this.count=[];for(H=0;H<D;H++){this.tabLoaded[H]=z;this.carousel[H]=z;this.count[H]=z;}this.tabLoaded[F]=n;this.tabIndex=F;if(T.hasClass("intl-us")){U.listen("ulm:defaultlocation");}if(O.one(".navigation .next")){this.subscribeCarousel(P,F);if(this.isAutoscrollEnabled(F)&&this.getAutoscrollState()){this.play();}}}if(L){I=L.all(".dd li");I.on("mouseover",function(W){var V=W.target.ancestor(".dd li")||W.target;V.addClass("y-bg-4");},this);I.on("mouseout",function(W){var V=W.target.ancestor(".dd li")||W.target;V.removeClass("y-bg-4");},this);M=O.one(i);J=[M,L];this.autoHideService=U.getService("autohide").register({targets:J,hide:this.Y.bind(function(){if(M){M.addClass(y);}},this)});}this.refreshStart();}},onviewevent:function(R,T){if(R==="default"){var W=T.target,V=this.tablist,U,J=W.ancestor("h3.toggle"),E=W.ancestor(".fetch-more"),X=W.ancestor(".hide-more"),S=W.ancestor(".lang-sel"),K=W.ancestor(".change-lang"),D=W.ancestor(".select-lang"),H=W.ancestor(".play",n)||W.ancestor(".pause",n),N,Y,F,P,O,Q,I,G,M,L=this.body;if(H){this.handleManualPlayPauseAutoPlay(H);T.preventDefault();}if(S||W.hasClass("lang-sel")){L.one(i).toggleClass(y);T.preventDefault();}else{P=L.one(i);if(P){P.addClass(y);}}M=D||W;if(M.hasClass(b)){T.preventDefault();}M=K||W;if(M.hasClass(B)){Q=M.one("span");Y=Q.get(g);F=M.getAttribute("data-lang");L.one(".lang-sel span").set(g,Y);P=L.one(i);I=P.all("a");O=P.all("a span");O.replaceClass(d,p);I.addClass(B);I.removeClass("strong");M.removeClass(B);M.addClass("strong");Q.replaceClass(p,d);P.addClass(y);G=this.moduleapi.getString("LOADING");N=M.ancestor(".tabpanel").one(".news-list");N.set(g,G);this.makeLangCall(N,F);T.preventDefault();}if(L.one(".specialevents")){if(W.hasClass("toggle")||J){T.preventDefault();if(J){W=J;}this.toggleEventsOpen(W);}if(W.ancestor(".specialevents-worldcup-tbody")){if(W.ancestor("TR")){W=W.ancestor("TR");T.preventDefault();if(W.one("A")){this.moduleapi.navigate(W.one("A").getAttribute("href"));}}}if(W.ancestor(".mm-results")){this.gotoURL(W);}}if(W.hasClass("fetch-more")||E){T.preventDefault();if(E){W=E;}this.fetchMoreItems(W);return;}if(W.hasClass("hide-more")||X){T.preventDefault();if(X){W=X;}this.showHideMore(W);return;}if(!this.tablist){return;}U=V.getTabPanelNode(V.getSelectedIndex());if(U.query(".y-nav-buttons")){if(W.hasClass("prev")||W.ancestor(".prev")){T.preventDefault();this.previous();this.moduleapi.broadcast(u);}else{if(W.hasClass("next")||W.ancestor(".next")){T.preventDefault();this.next();this.moduleapi.broadcast(u);}}}}},onLocationSelect:function(I){var E=this.body,F=E.query(".local-news"),G=this.newsType,D=I.response.html,H=E.getById(this.id+"-locationselect"),J;if(F){F.set("innerHTML",D);this.tabLoaded[0]=z;}else{if(G=="newsAccordion"){J=H.get("parentNode");J.all("UL").remove();J.insertBefore(J.create(D),J.one("P"));}else{if(G=="newsStream"){J=H.get("parentNode");J.all("UL").remove();J.insertBefore(J.create(D),J.one("P"));}}}},onviewunload:function(D){if(D=="default"){this.body=z;if(this.tablist){this.tablist.destroy();this.tablist=z;}if(this.ulmWidget){this.ulmWidget.destroy();this.ulmWidget=z;}this.detachEngagingAreaMouseEvents();}},onmessage:function(D,E,G){var F=this.tablist.getSelectedIndex();if(this.isAutoscrollEnabled(F)&&this.getAutoscrollState()){switch(D){case h:case e:this.pause(n);break;case j:case a:this.play(n);break;default:break;}}else{if("ulm:defaultlocation"==D&&"news"!=E){this.tabLoaded[0]=z;this.tabLoaded[2]=z;this.ulmWidget=z;if(F===0||F===2){this.handleTabChange(F);}}}},hasAdRunning:function(){return(document.documentElement.className.indexOf("ad-running")>-1);},handleBeforeTabChange:function(D){if(this.isAutoscrollEnabled(D.fromIndex)&&this.getAutoscrollState()){this.pause();}},handleTabChange:function(F){var J=this.tablist,H=J.getTabNode(F),G=J.getTabPanelNode(F),E=this.moduleapi,I,K,L,D=0;this.tabIndex=F;this.statemgr.setUserModuleState("tab",F+1);if(this.newsSections){D=this.newsSections[F];}if(this.tabLoaded[F]===z){I=E.getString("LOADING");G.set("innerHTML",I);K={type:"module",moduleId:this.id,args:{_action:"show",_subAction:"tab",_tabNum:F+1,_tabName:D,_newsType:this.newsType}};L={success:this.handleTabSuccess,failure:this.handleTabFailure,argument:{tabNode:H,tabPanelNode:G,toIndex:F},scope:this};this.tabLoaded[F]=n;E.makeRequest(K,L);}else{this.refreshStart();if(this.isAutoscrollEnabled(F)&&this.getAutoscrollState()){this.play();}}this.moduleapi.broadcast(u);},isAutoscrollEnabled:function(D){var E=(D>=0&&this.autoAnimData&&this.Y.Lang.isArray(this.autoAnimData.animTabs)&&(this.Y.Array.indexOf(this.autoAnimData.animTabs,D+1+"")!==-1));return E;},getAutoscrollState:function(){return !this.autoAnimData.animPausedState;},makeLangCall:function(E,G){var D={type:"module",moduleId:this.id,args:{_action:"show",_subAction:"lang-change",_tabLang:G}},F={success:this.handleLangSuccess,failure:this.handleLangFailure,argument:{node:E,langId:G},scope:this};this.moduleapi.makeRequest(D,F);},fetchMoreItems:function(I){var H=I.getAttribute("data-pkids"),E,J,D=0,G=0,F=w;if(this.tabIndex&&this.newsSections){D=this.tabIndex;G=this.newsSections[D];}if(I.hasClass("localFetch")){F=n;}E={type:"module",moduleId:this.id,args:{_action:"show",_subAction:"fetchMore",_tabName:G,_newsType:this.newsType,_pkgIds:H}};J={success:this.handleMoreSuccess,failure:this.handleMoreFailure,argument:{newsType:this.newsType,target:I,local:F},scope:this};this.moduleapi.makeRequest(E,J);},handleMoreSuccess:function(E,H){var J=H.target,I=J.get("parentNode"),D=I.get("parentNode"),G=E.html,F=D.one("UL");if(G){if(H.local===n){F.addClass("hide-completely");}D.insertBefore(D.create(G),I);J.replaceClass("fetch-more","hide-more");this.swapMoreText(J);}},handleMoreFailure:function(D,E){},showHideMore:function(G){var D=G.ancestor(".extend-news"),F=D.all("UL"),E=G.hasClass("localFetch");if(E){F.item(0).toggleClass("hide-completely");}F.item(1).toggleClass("hide-completely");this.swapMoreText(G);},swapMoreText:function(G,D){var E=G.getAttribute("data-more"),F=G;if(G.one(".more-text")){F=G.one(".more-text");}G.setAttribute("data-more",F.get("innerHTML"));F.set("innerHTML",E);G.toggleClass("show-more");},handleLangSuccess:function(E,I){var D=this.moduleapi.getContextData,K=D("lang"),H=D("langErr"),J=E.html,G=I.node,F=G.ancestor("div");if(I.langId!=K){this.defaultLang(K);}G.replace(J);if(H){F.one(".news-list").insert(H,0);}},defaultLang:function(J){var F,G=this.body,H,L=G.one(".lang-sel span"),K=G.all(".lang-dd li a"),E=G.all(".lang-dd li a span"),I,D="",M=K.size();E.replaceClass(d,p);K.removeClass("strong");K.addClass(B);for(F=0;F<M;F++){H=K.item(F);D=H.getAttribute("data-lang");if(D==J){H.addClass("strong");H.removeClass(B);I=H.one("span");I.replaceClass(p,d);L.set(g,I.get(g));break;}}},handleLangFailure:function(D,E){},handleTabSuccess:function(J,E){var F=this.moduleId,H=this.moduleapi,L=E.tabNode,K=E.tabPanelNode,G=J.html,D,M,I=E.toIndex;if(G){K.set("innerHTML",G);if(!this.ulmWidget&&K.getById(F+"-locationselect")){D=K.getById(F+"-locationselect");this.subscribeUlmWidget(D);}M=K.query(".y-carousel");if(M){this.subscribeCarousel(M,I);if(this.isAutoscrollEnabled(I)&&this.getAutoscrollState()){this.play();}}this.refreshStart();}else{H.navigate(L.query("a").get("href"));}},handleTabFailure:function(D,E){this.moduleapi.navigate(this.tablist.getTabUrl(E.toIndex));},subscribeUlmWidget:function(D){this.ulmWidget=this.ulmService.create(D);this.ulmWidget.subscribe("locationselect",this.onLocationSelect,this);},subscribeCarousel:function(H,E){var G=this.moduleapi,J,F=G.getService("carousel"),I,D=[];if(this.isAutoscrollEnabled(E)){I={animDuration:0.4,loop:n,animate:n,autoscrollInterval:this.autoAnimData.animDurationSub,autoscrollIntervalFirst:this.autoAnimData.animDuration};}else{I={animDuration:0.4,loop:n};}J=this.carousel[E]=F.create(H,I);J.subscribe("beforescroll",this.loadCarouselPackage,this);J.subscribe("scroll",this.updateCarouselCount,this);D=G.getContextData("SCIDs");this.SCIDs[E]=D;this.count[E]=G.getString("STR.CONTENTCAOURSEL.COUNT");},handleManualPlayPauseAutoPlay:function(F){var E=this.statemgr,G,H=(F.get("tagName")=="A")?F:F.ancestor("A"),D=H.one(".anim-ctrl");if(n===F.hasClass(A)){G=q;this.autoAnimData.animPausedState=w;H.setAttribute(x,this.autoAnimData.beacons[1]);D.set(g,this.autoAnimData.animPauseString);this.play();F.replaceClass(A,t);}else{if(n===F.hasClass(t)){G=s;this.autoAnimData.animPausedState=n;H.setAttribute(x,this.autoAnimData.beacons[0]);D.set(g,this.autoAnimData.animPlayString);this.pause();F.replaceClass(t,A);}}if(E){E.setUserModuleState(f,G);}this.moduleapi.broadcast(u);},toggleEventsOpen:function(H){var G=H.get("parentNode"),I=G.hasClass(c),E=0,F,D;if(r===z){this.setStrings();}if(I){E=1;F=v;D=r;}else{F=k;D=C;}H.setAttribute("data-b",F);H.query(".hide-textindent").set(g,D);this.statemgr.setUserModuleState("expanded",E);G.toggleClass(c);if(!I){this.refreshStart();}},setStrings:function(){var D=this.moduleapi;r=D.getString("STR.SPECIALEVENTS.EXPAND");C=D.getString("STR.SPECIALEVENTS.COLLAPSE");k=D.getString("STR.SPECIALEVENTS.CLOSEBEACON");v=D.getString("STR.SPECIALEVENTS.OPENBEACON");},gotoURL:function(F){var D=F.ancestor("LI"),E;if(D){F=D;}E=D.one(".time");if(E){this.moduleapi.navigate(E.getAttribute("href"));}},previous:function(){this._moveCarousel("previous");},next:function(){this._moveCarousel("next");},play:function(D){this._moveCarousel("play",D);},pause:function(D){this._moveCarousel("pause",D);},_moveCarousel:function(F,D){var E=this.tablist.getSelectedIndex(),G=this.carousel[E];if(G&&!G.isScrolling()){G[F].call(G,D);}},updateCarouselCount:function(){var F=this.tablist,G=F.getSelectedIndex(),E=F.getTabPanelNode(G),H=this.carousel[G],D=H.getCurrentIndex(),I;I=E.query(".y-nav-count");I.set("innerHTML",this.count[G][D]);},loadCarouselPackage:function(Y){var U=Y.toIndex,K=Y.fromIndex,S=U-K,T=this.tablist,G=T.getSelectedIndex(),V=this.carousel[G],I=V.getItemNode(U),F=I.query("UL"),Z=this.moduleapi,N=this.SCIDs[G],R=this.crslPrefetchCount,H=this.arcadeTransport,E,W,O,X,J,D,M,Q,P,L;if(!F){P=N[U];E=this.crslNewsTabData;M=E[G];if(M&&M[P]){I.set("innerHTML",M[P]);E[G][P]="1";}else{O=1;Q="";if(0>S||(0===K&&1<S)){O=-1;}W=U;X="";while(N[W]&&W!==0){P=N[W];if(0>=R--||(M&&M[P])){break;}W+=O;Q+=X+P;X=",";}J=Z.getString("LOADING");I.set("innerHTML",J);D={type:"module",moduleId:this.id,args:{_action:"show",_subAction:"loadPane",_tabNum:G+1,scid:Q}};L={success:this.loadCarouselPackageSuccess,failure:this.loadCarouselPackageFailure,argument:{paneToLoad:I,tab:G},scope:this};if(H.isRequestPending(this.crslContentReqId)){H.abortRequest(this.crslContentReqId);}this.crslContentReqId=H.makeRequest(D,L);}}},loadCarouselPackageSuccess:function(F,H){var J=H.paneToLoad,G=F.html,E=H.tab,D=this.crslNewsTabData[E],I=this.moduleapi.getContextData("NEWS_CRSL_DATA");if(G){J.set("innerHTML",G);}if(!D){this.crslNewsTabData[E]=I;}else{this.Y.aggregate(D,I);}},loadCarouselPackageFailure:function(E,F){var D=this.tabIndex,G;if(!D){D=0;}G=this.tablist.getTabUrl(D);this.moduleapi.navigate(G);},hasRefreshableContent:function(){var D=this.body.one(".specialevents .event-data");return(D.ancestor(function(E){return(E.getComputedStyle("display")=="none");})===z);},refreshStart:function(){var E=this.moduleapi,F,D;switch(this.refreshStatus){case o:this.refreshContent();break;case m:D=E.getContextData("refreshDelay");F=this.body.one(".refresh-msg");if(D>0&&this.hasRefreshableContent()){F.removeClass("hide");this.Y.later(D,this,this.refreshContent);this.refreshStatus=l;}else{if("0"==D){F=this.body.one(".refresh-msg");if(F){F.addClass("hide");return;}}}break;default:break;}return this.refreshStatus;},refreshContent:function(){if(!this.hasRefreshableContent()){this.refreshStatus=o;return w;}var E={type:"module",moduleId:this.id,args:{_action:"show",_subAction:"refresh"}},H={success:this.refreshContentSuccess,failure:this.refreshContentFailure,scope:this},F=this.moduleapi,G=this.requestId,D=F.getService("moduleplatform").getService("arcade_transport");if(D.isRequestPending(G)){D.abortRequest(G);}this.requestId=D.makeRequest(E,H);this.refreshPending=w;return n;},refreshContentSuccess:function(E,G){var D=this.body,F;this.refreshStatus=m;if(E.html){F=D.one(".event-data");if(F){F.set("innerHTML",E.html);}}this.refreshStart();},refreshContentFailure:function(D,E){this.refreshStatus=m;}};})();var yepHandler;(function(){var s="hide",ao="prev",p="next",e="close",J="empty",aq="selected",Z="inlinevid",n="indicator",i="todaytop",K="main-story",j=".main-story-content",v="no-visibility",U="related-links",au="no-top-padding",af="indicator-playing",h="y-today-grad1",g="y-today-grad2",w="y-today-ln-1",al="y-ln-2",aj="y-ln-4",M="trans-border",ab="item",ac="play",m="pause",an="height",aa=null,Q=true,y=false,ag="href",B="innerHTML",ak="pa:open",ar="pa:close",I="lightbox:start",a="lightbox:end",r="y-carousel",d="VIDEO_PLAYER",am=32,f="parentNode",k="none",V="px",ai="OK",W="-panel",u="abort",ad="className",E="data-b",G="story",Y="footers",c="story_footer_pairs",b="fpck",q="interactive",O="sayt:open",av="sayt:close",S="mouseout",R="mouseover",F=300,X="vid-sh",ap="close",x="onPlayerReady",ay="onPlaybackStart",o="pane",T="package",l="baseline",aw="ta",z="1",ae="0",ah="stories",N="footers",D=0,A=0,ax=0,C=-1,t=1,L=2,P=3,H="single_pane",at="all_panes";YModules.type_fptoday={viewevents:["click","keyup"],moduleapi:aa,cache:aa,body:aa,moduleId:aa,mainStory:aa,mainStoryContent:aa,lastSelectedFooter:aa,carousel:aa,instrumentation:aa,packageIds:aa,visibleElementCount:0,textCount:aa,paginationType:aa,yep:aa,cokeTestId:aa,mcode:aa,woeId:aa,cookieDomain:aa,ylt:aa,delayMouseover:aa,timeDelayed:0,carouselContainer:aa,carouselOuterContainer:aa,footerOverlay:aa,loadingOverlay:aa,isTodayOnTop:1,showDate:Q,animMode:k,preloadPaneCount:0,timeoutPaneCount:0,animIntervalInitial:0,animIntervalSubsequent:0,isInitialAnim:Q,animFadeDuration:A,animHtml:aa,animPlayBeacon:aa,animPauseBeacon:aa,animPlayString:aa,animPauseString:aa,delayAutoPlayMouseover:aa,autoPlayReference:aa,isOtherModuleOpen:y,isManuallyPaused:y,titleRegion:aa,statemgr:aa,arcadeTransport:aa,doBroadcastEvent:y,footerHeight:0,blurHandler:aa,focusHandler:aa,activeElement:aa,mod:aa,handleOffsetWidth:0,handleParentLeft:0,handleParentOffsetWidth:0,handleCursorOffset:0,populateStoryRequestId:aa,populateScrollItemRequestId:aa,unifiedEnabled:aa,init:function(az){this.Y=az.getService("yui");this.cache={};this.moduleId=az.getId();this.moduleapi=az;this.cookieDomain=az.getService("moduleplatform").getProperty("cookieDomain");this.instrumentation=az.getService("instrumentation");this.statemgr=az.getService("statemgr");this.arcadeTransport=az.getService("moduleplatform").getService("arcade_transport");az.listen(ak);az.listen(ar);az.listen(I);az.listen(a);az.listen(O);az.listen(av);yepHandler=this.Y.bind(function(aB,aC){var aA=this.yep;switch(aB){case x:this.yep=this.getYEP();break;case ay:if(aA){this.replaceTitle(aA.getCurrentVideo().title);}break;}},this);},onviewload:function(aK){if(aK=="default"){var aA=this.Y.UA.ie,aH,aO,az,aN,aJ,aI,aE,aM,aB=this.moduleId,aF=this.moduleapi,aC=aF.getContextData(),aD=aF.getService("carousel"),aG=aF.getContextData("crslAnimEnabled"),aL;aH=this.body=aF.getViewNode(aK);az=this.mainStory=aH.getById(aB+"-main_story");this.footerOverlay=aH.query(".footer-overlay");this.loadingOverlay=aH.query(".loading-overlay");if(!az||aH.query(".xotitle")){this.onviewevent=aa;return;}this.mainStoryContent=az.one(j);aO=this.carousel=aD.create(aH.query("."+r),{animDuration:0.4,loop:Q,animate:aG});aO.subscribe("beforescroll",this.loadScrollItem,this);aO.subscribe("scroll",this.updatePaginator,this);this.isTodayOnTop=aF.getContextData(i);this.showDate=aF.getContextData("showdate");aN=this.packageIds=aC.pkgIds;this.initializeCache(aC);aI=aH.query("#"+aB+W+"0 ."+ab);this.lastSelectedFooter=(aC.centerStory==1)?aI.next("."+ab):aI;this.visibleElementCount=aN.length/aO.getItemCount();this.textCount=aC.textCount;this.paginationType=(aC.paginationtype)?aC.paginationtype:l;this.cokeTestId=aC.cokeTestId;this.mcode=aC.mcode;this.woeId=aC.woeId;this.ylt=aC.dummyYLT;this.timeDelayed=aF.getContextData("today_delay_mouseover")||F;if(aO.getItemCount()>1){aJ=aH.query(".y-carousel-list").get("children");aJ.removeClass(s);this.updatePaginator();aH.query(".navigation").removeClass(v);}aE=this.carouselContainer=aH.one("."+r);aM=this.carouselOuterContainer=aH.one(".carousel-container");aE.on(R,this.handleFooterMouseover,this);aE.on(S,this.handleFooterMouseout,this);this.fixCarouselPanelHeight(aH.query("#"+aB+W+"0"));this.unifiedEnabled=aF.getContextData("unified.todaynews.enabled");this.animMode=aF.getContextData("footer.anim.mode");if(this.animMode!=k){this.animIntervalInitial=aF.getContextData("footer.anim.interval.initial")||D;this.animIntervalSubsequent=aF.getContextData("footer.anim.interval.subsequent")||D;this.animFadeDuration=aF.getContextData("footer.anim.fade.duration")||A;this.preloadPaneCount=aF.getContextData("footer.anim.preload.pane_count")||0;this.timeoutPaneCount=aF.getContextData("footer.anim.timeout.pane_count")||0;this.animHtml=aH.create(aF.getContextData("animHtml"));aL=aH.one(".title-date");this.titleRegion=aL?aL.get("region"):aa;this.attachEngagingAreaMouseEvents();if(aA){document.onfocusout=this.Y.bind(this.handleBlur,this);document.onfocusin=this.Y.bind(this.handleFocus,this);}else{this.blurHandler=this.Y.on("blur",this.Y.bind(this.handleBlur,this),window);this.focusHandler=this.Y.on("focus",this.Y.bind(this.handleFocus,this),window);}this.insertPlayPauseButton();this.isInitialAnim=Q;this.isManuallyPaused=aF.getContextData("animPausedState");this.startAutoPlay();}this.doBroadcastEvent=aF.getContextData("broadcast.interactive_event");}},onviewunload:function(az){if(az=="default"){this.cleanup();}},onviewevent:function(aE,aC){var aF,aD=aC.target,aB=aC.type,az=this.delayMouseover,aA=y;if(az){az.cancel();this.delayMouseover=aa;}if(aE=="default"&&aD){if(aB=="keyup"){if(this.carouselContainer.contains(aD)){this.handleFooterMouseover(aC);}}else{if(this.carouselContainer.contains(aD)){aF=this.handleFooterClick(aD);}else{if(this.classMatch(aD,ao)){aF=this.previous;aA=Q;}else{if(this.classMatch(aD,p)){aF=this.next;aA=Q;}else{if(this.classMatch(aD,ac)){aF=this.handleManualPlayPauseAutoPlay(ac,aD);}else{if(this.classMatch(aD,m)){aF=this.handleManualPlayPauseAutoPlay(m,aD);}else{if(!aD.ancestor(".type_offlead")&&(aD.hasClass(Z)||this.classMatch(aD,K))){aF=this.handleMainStory(aD);}}}}}}}if(aF){this.cancelAutoPlay();aC.preventDefault();aF.call(this);if(aA&&this.doBroadcastEvent){this.broadcastEvent();}}}},loadScrollItem:function(aN){var aH=this.body,aD,aE,aO=this.carousel,aR=this.moduleapi,aL=aO.getCurrentIndex(),az=aL,aP=this.moduleId,aM=this.animMode,aI=aH.getById(aP+W+aL),aF,aG="",aJ=aa,aA,aB,aC,aK=aN.toIndex,aQ=(aK-aN.fromIndex==1)?p:ao;if(aI){if(aM==k){aA=Y;aB=this.populateScrollItem;aC=this.populateScrollItemFailure;aG=aI.hasClass(J)?L:"";}else{aA=c;aB=this.preloadSuccess;aC=this.preloadFailure;if(aI.hasClass(J)){aG=L;}else{if(this.preloadPaneCount!==ax){aG=t;}}}if(aG!==""){aJ=this.getPackageIds(aL,aG,aQ);}if(aJ&&aJ.length>0){if(aG==t){aR.refreshView("default");return;}if(aQ==ao&&aG==P){az=aL-aJ.length/this.visibleElementCount+1;}aD={type:"module",moduleId:aP,args:{_action:"show",_subAction:aA,storyIds:aJ,panelIndex:az,cokeTestId:this.cokeTestId,mcode:this.mcode,woeId:this.woeId,todaytop:this.isTodayOnTop}};aE={success:aB,failure:aC,argument:{panel:aI,panelIndex:aL,showStory:Q,direction:aQ},scope:this};if(!this.autoPlayReference){aD.args=this.Y.merge(aD.args,{isScroll:1});}this.loadingOverlay.removeClass(s);if(this.arcadeTransport.isRequestPending(this.populateScrollItemRequestId)){this.arcadeTransport.abortRequest(this.populateScrollItemRequestId);}this.populateScrollItemRequestId=this.arcadeTransport.makeRequest(aD,aE,aP);}else{this.fixCarouselPanelHeight(aI);if(aM!=k){aO=this.carousel;aF=aO.getItemNode(aO.getCurrentIndex()).query("."+ab);this.populateStory({linkNode:aF,userHover:y});this.startAutoPlay();}}}},preload:function(aD,aA,aF){var az=this.body.getById(this.moduleId+W+aD),aC=this.getPackageIds(aD,P,p),aB={type:"module",moduleId:this.moduleId,args:{_action:"show",_subAction:c,storyIds:aC,panelIndex:aD,cokeTestId:this.cokeTestId,mcode:this.mcode,woeId:this.woeId,todaytop:this.isTodayOnTop}},aE={success:this.preloadSuccess,failure:this.preloadFailure,argument:{panel:az,panelIndex:aD,showStory:aA,direction:p},scope:this};if(aF){aB.args=this.Y.merge(aB.args,aF);}if(this.arcadeTransport.isRequestPending(this.populateScrollItemRequestId)){this.arcadeTransport.abortRequest(this.populateScrollItemRequestId);}this.populateScrollItemRequestId=this.arcadeTransport.makeRequest(aB,aE,this.moduleId);},preloadSuccess:function(aA,aG){var aR=this.moduleapi,aN=this.carousel,aC=aR.getContextData(ah),az=aR.getContextData(N),aJ=aG.panelIndex,aH=aG.panel,aD=aG.showStory,aP=aG.direction,aL=this.visibleElementCount,aK,aE,aM,aF=(aP==ao)?(az.length-aL):0,aO,aB=aH,aQ,aI="";while(aH&&aH.hasClass(J)&&az[aF]){aI+=az[aF];if((aF+1)%aL===0){aH.removeClass(J);aH.set(B,aI);aH.all("."+ab).setStyle(an,this.footerHeight+V);aK=aH.get("children");for(aO=0;aO<aL;aO++){aQ=this.extractId(aK.item(aO));if(aQ!=""){this.cache[aQ]=aC[aQ];}}}aF++;if(aF%aL===0){aH=(aP==ao)?aH.previous():aH.next();aI="";aF=(aP==ao)?aF-(2*aL):aF;}}if(aD){if(aJ!=aN.getCurrentIndex()){this.carousel.scrollTo(aJ);}this.loadingOverlay.addClass(s);this.fixCarouselPanelHeight(aB);aE=aB.one("."+ab);this.populateStory({linkNode:aE,userHover:y});this.startAutoPlay();}aM=aB.one(".empty");if(aM){aR.refreshView("default");}},preloadFailure:function(aA,aB){var az=this.Y.Lang.isObject(aA);if(az&&aA.statusText==u){if(this.preloadPaneCount==this.timeoutPaneCount){this.handleFatalError();}else{}}else{if(az&&aA.statusText==ai){}else{this.handleFatalError();}}},handleFatalError:function(){var az=this.carousel;this.animMode=H;this.loadingOverlay.addClass(s);az.scrollTo(0,y);this.populateStory({linkNode:az.getItemNode(0).query("."+ab),userHover:y});this.body.one(".y-nav-buttons").addClass(v);},updatePaginator:function(){var az=this.body,aC,aF,aB,aA=this.visibleElementCount,aE,aD;switch(this.paginationType){case l:az.query(".navigation .selected").removeClass(aq);az.getById(this.moduleId+"_"+this.carousel.getCurrentIndex()).addClass(aq);break;case o:aC=az.query(".navigation .y-nav-count");this.setPaginationString(this.carousel.getCurrentIndex()+1,this.carousel.getItemCount());break;case T:aF=az.queryAll("."+ab);aB=aF.size();aD=(this.carousel.getCurrentIndex()+1)*aA;aE=aD-(aA-1);this.setPaginationString(aE+" - "+aD,aB);break;}},setPaginationString:function(aC,aB){var aA,az=this.body.query(".navigation .y-nav-count");if(az){aA=this.Y.substitute(this.textCount,{"0":aC,"1":aB});az.set(B,aA);}},handleFooterMouseover:function(aB){var aA=aB.target,az=aA.hasAttribute(ag)?aA:aA.get(f);if(az.hasClass(ab)&&az.hasClass(aq)){return;}this.delayMouseover=this.Y.later(this.timeDelayed,this,this.populateStory,{linkNode:az,userHover:Q});},handleFooterMouseout:function(aA){var az=this.delayMouseover;if(az){az.cancel();this.delayMouseover=aa;}},populateStory:function(aK){var aG,aN,aM,aF,aE=this.moduleapi,az=this.cache,aJ=aK.linkNode,aC=aK.userHover,aL=!aC,aD=this.extractId(aJ),aI=this.lastSelectedFooter,aP=aI.query(".image"),aO=az[aD],aB,aA,aH;if(!aJ.hasClass(ab)){return;}if(aO&&aO.index&&!(/^\d+$/.test(aO.index))){return;}if(aP){aP.replaceClass(aj,al);}aI.removeClass(aq).replaceClass(aj,M).replaceClass(g,h).addClass(w);this.lastSelectedFooter=aJ;if(!aO){aD=this.extractId(aJ);this.lastSelectedFooter=aJ;aO=az[aD];}if(aO){this.lastSelectedFooter.addClass(aq).replaceClass(M,aj).replaceClass(h,g).removeClass(w);this.lastSelectedFooter.query(".image").replaceClass(al,aj);aF=aO.html;if(aF){aL=this.Y.UA.ie?y:aL;this.setMainStory(aF,aD,aL,Q);}else{aB=this.body.getById(this.moduleId+"-header-image");if(aB){aA=aB.get("src");aH=aB.get("alt");}aG={type:"module",moduleId:this.moduleId,args:{_action:"show",_subAction:G,storyId:aD,storyIndex:aO.index,cokeTestId:this.cokeTestId,woeId:this.woeId,todaytop:this.isTodayOnTop}};aN={success:this.handlePopulateStorySuccess,failure:this.handlePopulateStoryFailure,argument:{storyId:aD,oldImageSrc:aA,oldImageAlt:aH,doFade:aL},scope:this};if(aE.isRequestPending(this.populateStoryRequestId)){aE.abortRequest(this.populateStoryRequestId);}this.populateStoryRequestId=aE.makeRequest(aG,aN);}aM=aI.query("."+af);if(this.showDate&&this.isTodayOnTop!="0"){this.mainStory.addClass("has-date");}if(aM){aM.replaceClass(af,n);this.carouselContainer.removeClass(au);}if(aJ&&aC){this.tracking(aJ);}this.updatePaginator();if(this.doBroadcastEvent&&aC){this.broadcastEvent();}}},tracking:function(az){var aA=this.cache,aB=this.extractId(az);if(aA[aB]&&!aA[aB].beaconFired){this.instrumentation.fireUltBeacon(az.getAttribute("data-b-tdh"));aA[aB].beaconFired=Q;if(this.preloadPaneCount!==ax){this.setFPCKCookie(aB);}}},handleMainStory:function(aA){var aB,aC=aa,az=this.cache;if(this.classMatch(aA,e)){aC=this.closeVideo;}else{if(aA.hasClass(Z)||!this.classMatch(aA,U)&&(aA.hasAttribute(ag)||aA.ancestor(function(aD){return aD.hasAttribute(ag);}))){aB=this.extractId(this.lastSelectedFooter);if(az[aB]&&az[aB].clipId){aC=this.showInlineVideo;}}}return aC;},handleFooterClick:function(aA){var aC,aD=aa,az=this.cache,aB=this.classMatch(aA,ab);if(aB){aC=this.extractId(aB);if(az[aC]&&az[aC].clipId){aD=this.showInlineVideo;}}return aD;},closeVideo:function(){var aB=this.yep,aD=this.body.one(".video-package video"),aC=this.lastSelectedFooter,aF=this.extractId(aC),aA=aC.query("."+af),az=this.footerOverlay,aG=this.mainStory;if(aB){try{aB.stopMedia();}catch(aE){return;}this.fireBeacon(X,ap,aB.getCurrentVideo().mediaId);}else{if(aD){this.fireBeacon(X,ap,aD.getAttribute("clipId"));}}this.mainStoryContent.set(B,this.cache[aF].html);this.setOpacity(this.mainStoryContent,1);if(this.showDate&&this.isTodayOnTop!="0"){aG.addClass("has-date");}aG.removeClass("auto-height");if(aA){aA.replaceClass(af,n);this.carouselContainer.removeClass(au);}if(az){az.addClass(s);}if(this.doBroadcastEvent){this.broadcastEvent();}},showInlineVideo:function(){var aE=this.extractId(this.lastSelectedFooter),aB=this.cache[aE],aA=this.lastSelectedFooter.query(".indicator"),aC=this.lastSelectedFooter.query(".item-label"),aD=this.moduleapi.getString(d),az=this.footerOverlay,aF=this.mainStory;if(az){az.removeClass(s);}aD=this.Y.Lang.substitute(aD,{_clipId_:aB.clipId,_channelNodeId_:aB.channelNodeId,_title_:aC?aC.get(B):""});this.mainStoryContent.set(B,aD);if(this.showDate&&this.isTodayOnTop!="0"){aF.removeClass("has-date");}aF.addClass("auto-height");if(aA){aA.replaceClass(n,af);this.carouselContainer.addClass(au);}if(az&&this.Y.UA.ie==6){az.setStyle(an,az.get(f).get("offsetHeight")+V);}if(this.doBroadcastEvent){this.broadcastEvent();}},onmessage:function(aB,az,aA){switch(aB){case I:case ak:case O:this.isOtherModuleOpen=Q;this.cancelAutoPlay();break;case a:case ar:case av:this.isOtherModuleOpen=y;this.startAutoPlay();break;default:break;}},handlePopulateStorySuccess:function(aA,aD){var aC=aA.data,az=aC.story,aF=aD.storyId,aB=this.cache[aF],aE=this.extractId(this.lastSelectedFooter);if(aE===aF){az=this.Y.Lang.substitute(az,{_oldImageSrc_:aD.oldImageSrc,_oldImageAlt_:aD.oldImageAlt});aD.doFade=this.Y.UA.ie?y:aD.doFade;this.setMainStory(az,aF,aD.doFade,y);aB.clipId=aC.clipId;aB.channelNodeId=aC.channelNodeId;}else{}},handlePopulateStoryFailure:function(az,aA){},populateScrollItem:function(aB,aC){var aE,aA,az=aC.panel,aD=this.body.getById(this.moduleId+W+aC.panelIndex);az.removeClass(J);this.loadingOverlay.addClass(s);aD.set(B,aB.data.footers);this.fixCarouselPanelHeight(az);if(this.animMode!=k){aE=this.carousel;aA=aE.getItemNode(aE.getCurrentIndex()).query("."+ab);this.populateStory({linkNode:aA,userHover:y});this.startAutoPlay();}},populateScrollItemFailure:function(az){if(az.statusText==u){}else{this.moduleapi.refreshView("default");}},getPackageIds:function(aE,aG,aH){var aM=[],aJ=this.packageIds,aF=aJ.length,aL=this.visibleElementCount,aB=this.preloadPaneCount,az,aK,aI,aA,aC,aD;if(aG==t){az=this.body.getById(this.moduleId+W+aE);aK=az.all("."+ab);for(aD=0;aD<aL;aD++){if(aK.item(aD).hasClass(J)){aM.push(aJ[(aE*aL)+aD]);}}}else{aB=(aB==C)?aJ.length/aL-1:aB;aI=this.carouselContainer.all(".y-panel");if(aH==ao){aC=(aE+1)*aL;aA=(aG!==P)?aC-aL:aC-aB*aL;if(aA<0){aA=aL;}}else{aA=aE*aL;aC=(aG!==P)?aA+aL:aA+aB*aL;aC=aC>aF?aF:aC;}for(aD=aA;aD<aC;aD++){if(aI.item(Math.floor(aD/aL)).hasClass(J)){aM.push(aJ[aD]);}}}return aM;},cleanup:function(){var aC=this.carousel,az=this.delayMouseover,aB=this.carouselContainer,aA=this.moduleapi;if(aC){aC.unsubscribe("beforescroll",this.loadScrollItem);aC.unsubscribe("scroll",this.updatePaginator);aC.destroy();}if(az){az.cancel();}if(aB){aB.detach(R,this.handleFooterMouseover);aB.detach(S,this.handleFooterMouseout);}if(this.animMode!=k){this.detachEngagingAreaMouseEvents();this.cancelAutoPlay();if(this.Y.UA.ie){document.onfocusout=aa;document.focusin=aa;}else{this.Y.detach("blur",this.blurHandler,window);this.Y.detach("focus",this.focusHandler,window);}}aA.abortRequest(this.populateStoryRequestId);this.arcadeTransport.abortRequest(this.populateScrollItemRequestId);this.moduleapi.unlisten();this.body=this.statemgr=this.carousel=this.mainStory=this.mainStoryContent=this.delayMouseover=this.carouselContainer=this.carouselOuterContainer=this.populateStoryRequestId=this.populateScrollItemRequestId=this.activeElement=this.blurHandler=this.focusHandler=aa;},setMainStory:function(aA,aD,az,aB){var aE=this.mainStoryContent,aC;if(this.animMode==k||!az){aE.set(B,aA);this.replaceImageInMainStory(aA,aD,aB);}else{aC=new this.Y.Anim({node:aE,to:{opacity:0},duration:this.animFadeDuration});aC.on("end",function(){aC.destroy();this.fadeOutMainStoryEnd(aA,aD,aB);},this);aC.run();}},replaceImageInMainStory:function(aB,aF,aE){if(!aE){var aD=this.moduleapi,aC=this.body.getById(this.moduleId+"-header-image"),aA=aD.getContextData("headerImageSrc"),az=aD.getContextData("headerImageAlt");if(aC&&aA&&az){aC.set("src",aA);aC.set("alt",az);aC.set("title",az);}this.cache[aF].html=this.mainStoryContent.get(B);}},fadeOutMainStoryEnd:function(az,aD,aA){var aC,aE=this.mainStoryContent,aB=this.extractId(this.lastSelectedFooter);if(aB===aD){aE.set(B,az);this.replaceImageInMainStory(az,aD,aA);}else{}aC=new this.Y.Anim({node:aE,to:{opacity:1},duration:this.animFadeDuration});aC.on("end",function(){aC.destroy();},this);aC.run();},setOpacity:function(aA,az){aA.setStyle("opacity",az);if(az==1){aA.setStyle("filter","none");}else{aA.setStyle("filter","progid:DXImageTransform.Microsoft.Alpha(opacity="+az*100+")");}},extractId:function(az){return(az?az.getAttribute("y-pkgId"):aa);},classMatch:function(aA,az){return aA.hasClass(az)?aA:aA.ancestor(function(aB){return aB.hasClass(az);});},initializeCache:function(aC){var aB,aE=aC.pkgIds,aA=aC.stories,aD=aE.length,az;for(aB=0;aB<aD;aB++){az=aA[aE[aB]];this.cache[aE[aB]]=(az&&az.html)?{html:az.html,index:aB,clipId:az.clipId,channelNodeId:az.channelNodeId,beaconFired:az.beaconFired}:{html:aa,index:aB,clipId:aa,channelNodeId:aa,beaconFired:y};}},previous:function(){var az=this.carousel;if(!az.isScrolling()){az.previous();}},next:function(){var az=this.carousel;if(!az.isScrolling()){az.next();}},getYEP:function(){return(document.swftodayvideo||document.getElementById("swftodayvideo"));},fireBeacon:function(aA,az,aC){var aB={sec:aA,slk:az,asset:aC};this.instrumentation.fireUltBeacon(aB,this.ylt);},replaceTitle:function(aA){var az=this.body.query("#"+this.moduleId+"-main_story .video-title");aA=aA.length>am?aA.substr(0,am)+"...":aA;az.set(B,aA);},fixCarouselPanelHeight:function(aB){var aA,aC=this.footerHeight,az=aB.queryAll("."+ab);az.setStyle(an,"auto");az.each(function(aD){aA=parseInt(aD.getComputedStyle(an),10);if(aA>aC){aC=aA;}});this.footerHeight=aC;az.setStyle(an,aC+V);},cacheMainStoryHtml:function(aA){var az=this.body.getById(this.moduleId+"-main_story");if(az){this.cache[aA].html=az.get(B);}},handleChkBoxSubmissionSuccess:function(az,aA){},handleChkBoxSubmissionFailure:function(az,aA){},replaceNode:function(aB,aC){var aA,az;if(aB&&aC){az=aC.get(f);aA=this.body.create(aB);aC.setStyle("display","none");az.insertBefore(aA,aC);az.removeChild(aC);}},startAutoPlay:function(){if(this.animMode!=k&&!this.autoPlayReference&&!this.isVideoPlaying()&&!this.isOtherModuleOpen&&!this.isManuallyPaused){var az=this.animIntervalInitial,aA=this.animIntervalSubsequent;if(this.isInitialAnim){if(az>0){this.autoPlayReference=this.Y.later(az*1000,this,this.autoPlay,aa,Q);}}else{if(aA>0){this.autoPlayReference=this.Y.later(aA*1000,this,this.autoPlay,aa,Q);}}}},autoPlay:function(){var aD=this.lastSelectedFooter,aF=aD.next(),aE=this.animMode,aH=this.carousel,aB,aC=aH.getCurrentIndex(),az=aC+1,aG,aA=this.timeoutPaneCount;if(this.hasAdRunning()){this.cancelAutoPlay();this.startAutoPlay();return;}if(aF){aB=aF;this.populateStory({linkNode:aB,userHover:y});if(!aF.next()&&aE==at){aG=this.body.getById(this.moduleId+W+az);if(aG&&aG.hasClass(J)){this.preload(az,y);}}}else{if(aE==H){aB=aH.getItemNode(aC).query("."+ab);this.populateStory({linkNode:aB,userHover:y});}if(aE==at){if(this.arcadeTransport.isRequestPending(this.populateScrollItemRequestId)){this.arcadeTransport.abortRequest(this.populateScrollItemRequestId);if(aA>0&&this.preloadPaneCount!=aA){this.preloadPaneCount=aA;this.preload(az,Q,{isTimeout:1});}}else{this.next();}}}if(this.isInitialAnim){this.isInitialAnim=y;this.cancelAutoPlay();this.startAutoPlay();}},cancelAutoPlay:function(aA){var az=this.autoPlayReference;if(az){az.cancel();this.autoPlayReference=aa;}if(this.isInitialAnim){this.isInitialAnim=y;}if(aA){this.tracking(this.lastSelectedFooter);}},delayedStartOrCancelAutoPlay:function(aA,aB){var az=this.delayAutoPlayMouseover;if(az){az.cancel();this.delayAutoPlayMouseover=aa;}this.delayAutoPlayMouseover=this.Y.later(this.timeDelayed,this,aA,aB);},handleEngagingAreaMouseover:function(aB){var aA=this.titleRegion,az=aB.pageX,aC=aB.pageY;if(aA&&aA.top<aC&&aA.right>az&&aA.bottom>aC&&aA.left<az){this.delayedStartOrCancelAutoPlay(this.startAutoPlay,y);}else{this.delayedStartOrCancelAutoPlay(this.cancelAutoPlay,Q);}},handleEngagingAreaMouseout:function(az){this.delayedStartOrCancelAutoPlay(this.startAutoPlay);},attachEngagingAreaMouseEvents:function(){var az=this.carouselOuterContainer,aA=this.mainStory;az.on(R,this.handleEngagingAreaMouseover,this);az.on(S,this.handleEngagingAreaMouseout,this);aA.on(R,this.handleEngagingAreaMouseover,this);aA.on(S,this.handleEngagingAreaMouseout,this);},detachEngagingAreaMouseEvents:function(){var az=this.carouselOuterContainer,aA=this.mainStory;aA.detach(R,this.handleEngagingAreaMouseover);aA.detach(S,this.handleEngagingAreaMouseout);az.detach(R,this.handleEngagingAreaMouseover);az.detach(S,this.handleEngagingAreaMouseout);},handleBlur:function(){if(this.Y.UA.ie){this.activeElement=document.activeElement;}this.cancelAutoPlay(y);this.detachEngagingAreaMouseEvents();},handleFocus:function(){if(!this.Y.UA.ie||this.activeElement==document.activeElement){this.startAutoPlay();this.attachEngagingAreaMouseEvents();}},isVideoPlaying:function(){if(this.body.one(".video-package")){return Q;}else{return y;}},insertPlayPauseButton:function(){var aB=this.body.query(".navigation .next"),aA=this.moduleapi,az=this.animHtml;this.animPlayBeacon=aA.getContextData("animPlayBeacon");this.animPauseBeacon=aA.getContextData("animPauseBeacon");this.animPlayString=aA.getContextData("animPlay");this.animPauseString=aA.getContextData("animPause");aB.get(f).insertBefore(az,aB);},handleManualPlayPauseAutoPlay:function(aD,aB){var aF=aa,aA=this.statemgr,aC,aE=(aB.get("tagName")=="A")?aB:aB.ancestor("A"),az=aE.one(".anim-ctrl");if(aD==ac){this.isManuallyPaused=y;aC=z;aE.set(ad,m);aE.setAttribute(E,this.animPauseBeacon);az.set(B,this.animPauseString);aF=this.startAutoPlay;}else{if(aD==m){this.isManuallyPaused=Q;aC=ae;aE.set(ad,ac);aE.setAttribute(E,this.animPlayBeacon);az.set(B,this.animPlayString);aF=this.cancelAutoPlay;}}if(aF&&aA){aA.setUserModuleState(aw,aC);}return aF;},broadcastEvent:function(){this.moduleapi.broadcast(q);},setFPCKCookie:function(aA){if(1==this.unifiedEnabled){return;}var az={type:"module",moduleId:this.moduleId,args:{_action:"show",_subAction:b,storyId:aA}},aB={scope:this};this.arcadeTransport.makeRequest(az,aB,this.moduleId);},hasAdRunning:function(){return(document.documentElement.className.indexOf("ad-running")>-1);}};})();var yasearch,fxsearch;(function(){var aA=null,ah=true,M=false,az="undefined",e="-promotion",ae="-rsch1",I="ymobilizerouter",p="hp-hidden",aw="hidden",y="promoCode",aD="hpCode",ba="hpOverlay",b="randomPromo",S="rsch1Successful",bd="forceSethp",v="browser",an="sethpPromoShare",a5="wsid",aS="30345158",u="SP",au="v=1&a=1",a4="v=1&a=0",Y=5,aJ=10,aL=5,be="web",aU="ebay",aa="jobs",aV="mail",aE="combo",d="games",af="local",aG="music",ag="images",m="people",aK="omg",n="answers",r="shopping",bh="directory",K="innerHTML",o="value",a7="title",c="action",aI="name",a0="text",ak="parentNode",aZ="tagName",T="firstChild",N="href",ao="height",ar="width",aj="auto",g="checked",L="disabled",F="paddingLeft",ai="paddingRight",A="data-tab",a3="focus",z="blur",f="submit",bg="mouseover",s="click",bc="4em",al="8em",q="1.6",aN="hide-completely",a2="ds-b",a="open",aC="bottom",U="denabled",aH="uenabled",ac="selected",aO="sa-results",ay="input-x-short",G="menu-select",aM="ghosttext",h=".promo",av=".stabs",J=".more-tab",a6=".input-query",aR=".search-form",a9=".searchwrapper",bf=".searchwrapper-inner",O=".sa-window",W=".sa-drawer",aF=".sa-results",bi=".aria-announce",X=".tab-cover",l="y-mast-sprite",i="y-mast-link",aQ="y-mast-txt",aP="y-mast-bg",ax="y-bg-3",aB="y-ln-2",k="y-mast-bg-hide",Z="sa-drawer-container",H="hide-lip",at="px",P="-r-langtoggle",am="-r-countrytoggle",aW="allow.redirected.ult.links",R="pa:ready",aY="search.tab.",aq=".showdrawer",ap=".showdrawerhandle",D={kr:ah,jp:ah,tw:ah,cn:ah},E="ulm:defaultlocation",a8="pmh:searchtext",aX="pmh:show",ad="sayt:open",bb="sayt:close",aT="mh:web_srch_inp",V="mh:tab_select",C="l_logo",Q="AREA",B=150,j=1000,x=100,w="interactive",a1="srch-pl",ab="srch-pl-s",t="srch-plu",bj="srch-plu-s";YModules.type_masthead={id:"",body:aA,moduleapi:aA,platform:aA,instrumentation:aA,tablistService:aA,tablist:aA,autoHide:aA,autoHideId:aA,paService:aA,viewevents:[s,"keyup"],formData:aA,dummyYLT:aA,ywaObject:aA,YWATracker:aA,saConfig:{enabled:ah,minQueryLength:0,queryDelay:0,containerOpen:M,timeoutId:aA,abortId:aA,cachedResults:aA,delayedRequests:0,numResults:0,normalizationRules:aA,isAutoOpen:M,isManualOpen:M,selectedIndex:-1,lastAnimHeight:0,lastVisibleItem:0},currentTab:"",form:aA,textbox:aA,hood:aA,saWindow:aA,saDrawer:aA,saResults:aA,searchwrapperInner:aA,searchwrapper:aA,aria:aA,secondInput:aA,hiddenInputNodes:aA,suggestions:aA,searchQuery:"",lastSearchQuery:"",lastQueryLength:0,anim:aA,animId:aA,animOpenedId:aA,defLoc:"",currentSelectedListItem:aA,menu:aA,useFxjsonp:M,keyUpSupported:ah,handleKeyUpObject:aA,useIntlToggle:M,useIntlSwitch:M,useLangFilter:M,language:aA,allowRedirectedULTLinks:ah,ebayInputField:aA,numberOfVisibleItems:Y,horizontalPadding:"0",moreLink:aA,displayNameInMoreDropDown:M,cmsLogo:aA,logoContainer:aA,trendData:aA,numCycles:0,ghostTextIndex:0,ghostTextCharPosition:1,ghostTextId:aA,restartId:aA,uraPromo:aA,usingDoubleByte:M,showNewPointer:0,newPointerPosition:aA,newPointerSpan:aA,ywaTrackingEnabled:0,setHomepageService:aA,browser:"",autoHideService:aA,init:function(bo){this.Y=bo.getService("yui");this.moduleapi=bo;this.currentTab=bo.getContextData("FIRST_TAB_FOR_SEARCH")?bo.getContextData("FIRST_TAB_FOR_SEARCH"):be;this.hiddenInputNodes=[];this.id=bo.getId();this.platform=bo.getService("moduleplatform");this.instrumentation=bo.getService("instrumentation");this.tablistService=bo.getService("tablist");this.defLoc=bo.getContextData("defLoc");this.useIntlToggle=bo.getContextData("useIntlSearchToggle")?ah:M;this.useIntlSwitch=bo.getContextData("useIntlSwitch")?ah:M;this.useLangFilter=bo.getContextData("useLangFilter")?ah:M;this.preloadSRP=bo.getContextData("preloadSRP")?ah:M;this.srpAssetURL=bo.getContextData("srpAssetURL");this.newPointerPosition=bo.getContextData("newPointerPos");this.newPointerSpan=bo.getContextData("newPointerSpan");this.showNewPointer=bo.getContextData("showNewPointer");this.ywaTrackingEnabled=parseInt(bo.getContextData("ywaTrackingEnabled"),10);this.setHomepageService=bo.getService("sethomepage");this.browser=bo.getContextData(v);this.autoHideService=bo.getService("autohide");if(this.useLangFilter){this.language=bo.getContextData("language");}if(bo.getContextData("visibleItems")){this.saConfig.lastVisibleItem=this.numberOfVisibleItems=parseInt(bo.getContextData("visibleItems"),10);this.saConfig.lastVisibleItem--;}var bl=bo.getContextData("saData"),bq=bl.cssSAWindowMaxHeightIE6,bp=bo.getContextData("horizontalPadding"),br=bl.cssSAWindowSuggestionHeightIE6,bk,bn,bm;this.horizontalPadding=bp?bp:"0";if(bq&&bq.length>0){al=bq;}if(br&&br.length>0){q=br;}this.formData=bo.getContextData("formData");bo.listen(E);bo.listen(R);bk=bo.getProperty("channels");if(bk){bn=bk.length;for(bm=0;bm<bn;bm++){bo.listen(bk[bm]);}}bo.listen(aX);bo.listen(a8);},onviewload:function(bC){if(bC==="default"){var bJ=this.platform,bE=this.formData,bK=this.moduleapi,bF=this.currentTab,bn=this.Y,bA=this.id,by,bo,bB,bl,bs,bG,bk,bw,br,bq,bv=bK.getViewNode(bC),bH=bE[bF],bu=bK.getContextData("adLogoMeta"),bD=bK.getContextData("searchIntl")?bK.getContextData("searchIntl").toLowerCase():aA,bx=bK.getContextData("moremenu"),bm=this.trendData=bK.getContextData("trendData"),bI,bp,bt,bz;by=bv.getById(bA+e);bs=bK.getContextData(S);br=bK.getContextData(bd);bl=bK.getContextData(b);bq=bK.getContextData(an);if(!bs){bk=bK.getContextData("rsch1Suid");if(bk){bw=bJ.queryModules(function(bM){var bL=bJ.getModuleApi(bM);return bL?bL.getProperty("contentId")==bk:false;})[0];if(bw){bJ.stop(bw);bJ.unregisterModule(bw);}bG=bv.getById(bk+ae);if(bG){bG.remove();}}if(by){bB=!this.setHomepageService.isHomepageSet()&&!this.isHpWindowShade();if(br||(bB&&(!bl||Math.random()>bq))){bo=aD;}else{bo=y;}by.set(K,bK.getContextData(bo));by.removeClass(p);}}this.usingDoubleByte=D[bD]?ah:M;this.displayNameInMoreDropDown=bK.getContextData("search.more.firstitem")?ah:M;this.allowRedirectedULTLinks=bK.getContextData(aW);this.useFxjsonp=bK.getContextData("use.fxjsonp")?ah:M;this.keyUpSupported=(bn.UA.gecko&&D[bD])?M:ah;if(bu){bJ.registerModule(bu);bJ.start(bu.props.id,M,ah);}this.body=bv;this.form=bv.one(aR);bz=this.textbox=bv.one(a6);this.searchwrapper=bv.one(a9);this.searchwrapperInner=bv.one(bf);this.aria=bv.one(bi);bt=bv.one(av);this.uraPromo=bv.one(h);if(bz.hasClass("ime-enabled")){bz.removeClass("ime-enabled");}this.tablist=this.tablistService.create(bt,{panel:this.searchwrapper,tabchange:"click"});this.tablist.subscribe("tabchange",this.switchSearchTab,this,ah);this.initSA();if(bx){this.moreLink=bv.one(".more");bI=this.moduleapi.getService("menu");bp=bv.create(bx);bt.get("parentNode").insert(bp,bt);this.menu=bI.create(bp,{focusNode:this.textbox});this.menu.subscribe("execute",this.moreMenuSelect,this);this.menu.subscribe("show",this.moreMenuShow,this);this.menu.subscribe("hide",this.unselectMoreTab,this);this.moreLink.on("click",this.handleMoreMenu,this);bz.on(a3,this.hideMoreMenu,this);}this.form.on(f,this.handleSubmit,this);bz.on(z,this.handleTextBlur,this);this.registerAutoHide();this.dummyYLT=bK.getContextData("dummyYLT");if(!this.keyUpSupported){bz.on(a3,this.handleFFDoubleByte,this);bz.on(z,this.clearFFDoubleByte,this);}if(bF===be&&bH.fp_ip&&bH.vc){bv.one(".intlswitch").removeClass(aN);this.enableIp2ccParameters();}this.logoContainer=bv.one(".logo-container");this.logoContainer.on(bg,this.handleLogoMouseover,this);if(bm){bz.blur();bz.on(a3,this.cancelGhostWriting,this,aM);this.numCycles=bK.getContextData("numCycles");this.ghostTextId=bn.later(B,this,this.ghostWrite,bm,true);}if(bn.UA.webkit){bz.blur();}bz.focus();}},isHpWindowShade:function(){var bk=M,bm,bl=this.moduleapi.getService("statemgr");if(bl){bm=bl.getUserPageState(a5);if(bm==aS){bk=ah;bl.removeUserPageState(a5);}}return bk;},setMobilizer:function(){var bl="100%",bp=document.documentElement.clientHeight+"px",bn=document.body.scrollTop||document.documentElement.scrollTop,bo=document.createElement("iframe"),bm="99999",bk=this.moduleapi.getContextData("locale"),bq=this.moduleapi.getContextData("mobilizerUrl");if(document.getElementById(I)){document.body.removeChild(document.getElementById(I));}bo.src=bq+"&lang="+bk;bo.setAttribute("id",I);bo.setAttribute("name",I);bo.setAttribute("allowTransparency","allowTransparency");bo.setAttribute("frameborder",0);bo.setAttribute("scrolling","no");bo.setAttribute("width",bl);bo.setAttribute("height",bp);bo.style.position="absolute";bo.style.left="0px";bo.style.top=bn+"px";bo.style.zoom="1";bo.style.zIndex=bm;bo.style.overflow="hidden";bo.setAttribute("style","z-index:"+bm+";position:absolute;top:"+bn+"px;left:0px;width:"+bl+";height:"+bp+";");document.body.appendChild(bo);if(typeof window.addEventListener!=az){window.addEventListener("message",this.closeMobilizer,M);}else{if(typeof window.attachEvent!=az){window.attachEvent("onmessage",this.closeMobilizer);}}},closeMobilizer:function(bk){if(bk.data=="closeYMBZ"){if(document.getElementById(I)){document.body.removeChild(document.getElementById(I));}}},setHomePage:function(){var bn,bt=this.setHomepageService,bp=this.moduleapi,bl,bq,bm,bo=this.body,bk=this.id,bs=bp.getContextData(ba),bu=bp.getContextData("ilc"),br;if(this.browser=="IE"){if(bt.setIEHomepage(bu)){bm=bp.getContextData(y);if(bm!==""&&bm!==aA){bn=document.getElementById(this.id+e);bn.innerHTML=bm;}else{bq=bo.getById(bk+e);bq.get(ak).removeChild(bq);}bl=bp.getString("PARAM.NAVBAR.IE.YES_BEACON");}else{bl=bp.getString("PARAM.NAVBAR.IE.NO_BEACON");}this.instrumentation.fireUltBeacon(bl);}else{if(this.Y.Array.indexOf(["FF","WK","OP","CH"],this.browser)>-1){bq=bo.getById(bk+e);if(bo.getById(bk+"-set-homepage-overlay")==aA){bq.append(bs);}this.overlay=bo.getById(bk+"-set-homepage-overlay");if(this.overlay){this.autohideId=this.autoHideService.register({targets:[this.overlay,bq],hide:this.Y.bind(function(){this.hideOverlay();},this)});br=bo.getById(bk+"-sethp-ff");if(br){br.on("mousedown",this.fireFFBeacon,this);br.on("click",this.yBangClick,this);}this.overlay.removeClass(aw);}}else{bt.setHpCookie(bu,"1");}}},hideOverlay:function(){this.overlay.addClass(aw);},fireFFBeacon:function(){var bm=this.setHomepageService,bl=this.moduleapi,bk=bl.getString("PARAM.NAVBAR.DRAG.BEACON");this.instrumentation.fireUltBeacon(bk);bm.setHpCookie(bl.getContextData("ilc"),"1");},ghostWrite:function(bm){var bp="",bl=this.textbox,bn=arguments.length,br=this.ghostTextIndex,bk=this.ghostTextCharPosition,bo,bq;if(this.ghostTextIndex>=bn){bq=--this.numCycles;this.ghostTextIndex=this.ghostTextCharPosition=0;if(bq===0){this.cancelGhostWriting(aA,aM);}}else{bo=arguments[br].text;if(bo&&bk<bo.length+1){bp=bo.substring(0,this.ghostTextCharPosition++);bl.set(o,bp).addClass(aM);}else{this.ghostTextIndex++;this.ghostTextCharPosition=0;this.cancelGhostWriting();this.restartId=this.Y.later(j,this,this.restartGhostText);}}},restartGhostText:function(){this.ghostTextId=this.Y.later(B,this,this.ghostWrite,this.trendData,true);},cancelGhostWriting:function(bm,bl){var bn=this.ghostTextId,bk=this.restartId;if(bn||bk){if(bn){bn.cancel();bn=aA;}if(bk){bk.cancel();bk=aA;}if(bl){this.textbox.removeClass(bl);}}},initSA:function(){var bm=this.moduleapi,bk=this.saConfig,bl=bm.getContextData("saData");bk.minQueryLength=bl.minQueryLength;bk.queryDelay=bl.queryDelay;bk.normalizationRules=bl.normalizationRules;bk.lastVisibleItem=this.numberOfVisibleItems-1;bk.cachedResults={};bk.cachedResults[be]={};bk.cachedResults[aE]={};bk.cachedResults[ag]={};if(this.Y.Cookie.get(u)===a4){bk.enabled=M;}yasearch=fxsearch=this.Y.bind(function(bn){this.handleSearch(bn);},this);this.createDropdown();},onviewunload:function(bm){var bk=this.textbox,bn=this.animOpenedId,bl=this.ghostWriteId;if(bl){bl.cancel();this.ghostWriteId=aA;}if(bn){bn.detach();this.animOpenedId=aA;}this.closeDropdown();if(this.currentTab===aU){bk.set(L,ah);}this.unregisterAutoHide();this.form.detach(f,this.handleSubmit);bk.detach(z,this.handleTextBlur);if(!this.keyUpSupported){bk.detach(a3,this.handleFFDoubleByte);bk.detach(z,this.clearFFDoubleByte);}if(this.trendData){bk.detach(a3,this.cancelGhostWriting);}this.logoContainer.detach(bg,this.handleLogoMouseover);if(this.menu){this.moreLink.detach("click",this.handleMoreMenu);this.menu.destroy();bk.detach(a3,this.hideMoreMenu);}this.clearFFDoubleByte();this.tablist.destroy();this.tablist=this.body=this.menu=this.paService=this.textbox=this.form=this.searchwrapper=this.searchwrapperInner=this.aria=this.hood=this.saWindow=this.saDrawer=this.secondInput=this.hiddenInputNodes=this.restartId=this.ghostTextId=this.anim=this.animId=this.logoContainer=this.trendData=this.formData=this.saConfig=aA;},registerAutoHide:function(){var bn=this.id,bl=this.body,bm=this.Y,bk=this.moduleapi.getService("autohide");this.autoHideId=bk.register({targets:[this.hood,this.textbox,bl.getById(bn+"-masthead-stabs")],hide:bm.bind(this.closeDropdown,this)});this.autoHide=bk;},unregisterAutoHide:function(){var bk=this.autoHide;if(bk){bk.unregister(this.autoHideId);}},createDropdown:function(){var bo=this.moduleapi,bk=this.body,bq=this.Y,bm,bn,bl,bp;bm=bk.one(".hood");bn=bm.one(O);bl=bm.one(W);bp=bn.plug(bq.Plugin.NodeFX,{});bp.fx.openAnimAtts={easing:bq.Easing.easeOut,duration:parseFloat(bo.getContextData("saData").openAnimDuration)};bp.fx.closeAnimAtts={to:{height:0},easing:bq.Easing.easeIn,duration:parseFloat(bo.getContextData("saData").closeAnimDuration)};this.hood=bm;this.saWindow=bn;this.saDrawer=bl;this.anim=bp;},openDropdown:function(){var bo=this.saConfig,bp=this.body,bs=this.saWindow,br,bn=this.anim.fx,bq=this.moduleapi,bk=this.animOpenedId,bm=bp.one(".search-promo"),bl=this.Y;bq.broadcast(ad);bq.broadcast(w);if(bo.isAutoOpen===ah){this.instrumentation.fireUltBeacon(this.formData[this.currentTab].bcnAutoOpen);bo.isAutoOpen=M;}if(bl.UA.ie===6&&bo.containerOpen===M){this.syncDropdown();}this.saDrawer.set("innerHTML",bq.getString("STR.SA.TOGGLE.OFF"));bo.selectedIndex=-1;this.hood.addClass(a);br=bs.get("offsetHeight");if(br>bo.lastAnimHeight&&bo.containerOpen===M){bs.setStyle(ao,"0");bn.setAttrs(bn.openAnimAtts);bn.set("to",{height:br});if(!bk){this.animOpenedId=bn.on("end",this.Y.bind(this.afterDropdownOpened,this));}bn.run();bo.lastAnimHeight=br;}bo.containerOpen=ah;this.textbox.set(a7,bq.getString("STR.SA.DROPDOWN.DESCRIPTION")).focus();bp.one(a9+" .rc-bl").addClass(aN);bp.one(a9+" .rc-br").addClass(aN);if(bm){if(bl.UA.ie&&bl.UA.ie<8){bm.addClass(aN);}else{bl.Node.getDOMNode(bm).style.zIndex=0;}}},closeDropdown:function(bm){var bl=this.anim.fx,bk=this.animId;if(bk){return;}if(this.hood.hasClass("open")){bl.setAttrs(bl.closeAnimAtts);this.animId=bl.on("end",this.Y.bind(this.afterCloseDropdown,this,bm?true:false));bl.run();}},afterDropdownOpened:function(){var bk=this.saWindow,bl=bk.get("offsetHeight");if(this.Y.UA.ie!==6){bk.setStyle(ao,aj);}else{bk.setStyle(ao,bl+"px");}},afterCloseDropdown:function(bk){var bl=this.hood,bp=this.saConfig,br=this.textbox,bq=this.body,bs=this.animId,bo=this.moduleapi,bn=this.Y,bm=bq.one(".search-promo");this.moduleapi.broadcast(bb);this.saDrawer.set("innerHTML",bo.getString("STR.SA.TOGGLE.ON"));this.saWindow.setStyle(ao,aj);bp.lastAnimHeight=0;bp.lastVisibleItem=this.numberOfVisibleItems-1;bl.removeClass(a);bp.containerOpen=M;br.set(a7,this.formData[this.currentTab].button);if(!bk){br.focus();if(!this.usingDoubleByte){br.set(o,br.get(o));}}bq.one(a9+" .rc-bl").removeClass(aN);bq.one(a9+" .rc-br").removeClass(aN);bl.detach(bg,this.handleMouseover);if(bn.UA.ie===6){document.getElementById(this.id+"-hood").style.width="";bl.addClass(a2);}if(bm){if(bn.UA.ie&&bn.UA.ie<8){bm.removeClass(aN);}else{bn.Node.getDOMNode(bm).style.zIndex=6;}}if(bs){bs.detach();this.animId=aA;}this.saConfig.selectedIndex=-1;bo.broadcast(aT,br.get(o));},syncDropdown:function(){var bo=this.saWindow,bm=this.searchwrapperInner,bl=this.hood,bp,bk,bn=this.saConfig.numResults;bp=parseFloat(bm.get("offsetWidth"))+2+at;bl.removeClass(a2);bl.setStyle(ar,bp);if(!this.suggestions){bk=bc;}else{if(bn>this.numberOfVisibleItems){bk=al;}else{bk=q*bn+0.4+"em";}}bo.setStyle(ao,bk);},highlightItem:function(bo,bn,bm,bp){var bl=bo.item(bn),bq=bl.get("parentNode"),bk=this.currentSelectedListItem;if(bk){bk.removeClass(ac);}bo.removeClass(ac);bl.addClass(ac);bq.addClass(ac);this.currentSelectedListItem=bq;if(!bm){this.textbox.set(o,bl.get(a0));}},scroll:function(){var bq,bo=this.saConfig,br=this.body,bk=this.id,bt=bo.lastVisibleItem+1,bm=bt-this.numberOfVisibleItems>0?bt-this.numberOfVisibleItems:0,bn=br.getById(bk+"-arr-up"),bl=br.getById(bk+"-arr-down"),bp=br.getById(bk+"-results"),bs=this.moduleapi,bu=bs.getContextData("saData").cssFontSizeSAYT;if(bu&&bu.length>0){bu=aO+" "+bu;}else{bu=aO;}bp.set("className",bu);bm=bm>bt?bt:bm;if(bo.selectedIndex>=bt){bm++;}bp.addClass(bt>this.numberOfVisibleItems?aC+bm:"");if(bn){bq=this.numberOfVisibleItems-bt;if(bq===0||bq===1){bn.removeClass(aH);}else{bn.addClass(aH);}}if(bl){if(bo.numResults-bt===0){bl.removeClass(U);}else{bl.addClass(U);}}},scrollSelection:function(bn,bm){var bk=this.saConfig,bo=this.numberOfVisibleItems,bl;if(bm){bn=--bn;}bl=bo-(aJ-1-bn);if(bk.numResults>bk.lastVisibleItem){if(bl<0){bk.lastVisibleItem=bo-1;}else{if(bl+bo<=aJ){bk.lastVisibleItem=bl+bo-1;}else{if(bk.lastVisibleItem<bo){bk.lastVisibleItem++;}}}if(bk.numResults>bo){this.scroll();}}else{if(bm){bk.lastVisibleItem--;}}},moveSelectionDown:function(){var bk=this.saConfig,bm=bk.selectedIndex,bl=this.suggestions;if(bl&&bl.size()>0){if(bm<bk.numResults-1){bl.removeClass(ac);this.highlightItem(bl,++bk.selectedIndex,M);this.scrollSelection(bm);}}},moveSelectionUp:function(){var bk=this.saConfig,bm=bk.selectedIndex,bl=this.suggestions;if(bm!==-1){bl.removeClass(ac);if(bm===0){this.textbox.set(o,this.lastSearchQuery);bk.selectedIndex=-1;}else{this.highlightItem(bl,bk.selectedIndex===0?0:--bk.selectedIndex,M,ah);this.scrollSelection(bm,ah);}}},updateNameAttribute:function(bm){var bl=this.textbox,bk=this.formData[bm].paramQuery;if(!bk){bk=bm===aV?"s":"p";}bl.setAttribute(aI,bk);},setSecondInput:function(){var br=this.moduleapi,bq=this.body,bu=this.textbox,bp=this.secondInput,bt=M,bl=this.currentTab,bm=this.formData[bl],bv,bo,bs,bk,bn;this.removeHiddenInputFields();bk=this.hiddenInputNodes;switch(bl){case af:bt=ah;case aa:if(!bp){bs=bq.one(".button-wrapper");bn=bs.get(ak);bo=bn.create(br.getContextData("HTML_SECONDLABEL"));bn.insertBefore(bo,bs);bp=bn.create(br.getContextData("HTML_SECONDINPUT"));bn.insertBefore(bp,bs);bu.addClass(ay);}bu.set(aI,bm.paramQuery);bp.set(aI,bm.paramLocation);bv=(bt&&this.defLoc)?this.defLoc:bm.locationGhostText;bp.setAttribute(o,bv);bp.on(z,this.blurText,this);this.secondInput=bp;break;case aG:if(bm.param1Name&&bm.param1Value){bk[0]=this.createHiddenInputFieldForTab(bm.param1Name,bm.param1Value);}if(bp){this.secondInput=aA;bp.detach(z,this.blurText);bo=bp.previous();bo.get(ak).removeChild(bo);bp.get(ak).removeChild(bp);bu.removeClass(ay);}break;case d:if(bm.vsValue){bk[0]=this.createHiddenInputFieldForTab("vs",bm.vsValue);}if(bp){this.secondInput=aA;bp.detach(z,this.blurText);bo=bp.previous();bo.get(ak).removeChild(bo);bp.get(ak).removeChild(bp);bu.removeClass(ay);}break;case m:if(bm.vfValue&&bm.vsValue){bk[0]=this.createHiddenInputFieldForTab("vf",bm.vfValue);bk[1]=this.createHiddenInputFieldForTab("vs",bm.vsValue);}if(bp){this.secondInput=aA;bp.detach(z,this.blurText);bo=bp.previous();bo.get(ak).removeChild(bo);bp.get(ak).removeChild(bp);bu.removeClass(ay);}break;default:if(bp){this.secondInput=aA;bp.detach(z,this.blurText);bo=bp.previous();bo.get(ak).removeChild(bo);bp.get(ak).removeChild(bp);bu.removeClass(ay);}break;}},blurText:function(bk){var bl=bk.target;if(bl.get(o)===""){bl.set(o,bl.get("defaultValue"));}},resetSA:function(){var bl=this.saConfig,bk,bm=bl.containerOpen;this.suggestions=aA;if(bl.enabled===ah){bl.lastVisibleItem=this.numberOfVisibleItems-1;bl.numResults=0;bl.selectedIndex=-1;bl.isAutoOpen=M;bl.isManualOpen=M;bl.containerOpen=M;bk=this.body.getById(this.id+"-sa-info");if(bk){bk.setAttribute(N,this.formData[this.currentTab].yltInfoPage);}}if(bm){this.Y.later(150,this,this.resetHood);}else{this.resetHood();}},resetHood:function(){this.saWindow.set(K,this.moduleapi.getContextData(this.saConfig.enabled?"HTML_HOODCONTENT_ENABLED":"HTML_HOODCONTENT_DISABLED"));if(this.moduleapi.getContextData(aY+this.currentTab+ap)){this.saDrawer.removeClass(aN);}},hideSA:function(){this.saDrawer.addClass(aN);},handleLogoMouseover:function(bm){var bk,bl=bm.target,bn=this.cmsLogo;if(!bn){bn=this.cmsLogo=this.body.getById(C);}if(bn&&bn.getAttribute("id")===bl.getAttribute("id")){bk={sec:"ylogo",slk:"yahoo_hov",ltxt:"yahoo_hov",pos:0,own:"Y",ld:0,itc:2};this.instrumentation.fireUltBeacon(bk);}},fireYodelBeacon:function(){var bk={sec:"ylogo",slk:"yodel",ltxt:"yodel",pos:0,own:"Y",ld:0,itc:1};this.instrumentation.fireUltBeacon(bk);},handleMouseover:function(br){var bs=br.target,bp,bn,bt,bk,bo,bq=this.body.getById(this.id+"-results"),bm=this.suggestions,bl=bs.get(aZ);if(bm){if((bl==="A"||bl==="STRONG")&&bq.contains(bs)){bk=bm.size();if(bl==="A"){bt=bs.get("id");bn=bs.get(a0);}else{bn=bs.get(ak).get(a0);}for(bo=0;bo<bk;bo++){bp=bm.item(bo);if(bt){if(bt==bp.get("id")&&bn===bs.get(ak).get(a0)){this.highlightItem(bm,bo,ah);break;}}else{if(bn===bp.get(a0)){this.highlightItem(bm,bo,ah);break;}}}}else{bm.removeClass(ac);}}},switchSearchTab:function(bD){var by=this.id,bl=this.moduleapi,bk=this.saConfig,bE=this.uraPromo,br=this.body,bz=this.tablist,bx=this.textbox,bv=bz.getTabNode(bD.fromIndex),bn=bv.get(T),bo=bn.get(T),bC=bz.getTabNode(bD.toIndex),bs=bC.get(T),bp=bs.get(T),bA=this.Y.Lang.trim(bs.getAttribute(A)),bB=this.formData[bA],bt=bl.getContextData(aY+bA+aq),bw=bl.getContextData(aY+bA+ap),bu=this.saDrawer.get("parentNode").hasClass(Z)?this.saDrawer.get("parentNode"):aA,bm=br.one(".intlswitch"),bq=br.getById("search-submit");if(bk.containerOpen){this.closeDropdown();}if(bk.abortId){this.Y.Get.abort(bk.abortId);}this.currentTab=bA;bl.broadcast(V,{clickedTab:bA,buttonName:bB.button});bl.broadcast(aT,bx.get(o));bv.removeClass(l);bn.removeClass(l).addClass(i).removeClass(aQ);bo.removeClass(aP).addClass(k);bC.addClass(l);bs.addClass(l).addClass(aQ).removeClass(i);bp.addClass(aP).removeClass(k);if(bt&&bw){this.resetSA();}if(bA===be){if(bB.fp_ip&&bB.vc){this.enableIp2ccParameters();}if(bE){bE.removeClass(aN);}}else{this.disableHiddenInputField(by+"-vc");this.disableHiddenInputField(by+"-fp-ip");if(bE){bE.addClass(aN);}}switch(bA){case aE:case be:if(bm){bm.removeClass(aN);}break;case ag:if(!bt){this.hideSA();bk.selectedIndex=-1;}break;case n:case bh:case aK:case r:default:this.hideSA();bk.selectedIndex=-1;break;}if(bu){if(bA===aE||bA===be||bA===ag){if(bu.hasClass(H)){bu.removeClass(H);}}else{if(!bu.hasClass(H)){bu.addClass(H);}}}if(bA!==be&&bA!==aE){if(bm){bm.addClass(aN);}}br.getById(this.id+"-aria-label").set(K,bA);this.setSecondInput();this.updateNameAttribute(bA);bq.set(o,bB.button);bq.set(K,bB.button);bx.set(a7,bB.button);if(bB.noQueryURL){this.updateLandingPage();}else{this.form.setAttribute(c,bB.action);}},handleMoreMenu:function(bp){var bo=bp.target.ancestor("li").one("a"),bm=bo.ancestor("#y-masthead"),bn=bo.get("region"),bk=bm.get("region"),bl={top:Math.floor(bn.bottom-bk.top),left:bn.left-bk.left-8};this.closeDropdown(ah);bp.preventDefault();this.menu.show(bl);},moreMenuShow:function(bl){var bk=this.moreLink.ancestor("li");bk.addClass(ax);bk.addClass(aB);bk.addClass(G);},unselectMoreTab:function(bl){var bk=this.moreLink.ancestor("li");bk.removeClass(ax);bk.removeClass(aB);bk.removeClass(G);},hideMoreMenu:function(bk){this.menu.hide(M);this.unselectMoreTab();},moreMenuSelect:function(bw){var bk,bp,bv,by,bm,bt=this.tablist,bu=this.moreLink,bx=bt.getTabNodes().size()-1,bq=bw.relatedTarget,bl=bq.get(T),br=bl.cloneNode(true),bB=br.one(X),bn=bl.getAttribute(A),bs=bt.getTabNode(bx),bo=bs.get(T),bA=bo.getAttribute(A),bz=this.horizontalPadding;bv=this.formData[bn];if(bv.noQueryURL){this.updateLandingPage();}else{this.form.setAttribute(c,bv.action);}if(bB){bB.setStyle(F,bz);bB.setStyle(ai,bz);if(this.showNewPointer){if(bn==this.newPointerPosition){if(bA!=bn){bs.appendChild(this.newPointerSpan);}}else{bm=bs.one(".new");if(bm){bs.removeChild(bm);}}}}if(bq.hasClass("link")){this.moduleapi.navigate(bl.getAttribute("href"));return;}bo.replace(br);if(bt.getSelectedIndex()===bx){bp={toIndex:bx,fromIndex:bx};this.switchSearchTab(bp);}else{bt.switchTo(bx);}if(this.displayNameInMoreDropDown){bu.setAttribute(N,bl.getAttribute(N));bu.setAttribute("data-b",bl.getAttribute("data-b"));bu.setAttribute(A,bn);by=bl.one(X);bk=by?by.get(K):aA;if(bk){by=bu.one(X);if(by){by.set(K,bk);}}}this.textbox.focus();},onviewevent:function(bv,bB){if(bv==="default"){var br=this.instrumentation,bp=this.body,bu=this.id,bz,bD=this.saResults,by=this.currentTab,bx=this.formData[by],bk=this.saConfig,bt=this.textbox,bn=this.secondInput,bA=bt.get(o),bm,bE=bB.target,bs=bB.type,bo="",bq,bl=this.trendData,bC=bp.one(J),bw=(bE===bt);this.searchQuery=bA;if(bw){this.moduleapi.broadcast(w);}if(bs==="keyup"&&bw){this.handleKeyUp(bB.keyCode);}else{if(bs===s){if(bp.one(av).contains(bE)){if(!bC||!bC.contains(bE)){bt.focus();if(this.Y.UA.ie===8){bt.set(o,bA);}}}bo=bE.get("id");bm=bE.get(aZ);if(bm&&bm===Q){this.fireYodelBeacon();}if(bo){if(this.hood.contains(bE)&&bE.get(aZ)==="A"&&bE.getAttribute(N).indexOf("ylt")===-1){bB.preventDefault();switch(bo){case (bu+"-arr-up"):br.fireUltBeacon(bx.bcnScroll);if(bE.hasClass(aH)){bk.lastVisibleItem--;this.scroll();}break;case (bu+"-arr-down"):br.fireUltBeacon(bx.bcnScroll);if(bE.hasClass(U)){bk.lastVisibleItem++;this.scroll();}break;case (bu+"-sa-drawer"):if(bk.containerOpen===ah){br.fireUltBeacon(bx.bcnDrawerClose);this.closeDropdown();}else{br.fireUltBeacon(bx.bcnDrawerOpen);this.manualOpenDropdown();}break;case (bu+"-onswitch"):case (bu+"-sa-hintswitch"):this.toggleSA(true);break;case (bu+"-offswitch"):this.toggleSA(false);break;default:break;}}else{bq=(by===be&&bx.fp_ip&&bx.vc)?bp.getById(bu+"-vc"):aA;switch(bo){case (bu+"-r-web"):this.saveSetting("intl-toggle","off");if(bq){bq.set(L,ah);}break;case (bu+"-r-intl"):this.saveSetting("intl-toggle","on");if(bq){bq.set(L,M);}break;case (bu+"-location"):if(bn.get(o)===bx.locationGhostText){bn.set(o,"");}break;case bu+"-homepage":if(this.Y.Array.indexOf(["IE","FF","WK","OP","CH"],this.browser)>-1){bB.preventDefault();}this.setHomePage();break;case bu+"-close-overlay":bB.preventDefault();this.hideOverlay();break;case bu+"-mobilizer":bB.preventDefault();this.setMobilizer();break;default:break;}}}else{if(bl){bB.preventDefault();if(!bD){bD=this.saResults=bp.one(aF);}if(bD&&bD.contains(bE)){this.beaconPreloadedSearch(bt.get(o),ah);bz=bE.get(N);if(!bz){bz=bE.ancestor("A").get(N);}this.moduleapi.navigate(bz);}}}}}}},handleKeyUp:function(bs){var bq=this.aria,bn=this.moduleapi,bm=this.saConfig,bk=this.currentTab,br=this.searchQuery,bo=br.length,bl=this.lastQueryLength,bp=this.srpAssetURL;this.updateLandingPage();if(this.preloadSRP&&bp){this.Y.Get.script(bp,{onSuccess:function(){this.preloadSRP=false;},context:this});}if(bk===aE||bk===be||(bk===ag&&(bn.getContextData(aY+this.currentTab+aq)))){if(this.keyUpSupported){br=this.textbox.get(o);bo=br.length;if(bs==8){if(bo>bm.minQueryLength&&bm.enabled){if((br&&bo>0)&&br!=this.lastSearchQuery){this.sendQuery();}}else{this.closeDropdown();}}}switch(bs){case 13:break;case 27:if(bm.containerOpen===ah){this.closeDropdown();}break;case 37:case 39:break;case 38:if(bm.enabled===ah&&bm.containerOpen===ah){this.clearFFDoubleByte();this.moveSelectionUp();}break;case 40:this.clearFFDoubleByte();if(bn.getContextData(aY+be+aq)){this.manualOpenDropdown();}break;default:if(bo===bl&&!this.keyUpSupported){break;}if(!this.keyUpSupported&&!this.handleKeyUpObject){this.handleFFDoubleByte();}if(bm.enabled===ah){if(bo===0){bq.set(K,"<p></p>");this.closeDropdown();}else{if(bo>bm.minQueryLength){if(bm.timeoutId){bm.timeoutId.cancel();}if(bm.containerOpen===M){bm.isAutoOpen=ah;}bm.timeoutId=this.Y.later(bm.queryDelay,this,this.sendQuery);if(bm.containerOpen){bm.lastVisibleItem=this.numberOfVisibleItems-1;}}else{bq.set(K,"<p>"+bn.getString("STR.MASTHEAD.NO_SUGGESTION")+"</p>");if(bm.containerOpen){this.closeDropdown();}}}this.lastQueryLength=bo;}this.moduleapi.broadcast(aT,br);break;}}},manualOpenDropdown:function(){var bk=this.saConfig;if(bk.enabled===ah){if(bk.containerOpen===M){if(this.searchQuery.length>bk.minQueryLength){bk.isManualOpen=true;this.sendQuery();}else{this.resetSA();this.openDropdown();}}else{if(this.suggestions){this.moveSelectionDown();}}}else{this.resetSA();this.openDropdown();}},toggleSA:function(bp){var bq=this.instrumentation,bo=this.formData[this.currentTab],bk="yahoo.com",bn=new Date(),bm,bl;if(bp===ah){bm=au;bl="on";}else{bm=a4;bl="off";}bq.fireUltBeacon(bo.bcnOnOff);this.Y.Cookie.set(u,bm,{expires:bn.setDate(bn.getDate()+120),path:"/",domain:bk});this.saConfig.enabled=bp;this.resetSA();this.closeDropdown();},handleSubmit:function(bv){bv.preventDefault();var bt=this.moduleapi,bo=this.saConfig,bn=this.secondInput,bq=this.trendData,br=this.body,bl=this.id,by,bx,bw,bp=this.textbox.get(o),bm=this.formData[this.currentTab],bu=br.one(".intlswitch"),bk,bs;bo.enabled=M;if(this.ywaTrackingEnabled&&YWA!==null){this.ywaObject=YWA;}if(this.ywaTrackingEnabled&&this.ywaObject!==aA){bs=this.moduleapi.getContextData("ywaProjectId")+"";this.YWATracker=this.ywaObject.getTracker(bs);this.Y.later(x,this,function(){if(this.YWATracker!==aA){this.YWATracker.setAction("INTERNAL_SEARCH");this.YWATracker.setISK(bp);this.YWATracker.setISR("100");if(bp.length===0){this.YWATracker.setISR("0");}this.YWATracker.setDocumentGroup("Search");this.YWATracker.setDocumentName("Search Results");this.YWATracker.submit();}},aA);}if(bm.emptyNavURL&&bp.length===0){bt.navigate(bm.emptyNavURL);return;}if(bq){this.beaconPreloadedSearch(this.textbox.get(o));}if(bo.selectedIndex!==-1){this.setFRCode(true);by=br.getById(bl+"-results").queryAll("li a");bx=by.item(bo.selectedIndex).get(N);if(bq){this.Y.later(x,this,function(){this.moduleapi.navigate(bx);},bx);}else{bt.navigate(bx);}}else{this.setFRCode(false);if(bn&&(bn.get(o)===bt.getString("STR.MASTHEAD.LOCAL.HELP2")||bn.get(o)===bt.getString("STR.MASTHEAD.JOBS.HELP2"))){bn.set(o,"");}if(this.useIntlToggle){bk=bu.getById(bl+P);if(bk&&bk.get(g)){this.createHiddenInputFieldForTab("fl","1");}}else{if(this.useLangFilter){bw=br.getById(bl+"-r-intl");if(bw&&bw.get(g)){this.createHiddenInputFieldForTab("fl","1");this.createHiddenInputFieldForTab("vl",this.language);bw.set(o,"");}}}if(this.formData[aU]){this.prepareEbaySubmit();}if(bq){this.Y.later(x,this,function(){this.form.submit();},aA);}else{this.form.submit();}}},handleTextBlur:function(){this.aria.set(K,"<p></p>");},sendQuery:function(){if(this.moduleapi.getContextData(aY+this.currentTab+aq)){var bk=this.saConfig,bm=this.moduleapi,bo=this.searchQuery,bn=""+bo,br=bn.replace(/%20/g," "),bq=this.currentTab,bl=bk.cachedResults[bq][br],bp;if(typeof bl==="object"){bk.numResults=bl.length;this.populateList(bl);if(bo.length>bk.minQueryLength&&bk.numResults>0||bk.isManualOpen){this.openDropdown();}}else{if(bk.delayedRequests<aL){bn=encodeURIComponent(bn.replace(/"/g,""));switch(bq){case ag:bp=bm.getContextData("saData").imgGossipUrl;break;case aE:case be:bp=bm.getContextData("saData").webGossipUrl;break;}if(bn.length>0){bk.abortId=this.Y.Get.script(bp+bn,{timeout:1000,onTimeout:this.Y.bind(this.increaseDelayedRequests,this)});}}}this.lastSearchQuery=""+bo;}},increaseDelayedRequests:function(){this.saConfig.delayedRequests++;},handleSearch:function(bk){var bm=[],bl=this.saConfig,bn=this.useFxjsonp?bk[1].length:bn=bk.r.length;bl.numResults=bn;bm=this.formatResults(bk);if(this.useFxjsonp){bl.cachedResults[this.currentTab][bk[0]]=bm;}else{bl.cachedResults[this.currentTab][bk.q]=bm;}this.populateList(bm);if(this.searchQuery.length>bl.minQueryLength&&bn>0){this.openDropdown();}},populateList:function(bH){var bo=this.Y.DOM,bE=this.id,bq=this.moduleapi,bl=this.saConfig,bK=this.formData,bL=this.currentTab,bP=bK[bL],bs=this.aria,bA=this.body,bI=bo.byId(bE+"-sayt"),bC=bH.length,bn=bq.getContextData("frCode"),bz=bq.getContextData("typeCode"),bO=bz?"type="+bz+"&":"",bw="",bM,bm,bv="",bQ,bk="",bG,by,bp,bF="",bJ=this.language,bD=bJ?"&fl=1":"",br=/<\S[^><]*>/g,bN=this.useIntlToggle,bx=this.useIntlSwitch,bt=bN?bA.getById(bE+P):aA,bB=bN?bA.getById(bE+am):aA,bu=bx?bA.getById(bE+"-r-intl"):aA;if(bC>0){bs.set(K,"<p>"+bq.getString("STR.MASTHEAD.HAS_SUGGESTION")+"</p>");if(!bI){this.resetHood();bI=bo.byId(bE+"-sayt");}bI.innerHTML=bq.getContextData("HTML_RESULTSLIST");bQ=document.getElementById(bE+"-results");for(bM=0;bM<bC;bM++){if(bN){bv=(bB&&bB.get(g))?"&"+bB.get(aI)+"="+bB.get(o):"";bv+=(bt&&bt.get(g))?"&fl=1&"+bt.get(aI)+"="+bt.get(o):"";}else{if(bx){if(bu&&bu.get(g)){if(!this.useLangFilter){bF=bu.get(o);}else{bk="&vl="+bJ;}bv="&"+bu.get(aI)+"="+bF+bD+bk;}}}if(bL===be&&bP.fp_ip&&bP.vc){bv="&fp_ip="+bP.fp_ip;if(!bm){bm=bA.getById(bE+"-r-web");if(!bm){bm=bA.getById(bE+am);}}if(bm&&((bm.getAttribute("type")==="radio"&&!bm.get(g))||(bm.getAttribute("type")==="checkbox")&&bm.get(g))){bv+="&vc="+bP.vc;}}if(this.useFxjsonp){bw="?fr="+bn+"-s&toggle=1&"+bO+"cop=mss&ei=UTF8"+bv+"&p="+encodeURIComponent(bH[bM].replace(br,""));bQ.innerHTML+=bq.getContextData("HTML_RESULTSITEM");bG=bQ.lastChild.firstChild;bG.href=bP.yltClickSuggestion+bw;bG.innerHTML=bH[bM];}else{by=bH[bM].formattedResults;bw="?fr="+bn+"-s&toggle=1&"+bO+"cop=mss&ei=UTF8"+bv+"&p="+encodeURIComponent(by.replace(br,""));bQ.innerHTML+=bq.getContextData("HTML_RESULTSITEM");bp=bQ.lastChild;bG=bp.firstChild;bG.href=bP.yltClickSuggestion+bw;bG.innerHTML=by;}}if(bl.numResults>this.numberOfVisibleItems){bI.innerHTML+=bq.getContextData("HTML_RESULTS_SCROLLARROWS");}this.suggestions=bA.getById(bE+"-results").queryAll("li a");if(this.Y.UA.ie===6){this.syncDropdown();}this.hood.on(bg,this.handleMouseover,this);}else{if(this.suggestions||!this.saWindow.one("ul")){this.resetSA();this.closeDropdown();bs.set(K,"<p>"+bq.getString("STR.MASTHEAD.NO_SUGGESTION")+"</p>");}this.suggestions=aA;}},formatResults:function(bq){var bA=this.saConfig.normalizationRules,br,bz,bu,bp=bA.length,bo,bs,bn,bm,bl,bv,by=[],bt,bw,bk,bx;if(this.useFxjsonp){bz=this.Y.Lang.trim(this.normalize(bq[0].toUpperCase()));bu=bq[1].length;}else{br=bq.r;bz=this.Y.Lang.trim(this.normalize(bq.q));bu=br.length;}bz=bz.replace(/\(+/g,"").replace(/\)+/g,"").replace(/\{+/g,"").replace(/\}+/g,"").replace(/\[+/g,"").replace(/\]+/g,"").replace(/\\+/g,"");bm=bz.split("");bo=bm.length-1;while(bo-->0){bt=bm[bo+1];switch(bm[bo]){case"A":if(bm[bo+1]==="E"){bm[bo]="AE";}break;case"O":if(bm[bo+1]==="E"){bm[bo]="OE";}break;case"U":if(bm[bo+1]==="E"){bm[bo]="UE";}break;case"T":if(bm[bo+1]==="H"){bm[bo]="TH";}break;case"S":if(bm[bo+1]==="S"){bm[bo]="SS";}break;default:break;}if(bm[bo].length>1){bm.splice(bo+1,1);}}bs=bm.length;while(bs-->0){while(bp-->0){if(bm[bs]===bA[bp][0]){bm[bs]="("+bA[bp][1]+")";}}bp=bA.length;}bl="("+bm.join("")+")";bl=bl.replace(/(\$|\^|\*|\+|\?|\\|\[|\]\{|\}\|\|)/g,"\\$1");bv=new RegExp(bl,"i");for(bn=0;bn<bu;bn++){bx=this.useFxjsonp?bq[1][bn]:br[bn][0];bk=(bv)?bx.replace(bv,"<strong>$1</strong>"):bq[1][1];if(this.useFxjsonp){by[bn]=bk;}else{bw=br[bn][3];by[bn]={formattedResults:bk,suid:bw};}}return by;},normalize:function(bk){var bm=this.saConfig.normalizationRules,bl=bm.length-1;while(bl--){bk=bk.replace(new RegExp(bm[bl][1],"g"),bm[bl][0]);}return bk;},setFRCode:function(bk){var bm=this.body.getById(this.id+"-frcode"),bl=this.moduleapi.getContextData("frCode");bm.set(o,bk?bl+"-s":bl);},removeYLT:function(bl){var bk=bl.lastIndexOf("http");return bl.substr(bk,bl.length);},saveSetting:function(bl,bm){var bk={type:"module",moduleId:this.id,args:{_action:"save",_subAction:bl,value:bm}},bn={success:function(bp,bo){},failure:function(bp,bo){},scope:this};this.moduleapi.makeRequest(bk,bn);},onmessage:function(bm,bl,bo){var br=this.body,bp=this.secondInput,bs=bo?bo.displayName:aA,bt,bn,bq,bk;if(bm===E&&bs){this.defLoc=bs;if(bp){bp.set(o,bs);}bt=br.getById(this.id+"-weather");if(bt){bn=bt.next();if(bn){bn.set(K,bs.substring(0,bs.indexOf(",")));}}}else{if(bm.substr(0,5)==="/user"){bq=bm.substr(bm.lastIndexOf("/")+1);bk=br.getById(this.id+"-"+bq);if(bk){bk.set(K,bo.data);bk.removeClass(aN);}}else{if(bm===a8){this.textbox.focus();this.textbox.set(o,bo);}else{if(bm===aX){this.closeDropdown(true);}}}}},getEms:function(bl){var bk,bm,bn=this.Y;bk=bl.appendChild(document.createElement("div"));bk.setStyle("height","1em");bk.setStyle("width","1em");bm=bn.DOM.region(bn.Node.getDOMNode(bk));bk.remove();return bm;},handleFFDoubleByte:function(){this.handleKeyUpObject=this.Y.later(500,this,this.handleFFDoubleByteKeyUp,aA,ah);},handleFFDoubleByteKeyUp:function(){var bk,bl=this.currentTab;this.searchQuery=this.textbox.get(o);if(this.searchQuery!=this.lastSearchQuery){bk=this.saConfig;if(bl===be||bl===ag||bl===aE){bk.timeoutId=this.Y.later(bk.queryDelay,this,this.sendQuery);}}this.handleKeyUp();},clearFFDoubleByte:function(){if(this.handleKeyUpObject){this.handleKeyUpObject.cancel();}this.handleKeyUpObject=aA;},createHiddenInputFieldForTab:function(bl,bn){var bm=this.body.getById(this.id+"-p"),bk=bm.get(ak),bo=bk.create("<input type='hidden'>");if(bl&&bn){bo.setAttribute(aI,bl);bo.setAttribute(o,bn);}return bk.insertBefore(bo,bm);},removeYNode:function(bk){if(bk){bk.get(ak).removeChild(bk);}},removeHiddenInputFields:function(){var bk,bl=0,bm=this.hiddenInputNodes;if(bm){bl=bm.length;for(bk=bl-1;bk>=0;bk--){this.removeYNode(bm[bk]);bm[bk]=aA;}}},disableHiddenInputField:function(bl){var bk=this.body.getById(bl);if(bk){bk.set(L,ah);}},enableIp2ccParameters:function(){var bo=this.id,bk=this.body,bl=bk.getById(bo+"-r-web"),bn=bk.getById(bo+"-vc"),bm=bk.getById(bo+"-fp-ip");if(!bl){bl=bk.getById(bo+am);}if(bl&&((bl.getAttribute("type")==="radio"&&!bl.get(g))||(bl.getAttribute("type")==="checkbox")&&bl.get(g))&&bn){bn.set(L,M);}else{if(bn){bn.set(L,ah);}}bm.set(L,M);},updateLandingPage:function(){var bk,bl,bm,bn=this.formData[this.currentTab];if(bn.noQueryURL){bl=this.form;bm=bl.getAttribute(c);bk=this.extractURL(bm);if(this.searchQuery.length===0){bm=bm.replace(bk,bn.noQueryURL);}else{bm=bm.replace(bk,this.extractURL(bn.action));}bl.setAttribute(c,bm);}},extractURL:function(bl){var bm,bk=aA;if(bl){bm=bl.indexOf("http://");if(bm===-1){bm=0;}bk=bl.substr(bm,bl.length);}return bk;},prepareEbaySubmit:function(){var bm,bl=this.textbox,bn=this.currentTab,bk=this.ebayInputField;if(bn===aU){bm=this.Y.substitute(this.formData[bn].mpreValue,{"0":bl.get(o)});if(!bk){this.ebayInputField=this.createHiddenInputFieldForTab("mpre",bm);}else{bk.set(L,M);bk.set(o,bm);}this.fireEbayBeacon();}else{if(bk){bk.set(L,ah);}}},fireEbayBeacon:function(){var bk=this.formData[aU],bl={A_rd:bk.rdPath,_E:"rd",_S:bk.spaceId,_u:bk.scurl};this.instrumentation.fireUltBeacon(bl);},isStringInArray:function(bm,bn){var bl,bo,bk=M;if(bm&&bn){bl=bn.length;bo=bm.toLowerCase();while(bl--){if(bo===bn[bl].text.toLowerCase()){bk=ah;break;}}}return bk;},isArrayStringInString:function(bm,bn){var bl,bo,bk=M;if(bm&&bn){bl=bn.length;bo=bm.toLowerCase();while(bl--){if(bo.indexOf(bn[bl].text.toLowerCase())>-1){bk=ah;break;}}}return bk;},beaconPreloadedSearch:function(bl,bo){var bn={slk:"sa_link",pos:1,own:"Y",ld:0,itc:0},bk=this.trendData,bm=this.hood.hasClass(a);if(bm){if(this.isStringInArray(bl,bk)){bn.sec=ab;bn.ltxt=bl;}else{if(this.isArrayStringInString(bl,bk)){bn.sec=bj;bn.ltxt="sa_click";}}}else{bn.slk="btn";if(this.isStringInArray(bl,bk)){bn.sec=a1;bn.ltxt=bl;}else{if(this.isArrayStringInString(bl,bk)){bn.sec=t;bn.ltxt="srch-"+this.currentTab;}}}if(bn.sec){this.instrumentation.fireUltBeacon(bn);}}};})();(function(){var y=null,m=true,u=false,E="undefined",F="-promotion",g="-rsch1",l="ymobilizerouter",f="default",h="innerHTML",w="parentNode",A="hide-offscreen",D="hp-hidden",x="hidden",v="pageoptions",B="pageoptions-dropdown",q="pageoptions-link",e="last-active",z="y-bg-3",a="wsid",p="30345158",j="27",i="promoCode",s="hpCode",k="hpOverlay",d="randomPromo",C="rsch1Successful",n="forceSethp",c="keypress",b="data-h",r="browser",t="dayParting",o="sethpPromoShare";YModules.type_navbar={id:"",body:y,viewevents:["click"],moduleapi:y,autoHideService:y,overlay:y,pageUrl:"",instrumentationService:y,setHomepageService:y,browser:"",init:function(G){this.Y=G.getService("yui");this.id=G.getId();this.moduleapi=G;this.setHome=u;this.instrumentationService=G.getService("instrumentation");this.pageoptionsHTML=G.getString("PAGEOPTIONS.HTML");this.browser=G.getContextData(r);this.setHomepageService=G.getService("sethomepage");},onviewevent:function(I,G){var J=this.id,H=G.target;if(I===f){switch(H.get("id")){case J+"-homepage":if(this.Y.Array.indexOf(["IE","FF","WK","OP","CH"],this.browser)>-1){G.preventDefault();}this.setHomePage();break;case J+"-close-overlay":G.preventDefault();this.hideOverlay();break;case J+"-pageoptions-link":case J+"-pageoptions-arrow":G.preventDefault();this.toggleOptions();break;case J+"-mobilizer":G.preventDefault();this.setMobilizer();break;default:if(H.hasClass("theme")){G.preventDefault();if(H.get("id")&&!H.get(w).hasClass("selected")){this.selectTheme(H);}}break;}}},onviewload:function(U){var X=this.moduleapi,I=this.Y,R=this.id,O,J,Q,K,S,H,N,V,W,G,P,M,T,L;if(U===f){this.body=X.getViewNode(f);O=this.body;this.autoHideService=X.getService("autohide");W=X.getService("moduleplatform");Q=O.getById(R+F);N=X.getContextData(C);M=X.getContextData(n);H=X.getContextData(d);T=X.getContextData(t);L=X.getContextData(o);if(!N){G=X.getContextData("rsch1Suid");if(G){P=W.queryModules(function(Z){var Y=W.getModuleApi(Z);return Y?Y.getProperty("contentId")==G:false;})[0];if(P){W.stop(P);W.unregisterModule(P);}V=O.getById(G+g);if(V){V.remove();}}if(Q){S=!this.setHomepageService.isHomepageSet()&&!this.isHpWindowShade();if(M||(S&&(!H||Math.random()>L))){K=s;}else{K=i;}Q.set(h,X.getContextData(K));Q.removeClass(D);}}J=O.query("."+v);if(J){J.on(c,this.onOptionsKeyPress,this,m);this.autohideOptions=this.autoHideService.register({targets:[J],triggers:["click"],hide:I.bind(function(){this.optionsHide();},this)});}if(T==1){this.setDayParting();}}},onviewunload:function(L){var K=this.autoHideService,J=this.autohideId,I=this.autohideOptions,G=this.body,H=G.query("."+v);if(L===f){if(K){if(J){K.unregister(J);}if(I){K.unregister(I);}}if(H){H.detach(c,this.onOptionsKeyPress);}}},setMobilizer:function(){var H="100%",L=document.documentElement.clientHeight+"px",J=document.body.scrollTop||document.documentElement.scrollTop,K=document.createElement("iframe"),I="99999",G=this.moduleapi.getContextData("locale"),M=this.moduleapi.getContextData("mobilizerUrl");if(document.getElementById(l)){document.body.removeChild(document.getElementById(l));}K.src=M+"&lang="+G;K.setAttribute("id",l);K.setAttribute("name",l);K.setAttribute("allowTransparency","allowTransparency");K.setAttribute("frameborder",0);K.setAttribute("scrolling","no");K.setAttribute("width",H);K.setAttribute("height",L);K.style.position="absolute";K.style.left="0px";K.style.top=J+"px";K.style.zoom="1";K.style.zIndex=I;K.style.overflow="hidden";K.setAttribute("style","z-index:"+I+";position:absolute;top:"+J+"px;left:0px;width:"+H+";height:"+L+";");document.body.appendChild(K);if(typeof window.addEventListener!=E){window.addEventListener("message",this.closeMobilizer,u);}else{if(typeof window.attachEvent!=E){window.attachEvent("onmessage",this.closeMobilizer);}}},setDayParting:function(){var G=this.Y;G.one("html").addClass("y-day-"+this.getDayDesign());G.one("body").addClass("y-sun-"+this.getDayDesign());},getDayDesign:function(){var I=new Date(),G=I.getHours(),H,J=this.moduleapi.getContextData("dayForce");if(J!=""&&J!=y){return J;}if(G>=0&&G<6){H=4;}else{if(G>=6&&G<12){H=1;}else{if(G>=12&&G<18){H=2;}else{if(G>=18&&G<24){H=3;}else{H=2;}}}}return H;},closeMobilizer:function(G){if(G.data=="closeYMBZ"){if(document.getElementById(l)){document.body.removeChild(document.getElementById(l));}}},selectTheme:function(J){var G,K,H=this.moduleapi,I=J.get("id").split("th-")[1];G={type:"module",moduleId:this.id,args:{_container:0,_action:"show",_subAction:"theme",_theme:I}};K={success:this.handleThemeSuccess,failure:this.handelThemeFailure,argument:J,scope:this};H.makeRequest(G,K);},handleThemeSuccess:function(G,L){var K=this.Y.DOM.byId("tmp-css"),J,H,N,M,I;if(!K){return;}if(this.browser=="IE"){H=K.cloneNode(false);document.body.appendChild(H);if(H.styleSheet!==y){H.styleSheet.cssText=G.html;}else{window.location.reload();}K.parentNode.replaceChild(H,K);}else{if(K.hasChildNodes()){K.removeChild(K.firstChild);}K.appendChild(document.createTextNode(G.html));}J=this.body.getById(this.id+"-color").query(".selected");J.removeClass("selected");J=J.query("a");N=J.getStyle("backgroundPosition").split(" ");N[1]="0";J.setStyle("backgroundPosition",N[0]+" "+N[1]);M=L.get(w);N=L.getStyle("backgroundPosition").split(" ");N[1]="-15px";L.setStyle("backgroundPosition",N[0]+" "+N[1]);M.addClass("selected");I=this.moduleapi.getService("statemgr");if(I){I.update();}},handleThemeFailure:function(){},setHomePage:function(){var J,P=this.setHomepageService,L=this.moduleapi,H,M,I,K=this.body,G=this.id,O=L.getContextData(k),Q=L.getContextData("ilc"),N;if(this.browser=="IE"){if(P.setIEHomepage(Q)){I=L.getContextData(i);if(I!==""&&I!==y){J=document.getElementById(this.id+F);J.innerHTML=I;}else{M=K.getById(G+F);M.get(w).removeChild(M);}H=L.getString("PARAM.NAVBAR.IE.YES_BEACON");}else{H=L.getString("PARAM.NAVBAR.IE.NO_BEACON");}this.instrumentationService.fireUltBeacon(H);}else{if(this.Y.Array.indexOf(["FF","WK","OP","CH"],this.browser)>-1){M=K.getById(G+F);if(K.getById(G+"-set-homepage-overlay")==y){M.append(O);}this.overlay=K.getById(G+"-set-homepage-overlay");if(this.overlay){this.autohideId=this.autoHideService.register({targets:[this.overlay,M],hide:this.Y.bind(function(){this.hideOverlay();},this)});N=K.getById(G+"-sethp-ff");if(N){N.on("mousedown",this.fireFFBeacon,this);N.on("click",this.yBangClick,this);}this.overlay.removeClass(x);}}else{P.setHpCookie(Q,"1");}}},hideOverlay:function(){this.overlay.addClass(x);},fireFFBeacon:function(){var I=this.setHomepageService,H=this.moduleapi,G=H.getString("PARAM.NAVBAR.DRAG.BEACON");this.instrumentationService.fireUltBeacon(G);I.setHpCookie(H.getContextData("ilc"),"1");},isHpWindowShade:function(){var G=u,I,H=this.moduleapi.getService("statemgr");if(H){I=H.getUserPageState(a);if(I==p){G=m;H.removeUserPageState(a);}}return G;},yBangClick:function(G){G.preventDefault();},optionsShow:function(H){var J=this.id,G=this.body.getById(J+"-"+v),I=G.getById(J+"-"+B);if(!I&&this.pageoptionsHTML){G.append(this.pageoptionsHTML);I=G.getById(J+"-"+B);}I.removeClass(A);I.removeClass(x);I.addClass(B);G.addClass(e);G.getById(J+"-"+q).addClass(z);this.instrumentationService.fireUltBeacon(G.getAttribute(b));},onOptionsKeyPress:function(G){if(G.keyCode&&G.keyCode==j){this.optionsHide();}},optionsHide:function(){var I=this.id,G=this.body.getById(I+"-"+v),H;if(G){H=G.getById(I+"-"+B);if(H){H.removeClass(B);H.addClass(x);H.addClass(A);G.removeClass(e);G.getById(I+"-"+q).removeClass(z);}}},toggleOptions:function(){var G=this.body.getById(this.id+"-"+B);if(G&&!G.hasClass(x)){this.optionsHide();}else{this.optionsShow();}}};})();(function(){var d={},e,c,b="ulm:defaultlocation",a;YModules.type_batchload={init:function(f){c=f;e=c.getService("yui");a=c.getService("moduleplatform");a.subscribe("ready",e.bind(function(){if(this.collectChannelNames()){this.sendChannelsRequest();}},this));c.listen(b);},onmessage:function(f,h,g){if(f==b){this.sendChannelsRequest();}},collectChannelNames:function(){var f=false;a.queryModules(function(m){var l=a.getModuleApi(m),j=l.getProperty("pachannel"),h=l.getProperty("channels"),k,g;if(j){d[j]=m;f=true;}if(h){f=true;for(k=0,g=h.length;k<g;k++){d[h[k]]=m;}}});return f;},sendChannelsRequest:function(){var f=e.Object.keys(d),g={type:"module",moduleId:c.getId(),args:{_action:"show",_subAction:"get_vitals",channels:f}},h={success:this.handleResponseSuccess,failure:this.handleResponseFailure,scope:this};if(f.length){a.getService("arcade_transport").makeRequest(g,h);}},handleResponseSuccess:function(f){var g=c.getContextData("channels");e.Object.each(g,function(i,h){i.originId=d[h];c.broadcast(h,i);});},handleResponseFailure:function(f){}};})();var mYepHandler;(function(){var d="onPlayerReady",c="onPlaybackStart",b="vid-sh",f="close",e="innerHTML",a=42;YModules.type_multimedia={body:null,editBody:null,id:"",moduleapi:null,viewevents:["click"],inlinePlayer:[],yep:null,clipId:"",isInteractiveVideoLink:false,init:function(g){this.Y=g.getService("yui");this.id=g.getId();this.moduleapi=g;this.instrumentation=g.getService("instrumentation");mYepHandler=this.Y.bind(function(i,j){var h=this.yep;switch(i){case d:this.yep=this.getYEP();break;case c:if(h){this.clipId=h.getCurrentVideo().mediaId;this.handlePlayerHeader();this.replaceTitle(h.getCurrentVideo().title);}break;}},this);},onviewload:function(i){var h=this.moduleapi,g;if(i==="default"){this.body=h.getViewNode(i);g=this.body;if(g.one(".videos")){this.isInteractiveVideoLink=(g.one("ul.pop-up"))?true:(g.one(".mmplayer"))?true:false;this.inlinePlayer=h.getContextData("inlinePlayer");}}else{if(i==="edit"){this.editBody=h.getViewNode(i);}}},onviewunload:function(g){if(g==="default"){this.body=null;}else{if(g==="edit"){this.editBody=null;}}},onviewevent:function(j,i){var g=i.target,h;if(j==="default"){if(true===this.isInteractiveVideoLink){h=g.ancestor("a.video")||g;if(h.hasClass("play-vid")){i.preventDefault();i.stopPropagation();this.playVideo(h);}else{if(h.hasClass("video")){i.preventDefault();i.stopPropagation();this.openPopup(h);}else{if(h.hasClass("close-vid")){i.preventDefault();this.closeVideo(h);}}}}}else{if(j==="edit"){}}},openPopup:function(l){var k=l.get("className").match(/\bsize([\w\-]+)/)[1].split("x"),j=k[0],g=k[1],i="width="+j+",height="+g,h;h=window.open(l.get("href"),"name",i);h.focus();},playVideo:function(p){var i=this.body.one(".mmplayer"),k=p.getAttribute("data-clipid"),g=p.getAttribute("data-channelnodeid"),n=p.getAttribute("data-shareurl"),h=this.inlinePlayer,o=p.one("span.title"),q=o.get(e),m="",l="",j=this.Y.Lang;this.hidePlayerHeader=false;this.clipId=k;m=j.substitute(h.headerHTML,{_title_:q});l=j.substitute(h.objectHTML,{_clipId_:k,_channelNodeId_:g,_shareUrl_:n});i.set(e,m+l);i.removeClass("hide-vid");i.on("mouseover",this.handlePlayerHeader,this);},handlePlayerHeader:function(g){var h=this.body.one(".mmplayer .player-header");h.setStyle("top","0");this.hidePlayerHeader=(this.hidePlayerHeader)?false:true;if(this.hidePlayerHeader){this.Y.later(4000,this,function(i){h=this.body.one(".mmplayer .player-header");if(this.hidePlayerHeader&&h){h.setStyle("top","-24px");}this.hidePlayerHeader=false;});}},replaceTitle:function(h){var g=this.body.one(".mmplayer .video-title");h=h.length>a?h.substr(0,a)+"...":h;g.set(e,h);},closeVideo:function(){var h=this.body.one(".mmplayer"),g=this.yep;if(g){try{g.stopMedia();}catch(i){}this.fireBeacon(b,f,this.clipId);this.yep=null;}h.addClass("hide-vid");h.set(e,"");},fireBeacon:function(h,g,j){var i={sec:h,slk:g,asset:j};this.instrumentation.fireUltBeacon(i,this.ylt);},getYEP:function(){return(document.swfmmvideo||document.getElementById("swfmmvideo"));}};})();(function(){var b="innerHTML",a="sel-pane";YModules.type_contentcarousel={instance_service:function(e,f,d){var c={name:"carousel_assistant_"+e,getService:function(h,l){var k="next",g="prev",j="jump",i;i={navigate:function(m,n){switch(m){case k:f.moveBy(null,1);break;case g:f.moveBy(null,-1);break;case j:f.gotoPane(n);break;default:break;}},currentPane:function(){return f.getCurrentIndex();}};return(!l||h.getModuleApi(l).getProperty("trusted"))?i:null;}};this.platform.registerService(c);},id:null,platform:null,moduleapi:null,body:null,viewevents:["click"],position:null,carousel:null,Y:null,panelTitles:null,panelPageCount:null,beacons:null,direction:0,loadedPanes:null,loading:null,init:function(c){this.moduleapi=c;this.Y=this.moduleapi.getService("yui");this.id=c.getId();this.platform=c.getService("moduleplatform");},onviewload:function(r){var y=this.moduleapi,x=y.getContextData("metadata"),w=y.getContextData("beacon"),h=y.getContextData("nav"),f=y.getContextData("pos"),p=y.getContextData("emptyitem"),u=0,s=0,g=0,e={},d,v,c,l,n,t,o=null,k=null,m=null,q=null;n=y.getViewNode("default");this.body=n;this.position=f;this.nav=h;this.loading=y.getContextData("loading");this.failureMarkup=y.getContextData("failure_markup");if(x&&x.length>1){e=y.getService("carousel");d=n.getById(this.id+"-carousel");c=d.query(".y-carousel-list");g=x.length;this.beacons=[];this.beacons[0]=w;o=[];k=[];m=[];q=[];for(u=0,s=g;u<s;u++){o[u]=x[u].moduleId;k[u]=x[u].scid;if(x[u].carouselPackageTitleHtml){m[u]=x[u].carouselPackageTitleHtml;}if(x[u].carouselPackagePageCount){q[u]=x[u].carouselPackagePageCount;}}this.paneIds=o;this.scids=k;this.panelTitles=m;this.panelPageCount=q;this.metadata=x;for(u=1;u<g;u++){l=c.create(p);c.appendChild(l);}v={animDuration:1,maxItems:g,autoCreateMissingItems:true,loop:1};t=e.create(d.query(".y-carousel"),v);if(this.id=="p_17335519"){this.instance_service(this.position,t,this.platform);}else{this.instance_service(this.position,t,this.platform);}this.carousel=t;this.createNav(d.one(".y-nav"));this.enableUpdateViaAjax();t.subscribe("beforescroll",this.beforeScroll,this);t.subscribe("scroll",this.afterScroll,this);t.subscribe("beforescroll",this.beaconOnStoredContent,this);}this.loadModuleData();},onviewevent:function(i,h){var g=h.target,c=g.get("tagName"),f=null,d=null;if(i==="default"){if(g.hasClass("prev")||g.ancestor("a.prev")){h.preventDefault();this.direction=0;this.carousel.previous();this.moduleapi.broadcast("interactive");}else{if(g.hasClass("next")||g.ancestor("a.next")){h.preventDefault();this.direction=1;this.carousel.next();this.moduleapi.broadcast("interactive");}}if("A"==c||"BUTTON"==c||g.ancestor("a, button")){this.moduleapi.broadcast("cc:interact");}f=(g.hasClass("video"))?g:g.ancestor("a.video");if(f){h.preventDefault();d=window.open(f.get("href"),"playerWindow","width=793,height=666,scrollbars=no");d.focus();}}},addNewHeading:function(){var f=this.panelTitles[this.carousel.getCurrentIndex()],d=this.body.query(".title-wrapper"),c=this.panelPageCount[this.carousel.getCurrentIndex()],e=this.body.query(".y-nav-count");if(f&&d){d.set(b,f);}if(c&&e){e.set(b,c);}},beforeScroll:function(d){var c=this.carousel.getItemNode(d.toIndex);c.addClass(a);this.addNewHeading();},afterScroll:function(d){var c=this.carousel.getItemNode(d.fromIndex);c.removeClass(a);},storeNewHeading:function(d){var c=this.moduleapi.getContextData("thistitle");if(c){this.panelTitles[d]=c;this.addNewHeading();}},loadModuleData:function(){var d=this.moduleapi.getContextData("mods"),c=this.platform;if(d){this.Y.Array.each(d,function(e){c.registerModule(e);c.start(e.props.id,true,true);});}},beaconOnStoredContent:function(){var d=this.carousel.getCurrentIndex(),c=this.beacons;if(c&&c[d]){this.moduleapi.getService("instrumentation").fireBeacon(c[d][this.direction]);}},beaconOnNewContent:function(f,e){var d=this.moduleapi,c=null;if(this.beacons&&!this.beacons[f]){c=d.getContextData("beacon");this.beacons[f]=c;d.getService("instrumentation").fireBeacon(this.beacons[f][e]);}},createNav:function(f){var e=f.create(this.nav),d=e.query(".prev"),c=e.query(".next");f.replace(e);this.btnPrev=d;this.btnNext=c;},enableUpdateViaAjax:function(){this.ajaxEnabled=true;this.loadedPanes=[];this.loadedPanes[0]=true;this.carousel.subscribe("beforescroll",this.updateBlank,this);this.carousel.subscribe("scroll",this.updateViaAjax,this);},updateBlank:function(c){if(!this.loadedPanes[c.toIndex]){this.carousel.getItemNode(c.toIndex).set(b,this.loading);}},updateViaAjax:function(d){var c,f;if(!this.loadedPanes[d.toIndex]){c={type:"module",moduleId:this.id,args:{_action:"show",_subAction:"request_single_pane",_container:1,scid:this.scids[d.toIndex],paneId:this.paneIds[d.toIndex],cpos:d.toIndex+1}};f={success:this.appendAjaxContent,failure:this.showFailure,scope:this,argument:{index:d.toIndex,direction:this.direction}};this.platform.getService("transport").makeRequest(c,f);}},showFailure:function(h,d){var c=d.index,f=this.carousel.getItemNode(c),g=this.failureMarkup,e;if(h.html){g=h.html;}f.set(b,g);e=f.one(".y-panel");if(e){f.set(b,e.get(b));}},appendAjaxContent:function(g,d){var c=d.index,e=this.carousel.getItemNode(c),f=d.direction;this.loadedPanes[c]=true;e.set(b,g.html);this.storeNewHeading(c);this.beaconOnNewContent(c,f);this.loadModuleData();}};})();YModules.type_contentcarouselslideshow1={Y:null,moduleapi:null,PLactive:false,PLcount:0,PLimagesLoaded:0,PLloadedImages:[],nextText:"",prevText:"",init:function(a){this.Y=a.getService("yui");this.api=a;this.platform=a.getService("moduleplatform");},onviewload:function(d){var a=this.platform,b=this.api.getContextData("slideshow"),c=this.api.getContextData("mods");if("default"===d){this.body=this.api.getViewNode("default").query(".typeslideshow");if(this.body){if(c){this.Y.Array.each(c,function(e){a.registerModule(e);a.start(e.props.id,true,true);});}this.prevText=this.api.getString("STR.CONTENTCAROUSEL.PREV");this.nextText=this.api.getString("STR.CONTENTCAROUSEL.NEXT");this.data=b.data;this.stack=b.stack;this.config=b;this.mainStackPos=0;this.mainNode=this.body.query(".main");this.thumbStackPos=[1,2];this.thumbNodeArray=this.body.queryAll(".thumb");this.thumbNodeArray.item(0).queryAll("a.video").removeClass("video");this.thumbNodeArray.item(1).queryAll("a.video").removeClass("video");this.thumbNodeArray.item(0).on("click",function(f){this.updateSlideshow(f,0);},this,true);this.thumbNodeArray.item(1).on("click",function(f){this.updateSlideshow(f,1);},this,true);}}},updateSlideshow:function(a,b){a.preventDefault();if(this.PLactive===true){return;}this.stack.push(this.mainStackPos);this.mainStackPos=this.thumbStackPos[b];this.thumbStackPos[b]=this.stack.shift();this.loadImages([this.data[this.mainStackPos].mainsrc,this.data[this.thumbStackPos[0]].thumbsrc,this.data[this.thumbStackPos[1]].thumbsrc]);},updateSlideshowImages:function(){var f=this.data,l=this.mainStackPos,b=this.mainNode,o=this.thumbStackPos,g=this.thumbNodeArray,h=null,c="",m="",k="",p="",n=0,a=0,e=0,d=0;if(f[l].mainsrc){p=f[l];k=b.queryAll("a");k.item(0).set("href",p.imagesrc);k.item(1).set("href",p.linksrc);if(p.linktype&&p.linktype==9){k.item(0).addClass("video");k.item(1).addClass("video");}else{k.item(0).removeClass("video");k.item(1).removeClass("video");}h=k.item(1);h.set("innerHTML",p.linktxt);c=b.query("img");n=c.get("height");a=c.get("width");k.item(0).replaceChild(this.PLloadedImages[0],c);c=this.mainNode.query("img");c.set("height",n);c.set("width",a);c.set("alt",p.imagetxt);}for(e=0,d=o.length;e<d;e++){if(f[o[e]].thumbsrc){p=f[o[e]];m=g.item(e);k=m.queryAll("a");k.item(1).set("innerHTML",p.linktxt);c=m.query("img");n=c.get("height");a=c.get("width");k.item(0).replaceChild(this.PLloadedImages[e+1],c);c=m.query("img");c.set("height",n);c.set("width",a);c.addClass("y-ln-1");if(e===0){c.set("alt",this.prevText);}else{c.set("alt",this.nextText);}}}},loadImages:function(a){this.PLactive=true;this.PLcount=a.length;var c=0,b=0;for(c=0,b=a.length;c<b;c++){this.PLloadedImages[c]=new Image();this.PLloadedImages[c].onload=this.Y.bind(this.checkFinished,this);this.PLloadedImages[c].src=a[c];}},checkFinished:function(){this.PLimagesLoaded++;if(this.PLimagesLoaded==this.PLcount){this.fireFinish();}},fireFinish:function(){this.updateSlideshowImages();this.PLloadedImages=[];this.PLimagesLoaded=0;this.PLactive=false;}};YModules.type_contentcarouselshopping1={Y:null,moduleapi:null,PLactive:false,PLcount:0,PLimagesLoaded:0,PLloadedImages:[],nextText:"",prevText:"",nTimer:null,ts:null,clock:null,buttons:null,init:function(a){this.Y=a.getService("yui");this.api=a;},onviewload:function(a){if("default"===a){this.body=this.api.getViewNode("default").one(".typeshopping1");this.getRemainTime();this.clock=[];if(this.body){this.clock=this.body.all(".n0");this.startTimer();}}},onviewunload:function(a){this.ts=0;this.body=null;this.clock=[];this.nTimer=null;},getRemainTime:function(){this.ts=this.body.one(".hide-offscreen").get("innerHTML");},startTimer:function(){var c=this,b=c.body.one(".todbuy"),d="http://l.yimg.com/ne/home/2009/b_todend.gif",a=function(){c.ts-=1;if(c.ts===0){clearInterval(c.nTimer);b.setAttribute("src",d);}c.drawTimer();};c.nTimer=setInterval(a,1000);},drawTimer:function(){var b=parseInt(this.ts/3600,10),d=parseInt((this.ts%3600)/60,10),e=parseInt((this.ts%3600)%60,10),a=[],c=0;if(b<10){a[0]="0";a[1]=b;}else{a[0]=b.toString().substring(0,1);a[1]=b.toString().substring(1,2);}if(d<10){a[2]="0";a[3]=d;}else{a[2]=d.toString().substring(0,1);a[3]=d.toString().substring(1,2);}if(e<10){a[4]="0";a[5]=e;}else{a[4]=e.toString().substring(0,1);a[5]=e.toString().substring(1,2);}for(c=0;c<this.clock.size();c++){this.clock.item(c).set("className","n"+a[c]);}}};(function(){var g="submit",a=".quotes-input",f="value",e=null,h="focus",b="blur",c="value",i="default_quote_text",d="interactive";YModules.type_marketindices={id:"",defaultBody:e,moduleapi:e,viewevents:["click"],quotesForm:e,quotesInput:e,defaultQuoteText:e,init:function(j){this.id=j.getId();this.moduleapi=j;this.Y=j.getService("yui");},onviewload:function(m){var j,k,l=this.moduleapi;this.defaultBody=j=l.getViewNode("default");this.defaultQuoteText=l.getContextData(i);this.quotesForm=j.query(".quotes-form");this.quotesInput=k=j.query(a);this.handleQuotesInputHighlight();this.quotesForm.on(g,this.onquoteSubmit,this);k.on(h,this.handleQuotesInputFocus,this);k.on(b,this.handleQuotesInputFocus,this);if(j.one(".stck1 .empty-fallback")){j.one(".get-quote").setStyle("marginLeft","0");}},handleQuotesInputHighlight:function(){var k=this.quotesInput,j=this.Y.Lang.trim(k.get(c));if(j&&this.defaultQuoteText!==j){k.removeClass("y-ln-1");k.removeClass("y-txt-input");k.addClass("y-ln-1");}},handleQuotesInputFocus:function(m){var l=m.target,k=this.Y.Lang.trim(l.get(c)),j=this.moduleapi;m.preventDefault();if(h===m.type){if(k&&this.defaultQuoteText===k){l.set(c,"");}l.removeClass("y-ln-1");l.removeClass("y-txt-input");l.addClass("y-ln-1");j.broadcast(d);}else{if(b===m.type){if(""===k){l.removeClass("y-ln-1");l.addClass("y-txt-input");l.addClass("y-ln-1");l.set(c,this.defaultQuoteText);}}}},onquoteSubmit:function(k){var j=this.quotesInput.get(f);if((this.defaultQuoteText===j)||(""===j)){k.preventDefault();}},onviewunload:function(j){if(j=="default"){this.quotesForm.detach(g,this.onquoteSubmit);}}};})();(function(){var s=null,j=true,o=false,l=47,q="-tuc",e="-nickname-p2",b="default",c="offsetWidth",f="width",p="hidden",a="tuc-dropdown",g="tuc-nickname",h=".name",i="active",t="y-bg-3",r="y-hdr-link",n="y-txt-1",d="27",k="px",m="rtl";YModules.type_tuc={id:"",body:s,viewevents:["click"],moduleapi:s,autoHideService:s,autohideTuc:s,tucDropdown:s,init:function(u){this.Y=u.getService("yui");this.id=u.getId();this.moduleapi=u;},onviewevent:function(w,u){var x=this.id,v=u.target;if(w===b){switch(v.get("id")){case x+"-tuc-nickname":case x+"-nickname-p1":case x+"-nickname-p2":case x+"-tuc-nickname-arrow":u.preventDefault();this.toggleTuc();break;default:break;}}},onviewload:function(x){var w=this.moduleapi,y=this.id,v,u;if(x===b){this.body=w.getViewNode(b);this.autoHideService=w.getService("autohide");v=this.body;this.tucDropdown=v.getById(y+"-"+a);u=v.query(h);this.autohideTuc=this.attachEvents(u,{hide:this.tucHide,keyup:this.tucKeyUp});}},onviewunload:function(w){var v=this.body,u=v.query(h);if(w===b){this.detachEvents(u,{hide:this.tucHide,keyup:this.tucKeyUp});this.tucDropdown=s;this.autohideTuc=s;this.autoHideService=s;}},attachEvents:function(x,w){var u,v;if(x){for(v in w){if(w[v]){switch(v){case"hide":u=this.autoHideService.register({targets:[x],hide:this.Y.bind(w[v],this,o)});break;case"keyup":x.on(v,w[v],this,j);break;default:break;}}}}return u;},detachEvents:function(w,v){var x=this.autoHideService,u;if(w){for(u in v){if(v[u]){switch(u){case"hide":if(x){x.unregister(v[u]);}break;case"keyup":w.detach(u,v[u]);break;default:break;}}}}},tucShow:function(){var z=this.id,v=this.body,u=v.getById(z+q),y=this.tucDropdown,x=u.getById(z+"-"+g),w=u.getById(z+e);y.removeClass(p);u.addClass(i);x.addClass(t);w.replaceClass(r,n);this.positionUserCard();},tucHide:function(){var z=this.id,v=this.body,u=v.getById(z+q),y=this.tucDropdown,x=u.getById(z+"-"+g),w=u.getById(z+e);y.addClass(p);u.removeClass(i);x.removeClass(t);w.replaceClass(n,r);},toggleTuc:function(){var u=this.body.getById(this.id+q);if(u&&u.hasClass(i)){this.tucHide();}else{this.tucShow();}},tucKeyUp:function(u){if(u.keyCode&&u.keyCode==d){this.tucHide();}},positionUserCard:function(){var x=this.Y.UA,w=this.body,z=this.moduleapi.getViewDirection("default"),v=w.getById(this.id+"-"+g),C=v.getX(),B=v.get(c),u=this.tucDropdown,y=u.get(c),A=B+l;if(A>y){u.setStyle(f,A+k);}A=u.get(c);if(x.ie&&x.ie<8){if(z==m){u.setX(C+B-A);}else{u.setX(C);}}}};})();YUI.add("pautil",function(c){var h=c.ModulePlatform,e="MPServices",a="PaListProvider",i=c.DOM,f=c.Node,b=c.Selector,d,g={};d={fireExternalBeacon:function(j){if(j&&j.length>0){var k=new Image();k.id=c.guid();g[k.id]=k;k.onload=k.onerror=function(){delete g[this.id];};k.src=j;}},focusThisNode:function(j){var l;try{l=j.nodeName.toLowerCase();if(l!=="a"&&l!=="button"){j.setAttribute("tabIndex","-1");}j.focus();}catch(k){}return j;},ancestor:function(k,j){return i.ancestor(k,function(l){return b.test(l,j);});},testClassName:function(l,k,j){if(i.hasClass(l,k)){return true;}else{if(j&&l!=j){j=i.ancestor(l,function(m){return(i.hasClass(m,k)||m==j);});}}return j?i.hasClass(j,k):false;},emulateTextOverflow:function(k,l,u){var v="truncated",r="innerHTML",o,n,s,w,j,q,p,t,m;if(!c.UA.gecko){return;}if(k instanceof f){k=f.getDOMNode(k);}o=b.query(l,k);n=o.length;if(n){s=o[0];t=parseFloat(window.getComputedStyle(s,null).maxWidth);q=s.cloneNode(false);q.style.cssText="position:absolute;width:auto;max-width:none;visibility:hidden;float:none;overflow:visible;";while((w=o[--n])){q[r]=w[r];j=w.parentNode;j.appendChild(q);m=u||q[r].length;if(q.offsetWidth>t&&w.getAttribute(v)!="1"){p=q[r].substring(0,m).split("");while(q.offsetWidth>t){p.pop();if(p[p.length-1]!==" "){q[r]=p.join("")+"&hellip;";}}w.setAttribute(v,"1");w[r]=q[r];}}j.removeChild(q);}else{}}};c.namespace(e);c[e][a]={name:"pautil",getService:function(l,k){var j=l.getModuleApi(k);if(j.getProperty("type")!=="pa"){return null;}return d;}};if(h){h.registerService(c[e][a]);}},"1.0");YUI.add("palist",function(d){var B=null,x=true,ab=false,b=d.ModulePlatform,F="ariaMoving",z="ariaMoveComplete",L="ariaMoveAfter",n="editInstr",K="MPServices",Z="PaListProvider",T="click",w="innerHTML",aa="interactive",ad="modid",i="mouseover",ac="mouseout",f="data-b-paq",D="ad-b-c",t="do-close",P="do-edit",G="edit",R="edit-err-bd",X="edit-load",C="edit-ok",af="pa-add-bd",A="btn-hover",e="pa-btn-loading",u="qv",ae="px",U="save",J="e",o="y",k="u",j="yahoo",m="user",Q="promo",O=0,y=d.DOM,S=d.Event,v=d.Node,I=d.Selector,l,h,q,s,a,M,H,W=0,N,g=B,E,V,p,r;function c(ag,Y){this.list=ag;this.type=Y;this.dialogHTML=V.getString(Y==j?"DIALOG":"DIALOG.FAV");this.attachHover();S.attach(T,this.onClick,ag,this);}c.prototype={addDialog:B,autohideId:B,cancelEditTimer:B,dlgErr:B,dlgOverlay:B,editIndex:B,editOriginalSibling:B,gallery:B,list:B,listOverlay:B,loadFavRequestId:B,removeRequestId:-1,sortable:B,statusRegion:B,dialogHTML:"",type:"",destroy:function(){this.destroyEdit();this.detachHover();S.detach(T,this.onClick,this.list);this.editOriginalSibling=this.list=B;--W;if(W===0){if(p){p.destroy();}g=p=B;}},destroyEdit:function(){var aj=this.addDialog,ak=this.autohideId,ag=this.gallery,ai=this.loadFavRequestId,al=this.sortable,ah=this.statusRegion,Y;if(this.type==j){Y=V.getContextData("yservices")[0].props.id;a.stop(Y);}if(V.isRequestPending(ai)){V.abortRequest(ai);}this.hideError();if(ag){ag.destroy();}if(aj){S.detach(T,this.onDialogClick,v.getDOMNode(aj.getNode()));aj.destroy();}if(ak){h.unregister(ak);}if(al){al.destroy();}if(ah&&ah.parentNode){ah.parentNode.removeChild(ah);}if(this.cancelEditTimer){this.cancelEditTimer.cancel();}this.addDialog=this.autohideId=this.cancelEditTimer=this.gallery=this.sortable=this.statusRegion=B;},getModuleCount:function(){var ah=this.list.getElementsByTagName("li").length,ag=V.getContextData("fillerBtns"),Y=V.getContextData("yfillerBtns");if(this.type==m&&ag){ah-=ag;}else{if(this.type==j&&Y){ah-=Y;}}return ah;},update:function(Y){var ah=this.list,ag=Y&&y.create(Y),ai=ah.getElementsByTagName("ol"),aj=this.sortable;if(this.type==Q){ah.style.display=ag?"":"none";}if(ag&&ai.length){ai[0].parentNode.replaceChild(ag,ai[0]);s.emulateTextOverflow(ai[0],".lbl");this.updateRemaining();if(aj){aj.sync();}}},remove:function(ag){var Y=y.byId("pa-"+ag+"-bd"),ah=this.sortable;if(Y&&y.contains(this.list,Y)){Y.parentNode.removeChild(Y);this.updateRemaining();if(ah){ah.sync();}}},updateRemaining:function(){var Y=y.byId(N+"-slots-left");if(Y){Y[w]=V.getContextData("userlist_max")-q.getUserModuleCount();}},attachHover:function(){var Y=this.list;S.attach(i,this.onListOver,Y,this);S.attach(ac,this.onListOut,Y,this);},detachHover:function(){var Y=this.list;S.detach(i,this.onListOver,Y);S.detach(ac,this.onListOut,Y);this.hideQuickView();},onClick:function(ak){var al=v.getDOMNode(ak.target),ah=v.getDOMNode(ak.currentTarget),an=this.isEditMode(),ai=s.testClassName,aj=s.ancestor,Y,am,ag;if(!E&&an&&!y.hasClass(this.list,X)){ak.preventDefault();this.showSignInError();}else{if(an&&(al.nodeName.toLowerCase()=="a"||aj(al,"a"))){ak.preventDefault();}else{if(ai(al,u,ah)){ag=aj(al,"li");Y=ag.getAttribute(f);am=ag.getAttribute(D);M.fireUltBeacon(Y);this.hideQuickView();q.openModule(ag.getAttribute(ad));s.fireExternalBeacon(am);}else{if(ai(al,"do-open",ah)){q.openModule(aj(al,"li").getAttribute(ad));}else{if(y.hasClass(al,P)||aj(al,"."+P)){d.later(15,this,this.switchToEditMode);}else{if(y.hasClass(al,"do-add-link")){this.addPromoLink(al);}else{if(y.hasClass(al,"do-rm")){this.removeApp(aj(al,"li").getAttribute(ad));}else{if(ai(al,t,ah)){this.cancelEditLater();}}}}}}}}},onDialogClick:function(aj){var ai=v.getDOMNode(aj.target),ah=v.getDOMNode(aj.currentTarget),ak=ab,ag=s.testClassName,Y=this.gallery;if(ag(ai,t,ah)){this.cancelEditLater();}else{if(y.hasClass(ai,"do-done")){ak=Y&&Y.commit(d.bind(this.cancelEditLater,this));if(!ak){this.cancelEditLater();}}else{if(ag(ai,"do-err-close",ah)||y.hasClass(ai,"pa-mod-err-cancel")||y.hasClass(ai,"pa-mod-err-ok")){this.hideError();}}}},onListOver:function(al){var ak=v.getDOMNode(al.target),Y=v.getDOMNode(al.relatedTarget),ai=ak,aj=3,ah=0,ag;while(ai&&ah++<aj){if(ai!=document&&ai.getAttribute(ad)){if(y.hasClass(ai,"btn-app")){ag=ai;}break;}ai=ai.parentNode;}if(!ag){return;}if(!y.hasClass(ag,"btn-current")){if(!s.testClassName(ak,u,ag)&&!y.contains(ag,Y)){this.appendQuickView(ag);g=ag;}}},onListOut:function(ag){var Y=v.getDOMNode(ag.relatedTarget);if(g){if(!Y||!y.contains(g,Y)){this.hideQuickView();}}},appendQuickView:function(Y){var ag,ah=y.hasClass;if(ah(this.list.parentNode.parentNode,"edit-mode")){return;}y.addClass(Y,A);if(ah(Y,"btn-app")){ag=y.byId(N+"-qv");if(!ag){ag=y.create(V.getContextData("quickViewHtml"));}Y.appendChild(ag);if(p){p.retarget(ag);p.show();}}V.broadcast(aa);},hideQuickView:function(){if(p){p.hide();}if(g){y.removeClass(g,A);g=B;}},createOverlay:function(Y){var ag=document.createElement("div");ag.className="pa-mask";Y.insertBefore(ag,Y.firstChild);ag.style.height=y.region(Y).height+ae;return ag;},showError:function(ai){var ah=this.addDialog,aj,Y=this.dlgOverlay,ag=this.dlgErr;if(!ah){return;}if(Y){I.query("."+R,ag,x)[w]=ai;}else{this.listOverlay=this.createOverlay(this.list);aj=I.query(".pa-add",v.getDOMNode(ah.getNode()),x);Y=this.createOverlay(aj);ag=y.create(V.getString(this.type==j?"EDIT.ERR":"EDIT.ERR.FAV"));I.query("."+R,ag,x)[w]=ai;Y.parentNode.insertBefore(ag,Y);this.dlgOverlay=Y;this.dlgErr=ag;}ag.style.top=((y.region(ag.parentNode).height-y.region(ag).height)/2)+ae;},showSignInError:function(){this.showError(d.substitute(V.getString(this.type==j?"EDIT.SIGNIN":"EDIT.SIGNIN.FAV"),{signInUrl:(this.type==j)?V.getContextData("editSignInUrl"):V.getContextData("favEditSignInUrl")}));},hideError:function(){var Y=this.dlgErr,ag=this.dlgOverlay,ah=this.listOverlay;if(ah&&ag&&Y){Y.parentNode.removeChild(Y);ag.parentNode.removeChild(ag);ah.parentNode.removeChild(ah);this.dlgErr=this.dlgOverlay=this.listOverlay=B;}},isEditMode:function(){return y.hasClass(this.list,G);},switchToEditMode:function(){var al=this.list,ak=(this.type==j),ag,ah,aj,Y,ai,am;if(this.isEditMode()){return;}q.closeCurrentModule();q.hideError();this.detachHover();y.addClass(al,G);y.addClass(al,X);ag=V.getService("tooltip");ah=ag.create({className:"y-tooltip-pa-dialog "+X,pointerClass:["y-fp-pg-controls","ptr-"+this.type],parentNode:"#default-"+N+"-bd",position:{box:"r",arrow:"t",alignNode:al},borderClass:["y-ln-4","y-bg-3"],msg:y.create(d.substitute(this.dialogHTML,{body:V.getContextData("loadingMsgDefault")}))});aj=v.getDOMNode(ah.getNode());S.attach(T,this.onDialogClick,aj,this);ah.show(al);this.addDialog=ah;this.autohideId=h.register({targets:[v.get(al),ah.getNode()],hide:d.bind(this.cancelEdit,this,ab)});H.setUserModuleState(J,ak?o:k);V.broadcast("pa:open",{mode:"edit"});if(ak){Y=V.getContextData("yservices")[0].props.id;a.openView(Y,"default");}else{ai={moduleId:N,type:"module",args:{_action:"show",_subAction:"addapps"}};am={success:this.onLoadFavSuccess,failure:this.onLoadFavFailure,scope:this};this.loadFavRequestId=V.makeRequest(ai,am);}},cancelEdit:function(Y){var ag=this.list,ah=this.cancelEditTimer;if(ah){ah.cancel();this.cancelEditTimer=B;}Y=(Y===undefined?x:Y);if(!this.isEditMode()){return;}this.destroyEdit();y.removeClass(ag,X);y.removeClass(ag,C);y.removeClass(ag,G);this.attachHover();if(Y){s.focusThisNode(I.query(".hd h2.title",ag,x));}H.removeUserModuleState(J);V.broadcast("pa:close",{mode:"edit"});},cancelEditLater:function(Y){var ag=this.cancelEditTimer;if(!ag){ag=d.later(15,this,this.cancelEdit,Y);}},onEditLoadSuccess:function(aj){var ak=this.list,ah=this.addDialog,ai=v.getDOMNode(ah.getNode()),ag,Y,al;y.removeClass(ak,X);y.removeClass(ai,X);y.addClass(ak,C);y.addClass(ai,C);ag=I.query("."+af,ai,x);if(aj.outerHTML){ag[w]=aj.outerHTML;}else{ag.replaceChild(aj,y.elementByAxis(ag,"firstChild"));}this.updateRemaining();Y=V.getService("sortable");al=Y.create(ak);al.subscribe("start",this.onSortableStart,this);al.subscribe("enter",this.onSortableEnter,this);al.subscribe("stop",this.onSortableStop,this);al.subscribe("cancel",this.onSortableCancel,this);this.sortable=al;this.setEditFocus();},onEditLoadFailure:function(ai){var Y,ah=v.getDOMNode(this.addDialog.getNode()),ag;if(ai=="badcrumb"||ai=="nocookies"){ag=a.getProperty("crumbErrorHtml")+'<p class="oops"><a href="'+window.location.href+'" class="cta-btn">'+V.getString("STR.OK")+"</a></p>";}else{ag=V.getString("STR.PA.TIMEOUT");}y.removeClass(this.list,X);y.removeClass(ah,X);Y=I.query("."+af,ah,x);Y[w]=ag;},setYServices:function(Y,ag){if(this.isEditMode()){if(typeof ag=="undefined"){this.onEditLoadSuccess(Y);}else{this.onEditLoadFailure(ag);}}},removeYServices:function(){},onLoadFavSuccess:function(Y){var ag=V.getService("type_pa_add"),ah=Y.data,ai;if(this.isEditMode()){ai=y.create(Y.html);this.onEditLoadSuccess(ai);this.gallery=ag.create(ai,ah.saveStatus,ah.saveMsg);}},onLoadFavFailure:function(Y){if(this.isEditMode()){this.onEditLoadFailure(Y.resultDetail);}},onSortableStart:function(ai){var ag=ai.drag,Y=ai.proxy,ah=document.createElement("div"),aj="btn";this.editIndex=ai.index;this.editOriginalSibling=y.elementByAxis(ag,"nextSibling");ah.className=aj;ah[w]=ag[w];Y.appendChild(ah);this.alert(F,this.getTitle(ag));},onSortableEnter:function(al){var ak=al.drag,ah=al.drop,ai=al.index,ag=ah.parentNode,Y=ai<this.editIndex,aj;if(ah==ak||!al.droppable){return;}aj=(Y)?ah:d.DOM.elementByAxis(ah,"nextSibling");if(aj){ag.insertBefore(ak,aj);}else{ag.appendChild(ak);}this.alert(L,this.getTitle(d.DOM.elementByAxis(ak,"previousSibling")));this.editIndex=ai;},onSortableStop:function(al){var ah=al.drag,ak=al.drag.getAttribute(ad),Y=y.elementByAxis(ah,"nextSibling"),ag=Y?Y.getAttribute(ad):B,aj,ai=x,am;if(!E){this.onSortableCancel(al);this.showSignInError();ai=ab;}al.proxy[w]="";if(ai&&Y!=this.editOriginalSibling){aj={type:"module",moduleId:N,args:{_action:U,_subAction:"moveapp",mid:ak,nextmid:ag}};am={success:this.onReorderSuccess,failure:this.onReorderFailure,scope:this};V.makeRequest(aj,am);}this.editIndex=this.editOriginalSibling=B;M.fireBeacon(V.getContextData("dragdropBeacon"));this.alert(z);},onSortableCancel:function(ah){var ag=ah.drag,ai=ag.parentNode,Y=this.editOriginalSibling;if(Y){ai.insertBefore(ag,Y);}else{ai.appendChild(ag);}},onReorderSuccess:function(Y){var ag=Y.data;if(ag.saveStatus!=O){this.showError(ag.saveMsg);}},onReorderFailure:function(Y){this.showError(V.getString("STR.PA.TIMEOUT.POPUP"));},removeApp:function(ag){var Y={type:"module",moduleId:N,args:{_action:U,_subAction:"removeapps",mid:ag}},ah={success:this.onRemoveAppSuccess,failure:this.onRemoveAppFailure,scope:this,argument:{moduleId:ag}};if(!V.isRequestPending(this.removeRequestId)){this.removeRequestId=V.makeRequest(Y,ah);if(this.gallery){this.gallery.isPaServiceBusy=true;}}},onRemoveAppSuccess:function(Y,ah){var ai=Y.data,ag=ah.moduleId;if(this.gallery){this.gallery.isPaServiceBusy=false;this.gallery.updateAppRemoval(ag);}if(ai.saveStatus==O){V.broadcast("userlist:remove",{moduleId:ag,timestamp:ai.saveTS});}else{this.showError(ai.saveMsg);}},onRemoveAppFailure:function(Y,ag){this.showError(V.getString("STR.PA.TIMEOUT.POPUP"));},addPromoLink:function(aj){var Y=aj.getAttribute("suid"),ah=s.ancestor(aj,"li"),ag,ai,ak;y.addClass(aj,e);if(!E){ag=a.getModuleApi(ah.getAttribute(ad)).getProperty("promosignin");V.navigate(ag);return;}ai={moduleId:N,type:"module",args:{_action:U,_subAction:"add_promo_link",suid:Y}};ak={success:this.addPromoLinkSuccess,failure:this.addPromoLinkFailure,argument:{target:aj,suid:Y},scope:this};V.makeRequest(ai,ak);},addPromoLinkSuccess:function(Y,ag){var ah=Y.data;if(ah.saveStatus==O){V.broadcast("userlist:add",{moduleId:ah.moduleId,timestamp:ah.saveTS});}else{y.removeClass(ag.target,e);q.showAppError(ah.saveMsg);}},addPromoLinkFailure:function(Y,ag){y.removeClass(ag.target,e);q.showAppError(V.getContextData("f-generic-msg"));},setEditFocus:function(){var ag=this.addDialog,Y=this.list.getElementsByTagName("LI"),aj=Y.length,ah=this.type,ai;if(ah==j){if(aj>1){ai=Y[1];}}else{if(ah==m){if(aj>=2){if(!y.hasClass(Y[0],"y-sortable-false")){ai=Y[0];}}}}if(ai&&E){this.alert(n);}else{if(ag){ai=ag.getNode().query(".pa-add-hd h2");ai=ai&&v.getDOMNode(ai);}}if(ai){s.focusThisNode(ai);}},alert:function(ah,ag){var ai=V.getString(ah),Y;if(ai){if(ag){ai=ai.replace("%s",ag);}if(!this.statusRegion){Y=document.createElement("div");Y.setAttribute("role","status");Y.setAttribute("aria-live","assertive");this.statusRegion=this.list.parentNode.appendChild(Y);}l.alert(ai,this.statusRegion);}},getTitle:function(Y){var ag=y.getText(I.query(".lbl",Y,x));return ag;}};r={YAHOO:j,USER:m,PROMO:Q,create:function(Y,ah){var ag;++W;if(W==1){N=V.getId();E=V.getService("userinfo").isLoggedIn();ag=V.getService("iframeshim");if(ag.isShimNeeded()){p=ag.create(Y);}}return new c(Y,ah);}};d.namespace(K);d[K][Z]={name:"palist",getService:function(ag,Y){if(!a){a=ag;V=a.getModuleApi(Y);l=V.getService("aria");h=V.getService("autohide");M=V.getService("instrumentation");q=V.getService("pa");s=V.getService("pautil");H=V.getService("statemgr");}return r;}};if(b){b.registerService(d[K][Z]);}},"1.0");(function(){var r="default",w="focus",x="scroll",g="action",f="value",z="value",a="innerHTML",u="scrollTop",q="pmh:show",p="pmh:searchtext",o="mh:web_srch_inp",h="mh:tab_select",y=123,d=122,k="hide",n="hidden",e="y-txt-input",t=".ie6-wrapper",b=".type_persistentmasthead .type_tuc .tuc-dropdown",v="#y-masthead .stabs .selected",l="prev",m="next",i="trend-link",c="TRENDING_NOW",j="disabled",s=null;YModules.type_persistentmasthead={body:s,editBody:s,id:"",moduleapi:s,viewevents:["click"],webSearchText:s,visible:false,triggerScrollTop:y,triggerScrollTopAfter:y,isOnload:false,scrollEventHandle:s,ie6Wrapper:s,scrollWindow:s,supportedTabs:s,supportedTabsData:s,button:s,form:s,tucDropdown:s,trendingNowLinks:s,trendingNowLinkNode:s,currentIndex:0,init:function(A){this.Y=A.getService("yui");this.id=A.getId();this.moduleapi=A;this.supportedTabs=A.getContextData("CTX_SUPPORTED_TABS");this.supportedTabsData=A.getContextData("CTX_SUPPORTED_TABS_DATA");A.listen(o);A.listen(h);},onviewload:function(H){var C,E,J,G,I,F,D,A,B=this.Y;if(H===r){C=this.moduleapi;E=this.body=C.getViewNode(H);this.trendingNowLinks=C.getContextData(c);if(this.trendingNowLinks){this.trendingNowLinkNode=E.one("."+i);D=E.one("."+l);A=E.one("."+m);D.removeAttribute(j);A.removeAttribute(j);}this.container=B.one("#y-persistentmasthead-con");this.button=B.one("#"+this.id+"-search-submit");this.form=B.one(".search-wrapper form");if(B.UA.ie==6){J=this.ie6Wrapper=B.one(t);}F=B.one("#y-header");if(F){this.triggerScrollTop=F.get("region").bottom;if(this.triggerScrollTop<0){this.triggerScrollTop=y;}}I=this.queryInputField=E.one("#"+this.id+"-p");I.on(w,this.clearQueryInputField,this);this.scrollWindow=B.config.win;if(J){this.scrollWindow=J;}G=this.scrollWindow;if(this.isTabSelected(this.supportedTabs)){this.scrollEventHandle=B.on(x,this.handleWindowScroll,G,this);this.isOnload=true;this.handleWindowScroll();}}},onviewunload:function(B){var A=this.Y;if(B===r){this.supportedTabsData=s;this.queryInputField.detach(w,this.clearQueryInputField);A.detach(x,this.handleWindowScroll,this.scrollWindow,this);this.body=this.form=this.button=this.container=this.queryInputField=s;}},onviewevent:function(C,B){var A=B.target,D=this.queryInputField;if(C===r){if(A.hasClass(l)||A.ancestor("."+l)||A.hasClass(m)||A.ancestor("."+m)){if(A.ancestor("."+l)){A=A.ancestor("."+l);}if(A.ancestor("."+m)){A=A.ancestor("."+m);}this.handlePagination(A);}if(A.hasClass("searchsubmit")&&D.hasClass(e)){D.set(z,"");}}},onmessage:function(F,C,D){var G=this.scrollEventHandle,B=(G===s)?false:true,A=this.supportedTabsData,E=this.Y;if(F===o){this.webSearchText=D;}else{if(F===h){if(A[D.clickedTab]){this.updatePersistentMasthead(D);if(!B){this.scrollEventHandle=E.on(x,this.handleWindowScroll,this.scrollWindow,this);}}else{if(!A[D]&&B){G.detach();this.scrollEventHandle=s;this.container.addClass(k);}}}}},handlePagination:function(E){var B=this.currentIndex,A=this.trendingNowLinks,D=A.length,C=this.trendingNowLinkNode;if(E.hasClass(m)){if(++B==D){B=0;}}else{if(--B<0){B=D-1;}}C.set(a,A[B]);this.currentIndex=B;},clearQueryInputField:function(A){var B=this.queryInputField;B.set(z,"");B.removeClass(e);B.detach(w,this.clearQueryInputField);this.searchInputCleared=true;},handleWindowScroll:function(I){var B=this.Y,C,F,K,J,M=this.ie6Wrapper,G,E=this.moduleapi,D=this.visible,A=this.container,L=this.queryInputField,H;if(M){K=M.get(u)<0?d:M.get(u);F=this.tucDropdown;if(!F){F=this.tucDropdown=B.one(b);}}C=M?K:B.DOM.docScrollY();if(this.isOnload===false&&this.triggerScrollTop!=this.triggerScrollTopAfter){J=B.one("#y-header");if(J){this.triggerScrollTop=J.get("region").bottom;if(this.triggerScrollTop<0){this.triggerScrollTop=y;}}this.triggerScrollTopAfter=this.triggerScrollTop;}else{this.isOnload=false;}G=(C>=this.triggerScrollTop);if(G&&!D){if(F&&F.hasClass(n)){F.removeClass(n);F.addClass(n);}A.removeClass(k);this.visible=true;E.broadcast(q);if(this.webSearchText!==s){this.clearQueryInputField();L.set(z,this.webSearchText);}}if(!G&&D){A.addClass(k);this.visible=false;if(this.searchInputCleared){H=L.get(z);this.webSearchText=H;E.broadcast(p,H);}}},isTabSelected:function(E){var D,B=false,C=this.Y.one,A=E.length;for(D=0;D<A;D++){if(C(v+" ."+E[D])){B=true;break;}}return B;},updatePersistentMasthead:function(B){var A=this.supportedTabsData;this.form.set(g,A[B.clickedTab][g]);this.button.set(f,B.buttonName);this.button.set(a,B.buttonName);}};})();/* Copyright (c) 2011, Yahoo! Inc.  All rights reserved. */
(function(){var X=null,J=true,r=false,ay=document,ae="pa",ar="click",z="edit",ac="default",aE="string",t="innerHTML",av="yservices",h="column",C="data-b-paq",c="data-b-pad",ab="pa-detached",aC="pa-module-loading",am="btn-current",d="pa-open",b="hide",al="y-pa-cont",aF="pa:open",S="pa:close",s="pa:ready",L="mouseover",O="mouseout",B="ulm:defaultlocation",V="userlist:add",U="userlist:remove",aB="e",k="y",H="u",Z,I,aq,ax,W,aw,w={},l,m,G,P,n,e,a,A=[],K=[],g=[],F=[],j,ah,R,az,ai,aA,ap,x,aG,ad=X,u=X,p,i,f,ao,at,T=X,Q,an="",D,aj,M,aH,ak,q,ag,aD,v={},y,af,E,aa,N,o,au=function(Y){var aI=["getContainer","setModuleLoading","setChild","isPAOpen","isPAModule","refreshUserList","collapse","userListUpdated","getCurrentModuleButton","closeCurrentModule","hideError","clearChild"],aJ=au.prototype;if(!aJ[aI[0]]){W.each(aI,function(aK){aJ[aK]=function(){return af?af[aK].apply(af,arguments):X;};});}};au.prototype={open:function(Y){this.openModule(Y);},close:function(){this.collapse();},emulateTextOverflow:function(){if(a){a.emulateTextOverflow.apply(a,arguments);}},isOpen:function(){return this.isPAOpen();},fireExternalBeacon:function(Y){if(a){a.fireExternalBeacon(Y);}},openModule:function(Y){if(af){P.later(15,af,af.openModule,Y);}},getPacontainerId:function(){return e;},getUserModuleCount:function(){var Y=0;if(v&&v.y&&v.u){Y=v.y.getModuleCount()+v.u.getModuleCount();}return Y;},showAppError:function(aI){if(af){var Y={html:aI,container:ax.query(".pa-app-col1",M,J)};af.showError(Y);}}};YModules.type_pa={viewevents:[ar],services:[{name:ae,getService:function(Y,aJ){var aI=aJ?Y.getModuleApi(aJ):X;if(!af){return X;}if(!E){E=new au(Y);}return(!aJ||aI.getProperty("trusted"))?E:X;}}],init:function(Y){m=Y;G=m.getId();P=m.getService("yui");n=m.getContextData();D=m.getService("moduleplatform");p=m.getService("autohide");af=this;Z=P.DOM;I=P.Event;aq=P.Node;ax=P.Selector;W=P.Array;aw=P.UA;m.listen([B,V,U,aF,S]);a=m.getService("pautil");y=m.getService("userinfo").isLoggedIn();this.oopsBtnDefault=m.getContextData("oopsBtnDefault");x=m.getService("iframeshim");if(!x.isShimNeeded()){x=X;}},onviewload:function(aO){var aN=m.getContextData,Y=aN("addString"),aI=aN("saveTS"),aQ=aN("addBeacon"),aK,aJ,aL=aN("pacontainer"),aM=m.getService("palist"),aP;if(aO==ac){this.updateConfigValues();if(aL){e=this.registerModules([aL])[0];}l=aq.getDOMNode(m.getViewNode(aO));f=m.getService("instrumentation");i=m.getService("statemgr");M=Z.byId(G+"-ctr");ak=Z.byId(G+"-sb");aH=Z.byId(G+"-app");aj=Z.byId(G+"-mod");aD=Z.byId(G+"-accessibility-status");j=Z.byId(G+"-error-popup");R=Z.byId(G+"-mod-err-ctr");this.truncateButtonTitles(ak);az=aN("errorMsgDefault");ai=aN("loadingMsgDefault");Q=aN("detachedPointerHtml");v.y=aM.create(Z.byId(G+"-y"),aM.YAHOO);v.u=aM.create(Z.byId(G+"-u"),aM.USER);ag=Z.byId(G+"-p");if(ag){v.p=aM.create(ag,aM.PROMO);}ao=aN("delay_added_fade");at=aN("duration_added_fade");this.tryHideAddedNotifications();if(Y){aP=m.getService("tooltip");o=aP.create({msg:Y});W.each(ax.query(".do-edit.ico",ak),function(aR){I.attach(L,this.handleEditTooltip,aR);I.attach(O,this.handleEditTooltip,aR);},this);}this.refreshUserModules();this.refreshPromoModules();if(aI){this.userListUpdated(aI);}aJ=m.getContextData("flashErr");if(aJ){this.showPaError(aJ);i.removeUserModuleState(aB);}else{aK=i.getUserModuleState(aB);if(aK==k){v.y.switchToEditMode();}else{if(aK==H){v.u.switchToEditMode();}}}if(aQ){a.fireExternalBeacon(aQ);}m.broadcast(s);}},onviewunload:function(Y){if(Y===ac){this.closeCurrentModule();if(this.errorHandle){this.errorHandle.detach();}v.y.destroy();v.u.destroy();if(v.p){v.p.destroy();}if(aA){aA.destroy();}if(ap){ap.destroy();}if(aa){aa.destroy();if(N){p.unregister(N);}}A=[];K=[];g=[];F=[];an="";y=r;au=aD=ak=aH=l=aj=u=ah=j=R=aa=M=f=aA=ap=af=aG=o=D=ag=i=q=X;}},onmessage:function(aQ,aO,aJ){var aP=[],aM,aN,aI,aK,Y="edit-mode",aL=aJ&&aJ.mode;if(aQ==aF){if(aL=="edit"){Z.addClass(M,Y);}else{Z.removeClass(M,Y);}}else{if(aQ==S){Z.removeClass(M,Y);}else{if(aQ===B){W.each(F,function(aS){var aR=D.getModuleApi(aS);if(aR.getProperty("locationBased")&&D.isViewOpen(aS,ae)){aP.push(aS);}});if(aP.length){D.refreshView(aP,ae);}}else{if(aQ.charAt(0)==="/"){aI=D.getViewNode(w[aQ],"pa");if(aI){aK=aI.one(".vital");if(aK){aK.remove();}aI.one("a").append(P.substitute(m.getString("STR.PA.VITALS"),{data:aJ.data}));}}else{if(aQ===V){this.refreshUserList(aJ.timestamp);}else{if(aQ===U){this.userListUpdated(aJ.timestamp);aM=aJ.moduleId;if(this.isPAModule(aM)){D.stop(aM);D.unregisterModule(aM);aN=W.indexOf(F,aM);if(aN>-1){F.splice(aN,1);}v.y.remove(aM);v.u.remove(aM);}}}}}}}},onviewevent:function(aP,aN){var aO=aq.getDOMNode(aN.target),aK=r,aJ=aq.getDOMNode(aN.currentTarget),aL=a.testClassName,aM=a.ancestor,Y,aI;if(aP!=ac||aN.type!=ar){return;}if(Z.hasClass(aO,"pa-mod-err-retry")){this.loadModule(ad);}else{if(aj&&Z.contains(aj,aO)){}else{if(aL(aO,"ptr",aJ)){aK=J;aI=aM(aO,"li");Y=aI.getAttribute(c);f.fireUltBeacon(Y);this.collapse();}else{if(Z.hasClass(aO,"pa-mod-err-close")||Z.hasClass(aO,"pa-mod-err-ok")||Z.hasClass(aO,"pa-mod-err-cancel")){aK=J;this.hideError();}else{if(Z.hasClass(aO,"do-app-close")){this.collapse();}else{if(Z.hasClass(aO,"do-flash-close")){this.hideError();}}}}}}if(aK){aN.preventDefault();}},setModuleLoading:function(Y){var aI;if(Y){aI=Z.byId(G+"-module-loading-msg");aI[t]=ai;Z.addClass(M,aC);if(x){if(!aA){aA=x.create(aI);}aA.show();}}else{Z.removeClass(M,aC);if(aA){aA.hide();}}a.emulateTextOverflow(aj,".pa-app-col1 .hd h2");},setChild:function(aI,Y,aJ){if(D.getModuleApi(Y).getProperty("type")==av){v.y.setYServices(aI,aJ);}else{if(aj.hasChildNodes()){aj.replaceChild(aI,Z.elementByAxis(aj,"firstChild"));}else{aj.appendChild(aI);}}},clearChild:function(Y){if(D.getModuleApi(Y).getProperty("type")==av){v.y.removeYServices();}else{aj.innerHTML="";}},isPAModule:function(Y){if(n&&n.fallback&&!F){return r;}return(P?W.indexOf(F,Y)>-1:r);},getContainer:function(){return aj;},getCurrentModuleButton:function(){return u;},isPAOpen:function(){return Z.hasClass(M,d)||(v.y&&v.y.isEditMode())||(v.u&&v.u.isEditMode());},updateConfigValues:function(){var Y=m.getContextData();if(Y.yservices){A=this.registerModules(Y.yservices);}if(Y.userlist){K=this.registerModules(Y.userlist);}if(Y.promolist){g=this.registerModules(Y.promolist);}this.mergeModuleIds();},registerModules:function(Y){var aI=[];W.each(Y,function(aL){var aJ=aL.props,aK=aJ.id;D.registerModule(aL);if(aJ.pachannel){m.listen(aJ.pachannel);w[aJ.pachannel]=aK;}aI.push(aK);});return aI;},showPaError:function(aI){var Y={html:aI,container:M};this.showError(Y);},showError:function(aK){var Y,aM,aI=aK.container,aL,aN,aJ;if(!this.isPAOpen()){aJ=m.getService("tooltip");if(!aa){aa=aJ.create({borderClass:["y-ln-4","y-bg-3"],className:"y-tooltip-pa-dialog pa-flash",parentNode:M,pointerClass:"y-fp-pg-controls",role:"alertdialog",scrollIntoView:true});}aa.show(M,{msg:P.substitute(m.getContextData("flashErrHtml"),{html:aK.html}),position:{box:"r",arrow:"t",alignNode:M}});if(!N){N=p.register({targets:[aa.getNode()],hide:P.bind(this.hideError,this)});}if(!this.errorHandle){this.errorHandle=P.Event.attach("keypress",this.handleHideError,document,this);}}else{if(v.y&&v.y.isEditMode()){v.y.showError(aK.html);}else{if(v.u&&v.u.isEditMode()){v.u.showError(aK.html);}else{R[t]=az;Y=ax.query(".pa-mod-err-msg",R,J);aN=ax.query(".pa-mod-ovrly",j,J);aI.appendChild(j);aL=Z.region(aI).height;aN.style.height=aL+"px";Y[t]=aK.html;aM=ax.query("a",Y,J)||ax.query("button",Y,J);Z.removeClass(j,b);if(x){if(!ap){ap=x.create(aN);}ap.show();}if(aM){a.focusThisNode(aM);}else{}if(!this.errorHandle){this.errorHandle=P.Event.attach("keypress",this.handleHideError,document,this);}}}}},handleHideError:function(Y){if(Y.keyCode==27){this.hideError();}},hideError:function(){var Y=this.errorHandle;if(aa){aa.hide();p.unregister(N);N=X;}if(ap){ap.hide();}Z.addClass(j,b);Z.removeClass(M,"notice");if(Y){Y.detach();this.errorHandle=X;}},userListUpdated:function(aI){var Y=m.getService("toolbar_bridge");if(Y){Y.ping(aI);}},refreshUserList:function(Y){if(i){i.update();}if(Y){this.userListUpdated(Y);}this.loadAppColumn(0,J);},loadAppColumn:function(aI,Y){var aJ={type:"module",moduleId:G,args:{_action:"show",_subAction:h,col:aI,promo:Y?1:X}},aK={success:this.onLoadAppColumnSuccess,failure:this.onLoadAppColumnFailure,scope:this};if(m.isRequestPending(aG)){m.abortRequest(aG);}aG=m.makeRequest(aJ,aK);},onLoadAppColumnSuccess:function(aI){var aL=aI.data,aJ=aL.yhtml,Y=aL.uhtml,aK=aL.phtml;if(aL.fallback){return;}this.updateConfigValues();if(typeof aJ==aE){v.y.update(aJ);}if(typeof Y==aE){v.u.update(Y);}if(v.p&&typeof aK==aE){v.p.update(aK);}if(i){i.update();}this.tryHideAddedNotifications();},onLoadAppColumnFailure:function(){},tryHideAddedNotifications:function(){var Y=ax.query(".pa-notice",ak),aK=Y&&Y.length>0,aJ=0,aI=105;if(aK){if(T){T.cancel();}T=P.later(ao,this,function(){W.each(Y,function(aL){P.later(aJ+=aI,this,this.hideAddedNotification,aL);},this);T=X;},Y);}return aK;},hideAddedNotification:function(Y){var aI=new P.Anim({node:Y,from:{opacity:1},to:{opacity:0},duration:at/1000,easing:P.Easing.easeIn});if(Y&&Z.inDoc(Y)){aI.on("end",function(){if(Z.inDoc(Y)){Y.parentNode.removeChild(Y);}Y=X;});aI.run();}},canModuleOpen:function(){return(ay.documentElement.className.indexOf("ad-takeover")<0);},expand:function(Y){var aI=[al,d];if(!y){aI.push("logged-out");}aI=aI.concat(Array.prototype.slice.call(arguments,0));M.className=aI.join(" ");if(!this.autohideId){this.autohideId=p.register({targets:[aq.get(l)],hide:P.bind(function(){this.collapse(r);},this)});}return M;},collapse:function(Y){var aI=an;M.className=al;Y=P.Lang.isUndefined(Y)?J:Y;if(i){i.update();}this.tryHideAddedNotifications();p.unregister(this.autohideId);this.autohideId=X;v.y.cancelEdit();v.u.cancelEdit();this.closeCurrentModule(Y);this.hideError();this.clearAccessibilityMsg();if(aI){m.broadcast(S,{type:aI,mode:X});}},rePositionAppView:function(aQ){var aP=Z.region,aI=aP(ak).top,aS=aP(aH).height+5,aJ=aP(aQ),aM=aJ.height,aN=Z.viewportRegion(),aL=aP(Z.byId("y-cols")),aR=aJ.top-aM,Y=aR+aS,aK=Math.max(aN.top,aI),aO=Math.min(aN.bottom,aL.bottom);if(aR<aK){aR=aK;}if(Y>aO){aR=aR+(aO-Y);}if(aR<aI){aR=aI;}Y=aR+aS;if(aJ.top<aR){aR=aJ.top-aM;}else{if(aJ.bottom>Y){aR=aR+aM;}}Z.setY(aH,aR);},openModule:function(aL){if(ad==aL||!this.canModuleOpen()){return;}var aI=D.getModuleApi(aL).getProperty("type"),aK=D.getModuleApi(aL).getProperty("contentId"),aJ=m.getContextData("migrateExclude"),Y=aq.get(l).one(".pa-migrate-msg");if(u){Z.removeClass(u,am);}if(Y){if(P.Lang.isArray(aJ)&&W.indexOf(aJ,aK)>=0){Y.setStyle("display","none");}else{Y.setStyle("display","block");}}u=Z.byId("pa-"+aL+"-bd");Z.addClass(u,am);this.hideError();this.expand(ab);this.aboveFpad(J);this.appendDetachedPointer(u);this.rePositionAppView(u);this.setAccessibilityMsg(aL);m.broadcast(aF,{type:aI,mode:X});this.loadModule(aL,P.bind(this.updateAccessibilityMsg,this));an=aI;this.hideError();},loadModule:function(aJ,aM){var aI=D.getModuleApi(aJ),aL=P.Lang.substitute(D.getProperty("modChromeHtml"),{html:"",type_name:aI.getProperty("type"),view_name:"load"}),aK=ax.query(".do-app-close",M),Y=aI.getProperty("title");this.unloadCurrentModule();aj[t]=P.Lang.substitute(m.getString("pacontainerHtml"),{html:aL,title:Y});W.each(aK,function(aN){aN[t]=P.Lang.substitute(m.getString("pacloseHtml"),{title:Y});});this.setModuleLoading(J);ad=aJ;D.openView(aJ,ac,aM);},closeCurrentModule:function(Y){if(!ad){return;}M.className=al;if(u){this.removeDetachedPointer();Z.removeClass(u,am);if(Y){a.focusThisNode(ax.query("A",u,J));}u=X;}this.aboveFpad(r);an="";this.unloadCurrentModule();},unloadCurrentModule:function(){if(ad){if(D.isViewOpen(ad,z)&&!D.closeView(ad,z)){return;}D.stop(ad);ad=X;}},handleEditTooltip:function(Y){if(Y.type==L){o.show(Y.target,{position:{box:"t",arrow:"l"}});}else{o.hide();}},setAccessibilityMsg:function(aI){var Y=D.getModuleApi(aI);if(Y){aD[t]="<p>"+P.Lang.substitute(m.getString("STR.PA.ACCESSIBILITY.LOADING"),{title:Y.getProperty("title")})+"</p>";}},updateAccessibilityMsg:function(){if(ad){var Y=D.getModuleApi(ad);if(Y){aD[t]="<p>"+P.Lang.substitute(m.getString("STR.PA.ACCESSIBILITY.LOADED"),{title:Y.getProperty("title")})+"</p>";}a.focusThisNode(ax.query(".hd h2",aj,J));}},clearAccessibilityMsg:function(){aD[t]="<p></p>";},truncateButtonTitles:function(Y){a.emulateTextOverflow(Y,".lbl");},refreshUserModules:function(){var Y=[];W.each(K,function(aI){if(D.getModuleState(aI).padefer===J){Y.push(aI);}});if(Y.length){D.refreshView(Y,ae);}},refreshPromoModules:function(){var aI=[],Y=m.getContextData("loadingSpinner");W.each(g,function(aK){var aL=D.getModuleApi(aK),aJ=aL.getViewNode(ae);if(aJ&&aJ.getAttribute("defer")=="1"){aI.push({type:"loadview",view:ae,moduleId:aK,chrome:r,promo:1,batchable:true});aJ.append(Y);}});if(aI.length){D.getService("transport").makeRequest(aI,{success:this.refreshPromoModuleSuccess,failure:this.refreshPromoModuleFailure,scope:this});}else{P.later(500,this,this.firePartnerBeacons);}},refreshPromoModuleSuccess:function(aK){var aI=aK.targetId,aR=D.getModuleApi(aI),aO=aR.getViewNode(ae),aL=P.Lang.trim(aK.html||""),aQ=m.getContextData("promo_ad_meta"),aN,Y,aP,aJ,aM;if(aL.indexOf("<a ")===0){aO.set(t,aL);this.truncateButtonTitles(aO);return;}if(aQ&&aQ[0]&&aQ[0].data&&aQ[0].data.childAdServedModuleMetaData){aQ=[aQ[0].data.childAdServedModuleMetaData];}if(aL.indexOf("<li")===0&&aQ&&aQ[0]){aJ=Z.create(aL);if(aJ.hasChildNodes()){aO.replace(aJ);aN=this.registerModules(aQ)[0];Y=D.getModuleApi(aN);aP=Y.getViewNode(ae);aM=aP.getAttribute("data-ad-p-b");g.push(aN);this.mergeModuleIds();this.truncateButtonTitles(aP);if(aM){a.fireExternalBeacon(aM);}}else{this.removePromoModule(aI);}}else{this.removePromoModule(aI);}},refreshPromoModuleFailure:function(Y){this.removePromoModule(Y.targetId);},removePromoModule:function(aL){var aK=[],aI,Y,aJ;aI=aq.getDOMNode(D.getModuleApi(aL).getViewNode(ae));D.stop(aL);aI.style.display="none";aI.removeAttribute("id");aI.removeAttribute("modid");aI.removeAttribute("defer");aI.removeAttribute(c);aI.removeAttribute(C);aI.className="";for(aJ=0;aJ<g.length;aJ++){Y=g[aJ];if(aL!=Y){aK.push(Y);}}if(!aK.length){v.p.update("");}g=aK;this.mergeModuleIds();},removeDetachedPointer:function(){var Y=Z.byId(G+"-ptr");return(Y)?Y.parentNode.removeChild(Y):X;},appendDetachedPointer:function(Y){var aI=Y,aJ=this.removeDetachedPointer();if(!aJ){aJ=Z.create(Q);}aI.appendChild(aJ);},aboveFpad:function(aJ){if(aw.opera||aw.webkit&&aw.webkit<526){var Y=Z.byId("y-col2"),aI=ax.query(".fpad",Y,J)||ax.query(".lrec",Y,J)||ax.query(".wam",Y,J);if(aI){aI.style.visibility=aJ?"hidden":"";}}},mergeModuleIds:function(){F=A.concat(K,g);},firePartnerBeacons:function(){var Y="data-ad-p-b",aI=ax.query("["+Y+"]",ag,r);W.each(aI,function(aJ){a.fireExternalBeacon(aJ.getAttribute(Y));});}};})();/* Copyright (c) 2011, Yahoo! Inc.  All rights reserved. */
